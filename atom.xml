<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pale Bule Dot</title>
  
  
  <link href="https://youxt-njnu.github.io/atom.xml" rel="self"/>
  
  <link href="https://youxt-njnu.github.io/"/>
  <updated>2024-10-05T12:06:36.549Z</updated>
  <id>https://youxt-njnu.github.io/</id>
  
  <author>
    <name>Shealin You</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±å‘â‘ </title>
    <link href="https://youxt-njnu.github.io/2024/09/21/three-%E8%B5%9B%E5%8D%9A%E5%A4%A7%E5%B1%8F%E5%A1%AB%E5%9D%911/"/>
    <id>https://youxt-njnu.github.io/2024/09/21/three-%E8%B5%9B%E5%8D%9A%E5%A4%A7%E5%B1%8F%E5%A1%AB%E5%9D%911/</id>
    <published>2024-09-21T06:02:05.000Z</published>
    <updated>2024-10-05T12:06:36.549Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜-ç¬¬ä¸€æ‰¹"><a href="#é—®é¢˜-ç¬¬ä¸€æ‰¹" class="headerlink" title="é—®é¢˜(ç¬¬ä¸€æ‰¹)"></a>é—®é¢˜(ç¬¬ä¸€æ‰¹)</h1><h2 id="çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥"><a href="#çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥" class="headerlink" title="çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥"></a>çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥</h2><p>å°è¯•1ï¼šçœ‹çœ‹textureæ˜¯å¦æ­£ç¡®åŠ è½½</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> earthTexture = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(earthImg, <span class="keyword">function</span> (<span class="params">texture</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;texture loaded successfully&#x27;</span>);</span><br><span class="line">    &#125;, <span class="literal">undefined</span>, <span class="keyword">function</span> (<span class="params">err</span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;texture load failed&#x27;</span>, err); &#125;);</span><br></pre></td></tr></table></figure><p>é—®é¢˜æ˜¯å¯¹UVçš„è®¡ç®—é”™äº†ï¼š<br>é”™å¤„1ï¼š<code> let uv = [(sph + Math.PI) / (2 * Math.PI), 1 - (sph.theta / Math.PI)];</code></p><p>éœ€è¦ä½¿ç”¨new Three.Vector2(),è€Œä¸æ˜¯ç›´æ¥æ„å»ºæ•°ç»„ï¼›å¦‚æœæ˜¯ç›´æ¥æ„å»ºæ•°ç»„ï¼Œé‚£ä¸‹é¢å°±è®¿é—®ä¸åˆ°.xå’Œ.yï¼Œéœ€è¦ä½¿ç”¨[0]å’Œ[1]æ¥è®¿é—®å¯¹åº”çš„å†…å®¹ã€‚</p><p>é”™å¤„2ï¼š<code>let uv = new Three.Vector2(sph + Math.PI) / (2 * Math.PI), 1 - (sph.theta / Math.PI));</code></p><p>è¿™é‡Œå¯¹UVçš„æ˜ å°„è®¡ç®—é”™äº†</p><blockquote><p>åœ¨ Three.js ä¸­ï¼Œ<code>Spherical</code> ç±»è¡¨ç¤ºçš„çƒåæ ‡ç³»ç»Ÿæ˜¯åŸºäºä¸‰ç»´å³æ‰‹ç¬›å¡å°”åæ ‡ç³»ï¼Œå…¶ä¸­ <code>phi</code>ï¼ˆä»°è§’ï¼‰å’Œ <code>theta</code>ï¼ˆæ–¹ä½è§’ï¼‰çš„å®šä¹‰å…·ä½“å¦‚ä¸‹ï¼š</p><ol><li><strong><code>phi</code>ï¼ˆä»°è§’ï¼‰</strong> - è¿™æ˜¯ä»æ­£Yè½´å‘ä¸‹è‡³ç‚¹Pçš„çº¿æ®µä¸Yè½´ä¹‹é—´çš„è§’åº¦ã€‚åœ¨ Three.js ä¸­ï¼Œ<code>phi</code> çš„èŒƒå›´é€šå¸¸æ˜¯ä»0åˆ°Ï€ï¼ˆå³ä»0åˆ°180åº¦ï¼‰ï¼Œå…¶ä¸­0å¯¹åº”äºæ­£Yè½´ï¼ˆå‘ä¸Šï¼‰çš„æ–¹å‘ï¼Œè€ŒÏ€å¯¹åº”äºè´ŸYè½´ï¼ˆå‘ä¸‹ï¼‰çš„æ–¹å‘ã€‚</li><li><strong><code>theta</code>ï¼ˆæ–¹ä½è§’ï¼‰</strong> - è¿™æ˜¯åœ¨XZå¹³é¢ä¸Šï¼Œä»æ­£Zè½´å‘æ­£Xè½´çš„è§’åº¦ã€‚<code>theta</code> çš„èŒƒå›´æ˜¯ä»0åˆ°2Ï€ï¼ˆå³ä»0åˆ°360åº¦ï¼‰ï¼Œå…¶ä¸­0å¼€å§‹äºæ­£Zè½´ï¼Œå¢åŠ æ–¹å‘æ˜¯é€†æ—¶é’ˆï¼ˆä»å±å¹•å‘é‡Œåˆ°å±å¹•å‘å¤–çœ‹ä¸ºæ­£Zæ–¹å‘ï¼‰ã€‚<br>å› æ­¤ï¼Œ<code>Spherical</code> çš„ <code>phi</code> å’Œ <code>theta</code> çš„ç›´è§‚ç†è§£å¦‚ä¸‹ï¼š</li></ol><ul><li><code>phi = 0</code>ï¼šç‚¹ä½äºYè½´çš„æ­£æ–¹å‘ï¼ˆå‘ä¸Šï¼‰ã€‚</li><li><code>phi = Ï€/2</code>ï¼šç‚¹ä½äºXZå¹³é¢ã€‚</li><li><code>phi = Ï€</code>ï¼šç‚¹ä½äºYè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘ä¸‹ï¼‰ã€‚</li><li><code>theta = 0</code>ï¼šç‚¹ä½äºZè½´çš„æ­£æ–¹å‘ï¼ˆå‘å±å¹•å¤–ï¼‰ã€‚</li><li><code>theta = Ï€/2</code>ï¼šç‚¹ä½äºXè½´çš„æ­£æ–¹å‘ï¼ˆå‘å³ï¼‰ã€‚</li><li><code>theta = Ï€</code>ï¼šç‚¹ä½äºZè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘å±å¹•é‡Œï¼‰ã€‚</li><li><code>theta = 3Ï€/2</code>ï¼šç‚¹ä½äºXè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘å·¦ï¼‰ã€‚<br>è¿™ç§çƒåæ ‡ç³»ç»Ÿéå¸¸æœ‰ç”¨äºå¤„ç†ä¸çƒé¢æˆ–è€…ç¯ç»•è¿åŠ¨ç›¸å…³çš„åœºæ™¯ï¼Œå¦‚å¤©ä½“æ¨¡æ‹Ÿã€ç›¸æœºç¯ç»•ç›®æ ‡ç‰©ä½“çš„åŠ¨ä½œç­‰ã€‚</li></ul></blockquote><p>æ­£ç¡®å†™æ³•ï¼š<code>let uv = new Three.Vector2((sph.theta + Math.PI) / (2 * Math.PI), 1 - (sph.phi / Math.PI));</code> </p><p>ä¸ºäº†æ­£ç¡®ç†è§£è¿™æ®µä»£ç  <code>let uv = [(sph.theta + Math.PI) / (2 * Math.PI), 1 - (sph.phi / Math.PI)];</code> å¹¶å°†äºŒç»´è´´å›¾UVæ˜ å°„åˆ°çƒé¢ä¸Šï¼Œè®©æˆ‘ä»¬é€ä¸€åˆ†ææ¯ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p><strong><code>(sph.theta + Math.PI) / (2 * Math.PI)</code></strong>:</p><ul><li><code>sph.theta</code> è¡¨ç¤ºçƒåæ ‡ä¸­çš„æ–¹ä½è§’ï¼Œé€šå¸¸çš„å–å€¼èŒƒå›´æ˜¯ä» 0 åˆ° 2Ï€ï¼Œè¡¨ç¤ºä»æ­£Zè½´é¡ºæ—¶é’ˆåˆ°Xè½´å†å›åˆ°Zè½´çš„å…¨å‘¨è§’åº¦ã€‚</li><li><code>+ Math.PI</code> çš„ä½œç”¨æ˜¯å°†Î¸çš„èµ·å§‹ç‚¹ä»æ­£Zè½´ï¼ˆå‰é¢ï¼‰è°ƒæ•´åˆ°è´ŸZè½´ï¼ˆåé¢ï¼‰ã€‚é€šå¸¸ï¼Œè¿™ç§è°ƒæ•´æ˜¯ä¸ºäº†ä½¿UVæ˜ å°„çš„èµ·ç‚¹å¯¹åº”äºæ¨¡å‹çš„åæ–¹ï¼Œä»è€Œä½¿å¾—å½“æ¨¡å‹å‰å‘æœå‘è§‚å¯Ÿè€…æ—¶ï¼Œè´´å›¾çš„â€œå‰é¢â€èƒ½å¤Ÿæ­£å¯¹è§‚å¯Ÿè€…ã€‚</li><li>é™¤ä»¥ <code>(2 * Math.PI)</code> å°†è°ƒæ•´åçš„Î¸å€¼å½’ä¸€åŒ–åˆ° [0, 1] çš„èŒƒå›´å†…ï¼Œè¿™æ ·å¯ä»¥æ˜ å°„åˆ°è´´å›¾çš„æ°´å¹³åæ ‡Uã€‚</li></ul></li><li><p><strong><code>1 - (sph.phi / Math.PI)</code></strong>:</p><ul><li><code>sph.phi</code> æ˜¯ä»æ­£Yè½´å‘çƒé¢çš„ç‚¹çš„ä»°è§’ï¼Œå–å€¼èŒƒå›´æ˜¯ä» 0 åˆ° Ï€ã€‚</li><li><code>(sph.phi / Math.PI)</code> å°†Ï†å€¼å½’ä¸€åŒ–åˆ° [0, 1] èŒƒå›´å†…ï¼Œå…¶ä¸­0ä»£è¡¨åŒ—æï¼Œ1ä»£è¡¨å—æã€‚</li><li><code>1 -</code> çš„ä½œç”¨æ˜¯åè½¬Våæ ‡ï¼Œä½¿å¾—åœ¨UVè´´å›¾ä¸­ï¼ŒV &#x3D; 0 å¯¹åº”äºçƒä½“çš„åŒ—æï¼ŒV &#x3D; 1 å¯¹åº”äºçƒä½“çš„å—æã€‚è¿™æ ·çš„åè½¬æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°å›¾å½¢å¤„ç†ç³»ç»Ÿä¸­ï¼Œè´´å›¾çš„Våæ ‡ä»ä¸‹åˆ°ä¸Šå¢åŠ ï¼Œè€Œçƒåæ ‡ç³»ç»Ÿä¸­çš„Ï†æ˜¯ä»ä¸Šåˆ°ä¸‹å¢åŠ çš„ã€‚</li></ul></li></ol><p>(Three.jsåœ°ç†åæ ‡å’Œä¸‰ç»´ç©ºé—´åæ ‡çš„è½¬æ¢)[<a href="https://blog.csdn.net/qihoo_tech/article/details/101443066]">https://blog.csdn.net/qihoo_tech/article/details/101443066]</a></p><p><img src="https://s2.loli.net/2024/09/09/pbtr2HfNW7xTSkC.png" alt="image-20240908162225403.png"></p><h2 id="trailæ²¡æ˜¾ç¤ºå‡ºæ¥"><a href="#trailæ²¡æ˜¾ç¤ºå‡ºæ¥" class="headerlink" title="trailæ²¡æ˜¾ç¤ºå‡ºæ¥"></a>trailæ²¡æ˜¾ç¤ºå‡ºæ¥</h2><p>vLineDistance &#x2F;&#x2F; åœ¨ä½¿ç”¨ Three.js çš„ LineDashedMaterial æ—¶ï¼Œç¡®ä¿é¡¶ç‚¹ç€è‰²å™¨æ­£ç¡®åœ°è®¡ç®—å¹¶ä¼ é€’ vLineDistance å˜é‡åˆ°ç‰‡å…ƒç€è‰²å™¨æ˜¯éå¸¸å…³é”®çš„ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡å†³å®šäº†çº¿æ®µçš„è™šçº¿æ•ˆæœã€‚</p><p>åŸå…ˆæ˜¯å†setPathé‡Œä¿®æ”¹ç‚¹çš„ä½ç½®ï¼Œç„¶åè®¡ç®—lineDistanceï¼Œç”±äºlineDistanceè®¡ç®—æœ‰é—®é¢˜ï¼Œæ‰€ä»¥åœ¨fragment shaderé‡Œï¼ŒvLineDistanceå°±éƒ½æ˜¯0</p><p>åœ¨setPathçš„ä»£ç é‡Œï¼Œæ±‚divisionéœ€è¦ç”¨pos.countæ¥-1ï¼Œä¹‹å‰æ˜¯posç›´æ¥-1ï¼Œå¯¼è‡´äº†é”™è¯¯ï¼Œä½¿å¾—trailçš„poséƒ½æ²¡æœ‰æ­£ç¡®æ›´æ–°ï¼›</p><h2 id="æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥"><a href="#æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥" class="headerlink" title="æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥"></a>æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥</h2><p>å¦‚æœåœ¨ <code>useEffect</code> ä¸­çš„ä¾èµ–æ•°ç»„ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰è®¾ç½®ä¸ºç©ºæ•°ç»„ <code>[]</code>ï¼Œè¿™æ„å‘³ç€ <code>useEffect</code> åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šåœ¨ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§æ›´æ–°æ—¶å†æ¬¡è¿è¡Œã€‚è¿™å¸¸ç”¨äºæ‰§è¡Œé‚£äº›åªéœ€ä¸€æ¬¡çš„åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ API è°ƒç”¨æˆ–è®¾ç½®åˆå§‹é…ç½®ã€‚</p><p>åœ¨æ‚¨çš„æƒ…å†µä¸­ï¼Œå¦‚æœ <code>animate</code> å‡½æ•°åœ¨ <code>useEffect</code> å†…å®šä¹‰ï¼Œå¹¶ä¸”ä¾èµ–æ•°ç»„ä¸ºç©ºï¼Œè¿™ä¼šå¯¼è‡´ <code>animate</code> å‡½æ•°æ•è·åˆ°åˆå§‹æ¸²æŸ“æ—¶çš„çŠ¶æ€å€¼ï¼Œä¾‹å¦‚ <code>renderGlithPass</code> çš„åˆå§‹å€¼ï¼ˆ<code>false</code>ï¼‰ã€‚å³ä½¿åç»­ <code>renderGlithPass</code> çŠ¶æ€æ›´æ–°ï¼Œ<code>animate</code> å‡½æ•°ä¸­çš„å€¼ä¹Ÿä¸ä¼šæ›´æ–°ï¼Œå› ä¸º <code>useEffect</code> ä¸ä¼šé‡æ–°æ‰§è¡Œæ¥æ›´æ–°é—­åŒ…ä¸­çš„çŠ¶æ€å€¼ã€‚</p><p>è§£å†³æ–¹æ³•</p><p>è¦è®© <code>animate</code> å‡½æ•°èƒ½å¤Ÿè®¿é—®æœ€æ–°çš„ <code>renderGlithPass</code> çŠ¶æ€ï¼Œæ‚¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p><ol><li><strong>æ›´æ–° <code>useEffect</code> çš„ä¾èµ–æ•°ç»„</strong>ï¼šåœ¨ä¾èµ–æ•°ç»„ä¸­åŒ…å« <code>renderGlithPass</code>ï¼Œè¿™æ ·æ¯æ¬¡ <code>renderGlithPass</code> æ”¹å˜æ—¶ï¼Œ<code>useEffect</code> éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œ<code>animate</code> å‡½æ•°ä¹Ÿå°†é‡æ–°å®šä¹‰ï¼Œä»è€Œæ•è·åˆ°æœ€æ–°çš„çŠ¶æ€å€¼ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(renderGlithPass);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> animationId = <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">cancelAnimationFrame</span>(animationId);</span><br><span class="line">&#125;, [renderGlithPass]); <span class="comment">// ç°åœ¨åŒ…å« renderGlithPass ä½œä¸ºä¾èµ–</span></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ä½¿ç”¨ <code>useRef</code> è¿½è¸ªæœ€æ–°çš„çŠ¶æ€</strong>ï¼šå¦‚ä¹‹å‰æ‰€è¿°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>useRef</code> æ¥è¿½è¸ª <code>renderGlithPass</code> çš„æœ€æ–°å€¼ï¼Œè¿™æ · <code>animate</code> å‡½æ•°å¯ä»¥é€šè¿‡ ref è®¿é—®å½“å‰çš„çŠ¶æ€ï¼Œè€Œæ— éœ€é‡æ–°å®šä¹‰ <code>animate</code> å‡½æ•°ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> renderGlithPassRef = <span class="title function_">useRef</span>(renderGlithPass);</span><br><span class="line">renderGlithPassRef.<span class="property">current</span> = renderGlithPass;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(renderGlithPassRef.<span class="property">current</span>); <span class="comment">// ä½¿ç”¨ ref è®¿é—®æœ€æ–°çŠ¶æ€</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> animationId = <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">cancelAnimationFrame</span>(animationId);</span><br><span class="line">&#125;, []); <span class="comment">// ä¾èµ–æ•°ç»„ä»ç„¶ä¸ºç©º</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜åŠ¿ï¼Œé€‰æ‹©å“ªä¸€ç§å–å†³äºæ‚¨çš„å…·ä½“éœ€æ±‚å’Œç»„ä»¶çš„å…¶ä»–é€»è¾‘ã€‚å¦‚æœ <code>animate</code> å‡½æ•°å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜å¹¶ä¸”çŠ¶æ€æ›´æ–°é¢‘ç¹ï¼Œä½¿ç”¨ <code>useRef</code> å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœçŠ¶æ€æ›´æ–°å¯¹ <code>animate</code> çš„å½±å“æ¯”è¾ƒå¤§ï¼Œå¹¶ä¸”ç¡®ä¿æ¯æ¬¡éƒ½æ˜¯æœ€æ–°çš„çŠ¶æ€å¾ˆé‡è¦ï¼Œé‚£ä¹ˆæ›´æ–° <code>useEffect</code> çš„ä¾èµ–æ•°ç»„å¯èƒ½æ›´é€‚åˆã€‚</p><h2 id="animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°"><a href="#animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°" class="headerlink" title="animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°"></a>animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°</h2><p>åœ¨ä½ çš„Reactä»£ç ä¸­ï¼Œä½ é‡åˆ°çš„é—®é¢˜æ˜¯ç”±äºé—­åŒ…ï¼ˆclosureï¼‰å¼•èµ·çš„ã€‚åœ¨JavaScriptå’ŒReactä¸­ï¼Œé—­åŒ…ä¼šæ•è·å®ƒä»¬åˆ›å»ºæ—¶çš„ç¯å¢ƒçŠ¶æ€ã€‚å½“ä½ åœ¨ <code>useEffect</code> é’©å­é‡Œè°ƒç”¨ <code>animate()</code> å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå‡½æ•°è¢«â€œå›ºå®šâ€åœ¨äº†é‚£ä¸€åˆ»çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ <code>renderGlithPass</code> çš„å€¼ã€‚</p><p>å› ä¸º <code>useEffect</code> ä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆå› ä¸ºå®ƒçš„ä¾èµ–åˆ—è¡¨æ˜¯ç©ºçš„ <code>[]</code>ï¼‰ï¼Œæ‰€ä»¥ <code>animate</code> å‡½æ•°åªä¼šæ•è· <code>renderGlithPass</code> æœ€åˆçš„å€¼ï¼Œå³ <code>false</code>ã€‚ä¹‹åå³ä½¿çŠ¶æ€æ›´æ–°äº†ï¼Œ<code>animate</code> å‡½æ•°ä¸­æ•è·çš„ <code>renderGlithPass</code> çš„å€¼ä»ç„¶æ˜¯æœ€åˆçš„ <code>false</code>ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ <code>useRef</code> é’©å­æ¥æŒä¹…åŒ– <code>renderGlithPass</code> çš„å€¼ï¼Œè¿™æ · <code>animate</code> å‡½æ•°æ€»æ˜¯èƒ½è·å–åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚è¿™é‡Œæ˜¯å¦‚ä½•ä¿®æ”¹ä½ çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> [renderGlitchPass, setRenderGlitchPass] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> renderGlitchPassRef = <span class="title function_">useRef</span>(renderGlitchPass);  <span class="comment">// ä½¿ç”¨ useRef æ¥æŒä¹…åŒ–çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  renderGlitchPassRef.<span class="property">current</span> = renderGlitchPass;  <span class="comment">// æ›´æ–° ref çš„å€¼</span></span><br><span class="line">&#125;, [renderGlitchPass]);  <span class="comment">// æ¯å½“ renderGlitchPass æ›´æ–°æ—¶ï¼Œæ›´æ–° ref</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable constant_">TWEEN</span>.<span class="title function_">update</span>();</span><br><span class="line">    earth.<span class="property">rotation</span>.<span class="property">y</span> += <span class="number">0.001</span>;</span><br><span class="line">    renderer &amp;&amp; scene &amp;&amp; camera &amp;&amp; renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ ref çš„ current å€¼æ¥è·å–æœ€æ–°çŠ¶æ€</span></span><br><span class="line">    renderGlitchPassRef.<span class="property">current</span> &amp;&amp; composer.<span class="title function_">render</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">animate</span>();  <span class="comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯</span></span><br><span class="line">&#125;, []);  <span class="comment">// ç©ºä¾èµ–åˆ—è¡¨ï¼Œä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleStartButtonClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setRenderGlitchPass</span>(!renderGlitchPass);  <span class="comment">// åˆ‡æ¢çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜-ç¬¬ä¸€æ‰¹&quot;&gt;&lt;a href=&quot;#é—®é¢˜-ç¬¬ä¸€æ‰¹&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜(ç¬¬ä¸€æ‰¹)&quot;&gt;&lt;/a&gt;é—®é¢˜(ç¬¬ä¸€æ‰¹)&lt;/h1&gt;&lt;h2 id=&quot;çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥&quot;&gt;&lt;a href=&quot;#çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥&quot; cla</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/09/17/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%953/"/>
    <id>https://youxt-njnu.github.io/2024/09/17/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%953/</id>
    <published>2024-09-17T10:02:05.000Z</published>
    <updated>2024-10-05T12:05:02.997Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="æœºç”²é£headå’Œcard"><a href="#æœºç”²é£headå’Œcard" class="headerlink" title="æœºç”²é£headå’Œcard"></a>æœºç”²é£headå’Œcard</h1><p>æ–°å»ºconstant.jsï¼Œå­˜æ”¾ä¸€äº›å›ºå®šçš„å†…å®¹æ–‡æœ¬æ•°ç»„ï¼›</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> weekMap =&#123;...&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> tips = [...];</span><br></pre></td></tr></table></figure><p>è®¾ç½®stateå­˜æ”¾æ˜¾ç¤ºçš„å†…å®¹ï¼›<br>åœ¨ React ä¸­ï¼Œç»„ä»¶å¯ä»¥æ˜¯ç±»ç»„ä»¶æˆ–å‡½æ•°å¼ç»„ä»¶ã€‚åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œä¼ ç»Ÿçš„ç±»ç»„ä»¶ä¸­çš„ state å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢« React Hooks æä¾›çš„åŠŸèƒ½æ‰€æ›¿ä»£ã€‚æœ€å¸¸ç”¨çš„ Hook æ˜¯ useStateï¼Œå®ƒç”¨äºåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [week, setWeek] = <span class="title function_">useState</span>(weekMap[<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDay</span>()]);</span><br><span class="line"><span class="keyword">const</span> [time, setTime] = <span class="title function_">useState</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>());</span><br><span class="line"><span class="keyword">const</span> [showModal, setShowModal] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> [modelText, setModelText] = <span class="title function_">useState</span>(tips[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">const</span> [renderGlithPass, setRenderGlithPass] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>headerç»“æ„</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&quot;hud-header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;`$&#123;week&#125;æ›œæ—¥`&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;time&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Kepler-90 +49Â°18â€²18.58â€³<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure><p>scssé‡Œå†™clip-path</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">  <span class="variable">$yellow-color</span>: <span class="number">#f9f002</span>;</span><br><span class="line">  <span class="variable">$border-color</span>: <span class="number">#8ae66e</span>;</span><br><span class="line">  <span class="variable">$blue-color</span>: <span class="number">#00e6f6</span>;</span><br><span class="line">  <span class="variable">$header-height</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="variable">$aside-width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="variable">$glitched-duration</span>: <span class="number">0.9s</span>;</span><br><span class="line">  <span class="variable">$clip-height</span>: <span class="number">18px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.earth-digital</span> &#123;</span><br><span class="line">  <span class="comment">// overflow: hidden; // è¿™æ ·å­å°±æ²¡æœ‰äº†å³ä¾§æ‹–åŠ¨æ¡ï¼Œå¤šå‡ºæ¥çš„ç›´æ¥æ¶ˆå¤±äº†</span></span><br><span class="line">  <span class="comment">// user-select: none; // ç¦æ­¢é€‰ä¸­æ–‡å­—</span></span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">0.85</span>); <span class="comment">// é¥±å’Œåº¦ ä½“ç°åœ¨å“ªå„¿ï¼Ÿï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hud</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  &amp;<span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="variable">$header-height</span>;</span><br><span class="line">    <span class="attribute">color</span>: black; <span class="comment">// é‡Œé¢çš„æ–‡å­—é¢œè‰²</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">$yellow-color</span>; <span class="comment">// header çš„èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;<span class="variable">$clip-height</span>&#125;),<span class="number">75%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;), <span class="number">72.5%</span> <span class="number">100%</span>, <span class="number">27.5%</span> <span class="number">100%</span>, <span class="number">25%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;),<span class="number">0</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;),<span class="number">0</span> <span class="number">0</span>); <span class="comment">// ä½¿ç”¨calcçš„æ—¶å€™ï¼Œé‡Œé¢æ“ä½œç¬¦å‰åè¦æœ‰ç©ºæ ¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/09/11/ZL9FgtrxEBW2ame.jpg" alt="27e2baa8c3a79d08953b367291a0195.jpg"></p><p>logoå’Œasideéƒ¨åˆ†çš„ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div className=&quot;logo-pic&quot; title=&#x27;Cyberpunk 2077&#x27;&gt;&lt;/div&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside left&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse&quot;&gt;</span><br><span class="line">    &lt;div className=&quot;cover&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">      &lt;p&gt;&lt;b&gt;Cyberpunk&lt;/b&gt; is a subgenre of science fiction in a dystopian futuristic setting that tends to focus on a &quot;combination of lowlife and high tech&quot;, featuring futuristic technological and scientific achievements, such as artificial intelligence and cybernetics, juxtaposed with societal collapse or decay. &lt;/p&gt;</span><br><span class="line">      &lt;button&gt;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside right&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br></pre></td></tr></table></figure><h1 id="buttonç‚¹å‡»åå‡ºç°æ•…éšœé£"><a href="#buttonç‚¹å‡»åå‡ºç°æ•…éšœé£" class="headerlink" title="buttonç‚¹å‡»åå‡ºç°æ•…éšœé£"></a>buttonç‚¹å‡»åå‡ºç°æ•…éšœé£</h1><p>ç‚¹å‡»è§¦å‘å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const handleStartButtonClick = () =&gt; &#123;</span><br><span class="line">    setRenderGlithPass(!renderGlithPass);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>åŠ¨ç”»ä¸­æ›´æ–°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const animate = () =&gt; &#123;</span><br><span class="line"> ......</span><br><span class="line">  renderGlithPass &amp;&amp; composer.render();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åå¤„ç†æ•ˆæœ"><a href="#åå¤„ç†æ•ˆæœ" class="headerlink" title="åå¤„ç†æ•ˆæœ"></a>åå¤„ç†æ•ˆæœ</h2><p>å¯¼å…¥composerå’Œpass</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">EffectComposer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/EffectComposer.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RenderPass</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/RenderPass.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GlitchPass</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/GlitchPass.js&#x27;</span>;</span><br></pre></td></tr></table></figure><p>initThreeé‡Œåˆå§‹åŒ–</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">composer = <span class="keyword">new</span> <span class="title class_">EffectComposer</span>(renderer);</span><br><span class="line">composer.<span class="title function_">addPass</span>(<span class="keyword">new</span> <span class="title class_">RenderPass</span>(scene, camera));</span><br><span class="line">composer.<span class="title function_">addPass</span>(<span class="keyword">new</span> <span class="title class_">GlitchPass</span>());</span><br></pre></td></tr></table></figure><h2 id="btnçš„æ ·å¼"><a href="#btnçš„æ ·å¼" class="headerlink" title="btnçš„æ ·å¼"></a>btnçš„æ ·å¼</h2><p>åˆ©ç”¨linear-gradientï¼Œå®ç°äº†45åº¦æ–¹å‘ä¸Šï¼Œä»é€æ˜åˆ°çº¢è‰²çš„æŒ‰é’®çš„çªå˜ï¼ˆ5%ï¼Œ5%ï¼‰ï¼Œè¿™ä¸ªå’Œã€ŠCSSæ­ç§˜ã€‹é‡Œçš„å†…å®¹å‘¼åº”äº†ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.startBtn</span>,</span><br><span class="line"><span class="selector-class">.startBtn</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, transparent <span class="number">5%</span>, <span class="number">#FF013C</span> <span class="number">5%</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">0.2em</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span> $blue-color;</span><br><span class="line">  <span class="attribute">outline</span>: transparent;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="echarts"><a href="#echarts" class="headerlink" title="echarts"></a>echarts</h1><p><a href="https://echarts.apache.org/handbook/zh/basics/import/">https://echarts.apache.org/handbook/zh/basics/import/</a></p><p>æŒ‰éœ€å¼•å…¥ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ echarts æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—æä¾›äº† echarts ä½¿ç”¨å¿…é¡»è¦çš„æ¥å£ã€‚</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts/core&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æŸ±çŠ¶å›¾å›¾è¡¨ï¼Œå›¾è¡¨åç¼€éƒ½ä¸º Chart</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BarChart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/charts&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æ ‡é¢˜ï¼Œæç¤ºæ¡†ï¼Œç›´è§’åæ ‡ç³»ï¼Œæ•°æ®é›†ï¼Œå†…ç½®æ•°æ®è½¬æ¢å™¨ç»„ä»¶ï¼Œç»„ä»¶åç¼€éƒ½ä¸º Component</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/components&#x27;</span>;</span><br><span class="line"><span class="comment">// æ ‡ç­¾è‡ªåŠ¨å¸ƒå±€ã€å…¨å±€è¿‡æ¸¡åŠ¨ç”»ç­‰ç‰¹æ€§</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LabelLayout</span>, <span class="title class_">UniversalTransition</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/features&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥ Canvas æ¸²æŸ“å™¨ï¼Œæ³¨æ„å¼•å…¥ CanvasRenderer æˆ–è€… SVGRenderer æ˜¯å¿…é¡»çš„ä¸€æ­¥</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CanvasRenderer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/renderers&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œå¿…é¡»çš„ç»„ä»¶</span></span><br><span class="line">echarts.<span class="title function_">use</span>([</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span>,</span><br><span class="line">  <span class="title class_">BarChart</span>,</span><br><span class="line">  <span class="title class_">LabelLayout</span>,</span><br><span class="line">  <span class="title class_">UniversalTransition</span>,</span><br><span class="line">  <span class="title class_">CanvasRenderer</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>æ„å»ºæ•°æ® constant.js</p><p>å¯¼å…¥ï¼š<br><code>import &#123; chart_1_option, chart_2_option, chart_3_option, chart_4_option, chart_5_option, weekMap, tips &#125; from &#39;@/containers/EarthDigital/scripts/config&#39;;</code></p><p>åˆå§‹åŒ–chart</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const chart_1 = echarts.init(document.getElementsByClassName(&#x27;chart_1&#x27;)[0], &#x27;dark&#x27;);</span><br><span class="line">   chart_1 &amp;&amp; chart_1.setOption(chart_1_option);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨useRefè¿›è¡Œç®€åŒ–</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let chartsRef = Array.from(&#123; length: 5 &#125;).map(() =&gt; useRef(null));</span><br><span class="line">const initChart = () =&gt; &#123;</span><br><span class="line">  const chartsOption = [chart_1_option, chart_2_option, chart_3_option, chart_4_option, chart_5_option];</span><br><span class="line">  const charts = chartsRef.map(ref =&gt; ref.current &amp;&amp; echarts.init(ref.current, &#x27;dark&#x27;));</span><br><span class="line">  charts.forEach((chart, idx) =&gt; &#123;</span><br><span class="line">    chart &amp;&amp; chart.setOption(chartsOption[idx]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åçš„aside</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;aside className=&quot;hud aside left&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box box_0 inverse&quot;&gt;</span><br><span class="line">    &lt;div className=&quot;cover&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">      &lt;p className=&#x27;text&#x27;&gt;&lt;b&gt;Cyberpunk&lt;/b&gt; is a subgenre of science fiction in a dystopian futuristic setting that tends to focus on a &quot;combination of lowlife and high tech&quot;, featuring futuristic technological and scientific achievements, such as artificial intelligence and cybernetics, juxtaposed with societal collapse or decay. &lt;/p&gt;</span><br><span class="line">      &lt;button className=&quot;startBtn&quot; onClick=&#123;handleStartButtonClick&#125;&gt;START&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[0]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[1]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside right&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[2]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[3]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[4]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br></pre></td></tr></table></figure><p>echartsé‡Œçš„optioné…ç½®</p><p><img src="https://s2.loli.net/2024/09/26/29DpPhmGLj16kyb.jpg" alt="7d30adb4f9c8155b133b9b7b6a939fa.jpg"></p><p>æ³¨æ„ï¼šæ¯ä¸€ç§å›¾è¡¨å½¢å¼çš„ä½¿ç”¨ï¼Œéƒ½è¦æŒ‰éœ€å¯¼å…¥ï¼›</p><p>é’ˆå¯¹areaStyleé‡Œçš„é¢œè‰²ï¼Œå¯ä»¥ä¸å¯¼å…¥echartsï¼Œç›´æ¥colorStopsæ¥å®ç°ï¼›</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥ï¼š</span></span><br><span class="line"><span class="attr">areaStyle</span>: &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.8</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [&#123;</span><br><span class="line">      <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;rgb(128, 255, 165)&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">offset</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;rgb(1, 191, 236)&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ])</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹åï¼š</span></span><br><span class="line"><span class="attr">areaStyle</span>: &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.8</span>,</span><br><span class="line">  <span class="attr">color</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;linear&#x27;</span>, <span class="comment">// çº¿æ€§æ¸å˜</span></span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">x2</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y2</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">colorStops</span>: [</span><br><span class="line">      &#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgb(255, 191, 0)&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;rgb(224, 62, 76)&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="cssåŠ¨ç”»"><a href="#cssåŠ¨ç”»" class="headerlink" title="cssåŠ¨ç”»"></a>cssåŠ¨ç”»</h1><p>.ã€‚ã€‚ã€‚ã€‚ã€‚å¾…æ›´æ–°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><h2 id="è¡¥å……-clip-pathå±æ€§"><a href="#è¡¥å……-clip-pathå±æ€§" class="headerlink" title="è¡¥å…… | clip-pathå±æ€§"></a>è¡¥å…… | clip-pathå±æ€§</h2><p>CSS ä¸­çš„ <code>clip-path</code> å±æ€§å…è®¸ä½ å®šä¹‰ä¸€ä¸ªå…ƒç´ çš„å¯è§åŒºåŸŸã€‚é€šè¿‡è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œåœ¨è¿™ä¸ªè·¯å¾„å†…çš„å†…å®¹ä¼šè¢«æ˜¾ç¤ºï¼Œè€Œè·¯å¾„å¤–çš„å†…å®¹åˆ™ä¼šè¢«éšè—ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥åˆ›å»ºå„ç§å¤æ‚çš„å½¢çŠ¶å’ŒåŠ¨æ€æ•ˆæœã€‚</p><ol><li><p><strong>åˆ›å»ºå¤æ‚å½¢çŠ¶</strong>ï¼šä½¿ç”¨ <code>clip-path</code>ï¼Œä½ å¯ä»¥è½»æ¾åˆ›å»ºåœ†å½¢ã€æ¤­åœ†ã€å¤šè¾¹å½¢æˆ–è€…è‡ªå®šä¹‰è·¯å¾„ï¼ˆä½¿ç”¨ SVG è·¯å¾„è¯­æ³•ï¼‰ç­‰å½¢çŠ¶ã€‚è¿™å¯¹äºè®¾è®¡å…ˆè¿›çš„ç”¨æˆ·ç•Œé¢å’Œç‰¹æ®Šçš„å›¾å½¢æ•ˆæœéå¸¸æœ‰ç”¨ã€‚</p></li><li><p><strong>äº¤äº’æ•ˆæœ</strong>ï¼šä½ å¯ä»¥ç»“åˆåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœä½¿ç”¨ <code>clip-path</code>ï¼Œä»¥å®ç°è§†è§‰ä¸Šå¸å¼•äººçš„äº¤äº’åŠ¨ç”»ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æ‚¬åœæˆ–ç‚¹å‡»å…ƒç´ æ—¶æ”¹å˜ <code>clip-path</code> çš„å½¢çŠ¶ã€‚</p></li><li><p><strong>æ©ç›–å’Œæ˜¾ç¤ºå†…å®¹</strong>ï¼šå®ƒå¯ä»¥è¢«ç”¨æ¥æ©ç›–å…ƒç´ çš„æŸéƒ¨åˆ†æˆ–åªæ˜¾ç¤ºæŸéƒ¨åˆ†ï¼Œè¿™åœ¨åˆ›å»ºä»ªè¡¨æ¿ã€å¡ç‰‡æˆ–å…¶ä»–åŒ…å«éšè—è¯¦ç»†ä¿¡æ¯çš„ç•Œé¢å…ƒç´ æ—¶å°¤å…¶æœ‰ç”¨ã€‚</p></li></ol><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š<br>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: shape | none;</span><br></pre></td></tr></table></figure><br>  å…¶ä¸­ <code>shape</code> å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ul><li><p><strong>åœ†å½¢</strong>ï¼ˆ<code>circle()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">circle</span>(<span class="number">50%</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªåœ†å½¢å‰ªè£åŒºåŸŸï¼Œå…¶ä¸­ <code>50%</code> æ˜¯åœ†çš„åŠå¾„ã€‚</p></li><li><p><strong>æ¤­åœ†</strong>ï¼ˆ<code>ellipse()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">ellipse</span>(<span class="number">50%</span> <span class="number">25%</span>);</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªæ¤­åœ†å‰ªè£åŒºåŸŸï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå€¼æ˜¯æ°´å¹³åŠå¾„ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯å‚ç›´åŠå¾„ã€‚</p></li><li><p><strong>å¤šè¾¹å½¢</strong>ï¼ˆ<code>polygon()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">50%</span> <span class="number">0%</span>, <span class="number">100%</span> <span class="number">50%</span>, <span class="number">50%</span> <span class="number">100%</span>, <span class="number">0%</span> <span class="number">50%</span>);</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªè±å½¢å‰ªè£åŒºåŸŸï¼Œæ¯ä¸ªç™¾åˆ†æ¯”å¯¹æ˜¯å¤šè¾¹å½¢ä¸€ä¸ªé¡¶ç‚¹çš„åæ ‡ã€‚</p></li><li><p><strong>ä½¿ç”¨ URL</strong>ï¼ˆSVG å‰ªè£è·¯å¾„ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">url</span>(<span class="string">#clip-shape</span>);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ <code>#clip-shape</code> æ˜¯ SVG å†…çš„ <code>&lt;clipPath&gt;</code> å…ƒç´ çš„ IDï¼Œå…è®¸ä½ ä½¿ç”¨ SVG çš„å¤æ‚è·¯å¾„å®šä¹‰å‰ªè£å½¢çŠ¶ã€‚</p></li></ul><p>é€šè¿‡ä½¿ç”¨ <code>clip-path</code>ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä¸éœ€è¦é¢å¤–å›¾åƒæˆ– SVG æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨ CSS ä¸­åˆ›å»ºè§†è§‰ä¸Šå¸å¼•äººçš„å½¢çŠ¶å’Œæ•ˆæœã€‚è¿™ä½¿å¾—é¡µé¢åŠ è½½æ›´å¿«ï¼Œä¹Ÿä½¿å¾—åŠ¨æ€æ•ˆæœçš„å®ç°æ›´ä¸ºç®€ä¾¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/09/11/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%952/"/>
    <id>https://youxt-njnu.github.io/2024/09/11/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%952/</id>
    <published>2024-09-11T02:02:05.000Z</published>
    <updated>2024-10-05T12:02:34.246Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="è°ƒè¯•å·¥å…·"><a href="#è°ƒè¯•å·¥å…·" class="headerlink" title="è°ƒè¯•å·¥å…·"></a>è°ƒè¯•å·¥å…·</h1><p>ğŸ” åè¯2-callback ğŸµ</p><ul><li>unformsç»Ÿä¸€å­˜shaderé‡Œuniformçš„åˆå§‹å€¼</li></ul><p>ğŸ” åè¯1-callback ğŸµ</p><ul><li>æ„é€ ä½äºåŠå¾„ä¸º5çš„çƒé¢ä¸Šçš„å†²å‡»ç‚¹ã€å†²å‡»æœ€å¤§åŠå¾„ã€å†²å‡»æ¯”ä¾‹ã€ä¹‹å‰çš„ç‚¹ä½ç½®ã€é£çº¿çš„æ¯”ä¾‹å’Œé•¿åº¦</li></ul><p>å®‰è£…dat.guiçš„åº“ï¼š<code>npm i dat.gui @types/dat.gui</code></p><p>æ·»åŠ è¿›å…¥guiï¼›</p><p>guiè®¾ç½®éšè—ï¼Œé€šè¿‡é”®ç›˜Hé”®å”¤èµ·ï¼›</p><h1 id="é£çº¿"><a href="#é£çº¿" class="headerlink" title="é£çº¿"></a>é£çº¿</h1><p>ğŸ” åè¯1-callback ğŸµ</p><ul><li>å–æ¶ˆæ³¨é‡Š</li></ul><p><img src="C:\Users\Xiangting\AppData\Roaming\Typora\typora-user-images\image-20240913170816909.png" alt="image-20240913170816909"></p><h3 id="åˆ¶ä½œé£çº¿"><a href="#åˆ¶ä½œé£çº¿" class="headerlink" title="åˆ¶ä½œé£çº¿"></a>åˆ¶ä½œé£çº¿</h3><p>åˆå§‹åŒ–100ä¸ªç‚¹ï¼Œå¾—åˆ°ä¸€æ¡è·¯å¾„ï¼›æ·»åŠ indexå±æ€§ï¼Œå½¢æˆèµ·æ­¢æ­£ç¡®çš„è·¯å¾„ï¼ŒåŠ å…¥trails</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">makeTrail</span> (idx) &#123;</span><br><span class="line">  <span class="keyword">let</span> pts = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>*<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">0</span>); </span><br><span class="line">  <span class="keyword">let</span> g = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferGeometry</span>();</span><br><span class="line">  g.<span class="title function_">setAttribute</span>(<span class="string">&quot;position&quot;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Float32BufferAttribute</span>(pts,<span class="number">3</span>));</span><br><span class="line">  <span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">LineDashedMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: params.<span class="property">colors</span>.<span class="property">gradOuter</span>,</span><br><span class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">onBeforeCompile</span>: <span class="function"><span class="params">shader</span> =&gt;</span> &#123;</span><br><span class="line">      shader.<span class="property">uniforms</span>.<span class="property">actionRatio</span> = impacts[idx].<span class="property">trailRatio</span>;</span><br><span class="line">      shader.<span class="property">uniforms</span>.<span class="property">lineLength</span> = impacts[idx].<span class="property">trailLength</span>;</span><br><span class="line">      shader.<span class="property">fragmentShader</span> = lineFragmentShader;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Line</span>(g,m);</span><br><span class="line">  l.<span class="property">userData</span>.<span class="property">idx</span> = idx;</span><br><span class="line">  <span class="title function_">setPath</span>(l,impacts[idx].<span class="property">prevPosition</span>,impacts[idx].<span class="property">impactPosition</span>);</span><br><span class="line">  trails.<span class="title function_">push</span>(l);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®è·¯å¾„ä¸Šç‚¹çš„ä½ç½®å’Œé•¿åº¦ï¼šä¼ å…¥å½“å‰è·¯å¾„ã€èµ·ç‚¹ã€ç»ˆç‚¹ã€å³°é«˜ã€å‡ºç°åç»è¿‡å‡ æ¬¡å¼§åº¦å†è¿›å…¥åæ¶ˆå¤±</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setPath</span> = (<span class="params">l, startPoint, endPoint, peakHeight,cycles</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> pos = l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">position</span>; <span class="comment">//é¢„å­˜ç‚¹çš„æœ€æ–°ä½ç½®</span></span><br><span class="line">  <span class="keyword">let</span> division = pos - <span class="number">1</span>; <span class="comment">//lä¸Šçš„åˆ†æ®µæ•°ç›®</span></span><br><span class="line">  <span class="keyword">let</span> cycle = cycles || <span class="number">1</span>; <span class="comment">// cycle=4:â†·â†·â†·â†·</span></span><br><span class="line">  <span class="keyword">let</span> peak = peakHeight || <span class="number">1</span>; <span class="comment">//å³°é«˜</span></span><br><span class="line">  <span class="keyword">let</span> radius = startPoint.<span class="title function_">length</span>(); <span class="comment">// å¯¹åº”çƒçš„åŠå¾„</span></span><br><span class="line">  <span class="keyword">let</span> angle = startPoint.<span class="title function_">angleTo</span>(endPoint); <span class="comment">//èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„å¤¹è§’</span></span><br><span class="line">  <span class="keyword">let</span> arcLength = radius * angle; <span class="comment">//å¼§é•¿</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> diameterMinor = arcLength / <span class="title class_">Math</span>.<span class="property">PI</span>; <span class="comment">// æ–°åœ†çš„ç›´å¾„</span></span><br><span class="line">  <span class="keyword">let</span> radiusMinor = diameterMinor / <span class="number">2</span> / cycle; <span class="comment">// è€ƒè™‘cycleä¸‹æ–°åœ†çš„åŠå¾„</span></span><br><span class="line">  <span class="keyword">let</span> peakRatio = peak / diameterMinor; <span class="comment">// å³°é«˜æ¯”ä¾‹</span></span><br><span class="line">  <span class="keyword">let</span> radiusMajor = radius + radiusMinor; <span class="comment">// å¤§åœ†çš„åŠå¾„</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> basisMajor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">setLength</span>(radiusMajor); <span class="comment">// trailçš„ç‚¹åŸºå‡†1</span></span><br><span class="line">  <span class="keyword">let</span> basisMinor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">negate</span>().<span class="title function_">setLength</span>(radiusMinor); <span class="comment">// trailçš„ç‚¹åŸºå‡†2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tri = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Triangle</span>(startPoint, endPoint, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>()); <span class="comment">// ä¸‰è§’å½¢</span></span><br><span class="line">  <span class="keyword">let</span> nrm = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  tri.<span class="title function_">getNormal</span>(nrm); <span class="comment">// æ‹¿åˆ°æ³•çº¿</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> v3Major = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">//é‡Œé¢çš„v3è¡¨ç¤ºvec3 </span></span><br><span class="line">  <span class="keyword">let</span> v3Minor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  <span class="keyword">let</span> v3Inter = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  <span class="keyword">let</span> vFinal = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">// é‡Œé¢vä¹Ÿå¯ç†è§£ä¸ºvarying</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;=division;i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> divisionRatio = i / division; <span class="comment">// åˆ†æ®µæ¯”ä¾‹</span></span><br><span class="line">    <span class="keyword">let</span> angleValue = divisionRatio * angle; <span class="comment">// åˆ†æ®µè§’åº¦</span></span><br><span class="line">    v3Major.<span class="title function_">copy</span>(basisMajor).<span class="title function_">applyAxisAngle</span>(nrm, angleValue); <span class="comment">// åœ¨basisMajorçš„åŸºç¡€ä¸Šç»•ç€æ³•çº¿æ—‹è½¬</span></span><br><span class="line">    v3Minor.<span class="title function_">copy</span>(basisMinor).<span class="title function_">applyAxisAngle</span>(nrm, angleValue+<span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>*divisionRatio*cycle); <span class="comment">// åœ¨basisMinorçš„åŸºç¡€ä¸Šç»•ç€æ³•çº¿æ—‹è½¬</span></span><br><span class="line">    v3Inter.<span class="title function_">addVectors</span>(v3Major, v3Minor); <span class="comment">// ä¸¤ä¸ªå‘é‡ç›¸åŠ </span></span><br><span class="line">    <span class="keyword">let</span> newLength = (v3Inter.<span class="title function_">length</span>() - radius) * peakRatio + radius; <span class="comment">// æ–°çš„é•¿åº¦</span></span><br><span class="line">    vFinal.<span class="title function_">copy</span>(v3Inter).<span class="title function_">setLength</span>(newLength); <span class="comment">// è®¾ç½®æ–°çš„é•¿åº¦</span></span><br><span class="line">    pos.<span class="title function_">setXYZ</span>(i,vFinal.<span class="property">x</span>,vFinal.<span class="property">y</span>,vFinal.<span class="property">z</span>); <span class="comment">// è®¾ç½®æ–°çš„ä½ç½®</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ›´æ–°å®Œäº†ç‚¹æ•°æ®åéœ€è¦åŠ ä¸Šè¿™å¥</span></span><br><span class="line">  pos.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  l.<span class="title function_">computeLineDistances</span>();  <span class="comment">// è®¡ç®—æ¯ä¸ªé¡¶ç‚¹åˆ°èµ·ç‚¹çš„ç´¯åŠ è·ç¦»</span></span><br><span class="line">  l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br><span class="line">  impacts[l.<span class="property">userData</span>.<span class="property">idx</span>].<span class="property">trailLength</span>.<span class="property">value</span> = l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">array</span>[<span class="number">99</span>];</span><br><span class="line">  l.<span class="property">material</span>.<span class="property">dashSize</span> = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/28/GWszxuwCZIaV1EB.png" alt="202408281104602.png"></p><h4 id="é£çº¿shader"><a href="#é£çº¿shader" class="headerlink" title="é£çº¿shader"></a>é£çº¿shader</h4><p>ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ä½ çš„ Vite é…ç½®ä¸­æ·»åŠ å¯¹ <code>.glsl</code> æ–‡ä»¶çš„æ”¯æŒçš„æ­¥éª¤ï¼š</p><ol><li>å®‰è£… <code>vite-plugin-glsl</code>ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vite-plugin-glsl</span><br></pre></td></tr></table></figure></li><li>åœ¨ä½ çš„ Vite é…ç½®æ–‡ä»¶ä¸­ï¼ˆé€šå¸¸æ˜¯ <code>vite.config.js</code> æˆ– <code>vite.config.ts</code>ï¼‰æ·»åŠ æ’ä»¶ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">import glsl from &#x27;vite-plugin-glsl&#x27;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line"> Â plugins: [</span><br><span class="line"> Â  Â vue(),</span><br><span class="line"> Â  Â glsl()</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>è¿™æ ·é…ç½®åï¼Œå½“ä½ å¯¼å…¥ <code>.glsl</code> æ–‡ä»¶æ—¶ï¼Œ<code>vite-plugin-glsl</code> å°†è‡ªåŠ¨å¤„ç†å®ƒä»¬ï¼Œç¡®ä¿ GLSL ä»£ç è¢«ä½œä¸ºå­—ç¬¦ä¸²æ­£ç¡®å¯¼å…¥ï¼Œé¿å… JavaScript è§£æé”™è¯¯ã€‚</p><p>ç¡®ä¿åœ¨ä½ çš„ Vue ç»„ä»¶æˆ– JavaScript æ–‡ä»¶ä¸­æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼å¯¼å…¥ <code>.glsl</code> æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import textFragmentShader from &#x27;./Shader/text.frag.glsl&#x27;</span><br><span class="line">import textVertexShader from &#x27;./Shader/text.vert.glsl&#x27;</span><br></pre></td></tr></table></figure><p>è¿™äº›æ–‡ä»¶ç°åœ¨åº”è¯¥ä¼šè¢«æ­£ç¡®åœ°ä½œä¸ºå­—ç¬¦ä¸²å¯¼å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åœ¨ Three.js çš„ <code>ShaderMaterial</code> ä¸­ã€‚è¿™åº”è¯¥è§£å†³ä½ é‡åˆ°çš„å…³äº GLSL ä»£ç å¯¼å…¥çš„é—®é¢˜ã€‚</p><p>é¡µé¢ä¸­å¯¼å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import lineFragmentShader from &#x27;./line.frag.glsl&#x27;;</span><br></pre></td></tr></table></figure><p>shaderå†…å®¹ï¼š</p><p>actionRatio ä»£ç ä¸­æ˜¯0 _ åŠ¨ç”»ä¸­ä¿®æ”¹ </p><p>vLineDistance &#x2F;&#x2F; åœ¨ä½¿ç”¨ Three.js çš„ LineDashedMaterial æ—¶ï¼Œç¡®ä¿é¡¶ç‚¹ç€è‰²å™¨æ­£ç¡®åœ°è®¡ç®—å¹¶ä¼ é€’ vLineDistance å˜é‡åˆ°ç‰‡å…ƒç€è‰²å™¨æ˜¯éå¸¸å…³é”®çš„ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡å†³å®šäº†çº¿æ®µçš„è™šçº¿æ•ˆæœã€‚</p><p>totalSize ä¸€æ•´ä¸ªæ²¡ç”¨åˆ°</p><p>lineLength åˆ°èµ·ç‚¹çš„ç´¯ç§¯è·ç¦»</p><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåœ¨ Three.js ä¸­ä½¿ç”¨çš„ GLSL shaderï¼Œå…·ä½“æ˜¯ç”¨æ¥å¤„ç†å…·æœ‰è™šçº¿æ•ˆæœçš„çº¿æ¡ææ–™ï¼ˆ<code>LineDashedMaterial</code>ï¼‰ã€‚è¿™ä¸ª shader æ§åˆ¶ç€å¦‚ä½•æ ¹æ®è·ç¦»å’Œè™šçº¿æ¨¡å¼æ˜¾ç¤ºçº¿æ¡çš„ç‰‡æ®µã€‚</p><ul><li><strong>uniforms</strong> æ˜¯ä» Three.js çš„ JavaScript ä»£ç ä¼ é€’åˆ° shader çš„å˜é‡ã€‚<ul><li><code>mediump float</code>: ç²¾åº¦æŒ‡ç¤ºç¬¦ï¼Œè¡¨æ˜æµ®ç‚¹è¿ç®—ä½¿ç”¨ä¸­ç­‰ç²¾åº¦ã€‚</li><li><code>actionRatio</code>: æ§åˆ¶çº¿æ¡çš„åŠ¨ç”»æˆ–è¿›åº¦çš„å‚æ•°ã€‚</li><li><code>lineLength</code>: çº¿æ¡çš„æ€»é•¿åº¦ã€‚</li><li><code>diffuse</code>: çº¿æ¡çš„é¢œè‰²ã€‚</li><li><code>opacity</code>: çº¿æ¡çš„ä¸é€æ˜åº¦ã€‚</li><li><code>dashSize</code>: å•ä¸ªè™šçº¿çš„é•¿åº¦ã€‚</li><li><code>totalSize</code>: è™šçº¿å’Œé—´éš”çš„æ€»å’Œé•¿åº¦ã€‚</li></ul></li><li><strong>varying</strong><ul><li><code>vLineDistance</code>: è¡¨ç¤ºå½“å‰ç‰‡æ®µåœ¨æ•´ä¸ªçº¿æ¡ä¸­çš„ä½ç½®ã€‚</li></ul></li></ul><p><strong>è™šçº¿è®¡ç®—</strong>:</p><ul><li>é¦–å…ˆè®¡ç®—å‡ºå½“å‰åº”æ˜¾ç¤ºçš„è™šçº¿ä½ç½®ã€‚</li><li>æ ¹æ® <code>vLineDistance</code> å’Œè™šçº¿å‚æ•°è®¡ç®—å‡ºå½“å‰ç‰‡æ®µæ˜¯å¦åœ¨è™šçº¿ä¸­è¿˜æ˜¯åœ¨ç©ºç™½é—´éš”ä¸­ã€‚å¦‚æœåœ¨é—´éš”ä¸­ï¼Œä½¿ç”¨ <code>discard</code> æŠ›å¼ƒè¿™ä¸ªç‰‡æ®µï¼Œä¸è¿›è¡Œæ¸²æŸ“ã€‚</li><li>ä½¿ç”¨æ¸å˜ (<code>grad</code>) æ¥å¤„ç†è™šçº¿çš„è¾¹ç¼˜ï¼Œä½¿å¾—è™šçº¿è¾¹ç¼˜å¹³æ»‘è¿‡æ¸¡ã€‚</li></ul><ol><li>é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„è®¡ç®—:</li></ol><p>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œæ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®è¢«ç”¨æ¥è®¡ç®—å®ƒåœ¨æ•´æ¡çº¿ä¸­çš„ç›¸å¯¹ä½ç½®æˆ–è·ç¦»ï¼Œè¿™ä¸ªè·ç¦»ç´¯è®¡åˆ° vLineDistanceã€‚ä¾‹å¦‚ï¼Œå¦‚æœçº¿æ¡ç”±å¤šä¸ªæ®µç»„æˆï¼Œæ¯ä¸ªæ®µçš„é•¿åº¦ä¼šè¢«ç´¯åŠ åˆ°èµ·ç‚¹è·ç¦»ï¼Œç›´åˆ°å½“å‰é¡¶ç‚¹çš„ä½ç½®ã€‚</p><ol start="2"><li>ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨:</li></ol><p>è¿™ä¸ªè®¡ç®—å‡ºçš„è·ç¦» (vLineDistance) ä½œä¸ºä¸€ä¸ª varying å˜é‡ï¼Œè¢«ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ã€‚åœ¨å›¾å½¢ç®¡çº¿ä¸­ï¼Œé¡¶ç‚¹ç€è‰²å™¨å¤„ç†åçš„ç»“æœï¼ˆå¦‚ä½ç½®ã€é¢œè‰²ã€è·ç¦»ç­‰ï¼‰ä¼šé€šè¿‡æ’å€¼ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ã€‚</p><ol start="3"><li>åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ï¼ŒvLineDistance ç”¨æ¥ç¡®å®šæ¯ä¸ªç‰‡æ®µæ˜¯å¦åº”è¯¥è¢«æ¸²æŸ“ä¸ºè™šçº¿çš„ä¸€éƒ¨åˆ†ï¼š</li></ol><blockquote><p>float currPos &#x3D; (lineLength + dashSize) * actionRatio;<br>è¿™é‡Œ currPos è¡¨ç¤ºè™šçº¿å¼€å§‹çš„ä½ç½®ï¼Œæ˜¯é€šè¿‡çº¿æ¡æ€»é•¿åº¦ã€è™šçº¿å¤§å°å’ŒåŠ¨ç”»æ¯”ä¾‹ (actionRatio) è®¡ç®—çš„ã€‚actionRatio å¯èƒ½ç”¨äºåŠ¨æ€è°ƒæ•´è™šçº¿çš„æ˜¾ç¤ºï¼Œæ¯”å¦‚æ»šåŠ¨æ•ˆæœã€‚<br>ç¡®å®šç‰‡æ®µä½ç½®:</p></blockquote><blockquote><p>float d &#x3D; (vLineDistance + halfDash) - currPos;<br>è¿™ä¸ªè®¡ç®—æ£€æŸ¥å½“å‰ç‰‡æ®µçš„ä½ç½®ï¼ˆvLineDistance + halfDashï¼‰ç›¸å¯¹äºå½“å‰è™šçº¿å¼€å§‹ä½ç½®çš„åç§»é‡ã€‚halfDash ç”¨äºè°ƒæ•´è®¡ç®—åˆ°è™šçº¿ä¸­å¿ƒçš„è·ç¦»ã€‚<br>åˆ¤æ–­æ˜¯å¦åœ¨è™šçº¿å†…éƒ¨:</p></blockquote><blockquote><p>if (abs(d) &gt; halfDash ) discard;å¦‚æœåç§»é‡å¤§äº halfDashï¼Œåˆ™è¡¨ç¤ºå½“å‰ç‰‡æ®µä¸åœ¨è™šçº¿å†…éƒ¨ï¼Œåº”è¯¥è¢«ä¸¢å¼ƒï¼ˆä¸æ¸²æŸ“ï¼‰ã€‚è¿™æ ·ï¼Œåªæœ‰åœ¨è™šçº¿èŒƒå›´å†…çš„ç‰‡æ®µä¼šè¢«æ¸²æŸ“ï¼Œå½¢æˆæ–­ç»­çš„çº¿æ¡æ•ˆæœã€‚</p></blockquote><ol start="4"><li>æ¸å˜è¾¹ç¼˜çš„å¤„ç†:</li></ol><p>float grad &#x3D; ((vLineDistance + halfDash) - (currPos - halfDash)) &#x2F; halfDash; è¿™é‡Œ grad ç”¨äºè®¡ç®—å½“å‰ç‰‡æ®µåœ¨è™šçº¿è¾¹ç¼˜çš„ä½ç½®ï¼Œç”¨äºå®ç°è¾¹ç¼˜çš„æ¸å˜æ•ˆæœã€‚è¿™å¯ä»¥è®©è™šçº¿çš„å¼€å§‹å’Œç»“æŸæ›´åŠ å¹³æ»‘ï¼Œä¸ä¼šçªç„¶æˆªæ–­ã€‚</p><p><img src="https://s2.loli.net/2024/09/11/yfOMo2NWJZVekbq.jpg" alt="ac03418e3341f086f3b780056121b39.jpg"></p><h4 id="è¡¥å……-negate"><a href="#è¡¥å……-negate" class="headerlink" title="è¡¥å…… | negate"></a>è¡¥å…… | <code>negate</code></h4><p><code>negate()</code> æ˜¯ä¸€ä¸ª Three.js ä¸­çš„å‘é‡æ–¹æ³•ï¼Œå®ƒç”¨æ¥å°†å‘é‡ä¸­çš„æ¯ä¸ªåˆ†é‡å–åï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªåˆ†é‡ä¹˜ä»¥ -1ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å°†å‘é‡çš„æ–¹å‘åè½¬ã€‚å…·ä½“åˆ°è¿™æ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> basisMinor = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">negate</span>().<span class="title function_">setLength</span>(radiusMinor);</span><br></pre></td></tr></table></figure><ul><li><code>new THREE.Vector3()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸‰ç»´å‘é‡ï¼Œé»˜è®¤ä¸º (0, 0, 0)ã€‚</li><li><code>.copy(startPoint)</code> å°† <code>startPoint</code> çš„å€¼å¤åˆ¶åˆ°è¿™ä¸ªæ–°çš„å‘é‡ä¸­ã€‚</li><li><code>.negate()</code> å°†å¤åˆ¶åçš„å‘é‡ä¸­çš„æ¯ä¸ªåˆ†é‡ä¹˜ä»¥ -1ï¼Œå®ç°å‘é‡æ–¹å‘çš„åè½¬ã€‚</li><li><code>.setLength(radiusMinor)</code> å°†åè½¬åçš„å‘é‡çš„é•¿åº¦è®¾ç½®ä¸º <code>radiusMinor</code>ã€‚</li></ul><p>è¿™æ ·ï¼Œ<code>basisMinor</code> å°±å˜æˆäº†ä¸€ä¸ªæ–¹å‘ä¸ <code>startPoint</code> ç›¸åã€é•¿åº¦ä¸º <code>radiusMinor</code> çš„å‘é‡ã€‚</p><h4 id="è¡¥å……-applyAxisAngle"><a href="#è¡¥å……-applyAxisAngle" class="headerlink" title="è¡¥å…… | applyAxisAngle"></a>è¡¥å…… | <code>applyAxisAngle</code></h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>applyAxisAngle</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªæ—‹è½¬åº”ç”¨åˆ°ä¸€ä¸ªå‘é‡ä¸Šã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªè½´å‘é‡å’Œä¸€ä¸ªè§’åº¦ã€‚å®ƒçš„ä½œç”¨æ˜¯å›´ç»•ç»™å®šçš„è½´å‘é‡æ—‹è½¬åŸå‘é‡æŒ‡å®šçš„è§’åº¦ã€‚</p><ol><li><strong>è½´å‘é‡</strong> (<code>axis</code>): è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„ä¸‰ç»´å‘é‡ï¼ŒæŒ‡å®šäº†æ—‹è½¬çš„è½´ã€‚ä¾‹å¦‚ï¼Œè‹¥è½´å‘é‡ä¸º <code>(0, 1, 0)</code>ï¼Œåˆ™è¡¨ç¤ºå›´ç»• y è½´è¿›è¡Œæ—‹è½¬ã€‚</li><li><strong>è§’åº¦</strong> (<code>angle</code>): è¿™æ˜¯æ—‹è½¬çš„è§’åº¦ï¼Œå•ä½æ˜¯å¼§åº¦ã€‚æ­£å€¼è¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬ï¼Œè´Ÿå€¼è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬ï¼ˆæ ¹æ®å³æ‰‹è§„åˆ™ï¼‰ã€‚</li></ol><p>å½“ä½ è°ƒç”¨ <code>applyAxisAngle</code> æ–¹æ³•æ—¶ï¼Œå®ƒä¼šæ”¹å˜è°ƒç”¨å®ƒçš„å‘é‡çš„æ–¹å‘ï¼Œä½†ä¿æŒå‘é‡çš„é•¿åº¦ä¸å˜ã€‚è¿™ç§æ—‹è½¬æ˜¯é€šè¿‡å³æ‰‹è§„åˆ™æ¥å®šä¹‰çš„ï¼Œå³å¦‚æœä½ çš„å³æ‰‹æ‹‡æŒ‡æŒ‡å‘è½´å‘é‡çš„æ–¹å‘ï¼Œé‚£ä¹ˆå››æŒ‡çš„å·æ›²æ–¹å‘å®šä¹‰äº†æ­£æ—‹è½¬æ–¹å‘ã€‚</p><p>åœ¨ Three.js ä¸­ä½¿ç”¨ <code>applyAxisAngle</code> æ–¹æ³•è¿›è¡Œæ—‹è½¬æ—¶ï¼Œå‘é‡æ˜¯ç»•é€šè¿‡åŸç‚¹ (0, 0, 0) çš„è½´è¿›è¡Œæ—‹è½¬çš„ã€‚è½´å‘é‡åªå®šä¹‰äº†æ—‹è½¬çš„æ–¹å‘å’Œè½´çº¿ï¼Œè€Œä¸æ˜¯æ—‹è½¬çš„ä½ç½®ã€‚å› æ­¤ï¼Œè¿™ç§æ—‹è½¬æ€»æ˜¯è®¤ä¸ºè½´å‘é‡é€šè¿‡ä¸‰ç»´ç©ºé—´çš„åŸç‚¹ã€‚</p><p>æ—‹è½¬çš„ä¸­å¿ƒç‚¹æ˜¯åæ ‡ç³»ç»Ÿçš„åŸç‚¹ (0, 0, 0)ã€‚å‘é‡ä»å®ƒå½“å‰çš„ä½ç½®å¼€å§‹ï¼Œç»•é€šè¿‡åŸç‚¹çš„è½´æ—‹è½¬ã€‚è¿™æ„å‘³ç€ï¼š</p><ul><li>å¦‚æœå‘é‡çš„ä¸€ä¸ªç«¯ç‚¹ä½äºåŸç‚¹ï¼Œæ—‹è½¬å°†ç›´æ¥æ”¹å˜å‘é‡çš„æ–¹å‘ï¼Œè€Œé•¿åº¦ä¿æŒä¸å˜ã€‚</li><li>å¦‚æœå‘é‡çš„ä¸€ä¸ªç«¯ç‚¹ä¸åœ¨åŸç‚¹ï¼Œå‘é‡ä¼šåœ¨æƒ³è±¡ä¸­è¢«æ‹‰ç›´è‡³åŸç‚¹ï¼Œç„¶åç»•è½´æ—‹è½¬ï¼Œå†æ”¾å›åŸä½ç½®ã€‚</li></ul><p>å¦‚æœä½ éœ€è¦ç»•ä¸€ä¸ªä¸åœ¨åŸç‚¹çš„ç‚¹æ—‹è½¬å‘é‡ï¼Œä½ éœ€è¦å…ˆå°†ç³»ç»Ÿå¹³ç§»åˆ°é‚£ä¸ªç‚¹å˜æˆæ–°çš„åŸç‚¹ï¼Œæ‰§è¡Œæ—‹è½¬ï¼Œç„¶åå†å¹³ç§»å›å»ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œæˆï¼š</p><ol><li><strong>å¹³ç§»</strong> ï¼šå°†å‘é‡å’Œæ—‹è½¬ä¸­å¿ƒç‚¹ä¸€åŒå¹³ç§»åˆ°åŸç‚¹é™„è¿‘ã€‚</li><li><strong>æ—‹è½¬</strong> ï¼šåœ¨æ–°çš„ä½ç½®åº”ç”¨æ—‹è½¬ã€‚</li><li><strong>é€†å¹³ç§»</strong> ï¼šå°†æ—‹è½¬åçš„å‘é‡ç§»å›åŸå§‹ä½ç½®ã€‚</li></ol><h4 id="è¡¥å……-needsUpdate"><a href="#è¡¥å……-needsUpdate" class="headerlink" title="è¡¥å…… | needsUpdate"></a>è¡¥å…… | needsUpdate</h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>needsUpdate</code> å±æ€§ç”¨äºå‘Šè¯‰å¼•æ“æŸä¸ªå¯¹è±¡çš„æ•°æ®å·²ç»æ”¹å˜ï¼Œéœ€è¦é‡æ–°è®¡ç®—æˆ–é‡æ–°ä¸Šä¼ åˆ° GPUã€‚è¿™ä¸ªå±æ€§å¸¸è§äºä¸å‡ ä½•ä½“ï¼ˆ<code>Geometry</code> æˆ– <code>BufferGeometry</code>ï¼‰ã€ææ–™ï¼ˆ<code>Material</code>ï¼‰ã€çº¹ç†ï¼ˆ<code>Texture</code>ï¼‰ç­‰ç›¸å…³çš„å¯¹è±¡ã€‚</p><p>å½“ä½ ä¿®æ”¹äº†å‡ ä½•ä½“çš„é¡¶ç‚¹æ•°æ®ã€çº¹ç†çš„å†…å®¹ã€æˆ–è€…ææ–™çš„å‚æ•°ç­‰ï¼Œè¿™äº›æ”¹å˜ä¸ä¼šè‡ªåŠ¨åæ˜ åœ¨æ¸²æŸ“çš„å¯¹è±¡ä¸Šï¼Œé™¤éä½ æ˜ç¡®åœ°å‘Šè¯‰ Three.js è¿™äº›æ•°æ®å·²ç»æ›´æ–°ã€‚<code>needsUpdate</code> å±æ€§å°±æ˜¯ç”¨äºè¿™ç§é€šçŸ¥ã€‚</p><p>ç¤ºä¾‹ - å‡ ä½•ä½“é¡¶ç‚¹æ•°æ®æ›´æ–°</p><p>å‡è®¾ä½ æ›´æ”¹äº†ä¸€ä¸ªå‡ ä½•ä½“çš„é¡¶ç‚¹ä½ç½®æ•°æ®ï¼Œä½ éœ€è¦è®¾ç½®å¯¹åº”å±æ€§çš„ <code>needsUpdate</code> ä¸º <code>true</code>ï¼Œä»¥ç¡®ä¿è¿™äº›æ”¹å˜è¢«åº”ç”¨åˆ°ä¸‹ä¸€æ¬¡æ¸²æŸ“ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹å‡ ä½•ä½“é¡¶ç‚¹ä½ç½®</span></span><br><span class="line">geometry.<span class="property">attributes</span>.<span class="property">position</span>.<span class="title function_">setXYZ</span>(index, newX, newY, newZ);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ‡è®°é¡¶ç‚¹ä½ç½®æ•°æ®ä¸ºéœ€è¦æ›´æ–°</span></span><br><span class="line">geometry.<span class="property">attributes</span>.<span class="property">position</span>.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ - çº¹ç†å†…å®¹æ›´æ–°</p><p>å¦‚æœä½ ä¿®æ”¹äº†çº¹ç†çš„å›¾åƒæ•°æ®ï¼Œä½ åŒæ ·éœ€è¦è®¾ç½® <code>needsUpdate</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ è½½ä¸€ä¸ªæ–°çš„å›¾åƒåˆ°çº¹ç†</span></span><br><span class="line">texture.<span class="property">image</span> = newImage;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘Šè¯‰Three.jsçº¹ç†å·²æ›´æ–°</span></span><br><span class="line">texture.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ - ææ–™å±æ€§æ›´æ–°</p><p>å½“æ”¹å˜ææ–™çš„ä¸€äº›å±æ€§ï¼ˆå¦‚é¢œè‰²ã€é€æ˜åº¦ç­‰ï¼‰åï¼Œå¦‚æœè¦ç«‹å³åæ˜ è¿™äº›å˜åŒ–ï¼ŒåŒæ ·éœ€è¦æ›´æ–° <code>needsUpdate</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹ææ–™çš„é¢œè‰²</span></span><br><span class="line">material.<span class="property">color</span>.<span class="title function_">setHex</span>(<span class="number">0xff0000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ‡è®°ææ–™éœ€è¦æ›´æ–°</span></span><br><span class="line">material.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h4 id="è¡¥å……-computeLineDistances"><a href="#è¡¥å……-computeLineDistances" class="headerlink" title="è¡¥å…… | computeLineDistances"></a>è¡¥å…… | <code>computeLineDistances</code></h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>Mesh</code> å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰ <code>computeLineDistances()</code> æ–¹æ³•ï¼›è¿™ä¸ªæ–¹æ³•æ˜¯å±äº <code>Line</code> ç±»çš„ã€‚<code>Line</code> ç±»ç”¨äºåˆ›å»ºå’Œå¤„ç†çº¿æ®µå¯¹è±¡ï¼Œåœ¨ 3D åœºæ™¯ä¸­è¡¨ç¤ºç”±å¤šä¸ªç‚¹è¿æ¥è€Œæˆçš„ç›´çº¿æˆ–æŠ˜çº¿ã€‚</p><p>è¯¥æ–¹æ³•ç”¨äºè®¡ç®—çº¿æ®µå¯¹è±¡ä¸­æ¯ä¸ªé¡¶ç‚¹åˆ°çº¿èµ·ç‚¹çš„ç´¯è®¡è·ç¦»ï¼Œå¹¶å°†è¿™äº›è·ç¦»å­˜å‚¨åœ¨çº¿æ®µçš„ <code>lineDistances</code> å±æ€§ä¸­ã€‚è¿™ä¸ªåŠŸèƒ½é€šå¸¸ä¸çº¿æ€§ææ–™ï¼ˆ<code>LineDashedMaterial</code>ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥åˆ›å»ºè™šçº¿æ•ˆæœã€‚<code>LineDashedMaterial</code> éœ€è¦è¿™äº›è·ç¦»æ¥æ­£ç¡®åœ°æ¸²æŸ“æ¯æ®µè™šçº¿ã€‚</p><p>åœ¨ Three.js ä¸­ï¼Œå½“ä½ ä½¿ç”¨ <code>computeLineDistances()</code> æ–¹æ³•è®¡ç®—çº¿æ®µï¼ˆç”± <code>THREE.Line</code> æˆ– <code>THREE.LineSegments</code> ç±»åˆ›å»ºçš„å¯¹è±¡ï¼‰çš„æ¯ä¸ªé¡¶ç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»æ—¶ï¼Œè¿™äº›è·ç¦»ä¼šå­˜å‚¨åœ¨ <code>geometry.attributes.lineDistance</code> çš„ <code>array</code> å±æ€§ä¸­ã€‚è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä»èµ·ç‚¹åˆ°å¯¹åº”é¡¶ç‚¹çš„ç´¯ç§¯è·ç¦»ã€‚</p><p>æ•°ç»„ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ã€‚å› æ­¤ï¼Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 0ï¼‰å¯¹åº”ç¬¬ä¸€ä¸ªé¡¶ç‚¹ï¼ˆé€šå¸¸æ˜¯çº¿æ®µçš„èµ·ç‚¹ï¼‰ï¼Œç¬¬äºŒä¸ªå…ƒç´ ï¼ˆç´¢å¼• 1ï¼‰å¯¹åº”ç¬¬äºŒä¸ªé¡¶ç‚¹ï¼Œä¾æ­¤ç±»æ¨ã€‚ç´¢å¼• 99 çš„å…ƒç´ å°±æ˜¯æ•°ç»„ä¸­çš„ç¬¬ 100 ä¸ªå…ƒç´ ï¼Œå¯¹åº”äºä½ çš„çº¿æ®µçš„ç¬¬ 100 ä¸ªé¡¶ç‚¹ã€‚åœ¨ <code>array[99]</code> ä¸­è·å–çš„å€¼è¡¨ç¤ºä»çº¿æ®µçš„èµ·ç‚¹åˆ°ç¬¬ 100 ä¸ªé¡¶ç‚¹çš„ç´¯ç§¯è·ç¦»ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¦‚æœä½ æ›´æ”¹äº†çº¿æ®µçš„é¡¶ç‚¹ä½ç½®ï¼Œéœ€è¦é‡æ–°è°ƒç”¨ <code>computeLineDistances()</code> æ–¹æ³•æ¥æ›´æ–°è·ç¦»æ•°æ®ã€‚</li><li>è¿™ä¸ªæ–¹æ³•ä»…å¯¹ <code>THREE.Line</code> æˆ– <code>THREE.LineSegments</code> å¯¹è±¡æœ‰æ•ˆï¼Œå¯¹ <code>Mesh</code> å¯¹è±¡ä¸é€‚ç”¨ã€‚</li></ul><h4 id="è¡¥å……-é¢„åˆ¶shader"><a href="#è¡¥å……-é¢„åˆ¶shader" class="headerlink" title="è¡¥å…… | é¢„åˆ¶shader"></a>è¡¥å…… | é¢„åˆ¶shader</h4><p>åœ¨Three.jsçš„shaderç¼–ç¨‹ä¸­ï¼Œ<code>#include</code> è¯­å¥ç”¨äºæ’å…¥å…±ç”¨çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—é€šå¸¸å°è£…äº†ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å’Œå˜é‡å®šä¹‰ï¼Œä½¿å¾—shaderçš„ç¼–å†™æ›´åŠ æ¨¡å—åŒ–å’Œå¯å¤ç”¨ã€‚ä¸‹é¢æ˜¯ä½ æåˆ°çš„å‡ ä¸ªå¸¸è§çš„includeæ–‡ä»¶çš„ç”¨é€”ï¼š</p><ol><li><p><strong><code>&lt;common&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬äº†ä¸€äº›å¸¸ç”¨çš„æ•°å­¦å‡½æ•°å’Œå®å®šä¹‰ï¼Œæ¯”å¦‚è®¡ç®—çº¿æ€§æ’å€¼ã€é¥±å’Œåº¦è®¡ç®—ç­‰ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å¸¸é‡å®šä¹‰ï¼Œä¾‹å¦‚PIçš„å€¼ç­‰ã€‚</li></ul></li><li><p><strong><code>&lt;color_pars_fragment&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸é¢œè‰²å¤„ç†ç›¸å…³çš„å‚æ•°å’Œå‡½æ•°ï¼Œæ¯”å¦‚å¤„ç†é¡¶ç‚¹é¢œè‰²ã€æ¼«åå°„ç­‰ã€‚</li></ul></li><li><p><strong><code>&lt;fog_pars_fragment&gt;</code></strong>:</p><ul><li>ç”¨äºå®šä¹‰å’Œè®¡ç®—é›¾æ•ˆæœ(fog)çš„å‚æ•°ï¼Œä½¿å¾—ç‰©ä½“åœ¨é›¾ä¸­é€æ¸æ¶ˆå¤±çš„æ•ˆæœå¯ä»¥åœ¨shaderä¸­å®ç°ã€‚</li></ul></li><li><p><strong><code>&lt;logdepthbuf_pars_fragment&gt;</code></strong>:</p><ul><li>å¦‚æœå¯ç”¨äº†logarithmic depth bufferï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç›¸å…³çš„å®ç°ï¼Œç”¨æ¥æ”¹å–„è¿œè·ç¦»æ¸²æŸ“æ—¶çš„æ·±åº¦ç²¾åº¦é—®é¢˜ã€‚</li></ul></li><li><p><strong><code>&lt;clipping_planes_pars_fragment&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶æä¾›äº†å‰ªè£å¹³é¢çš„æ”¯æŒï¼Œä½¿å¾—å¯ä»¥åœ¨shaderä¸­å¤„ç†å‰ªè£é€»è¾‘ï¼Œä»…æ¸²æŸ“å‰ªè£å¹³é¢å…è®¸çš„éƒ¨åˆ†ã€‚</li></ul></li></ol><p>è¦æŸ¥æ‰¾Three.jsä¸­å¯ç”¨çš„æ‰€æœ‰shader chunksï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ç›´æ¥æŸ¥çœ‹Three.jsçš„æºä»£ç ã€‚åœ¨GitHubä¸Šçš„Three.jsåº“ä¸­ï¼Œè¿™äº›shader chunkæ–‡ä»¶ä½äº<code>src/renderers/shaders/ShaderChunk/</code>ç›®å½•ä¸‹ã€‚</p><h3 id="é£çº¿åŠ¨ç”»"><a href="#é£çº¿åŠ¨ç”»" class="headerlink" title="é£çº¿åŠ¨ç”»"></a>é£çº¿åŠ¨ç”»</h3><p>å†…å®¹ç»“æ„ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setTrailAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> tweens = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;maxImpactAmount;i++) &#123;</span><br><span class="line">      tweens.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">runTween</span>: <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    tweens.<span class="title function_">forEach</span>(<span class="function"><span class="params">t</span>=&gt;</span>t.<span class="title function_">runTween</span>());</span><br><span class="line">    <span class="title function_">createPoints</span>(); <span class="comment">// å› ä¸ºrunTweenä¼šå½±å“åˆ°pointsçš„æ•ˆæœ</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>forå¾ªç¯é‡Œçš„è®¾ç½®</p><p>æ›´æ–°äº†impactsï¼ŒåŒæ—¶ä¹Ÿå½±å“åˆ°äº†çƒä½“çš„æ•ˆæœï¼›</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxImpactAmount; i++) &#123;</span><br><span class="line">  tweens.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">runTween</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> path = trails[i]; <span class="comment">// å½“å‰è·¯å¾„</span></span><br><span class="line">      <span class="keyword">let</span> speed = <span class="number">3</span>;</span><br><span class="line">      <span class="keyword">let</span> len = path.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">array</span>[<span class="number">99</span>];</span><br><span class="line">      <span class="keyword">let</span> dur = len / speed; <span class="comment">// æŒç»­æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> tweenTrail = <span class="keyword">new</span> <span class="variable constant_">TWEEN</span>.<span class="title class_">Tween</span>(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        .<span class="title function_">to</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, dur * <span class="number">1000</span>)</span><br><span class="line">        .<span class="title function_">onUpdate</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          impacts[i].<span class="property">trailRatio</span>.<span class="property">value</span> = val.<span class="property">value</span>; <span class="comment">// é€šè¿‡Tweenæ¥æ§åˆ¶trailRatio/actionRatio</span></span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="keyword">var</span> tweenImpact = <span class="keyword">new</span> <span class="variable constant_">TWEEN</span>.<span class="title class_">Tween</span>(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        .<span class="title function_">to</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randInt</span>(<span class="number">2500</span>, <span class="number">5000</span>))</span><br><span class="line">        .<span class="title function_">onUpdate</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          uniformsSettings.<span class="property">impacts</span>.<span class="property">value</span>[i].<span class="property">impactRatio</span> = val.<span class="property">value</span>; <span class="comment">// é€šè¿‡Tweenæ¥æ§åˆ¶impactRatio</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onComplete</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          impacts[i].<span class="property">prevPosition</span>.<span class="title function_">copy</span>(impacts[i].<span class="property">impactPosition</span>);</span><br><span class="line">          impacts[i].<span class="property">impactPosition</span>.<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>);</span><br><span class="line">          <span class="title function_">setPath</span>(path, impacts[i].<span class="property">prevPosition</span>, impacts[i].<span class="property">impactPosition</span>, <span class="number">1</span>);</span><br><span class="line">          uniformsSettings.<span class="property">impacts</span>.<span class="property">value</span>[i].<span class="property">impactMaxRadius</span> = <span class="number">5</span> * <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloat</span>(<span class="number">0.5</span>, <span class="number">0.75</span>);</span><br><span class="line">          tweens[i].<span class="title function_">runTween</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">      tweenTrail.<span class="title function_">chain</span>(tweenImpact);</span><br><span class="line">      tweenTrail.<span class="title function_">start</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¤</title>
    <link href="https://youxt-njnu.github.io/2024/09/04/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%955/"/>
    <id>https://youxt-njnu.github.io/2024/09/04/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%955/</id>
    <published>2024-09-04T01:40:26.000Z</published>
    <updated>2024-09-04T14:03:37.092Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-patterns"><a href="#è®°å½•-patterns" class="headerlink" title="è®°å½•-patterns"></a>è®°å½•-patterns</h1><p>fract(),å–å°æ•°éƒ¨åˆ†ï¼›</p><p>å®ç°patternçš„ç»˜åˆ¶ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circle(<span class="keyword">in</span> <span class="type">vec2</span> _st, <span class="keyword">in</span> <span class="type">float</span> _radius)&#123;</span><br><span class="line">    <span class="type">vec2</span> l = _st-<span class="type">vec2</span>(<span class="number">0.5</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span>-<span class="built_in">smoothstep</span>(_radius-(_radius*<span class="number">0.01</span>),</span><br><span class="line">                        _radius+(_radius*<span class="number">0.01</span>),</span><br><span class="line">                         <span class="built_in">dot</span>(l,l)*<span class="number">4.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> pattern2d(<span class="keyword">in</span> <span class="type">float</span> x, <span class="keyword">in</span> <span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    st.x *= x;   </span><br><span class="line">    st.y *= y; <span class="comment">// Scale up the space by 3</span></span><br><span class="line">    st = <span class="built_in">fract</span>(st); <span class="comment">// Wrap around 1.0</span></span><br><span class="line">    </span><br><span class="line">    color = <span class="type">vec3</span>(st,<span class="number">0.0</span>);</span><br><span class="line">    color = <span class="type">vec3</span>(circle(st,<span class="number">0.5</span>));</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec3</span> color = pattern2d(<span class="number">2.1</span>,<span class="number">5.</span>);</span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨patternä¸Šï¼Œç»“åˆæ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ï¼Œæ¥ä¸°å¯Œpattern</p><p>åˆ¤æ–­å¥‡å¶è¡Œï¼Œå¯ä»¥é€šè¿‡modå–ä½™ï¼ŒåŠ ä¸Šä¸‰å…ƒè¿ç®—ç¬¦æˆ–stepï¼Œæ¥å½¢æˆ0å’Œ1çš„åˆ¤æ–­ï¼›</p><p>Truchet Tilesçš„ç»˜åˆ¶ï¼Œé€šè¿‡ç»™ä¸åŒçš„åŒºé—´è®¾ç½®indexï¼Œæ ¹æ®indexæ¥åˆ¤æ–­æ—‹è½¬å¤šå°‘åº¦ï¼›</p><h1 id="è®°å½•-random"><a href="#è®°å½•-random" class="headerlink" title="è®°å½•-random"></a>è®°å½•-random</h1><p>rand()å¾—åˆ°çš„ç±»ä¼¼äºfract(sin(â€¦))ï¼Œåœ¨ä¸€ç‰‡éšæœºå†…ï¼Œéƒ¨åˆ†åœ°æ–¹å­˜åœ¨ç€è¾ƒå¤§æ³¢åŠ¨ï¼›</p><p>åˆ©ç”¨fract, sin, dotæ¥å®ç°2Dä¸‹çš„éšæœºï¼›</p><p>å¯ä»¥æ„å»ºgridå½¢æ€ä¸‹çš„éšæœºç°åº¦å¡«å……ï¼›</p><h1 id="è®°å½•-noise"><a href="#è®°å½•-noise" class="headerlink" title="è®°å½•-noise"></a>è®°å½•-noise</h1><p>mix()è¿›è¡Œçº¿æ€§æ’å€¼ï¼›</p><p>åœ¨ä¸€äº› noise çš„åº”ç”¨ä¸­ä½ ä¼šå‘ç°ç¨‹åºå‘˜å–œæ¬¢ç”¨ä»–ä»¬è‡ªå·±çš„ä¸‰æ¬¡å¤šé¡¹å¼å‡½æ•°ï¼ˆfuncï¼‰ï¼Œè€Œä¸æ˜¯ç”¨ smoothstep()ã€‚</p><p>mix(rand(i),rand(i+1.0),func);</p><p>äºŒç»´æ’å€¼ï¼›</p><p>value noiseå’Œgradient noiseçš„åŒºåˆ«ï¼› simplex noise</p><p>ç»“åˆdistance fieldæ¥ç»˜åˆ¶ï¼›</p><p>ä¸‰ç»´æ’å€¼ï¼›</p><h1 id="è®°å½•-Cellular-Noise"><a href="#è®°å½•-Cellular-Noise" class="headerlink" title="è®°å½•-Cellular Noise"></a>è®°å½•-Cellular Noise</h1><p>æ±‚çº¹ç†ç©ºé—´ä¸‹çš„åæ ‡ï¼Œåˆ°æŒ‡å®šåæ ‡çš„æœ€å°è·ç¦»ï¼ŒåŠ åˆ°é¢œè‰²ä¸Šï¼Œè¿›è¡Œå‘ˆç°ï¼›</p><p>ç±»ä¼¼äºVoronoiå›¾ï¼›</p><p>é€šè¿‡éå†å‘¨è¾¹8ä¸ªæ ¼ç½‘ï¼Œè¿›è¡Œç»¼åˆï¼›</p><p>Voronoiç®—æ³•ï¼›</p><p>voro-nose;</p><h1 id="è®°å½•-Fractal-Brownian-Motion-x2F-Fractal-Noise"><a href="#è®°å½•-Fractal-Brownian-Motion-x2F-Fractal-Noise" class="headerlink" title="è®°å½•-Fractal Brownian Motion&#x2F;Fractal Noise"></a>è®°å½•-Fractal Brownian Motion&#x2F;Fractal Noise</h1><p>åˆ©ç”¨sinå‡½æ•°ï¼Œä¿®æ”¹frequencyå’Œamplitude</p><blockquote><p>é€šè¿‡åœ¨å¾ªç¯ï¼ˆå¾ªç¯æ¬¡æ•°ä¸º octavesï¼Œä¸€æ¬¡å¾ªç¯ä¸ºä¸€ä¸ªå…«åº¦ï¼‰ä¸­å åŠ å™ªå£°ï¼Œå¹¶ä»¥ä¸€å®šçš„å€æ•°ï¼ˆlacunarityï¼Œé—´éš™åº¦ï¼‰è¿ç»­å‡é«˜é¢‘ç‡ï¼ŒåŒæ—¶ä»¥ä¸€å®šçš„æ¯”ä¾‹ï¼ˆgainï¼Œå¢ç›Šï¼‰é™ä½ å™ªå£° çš„æŒ¯å¹…ï¼Œæœ€ç»ˆçš„ç»“æœä¼šæœ‰æ›´å¥½çš„ç»†èŠ‚ã€‚è¿™é¡¹æŠ€æœ¯å«â€œåˆ†å½¢å¸ƒæœ—è¿åŠ¨ï¼ˆfractal Brownian Motionï¼‰â€ï¼ˆfBMï¼‰ï¼Œæˆ–è€…â€œåˆ†å½¢å™ªå£°ï¼ˆfractal noiseï¼‰â€</p></blockquote><blockquote><p>è¿™é¡¹æŠ€æœ¯è¢«å¹¿æ³›åœ°åº”ç”¨äºæ„é€ ç¨‹åºåŒ–é£æ™¯ã€‚fBm çš„è‡ªç›¸ä¼¼æ€§èƒ½å¤Ÿå¾ˆå®Œç¾åœ°æ¨¡æ‹Ÿå±±è„‰ï¼Œå› ä¸ºå±±è„‰å½¢æˆè¿‡ç¨‹ä¸­çš„è…èš€å½¢æˆäº†è¿™ç§ä¸åŒå°ºåº¦ä¸Šçš„è‡ªç›¸ä¼¼æ€§</p></blockquote><p>fbmæ„é€ å±±è°·å’Œå±±è„Š â€”â€” turbulenceæ•ˆæœ</p><p>ä½¿ç”¨fbmæ¨¡æ‹Ÿfbm â€”â€” äº‘çš„æ•ˆæœ</p><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p>å›¾åƒå¤„ç†</p><ul><li>çº¹ç†</li><li>å›¾åƒå¤„ç†</li><li>å·ç§¯æ ¸</li><li>æ»¤é•œ</li><li>å…¶ä»–æ•ˆæœ</li></ul><p>æ¨¡æ‹Ÿ</p><ul><li>ä¹’ä¹“</li><li>Conwayç”Ÿå‘½æ¸¸æˆ</li><li>æ°´æ³¢</li><li>æ°´å½©</li><li>ååº”æ‰©æ•£</li></ul><p>3D å›¾å½¢</p><ul><li>ç¯å…‰</li><li>æ³•çº¿è´´å›¾</li><li>å‡¹å‡¸è´´å›¾</li><li>Ray marching</li><li>ç¯å¢ƒè´´å›¾ (spherical and cube)</li><li>æŠ˜å°„å’Œåå°„</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>three+react|åŠ è‡ªå·±æ¨¡å‹</title>
    <link href="https://youxt-njnu.github.io/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/"/>
    <id>https://youxt-njnu.github.io/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/</id>
    <published>2024-09-02T12:37:05.000Z</published>
    <updated>2024-09-03T01:21:02.527Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ·»åŠ è‡ªå·±çš„æ¨¡å‹"><a href="#æ·»åŠ è‡ªå·±çš„æ¨¡å‹" class="headerlink" title="æ·»åŠ è‡ªå·±çš„æ¨¡å‹"></a>æ·»åŠ è‡ªå·±çš„æ¨¡å‹</h1><p>å‰è¨€ï¼Œåœ¨<a href="https://youxt-njnu.github.io/2024/02/25/three%E5%AE%9E%E6%88%981/">è¯¥é¡¹ç›®</a>ä¸­åŠ è‡ªå·±çš„æ¨¡å‹ï¼ŒåŠé—®é¢˜è§£å†³ï¼›</p><p>å…ˆsketchfabä¸Šä¸‹è½½æ¨¡å‹ï¼Œåœ¨unityé‡Œè°ƒæ•´ä½ç½®ã€è´´å›¾ã€æè´¨ã€åŠ¨ç”»ï¼Œå½¢æˆprefabï¼›</p><p>åˆ©ç”¨<a href="https://github.com/Plattar/gltf-exporter?tab=readme-ov-file">æ’ä»¶</a>ï¼Œå¯¼å‡ºä¸ºgltfï¼›â€E:\PersonalCV\models\v1.142.0-unity.unitypackageâ€</p><p>åœ¨vite.config.tsé‡ŒåŠ å…¥<code>assetsInclude: [&#39;**/*.glb&#39;,&#39;**/*.gltf&#39;],</code></p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useGLTF &#125; <span class="keyword">from</span> <span class="string">&quot;@react-three/drei&quot;</span></span><br><span class="line"><span class="keyword">import</span> word2D <span class="keyword">from</span> <span class="string">&#x27;../assets/3d/world_2d/world_2d.gltf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Map2D</span> = (<span class="params">&#123; ...props &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> gltf = <span class="title function_">useGLTF</span>(word2D);</span><br><span class="line">  <span class="keyword">const</span> scene = gltf.<span class="property">scene</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">mesh</span> &#123;<span class="attr">...props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">primitive</span> <span class="attr">object</span>=<span class="string">&#123;scene&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">mesh</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Map2D</span></span><br></pre></td></tr></table></figure><p>æ³•çº¿æ¨¡å‹é‡Œçš„é¡¶ç‚¹ï¼Œxçš„åæ ‡éƒ½æ˜¯æ­£ç¡®æ•°å€¼çš„ç›¸åæ•°ï¼Œä¾‹å¦‚è¿™ä¸ª<a href="https://sketchfab.com/3d-models/cartoon-low-poly-world-map-e87fa1e143f84348a915b7fe1376d957">æ¨¡å‹</a>ä¸‹ä¸‹æ¥å°±è¿™æ ·é—®é¢˜ï¼š</p><ol><li>blenderé‡Œï¼Œå³ä¸Šè§’åˆ‡æ¢object Modeä¸ºEdit Mode</li><li>Aå…¨é€‰æ‰€æœ‰ç‰©ä½“</li><li>Mesh -&gt;Mirror-&gt;X Global</li><li>æŒ‰ <code>Ctrl + A</code> å¹¶é€‰æ‹© <code>All Transforms</code>ï¼Œåº”ç”¨å˜æ¢</li></ol><p><img src="https://s2.loli.net/2024/09/02/mZD8AeFVyHXajiz.png" alt="image.png"></p><p>è¡¥å……ï¼Œé’ˆå¯¹æ³•çº¿åäº†çš„ï¼Œ1.2.4ä¸å˜ï¼Œ3 mesh-&gt;Normals-&gt;Flip</p><p>é’ˆå¯¹è´´å›¾åäº†çš„ï¼Œä¾‹å¦‚è¿™ä¸ªä½œè€…çš„å¾ˆå¤š<a href="https://skfb.ly/orJVW">æ¨¡å‹</a>ï¼ŒPSé‡Œ å›¾åƒ-&gt;å›¾åƒæ—‹è½¬-&gt;å‚ç›´æ—‹è½¬ç”»å¸ƒ&#x2F;æ°´å¹³ç¿»è½¬ç”»å¸ƒ</p><p>æ­¤å¤–ï¼Œåœ¨é¡¹ç›®ä¸­æ‰“åŒ…çš„æ—¶å€™ï¼Œåªä¼šæ‰“åŒ…gltfè¿™ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶é™„å±çš„binå’Œpngæ–‡ä»¶ä¼šè½å•ï¼›<br>è¿™ä¸ªæ—¶å€™æˆ‘é‡‡ç”¨çš„æ˜¯æŠŠgltfç›¸å…³çš„éƒ½æ”¾åœ¨gltfModelsæ–‡ä»¶å¤¹ï¼Œå°†gltfModelsæ–‡ä»¶å¤¹æ”¾åˆ°äº†publicç›®å½•ä¸‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot;&gt;&lt;a href=&quot;#æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot;&gt;&lt;/a&gt;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&lt;/h1&gt;&lt;p&gt;å‰è¨€ï¼Œåœ¨&lt;a href=&quot;https://youxt-njnu.github.io/2024/02/</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…£</title>
    <link href="https://youxt-njnu.github.io/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/"/>
    <id>https://youxt-njnu.github.io/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/</id>
    <published>2024-08-28T07:55:26.000Z</published>
    <updated>2024-09-04T01:40:33.591Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-2D-Matrics"><a href="#è®°å½•-2D-Matrics" class="headerlink" title="è®°å½•-2D Matrics"></a>è®°å½•-2D Matrics</h1><h2 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a>å¹³ç§»</h2><p>åˆ©ç”¨u_time, sin, cosæ„é€ ç§»åŠ¨ï¼ŒåŠ åˆ°stï¼›é€šè¿‡crossæŠŠè¿™ç§ç§»åŠ¨çªå‡ºå‡ºæ¥ï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">// _size=vec2(width,height)</span><br><span class="line">float box(in vec2 _st, in vec2 _size)&#123;</span><br><span class="line">    _size = vec2(0.5) - _size*0.5;</span><br><span class="line">    vec2 uv = smoothstep(_size,</span><br><span class="line">                        _size+vec2(0.01),</span><br><span class="line">                        _st);</span><br><span class="line">    uv *= smoothstep(_size,</span><br><span class="line">                    _size+vec2(0.001),</span><br><span class="line">                    vec2(1.0)-_st);</span><br><span class="line">    return uv.x*uv.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// input: st, crossSize</span><br><span class="line">float cross(in vec2 _st, float _size)&#123;</span><br><span class="line">    return  box(_st, vec2(_size,_size/4.)) +</span><br><span class="line">            box(_st, vec2(_size/4.,_size));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // To move the cross we move the space</span><br><span class="line">    vec2 translate = vec2(cos(u_time),sin(u_time));</span><br><span class="line">    st += translate*0.3;</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.154)); // çªå‡ºtranslateä¸­å¿ƒç‚¹çš„ç§»åŠ¨</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*GfW3IgV8F9bvbg7OijESlA.gif" alt="img"></p><h2 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#define PI 3.14159265359</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">mat2 rotate2d(float _angle)&#123;</span><br><span class="line">    return mat2(cos(_angle),-sin(_angle),</span><br><span class="line">                sin(_angle),cos(_angle));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float box(in vec2 _st, in vec2 _size)&#123;</span><br><span class="line">    _size = vec2(0.5) - _size*0.5;</span><br><span class="line">    vec2 uv = smoothstep(_size,</span><br><span class="line">                        _size+vec2(0.001),</span><br><span class="line">                        _st);</span><br><span class="line">    uv *= smoothstep(_size,</span><br><span class="line">                    _size+vec2(0.001),</span><br><span class="line">                    vec2(1.0)-_st);</span><br><span class="line">    return uv.x*uv.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float cross(in vec2 _st, float _size)&#123;</span><br><span class="line">    return  box(_st, vec2(_size,_size/4.)) +</span><br><span class="line">            box(_st, vec2(_size/4.,_size));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // move space from the center to the vec2(0.0)</span><br><span class="line">    // stä»0~1å˜æˆ-0.5~0.5</span><br><span class="line">    st -= vec2(0.5);</span><br><span class="line">    // rotate the space,å·¦ä¹˜ï¼Œä¼ å…¥è§’åº¦</span><br><span class="line">    st = rotate2d( sin(u_time)*1.*PI ) * st;</span><br><span class="line">    // move it back to the original place</span><br><span class="line">    st += vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.4));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*JaawntaOxPEcTdTQAVGs7A.gif" alt="img"></p><p>ç»„åˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // To move the cross we move the space</span><br><span class="line">    vec2 translate = vec2(cos(u_time),sin(u_time));</span><br><span class="line">    st += translate*0.35;</span><br><span class="line">  </span><br><span class="line">    st-=vec2(0.5);</span><br><span class="line">    st = rotate2d(u_time*PI)* st;</span><br><span class="line">    st+=vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.25));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*oGGqsWHMYC5C5PXEk6NUcg.gif" alt="img"></p><p>ç¼©æ”¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    st -= vec2(0.5);</span><br><span class="line">    st = scale( vec2(sin(u_time)+1.704) ) * st;</span><br><span class="line">    st += vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.2));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºæ•°å­— <code>1.704</code> çš„å½±å“ï¼š</p><ol><li><strong>ç¼©æ”¾è°ƒæ•´</strong> ï¼š</li></ol><ul><li><code>sin(u_time) + 1.704</code>ï¼šè¿™ä¸ªè¡¨è¾¾å¼é€šè¿‡æ·»åŠ  <code>1.704</code> æ¥ç¡®ä¿ <code>sin</code> å‡½æ•°çš„ç»“æœï¼ˆèŒƒå›´åœ¨ [-1, 1]ï¼‰æ°¸è¿œæ˜¯æ­£çš„ï¼Œå› æ­¤ <code>sin(u_time) + 1.704</code> çš„ç»“æœèŒƒå›´å¤§çº¦åœ¨ [0.704, 2.704]ã€‚</li><li>è¿™ä¸ªèŒƒå›´å†³å®šäº† <code>scale</code> å‡½æ•°çš„ç¼©æ”¾ç³»æ•°ï¼Œå½±å“äº† <code>st</code> åæ ‡çš„ä¼¸ç¼©ã€‚å½“ä½ å¢å¤§ <code>1.704</code>ï¼Œå®é™…ä¸Šæ˜¯åœ¨å¢åŠ æœ€å°ç¼©æ”¾ç³»æ•°çš„åŸºçº¿ï¼Œä½¿åŠ¨ç”»å˜å¾—ä¸é‚£ä¹ˆå‰§çƒˆã€‚</li></ul><ol><li><strong>è§†è§‰æ•ˆæœ</strong> ï¼š</li></ol><ul><li>å½“ <code>1.704</code> å¢å¤§æ—¶ï¼Œç¼©æ”¾å˜åŒ–çš„å¹…åº¦å‡å°‘ï¼Œ<strong>å› ä¸º <code>sin(u_time)</code> çš„å˜åŠ¨è¢«ä¸€ä¸ªè¾ƒå¤§çš„å¸¸æ•°ç¨³å®šäº†ã€‚è¿™å¯¼è‡´è§†è§‰æ•ˆæœçš„åŠ¨æ€å˜åŒ–è¾ƒå°‘ï¼Œä»è€Œæ•ˆæœä¸é‚£ä¹ˆæ˜æ˜¾</strong>ã€‚</li></ul><ol><li><strong>å‘¨æœŸæ€§å˜åŒ–</strong> ï¼š</li></ol><ul><li><code>sin</code> å‡½æ•°æ˜¯å‘¨æœŸæ€§çš„ï¼Œå…¶å˜åŒ–å¯¹æ•´ä¸ªåœºæ™¯çš„åŠ¨æ€å˜åŒ–è‡³å…³é‡è¦ã€‚å¢å¤§ <code>1.704</code> çš„å€¼é™ä½äº† <code>sin</code> å‡½æ•°å˜åŒ–å¯¹æ•´ä½“ç¼©æ”¾çš„å½±å“ï¼Œä»è€Œä½¿å¾—æ•ˆæœå˜åŒ–ä¸é‚£ä¹ˆæ˜¾è‘—ã€‚</li></ul><p>st &#x3D; scale( vec2(-0.1) ) * st;å’Œst &#x3D; scale( vec2(0.1) ) * st;çš„åå­—æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒèƒŒæ™¯æ•ˆæœç¿»è½¬äº†(å·¦æ­£å³è´Ÿ)ï¼›st &#x3D; scale( vec2(0.) ) * st; è¿™ä¸ªæ—¶å€™é¡µé¢å…¨ç™½ï¼›</p><p>æ‰€ä»¥ç¼©æ”¾è°ƒæ•´æ•°å­—å¤§äº1æˆ–å°äº-1ä¹‹ä¸‹ï¼Œéƒ½æ˜¯å°å¹…åº¦çš„ç¼©æ”¾ï¼›</p></blockquote><p><img src="https://s2.loli.net/2024/08/28/dw31YJQyHomFI8A.png" alt="image.png"></p><p>é¢œè‰²ç©ºé—´RGBå’ŒYUV</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">// YUV to RGB matrix</span><br><span class="line">mat3 yuv2rgb = mat3(1.0, 0.0, 1.13983,</span><br><span class="line">                    1.0, -0.39465, -0.58060,</span><br><span class="line">                    1.0, 2.03211, 0.0);</span><br><span class="line"></span><br><span class="line">// RGB to YUV matrix</span><br><span class="line">mat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722,</span><br><span class="line">                    -0.09991, -0.33609, 0.43600,</span><br><span class="line">                    0.615, -0.5586, -0.05639);</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // UV values goes from -1 to 1</span><br><span class="line">    // So we need to remap st (0.0 to 1.0)</span><br><span class="line">    st -= 0.5;  // becomes -0.5 to 0.5</span><br><span class="line">    st *= 2.0;  // becomes -1.0 to 1.0</span><br><span class="line"></span><br><span class="line">    // we pass st as the y &amp; z values of</span><br><span class="line">    // a three dimensional vector to be</span><br><span class="line">    // properly multiply by a 3x3 matrix</span><br><span class="line">    color = yuv2rgb * vec3(0., st.x, st.y);</span><br><span class="line">    //color = rgb2yuv * vec3(0., st.x, st.y);</span><br><span class="line">  </span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/28/gLFMGhyQDfzAo2k.png" alt="image.png"></p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p><a href="https://www.pinterest.com/patriciogonzv/hud-fui/">790 HUD &amp; FUI ideas | head up display, user interface, interface design (pinterest.com)</a></p><p><a href="https://www.shadertoy.com/view/4s2SRt">Oblivion radar (shadertoy.com)</a></p><p><a href="https://lygia.xyz/space">LYGIA Shader Library</a></p><p><a href="https://patriciogonzalezvivo.com/">Patricio Gonzalez Vivo</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â… </title>
    <link href="https://youxt-njnu.github.io/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/"/>
    <id>https://youxt-njnu.github.io/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/</id>
    <published>2024-08-28T03:12:05.000Z</published>
    <updated>2024-10-05T12:02:36.629Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="åŸºç¡€ç¯å¢ƒ"><a href="#åŸºç¡€ç¯å¢ƒ" class="headerlink" title="åŸºç¡€ç¯å¢ƒ"></a>åŸºç¡€ç¯å¢ƒ</h1><p>react+vite+three.js+scss</p><p>ç›®å½•ï¼š</p><p>EarthDigital</p><p>â€“images</p><p>â€”-earth.jpg</p><p>â€“index.jsx</p><p>â€“index.scss</p><h1 id="ä»£ç æ¡†æ¶"><a href="#ä»£ç æ¡†æ¶" class="headerlink" title="ä»£ç æ¡†æ¶"></a>ä»£ç æ¡†æ¶</h1><p>å…ˆå¯¼å…¥äº›åŸºæœ¬çš„ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Three</span> <span class="keyword">from</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">OrbitControls</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/controls/OrbitControls&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mergeGeometries &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/utils/BufferGeometryUtils&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> earthImg <span class="keyword">from</span> <span class="string">&#x27;/src/assets/3d/EarthDigital/images/earth.jpg&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æŠŠé¡¹ç›®æ¶å­æ­èµ·æ¥ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">index</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123; &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;earth-digital&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span> <span class="attr">className</span>=<span class="string">&quot;webgl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&quot;hud-header&quot;</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">aside</span> <span class="attr">className</span>=<span class="string">&quot;hud-aside-left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">aside</span> <span class="attr">className</span>=<span class="string">&quot;hud-aside-right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&quot;hud-footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;background&quot;</span>&gt;</span>section<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> index</span><br></pre></td></tr></table></figure><p>ä¸€äº›å‰ç½®å˜é‡å’Œå¸¸è§„å‡½æ•°ï¼šâ€”â€” initThree(), animate(), handleResize()</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> scene = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> camera = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> renderer = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> orbitControls = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> earth = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> canvasRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">initThree</span>();</span><br><span class="line">  <span class="title function_">animate</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p>åœºæ™¯åˆå§‹åŒ–ï¼šâ€”â€” scene, camera, renderer, orbitControls</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initThree</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  scene = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Scene</span>();</span><br><span class="line">  camera = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">45</span>, <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="number">0.1</span>, <span class="number">50</span>);</span><br><span class="line">  camera.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15.5</span>);</span><br><span class="line">  scene.<span class="title function_">add</span>(camera);</span><br><span class="line"></span><br><span class="line">  renderer = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">WebGLRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">canvas</span>: canvasRef.<span class="property">current</span>,</span><br><span class="line">    <span class="attr">antialias</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">alpha</span>: <span class="literal">true</span> <span class="comment">// transparent background</span></span><br><span class="line">  &#125;);</span><br><span class="line">  renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">  renderer.<span class="title function_">setPixelRatio</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>, <span class="number">2</span>));</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line"></span><br><span class="line">  orbitControls = <span class="keyword">new</span> <span class="title class_">OrbitControls</span>(camera, renderer.<span class="property">domElement</span>);</span><br><span class="line">  orbitControls.<span class="property">enableDamping</span> = <span class="literal">true</span>;</span><br><span class="line">  orbitControls.<span class="property">enablePan</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸ŠåŠ¨ç”»ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// æ›´æ–°tween</span></span><br><span class="line">  <span class="comment">// TWEEN.update();</span></span><br><span class="line">  <span class="comment">// æ¨¡å‹åŠ¨ç”»</span></span><br><span class="line">  <span class="comment">// earth.rotation.y += 0.001;</span></span><br><span class="line">  renderer &amp;&amp; scene &amp;&amp; camera &amp;&amp; renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸Šçª—ä½“é€‚åº”ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleResize</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  camera.<span class="property">aspect</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">  camera.<span class="title function_">updateProjectionMatrix</span>();</span><br><span class="line">  renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤§åœ°çƒæ¨¡å‹"><a href="#å¤§åœ°çƒæ¨¡å‹" class="headerlink" title="å¤§åœ°çƒæ¨¡å‹"></a>å¤§åœ°çƒæ¨¡å‹</h1><p>åŠ å…¥ä¸ªå‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">initThree</span>();</span><br><span class="line">  <span class="title function_">createPoints</span>();</span><br><span class="line">  <span class="title function_">animate</span>();</span><br><span class="line"> ......</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h2 id="çƒä½“ä¸Šçš„ç‚¹"><a href="#çƒä½“ä¸Šçš„ç‚¹" class="headerlink" title="çƒä½“ä¸Šçš„ç‚¹"></a>çƒä½“ä¸Šçš„ç‚¹</h2><p>æ·»åŠ å‰ç½®å˜é‡ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">const</span> <span class="title function_">createPoints</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> rad = <span class="number">5</span>; <span class="comment">// çƒä½“åŠå¾„</span></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">75000</span>; <span class="comment">// çƒä½“ä¸Šçš„ç‚¹æ•°é‡</span></span><br><span class="line">    <span class="keyword">let</span> dlong = <span class="title class_">Math</span>.<span class="property">PI</span> * (<span class="number">3</span> - <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">5</span>)); <span class="comment">// ç»åº¦çš„å¢é‡</span></span><br><span class="line">    <span class="keyword">let</span> dz = <span class="number">2</span> / counter; <span class="comment">// çº¬åº¦çš„å¢é‡ï¼Œä¹Ÿå°±æ˜¯zè½´çš„å¢é‡</span></span><br><span class="line">    <span class="keyword">let</span> z = <span class="number">1</span>- dz / <span class="number">2</span>; <span class="comment">// åˆå§‹zå€¼</span></span><br><span class="line">    <span class="keyword">let</span> long = <span class="number">0</span>; <span class="comment">// åˆå§‹ç»åº¦</span></span><br><span class="line">    <span class="keyword">let</span> r = <span class="number">0</span>; <span class="comment">// xyå¹³é¢ä¸Šçš„å¾„å‘åŠå¾„ï¼Œç±»ä¼¼äºx^2+y^2=r^2(å‹¾è‚¡ä¸‰è§’),r^2+z^2=1(çƒåŠå¾„ï¼Œå…ˆ1ï¼Œåç¼©æ”¾è‡³rad)</span></span><br><span class="line">    <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">// ç”¨äºå­˜xyzçš„åæ ‡</span></span><br><span class="line">    <span class="keyword">let</span> sph = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Spherical</span>(); <span class="comment">// æ„å»ºæŠŠä¸Šé¢çš„è½¬æ¢æˆçƒä½“åæ ‡</span></span><br><span class="line">    <span class="keyword">let</span> dummyObj = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Object3D</span>(); <span class="comment">// ç”¨äºè°ƒæ•´åç»­çƒé¢ä¸Šplaneçš„ä½ç½®å’Œæœå‘</span></span><br><span class="line">    <span class="keyword">let</span> geoms = []; <span class="comment">// å­˜å‚¨æ‰€æœ‰çš„plane</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> earthTexture = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(earthImg);</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>ä¸ºå•¥è®¾ç½®ç»åº¦å¢é‡ä¸ºä¸Šå¼å­ï¼Ÿ</p><blockquote><p>ç»åº¦å¢é‡è®¾ç½®ä¸º <code>Math.PI * (3 - Math.sqrt(5))</code> å®é™…ä¸Šæ˜¯åŸºäºé»„é‡‘è§’ï¼Œè¿™ç§æ–¹æ³•å¸¸ç”¨äºåœ¨çƒé¢ä¸Šåˆ†å¸ƒç‚¹ä»¥è¾¾åˆ°å°½å¯èƒ½å‡åŒ€çš„è¦†ç›–ã€‚è¿™ä¸ªå€¼ä¸é»„é‡‘åˆ†å‰²æœ‰å…³ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><strong>é»„é‡‘åˆ†å‰²æ•°</strong> (Ï†) çº¦ä¸º 1.618033988749895ã€‚</li><li>ä½†åœ¨è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>3 - Math.sqrt(5)</code>ï¼Œè®¡ç®—ç»“æœå¤§çº¦ä¸º 0.7639320225002102ï¼Œå®ƒæ˜¯é»„é‡‘åˆ†å‰²æ•°çš„ä¸€ç§æ•°å­¦è½¬æ¢ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œè¿™ä¸ªå€¼å®é™…ä¸Šç­‰äº ( 2 - \phi )ã€‚</li><li>å½“ä½ å°†è¿™ä¸ªå€¼ä¹˜ä»¥ (\pi) ï¼ˆåœ†å‘¨ç‡ï¼‰ï¼Œå¾—åˆ°çš„è§’åº¦æ˜¯é€šè¿‡é»„é‡‘åˆ†å‰²åŸç†è®¡ç®—å¾—æ¥çš„ã€‚è¿™ä¸ªè§’åº¦æœ‰åŠ©äºåœ¨çƒé¢ä¸Šå‡åŒ€åœ°åˆ†å¸ƒç‚¹ï¼Œå› ä¸ºå®ƒé¿å…äº†ç»çº¬çº¿çš„å¯¹é½ï¼Œä»è€Œåœ¨è§†è§‰ä¸Šçœ‹èµ·æ¥æ›´ä¸ºå‡åŒ€ã€‚</li></ul><p>é»„é‡‘è§’æ˜¯é»„é‡‘åˆ†å‰²æ•°åœ¨åœ†ä¸Šçš„åº”ç”¨ã€‚åœ¨è‡ªç„¶ç•Œä¸­ï¼Œä¾‹å¦‚å‘æ—¥è‘µçš„ç§å­æ’åˆ—ã€æ¾æœçš„é³ç‰‡å¸ƒå±€ç­‰ï¼Œéƒ½å¯ä»¥è§åˆ°é»„é‡‘è§’çš„åº”ç”¨ã€‚å®ƒèƒ½å¤Ÿä¼˜åŒ–ç©ºé—´åˆ©ç”¨ç‡å¹¶å‡å°‘é‡å ï¼Œå› æ­¤åœ¨ç®—æ³•ç”Ÿæˆå‡åŒ€åˆ†å¸ƒçš„ç‚¹æ—¶ä¹Ÿç»å¸¸ä½¿ç”¨è¿™ä¸€è§’åº¦ã€‚</p><p>åœ¨çƒé¢åˆ†å¸ƒç‚¹æ—¶ä½¿ç”¨é»„é‡‘è§’å¯ä»¥é¿å…èšç±»å¹¶å°½å¯èƒ½è¦†ç›–æ•´ä¸ªçƒé¢ã€‚è¿™æ ·çš„æ’åˆ—å‡å°‘äº†ä»»ä½•ç»™å®šåŒºåŸŸå†…ç‚¹è¿‡å¤šèšé›†çš„æƒ…å†µï¼Œä»è€Œä½¿ç‚¹çš„åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œè¿™å¯¹äºå¾ˆå¤šæ¶‰åŠåˆ°ç©ºé—´åˆ†å¸ƒä¼˜åŒ–çš„é¢†åŸŸï¼Œå¦‚è®¡ç®—æœºå›¾å½¢å­¦ã€åœ°ç†ä¿¡æ¯ç³»ç»Ÿç­‰æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆzçš„åˆå§‹å€¼è®¾ç½®ä¸ºè¿™ä¸ªlet z &#x3D; 1 - dz &#x2F; 2;ï¼Œè€Œä¸æ˜¯ä»0å¼€å§‹</p><blockquote><p>åœ¨æ„å»ºçƒé¢åˆ†å¸ƒæ—¶ï¼Œå°† <code>z</code> çš„åˆå§‹å€¼è®¾ç½®ä¸º <code>1 - dz / 2</code> è€Œä¸æ˜¯ä» 0 å¼€å§‹çš„åŸå› æ˜¯ä¸ºäº†ç¡®ä¿ç‚¹å‡åŒ€è¦†ç›–æ•´ä¸ªçƒä½“ï¼ŒåŒ…æ‹¬é¡¶éƒ¨å’Œåº•éƒ¨ã€‚å…·ä½“åŸå› åŒ…æ‹¬ï¼š</p><p>é¿å…æç‚¹çš„èšé›†</p><ul><li>çƒä½“çš„é¡¶éƒ¨å’Œåº•éƒ¨ï¼ˆå³æç‚¹ï¼‰æ˜¯ç‰¹æ®Šçš„ä½ç½®ï¼Œå¦‚æœä» z &#x3D; 0 æˆ– z &#x3D; 1 å¼€å§‹ï¼Œå¯èƒ½ä¼šåœ¨è¿™äº›æç‚¹å¤„å¯¼è‡´ç‚¹è¿‡åº¦èšé›†æˆ–åˆ†å¸ƒä¸å‡ã€‚</li><li>é€šè¿‡å°† <code>z</code> çš„åˆå§‹å€¼è®¾ç½®ä¸º <code>1 - dz / 2</code>ï¼Œç›¸å½“äºåœ¨ z è½´ä¸Šå¯¹ç‚¹çš„ä½ç½®è¿›è¡Œäº†å¾®å°çš„åç§»ï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªç‚¹å’Œæœ€åä¸€ä¸ªç‚¹éƒ½ä¸ä¼šç²¾ç¡®åœ°ä½äºçƒä½“çš„æç‚¹ä¸Šï¼Œè€Œæ˜¯ç¨å¾®åç¦»ä¸­å¿ƒã€‚è¿™æœ‰åŠ©äºæ”¹å–„çƒé¢ä¸Šç‚¹çš„åˆ†å¸ƒå‡åŒ€æ€§ã€‚</li></ul><p>ç¡®ä¿è¦†ç›–å…¨çƒ</p><ul><li>ç”±äº <code>dz = 2 / counter</code>ï¼Œè¿™æ„å‘³ç€ z å€¼å°†ä» 1 å¼€å§‹ï¼Œé€æ¸é€’å‡è‡³ -1ï¼Œè¦†ç›–æ•´ä¸ªçƒä½“ã€‚</li><li>åˆå§‹å€¼ <code>1 - dz / 2</code> å®é™…ä¸Šå°†ç¬¬ä¸€ä¸ªç‚¹çš„ z å€¼è®¾ç½®ä¸ºæ¥è¿‘ 1ï¼Œä½†ç•¥ä½äº 1ï¼Œç¡®ä¿ç‚¹ä»çƒä½“çš„é¡¶éƒ¨å¼€å§‹ï¼ŒåŒæ—¶ä¸ä¼šä¸çƒé¡¶é‡åˆã€‚</li></ul><p>å‡åŒ€åˆ†å¸ƒ</p><ul><li>æ­¤æ–¹æ³•ç¡®ä¿äº†ç‚¹åœ¨å‚ç›´æ–¹å‘ä¸Šä¹Ÿæ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚é€šè¿‡ä» <code>1 - dz / 2</code> å¼€å§‹ï¼Œæ¯ä¸ªç‚¹çš„ z å€¼éƒ½æ˜¯å‡åŒ€åœ°åœ¨ z è½´ä¸Šåç§»çš„ï¼Œä»è€Œé¿å…äº†åœ¨æ¥è¿‘æç‚¹åŒºåŸŸçš„ä¸å‡åŒ€å¯†åº¦ã€‚</li></ul></blockquote><p>â¡ï¸ åè¯1 â˜•ï¸</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> maxImpactAmount = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> impacts = [];</span><br><span class="line"><span class="comment">// let trails = [];</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxImpactAmount; i++) &#123;</span><br><span class="line">  impacts.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">impactPosition</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>),</span><br><span class="line">    <span class="attr">impactMaxRadius</span>: <span class="number">5</span> * <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloat</span>(<span class="number">0.5</span>, <span class="number">0.75</span>), <span class="comment">// Three.Math.randFloatä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="attr">impactRatio</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">prevPosition</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>),</span><br><span class="line">    <span class="attr">trailRatio</span>: &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">trailLength</span>: &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// makeTrail(i);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â¡ï¸ åè¯2 â˜•ï¸</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> params = &#123;</span><br><span class="line">  <span class="attr">colors</span>: &#123;<span class="attr">base</span>: <span class="string">&#x27;#f9f002&#x27;</span>, <span class="attr">gradInner</span>: <span class="string">&#x27;#8ae66e&#x27;</span>, <span class="attr">gradOuter</span>: <span class="string">&#x27;#03c03c&#x27;</span>&#125;,</span><br><span class="line">  <span class="attr">reset</span>: <span class="function">()=&gt;</span> &#123; orbitControls.<span class="title function_">reset</span>() &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> uniforms = &#123;</span><br><span class="line">  <span class="attr">impacts</span>: &#123;<span class="attr">value</span>: impacts&#125;,</span><br><span class="line">  <span class="attr">maxSize</span>: &#123;<span class="attr">value</span>: <span class="number">.04</span>&#125;, <span class="comment">// é™†åœ°è‰²å—å¤§å°</span></span><br><span class="line">  <span class="attr">minSize</span>: &#123; <span class="attr">value</span>: <span class="number">.025</span>&#125;, <span class="comment">// æµ·æ´‹è‰²å—å¤§å°</span></span><br><span class="line">  <span class="attr">waveHeight</span>: &#123;<span class="attr">value</span>: <span class="number">.1</span>&#125;, <span class="comment">// å†²å‡»æ³¢é«˜åº¦</span></span><br><span class="line">  <span class="attr">scaling</span>: &#123;<span class="attr">value</span>: <span class="number">1</span>&#125;, <span class="comment">// å†²å‡»æ³¢èŒƒå›´</span></span><br><span class="line">  <span class="attr">gradInner</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">gradInner</span>)&#125;, <span class="comment">// å†²å‡»æ³¢å¾„å‘æ¸å˜å†…ä¾§é¢œè‰²</span></span><br><span class="line">  <span class="attr">gradOuter</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">gradOuter</span>)&#125;, <span class="comment">// å†²å‡»æ³¢å¾„å‘æ¸å˜å¤–ä¾§é¢œè‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ ç‚¹ï¼š</p><ol><li>æ ¹æ®zçš„ä¸åŒï¼Œå¾—åˆ°rï¼Œå†æ±‚å¾—threeåæ ‡ç³»ä¸‹ï¼ˆï¼‰çš„ä¸‰ç»´åæ ‡pï¼Œè½¬æˆçƒä½“phiå’Œthetaçš„åæ ‡sph;</li><li>ä¿®æ”¹longå’Œzï¼Œä¿å­˜pçš„æœå‘å’Œæ¨¡å‹çŸ©é˜µï¼›</li><li>åˆ©ç”¨planeæ„é€ çƒé¢ä¸Šçš„ç‚¹ï¼Œé€šè¿‡æ–°å»ºã€å˜æ¢ã€è®¾ç½®ä¸­å¿ƒç‚¹å’Œuvåæ ‡å®ç°</li><li>planeé‡Œä¼ å…¥äº†ä¸¤ä¸ªå±æ€§ï¼šcenter(æ¯ä¸ªç‚¹å¯¹åº”çš„ä½ç½®), uv(è¿™ä¸ªç‚¹çš„çƒé¢åæ ‡ï¼Œç¼©æ”¾åˆ°0-1èŒƒå›´å†…)</li></ol><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;counter;i++) &#123;</span><br><span class="line">  r = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">1</span> - z * z);</span><br><span class="line">  p.<span class="title function_">set</span>(r * <span class="title class_">Math</span>.<span class="title function_">cos</span>(long), z, -r * <span class="title class_">Math</span>.<span class="title function_">sin</span>(long)).<span class="title function_">multiplyScalar</span>(rad);</span><br><span class="line">  sph.<span class="title function_">setFromVector3</span>(p);</span><br><span class="line">  long = long + dlong;</span><br><span class="line">  z = z - dz;</span><br><span class="line">  dummyObj.<span class="title function_">lookAt</span>(p);</span><br><span class="line">  dummyObj.<span class="title function_">updateMatrix</span>();</span><br><span class="line">  <span class="comment">// æ„å»ºçƒé¢ä¸Šçš„planeï¼ŒåŒæ—¶è®¾ç½®uvåæ ‡</span></span><br><span class="line">  <span class="keyword">let</span> plane = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">PlaneGeometry</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">  plane.<span class="title function_">applyMatrix4</span>(dummyObj.<span class="property">matrix</span>);</span><br><span class="line">  plane.<span class="title function_">translate</span>(p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>);</span><br><span class="line">  <span class="keyword">let</span> centers = [p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>];</span><br><span class="line">  plane.<span class="title function_">setAttribute</span>(<span class="string">&#x27;center&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferAttribute</span>(<span class="keyword">new</span> <span class="title class_">Float32Array</span>(centers), <span class="number">3</span>));</span><br><span class="line">  <span class="keyword">let</span> uv = [(sph+<span class="title class_">Math</span>.<span class="property">PI</span>)/(<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>),<span class="number">1</span>-(sph.<span class="property">theta</span>/<span class="title class_">Math</span>.<span class="property">PI</span>)];</span><br><span class="line">  <span class="keyword">let</span> uvs = [uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>];</span><br><span class="line">  plane.<span class="title function_">setAttribute</span>(<span class="string">&#x27;baseUv&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferAttribute</span>(<span class="keyword">new</span> <span class="title class_">Float32Array</span>(uvs), <span class="number">2</span>));</span><br><span class="line">  geoms.<span class="title function_">push</span>(plane);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çƒæè´¨å’Œæ„é€ "><a href="#çƒæè´¨å’Œæ„é€ " class="headerlink" title="çƒæè´¨å’Œæ„é€ "></a>çƒæè´¨å’Œæ„é€ </h2><p>æ„é€ Mesh</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">let</span> g = <span class="title function_">mergeGeometries</span>(geoms);</span><br><span class="line">  <span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">base</span>),</span><br><span class="line">    <span class="attr">onBeforeCompile</span>: <span class="function"><span class="params">shader</span> =&gt;</span> &#123;</span><br><span class="line">      ......</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  m.<span class="property">defines</span> = &#123;<span class="string">&#x27;USE_UV&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;;</span><br><span class="line">  earth = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Mesh</span>(g, m);</span><br><span class="line">  earth.<span class="property">rotation</span>.<span class="property">y</span> = <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">  <span class="comment">// trails.forEach( t =&gt; earth.add(t));</span></span><br><span class="line">  earth.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, -<span class="number">0.4</span>, <span class="number">0</span>);</span><br><span class="line">  scene.<span class="title function_">add</span>(earth);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çƒä½“æè´¨</p><p>åŸºæœ¬é‡</p><ul><li><strong><code>struct impact</code></strong>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«å†²å‡»ç‚¹æ•°æ®çš„ç»“æ„ï¼ŒåŒ…æ‹¬å†²å‡»çš„ä½ç½®(<code>impactPosition</code>)ã€å†²å‡»çš„æœ€å¤§åŠå¾„(<code>impactMaxRadius</code>)å’Œå†²å‡»æ¯”ä¾‹(<code>impactRatio</code>)ã€‚</li><li><strong><code>uniform impact impacts[]</code></strong>: ä¸€ä¸ªåŒ…å«å¤šä¸ªå†²å‡»ç‚¹çš„æ•°ç»„ã€‚</li><li><strong><code>uniform sampler2D tex</code></strong>: ä¸€ä¸ªäºŒç»´çº¹ç†ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼ˆæ¯”å¦‚å›¾åƒæˆ–è€…æ ¹æ®çº¹ç†ç”Ÿæˆçš„æ•°æ®ï¼‰ã€‚</li><li><strong><code>uniform float maxSize, minSize</code></strong>: æœ€å¤§å’Œæœ€å°å°ºå¯¸ã€‚</li><li><strong><code>uniform float waveHeight</code></strong>: æ³¢é«˜ã€‚</li><li><strong><code>uniform float scaling</code></strong>: ç¼©æ”¾ç³»æ•°ã€‚</li><li><strong><code>attribute vec3 center</code></strong>: é¡¶ç‚¹çš„ä¸­å¿ƒä½ç½®ã€‚</li><li><strong><code>attribute vec2 baseUv</code></strong>: é¡¶ç‚¹çš„åŸºæœ¬UVåæ ‡ã€‚</li><li><strong><code>varying float vFinalStep</code></strong> å’Œ <strong><code>varying float vMap</code></strong>: è¿™äº›æ˜¯ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨çš„å˜é‡ï¼Œç”¨äºè¿›ä¸€æ­¥çš„æ¸²æŸ“è®¡ç®—ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">uniforms</span>.<span class="property">impacts</span> = uniforms.<span class="property">impacts</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">maxSize</span> = uniforms.<span class="property">maxSize</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">minSize</span> = uniforms.<span class="property">minSize</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">waveHeight</span> = uniforms.<span class="property">waveHeight</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">scaling</span> = uniforms.<span class="property">scaling</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">gradInner</span> = uniforms.<span class="property">gradInner</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">gradOuter</span> = uniforms.<span class="property">gradOuter</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">tex</span> = &#123; <span class="attr">value</span>: earthTexture &#125;;</span><br></pre></td></tr></table></figure><p>é¡¶ç‚¹ç€è‰²å™¨é€»è¾‘</p><ul><li><strong>å¾ªç¯éå†æ¯ä¸ªå†²å‡»ç‚¹</strong>ï¼šè®¡ç®—æ¯ä¸ªé¡¶ç‚¹ä¸æ¯ä¸ªå†²å‡»ç‚¹çš„è·ç¦»ï¼Œæ ¹æ®è·ç¦»å’Œå†²å‡»ç‚¹çš„å½±å“èŒƒå›´è®¡ç®—ä¸€ä¸ªå¹³æ»‘çš„æ­¥è¿›(<code>sstep</code>)ã€‚è¿™ä¸ªæ­¥è¿›æ˜¯åŸºäº <code>smoothstep</code> å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå†²å‡»æ³¢çš„è¾¹ç•Œæ›´åŠ å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœã€‚</li><li><strong><code>finalStep</code>çš„è®¡ç®—</strong>ï¼šç´¯åŠ æ‰€æœ‰å†²å‡»ç‚¹å¯¹å½“å‰é¡¶ç‚¹çš„å½±å“ï¼Œä½¿ç”¨ <code>clamp</code> å‡½æ•°ç¡®ä¿å€¼åœ¨0åˆ°1ä¹‹é—´ã€‚</li><li><strong><code>map</code>å˜é‡çš„è®¡ç®—</strong>ï¼šä»çº¹ç†ä¸­è·å–å½“å‰é¡¶ç‚¹çš„greenå€¼ï¼Œç”¨äºå†³å®šé¡¶ç‚¹çš„å°ºå¯¸æ˜¯ <code>maxSize</code> è¿˜æ˜¯ <code>minSize</code>ï¼ŒåŒºåˆ†äº†é™†åœ°å’Œæµ·æ´‹ã€‚</li><li><strong>é¡¶ç‚¹ä½ç½®(<code>transformed</code>)çš„æ›´æ–°</strong>ï¼šæ ¹æ® <code>map</code> çš„ç»“æœå’Œè®¡ç®—å‡ºçš„ <code>finalStep</code> è°ƒæ•´é¡¶ç‚¹ä½ç½®ï¼Œä»¥å®ç°ä½ç½®çš„ç¼©æ”¾å’Œæ³¢çº¹æ•ˆæœã€‚ä½¿ç”¨ <code>mix</code> å‡½æ•°æ ¹æ®å†²å‡»æ³¢å½±å“ç¨‹åº¦åœ¨åŸå§‹å°ºå¯¸å’Œæ”¾å¤§åçš„å°ºå¯¸ä¹‹é—´è¿›è¡Œæ’å€¼ã€‚æ³¢é«˜(<code>waveHeight</code>)å’Œ <code>finalStep</code> çš„ä¹˜ç§¯å†³å®šäº†é¡¶ç‚¹æ²¿æ³•çº¿æ–¹å‘çš„ä½ç§»é‡ã€‚</li><li>è¿™æ®µä»£ç é€šè¿‡è®¡ç®—æ¯ä¸ªé¡¶ç‚¹ä¸ä¸€ç»„å†²å‡»æ³¢çš„ç›¸å¯¹ä½ç½®å’Œå½±å“ï¼ŒåŠ¨æ€è°ƒæ•´é¡¶ç‚¹ä½ç½®å’Œå¤§å°ï¼Œä»è€Œåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºå‡ºåŠ¨æ€çš„æ³¢çº¹æ•ˆæœã€‚è¿™ç§ç±»å‹çš„ç€è‰²å™¨ç¼–ç¨‹å…è®¸å¼€å‘è€…åˆ›å»ºå¤æ‚å’ŒåŠ¨æ€çš„è§†è§‰æ•ˆæœï¼Œç”¨äºæ¸¸æˆå¼€å‘ã€è§†è§‰è‰ºæœ¯å’Œæ¨¡æ‹Ÿç­‰é¢†åŸŸã€‚</li><li>è¡¥å……ï¼š<code>baseUv</code> åœ¨ Three.js ä¸­æ˜¯ä½œä¸ºæ¯ä¸ªé¡¶ç‚¹çš„äºŒç»´çº¹ç†åæ ‡ï¼ˆ<code>vec2</code>ï¼‰è¢«å¤„ç†çš„ã€‚è¿™äº›åæ ‡æ˜¯ä½œä¸ºé¡¶ç‚¹å±æ€§ä¸Šä¼ åˆ° GPU çš„ï¼Œåç»­åœ¨ GLSL ç€è‰²å™¨ä¸­å¯ä»¥ç›´æ¥è®¿é—®ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">vertexShader</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    struct impact &#123;</span></span><br><span class="line"><span class="string">      vec3 impactPosition;</span></span><br><span class="line"><span class="string">      float impactMaxRadius;</span></span><br><span class="line"><span class="string">      float impactRatio;</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    uniform impact impacts[<span class="subst">$&#123;maxImpactAmount&#125;</span>];</span></span><br><span class="line"><span class="string">    uniform sampler2D tex;</span></span><br><span class="line"><span class="string">    uniform float maxSize;</span></span><br><span class="line"><span class="string">    uniform float minSize;</span></span><br><span class="line"><span class="string">    uniform float waveHeight;</span></span><br><span class="line"><span class="string">    uniform float scaling;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    attribute vec3 center;</span></span><br><span class="line"><span class="string">    attribute vec2 baseUv;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    varying float vFinalStep;</span></span><br><span class="line"><span class="string">    varying float vMap;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;shader.vertexShader&#125;</span></span></span><br><span class="line"><span class="string">  `</span>.<span class="title function_">replace</span>(</span><br><span class="line">    <span class="string">`#include &lt;begin_vertex&gt;`</span>,</span><br><span class="line">    <span class="string">`#include &lt;begin_vertex&gt;</span></span><br><span class="line"><span class="string">    float finalStep = 0.0;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; <span class="subst">$&#123;maxImpactAmount&#125;</span>;i++)&#123;</span></span><br><span class="line"><span class="string">      float dist = distance(center, impacts[i].impactPosition);</span></span><br><span class="line"><span class="string">      float curRadius = impacts[i].impactMaxRadius * impacts[i].impactRatio;</span></span><br><span class="line"><span class="string">      float sstep = smoothstep(0., curRadius, dist) - smoothstep(curRadius - ( 0.25 * impacts[i].impactRatio ), curRadius, dist);</span></span><br><span class="line"><span class="string">      sstep *= 1. - impacts[i].impactRatio;</span></span><br><span class="line"><span class="string">      finalStep += sstep;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    finalStep = clamp(finalStep, 0., 1.);</span></span><br><span class="line"><span class="string">    vFinalStep = finalStep;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    float map = texture(tex, baseUv).g;</span></span><br><span class="line"><span class="string">    vMap = map;</span></span><br><span class="line"><span class="string">    float pSize = map &lt; 0.5 ? maxSize : minSize;</span></span><br><span class="line"><span class="string">    float scale = scaling;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    transformed = (position - center) * pSize * mix(1., scale * 1.25, finalStep) + center; // scale on wave</span></span><br><span class="line"><span class="string">    transformed += normal * finalStep * waveHeight; // lift on wave</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure><p>ç‰‡å…ƒç€è‰²å™¨é€»è¾‘</p><ul><li>ä¼ å…¥å¯¹é€ä¸ªç‚¹èµ·ä½œç”¨çš„å†²å‡»å¼ºåº¦å’Œé¡¶ç‚¹çº¹ç†çš„gå€¼ï¼›</li><li><strong>å½¢çŠ¶å¤„ç†</strong> :</li><li>è®¡ç®—ä»¥å±å¹•ä¸­å¿ƒä¸ºåŸç‚¹çš„ UV åæ ‡ <code>hUv</code>ã€‚ï¼ˆvUvæ˜¯ä¸€ä¸ªä»0åˆ°1çš„äºŒç»´å‘é‡ï¼Œè¡¨ç¤ºçº¹ç†åæ ‡æˆ–é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’ç»™ç‰‡æ®µç€è‰²å™¨çš„é¡¶ç‚¹ä½ç½®ï¼‰</li><li>N&#x3D;8å¸¸ç”¨äºè¡¨ç¤ºæŸç§å›¾å½¢æˆ–æ¨¡å¼ä¸­é‡å¤å…ƒç´ çš„æ•°é‡</li><li><code>a</code> æ˜¯è®¡ç®—å¾—åˆ°çš„å‘é‡ <code>hUv</code>çš„è§’åº¦ï¼ˆç›¸å¯¹äºåŸç‚¹ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯åæ­£åˆ‡å‡½æ•° <code>atan</code>ï¼Œå®ƒè¿”å›ä»xè½´åˆ°å‘é‡çš„è§’åº¦ã€‚</li><li><code>r</code> æ˜¯æ¯ä¸ªæ‰‡åŒºçš„è§’åº¦èŒƒå›´ï¼Œè®¡ç®—ä¸º <code>2Ï€</code> é™¤ä»¥æ‰‡åŒºæ•°é‡ <code>N</code>ã€‚</li><li><code>d</code> æ˜¯å½“å‰ç‚¹åˆ°æœ€è¿‘æ‰‡åŒºè¾¹ç•Œçš„è·ç¦»ã€‚</li><li><code>f</code> æ˜¯æ‰‡åŒºä¸­å¿ƒåˆ°è¾¹ç•Œçš„è·ç¦»ã€‚</li><li>å¦‚æœ <code>d</code> å¤§äº <code>f</code>ï¼Œåˆ™ä¸¢å¼ƒè¯¥ç‰‡å…ƒï¼ˆ<code>discard</code>ï¼‰ï¼Œåªæœ‰è·ç¦»æ‰‡åŒºä¸­å¿ƒéå¸¸è¿‘çš„åƒç´ æ‰èƒ½é€šè¿‡æµ‹è¯•ï¼Œè¿™æ ·å¯ä»¥åˆ›å»ºæ›´åŠ é”åˆ©å’Œæ˜æ˜¾çš„è¾¹ç•Œï¼›</li><li>è¿™æœ‰åŠ©äºåˆ›å»ºå…·æœ‰ N è¾¹å½¢å½¢çŠ¶çš„æ•ˆæœã€‚</li><li><strong>é¢œè‰²å’Œæ¸å˜å¤„ç†</strong>:</li><li><code>grad</code> æ˜¯å†…å¤–æ¸å˜é¢œè‰²çš„æ··åˆï¼ŒåŸºäº <code>d / f</code> çš„å€¼è¿›è¡Œæ’å€¼ã€‚</li><li><code>diffuseMap</code> æ˜¯æ ¹æ® <code>vMap</code> è°ƒæ•´çš„æ¼«åå°„é¢œè‰²ã€‚ åŒºåˆ†äº†é™†åœ°å’Œæµ·æ´‹</li><li><code>col</code> æ˜¯æ¼«åå°„é¢œè‰²å’Œæ¸å˜é¢œè‰²çš„æœ€ç»ˆæ··åˆï¼Œå…¶ä¸­ä½¿ç”¨äº† <code>vFinalStep</code> è¿›è¡Œæ’å€¼ã€‚</li><li>ä½¿ç”¨æœ€ç»ˆè®¡ç®—å‡ºçš„é¢œè‰² <code>col</code> å’ŒåŸå§‹çš„ä¸é€æ˜åº¦ <code>opacity</code> åˆ›å»ºæ–°çš„ <code>vec4 diffuseColor</code>ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">fragmentShader</span> = <span class="string">`</span></span><br><span class="line"><span class="string">            uniform vec3 gradInner;</span></span><br><span class="line"><span class="string">            uniform vec3 gradOuter;</span></span><br><span class="line"><span class="string">            varying float vFinalStep;</span></span><br><span class="line"><span class="string">            varying float vMap;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;shader.fragmentShader&#125;</span></span></span><br><span class="line"><span class="string">            `</span>.<span class="title function_">replace</span>(</span><br><span class="line">            <span class="string">`vec4 diffuseColor = vec4( diffuse, opacity );`</span>,</span><br><span class="line">            <span class="string">`</span></span><br><span class="line"><span class="string">            // shaping the point, pretty much from The Book of Shaders</span></span><br><span class="line"><span class="string">            vec2 hUv = (vUv - 0.5);</span></span><br><span class="line"><span class="string">            int N = 8;</span></span><br><span class="line"><span class="string">            float a = atan(hUv.x,hUv.y);</span></span><br><span class="line"><span class="string">            float r = PI2/float(N);</span></span><br><span class="line"><span class="string">            float d = cos(floor(.5+a/r)*r-a)*length(hUv);</span></span><br><span class="line"><span class="string">            float f = cos(PI / float(N)) * 0.5;</span></span><br><span class="line"><span class="string">            if (d &gt; f) discard;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            vec3 grad = mix(gradInner, gradOuter, clamp( d / f, 0., 1.)); // gradient</span></span><br><span class="line"><span class="string">            vec3 diffuseMap = diffuse * ((vMap &gt; 0.5) ? 0.5 : 1.);</span></span><br><span class="line"><span class="string">            vec3 col = mix(diffuseMap, grad, vFinalStep); // color on wave</span></span><br><span class="line"><span class="string">            //if (!gl_FrontFacing) col *= 0.25; // moderate the color on backside</span></span><br><span class="line"><span class="string">            vec4 diffuseColor = vec4( col , opacity );</span></span><br><span class="line"><span class="string">            `</span>);</span><br></pre></td></tr></table></figure><h3 id="è¡¥å……-replaceæ–¹æ³•"><a href="#è¡¥å……-replaceæ–¹æ³•" class="headerlink" title="è¡¥å…… | replaceæ–¹æ³•"></a>è¡¥å…… | replaceæ–¹æ³•</h3><p>ä¸Šè¿°vertex shaderä»£ç replaceå‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shader.vertexShader:  #include &lt;common&gt;</span><br><span class="line">#include &lt;batching_pars_vertex&gt;</span><br><span class="line">#include &lt;uv_pars_vertex&gt;</span><br><span class="line">#include &lt;envmap_pars_vertex&gt;</span><br><span class="line">#include &lt;color_pars_vertex&gt;</span><br><span class="line">#include &lt;fog_pars_vertex&gt;</span><br><span class="line">#include &lt;morphtarget_pars_vertex&gt;</span><br><span class="line">#include &lt;skinning_pars_vertex&gt;</span><br><span class="line">#include &lt;logdepthbuf_pars_vertex&gt;</span><br><span class="line">#include &lt;clipping_planes_pars_vertex&gt;</span><br><span class="line">void main() &#123;</span><br><span class="line">#include &lt;uv_vertex&gt;</span><br><span class="line">#include &lt;color_vertex&gt;</span><br><span class="line">#include &lt;morphinstance_vertex&gt;</span><br><span class="line">#include &lt;morphcolor_vertex&gt;</span><br><span class="line">#include &lt;batching_vertex&gt;</span><br><span class="line">#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )</span><br><span class="line">#include &lt;beginnormal_vertex&gt;</span><br><span class="line">#include &lt;morphnormal_vertex&gt;</span><br><span class="line">#include &lt;skinbase_vertex&gt;</span><br><span class="line">#include &lt;skinnormal_vertex&gt;</span><br><span class="line">#include &lt;defaultnormal_vertex&gt;</span><br><span class="line">#endif</span><br><span class="line">#include &lt;begin_vertex&gt;</span><br><span class="line">#include &lt;morphtarget_vertex&gt;</span><br><span class="line">#include &lt;skinning_vertex&gt;</span><br><span class="line">#include &lt;project_vertex&gt;</span><br><span class="line">#include &lt;logdepthbuf_vertex&gt;</span><br><span class="line">#include &lt;clipping_planes_vertex&gt;</span><br><span class="line">#include &lt;worldpos_vertex&gt;</span><br><span class="line">#include &lt;envmap_vertex&gt;</span><br><span class="line">#include &lt;fog_vertex&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°fragment shaderä»£ç replaceå‰ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">shader.fragmentShader:  <span class="keyword">uniform</span> <span class="type">vec3</span> diffuse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> opacity;</span><br><span class="line"><span class="meta">#ifndef FLAT_SHADED</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec3</span> vNormal;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"><span class="meta">#include &lt;common&gt;</span></span><br><span class="line"><span class="meta">#include &lt;dithering_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;color_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;uv_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;map_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphamap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphatest_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphahash_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;aomap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;lightmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;envmap_common_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;envmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;fog_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;specularmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;logdepthbuf_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;clipping_planes_pars_fragment&gt;</span></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec4</span> diffuseColor = <span class="type">vec4</span>( diffuse, opacity );</span><br><span class="line"><span class="meta">#include &lt;clipping_planes_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;logdepthbuf_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;map_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;color_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphamap_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphatest_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphahash_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;specularmap_fragment&gt;</span></span><br><span class="line">ReflectedLight reflectedLight = ReflectedLight( <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ) );</span><br><span class="line"><span class="meta">#ifdef USE_LIGHTMAP</span></span><br><span class="line"><span class="type">vec4</span> lightMapTexel = <span class="built_in">texture2D</span>( lightMap, vLightMapUv );</span><br><span class="line">reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;</span><br><span class="line"><span class="meta">#else</span></span><br><span class="line">reflectedLight.indirectDiffuse += <span class="type">vec3</span>( <span class="number">1.0</span> );</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"><span class="meta">#include &lt;aomap_fragment&gt;</span></span><br><span class="line">reflectedLight.indirectDiffuse *= diffuseColor.rgb;</span><br><span class="line"><span class="type">vec3</span> outgoingLight = reflectedLight.indirectDiffuse;</span><br><span class="line"><span class="meta">#include &lt;envmap_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;opaque_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;tonemapping_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;colorspace_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;fog_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;premultiplied_alpha_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;dithering_fragment&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ WebGL æˆ– OpenGL çš„ç€è‰²å™¨ç¼–ç¨‹ä¸­ï¼Œä½¿ç”¨ <code>.replace</code> æ–¹æ³•æ¥ä¿®æ”¹ç€è‰²å™¨ä»£ç æ˜¯ä¸€ç§å¸¸è§çš„æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚çš„ã€å¯é…ç½®çš„ç€è‰²å™¨ç³»ç»Ÿæ—¶ã€‚è¿™ç§æ–¹æ³•æä¾›äº†çµæ´»æ€§å’ŒåŠ¨æ€ç”Ÿæˆæˆ–è°ƒæ•´ç€è‰²å™¨ä»£ç çš„èƒ½åŠ›ã€‚è¿™é‡Œçš„ <code>.replace</code> æ–¹æ³•çš„ä½¿ç”¨å…·ä½“æœ‰ä»¥ä¸‹å‡ ä¸ªç›®çš„å’Œä¼˜ç‚¹ï¼š</p><ol><li><strong>åŠ¨æ€å†…å®¹æ³¨å…¥</strong></li></ol><p>é€šè¿‡ <code>.replace</code>ï¼Œå¯ä»¥æ ¹æ®ç¨‹åºçš„éœ€æ±‚æˆ–é…ç½®åŠ¨æ€åœ°æ’å…¥ç‰¹å®šçš„ä»£ç ç‰‡æ®µã€‚åœ¨ç€è‰²å™¨ä¸­ï¼Œè¿™ç§èƒ½åŠ›ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ä¸æ”¹å˜åŸå§‹ç€è‰²å™¨ä»£ç æ–‡ä»¶çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®ä¸åŒçš„æ¸²æŸ“éœ€æ±‚ä¿®æ”¹ç€è‰²å™¨è¡Œä¸ºã€‚</p><ol start="2"><li><strong>æ¡ä»¶ç¼–è¯‘</strong></li></ol><p>åœ¨å¤šä¸ªä¸åŒçš„æ¸²æŸ“åœºæ™¯ä¸‹ï¼Œå¯èƒ½éœ€è¦ç€è‰²å™¨è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚ä½¿ç”¨ <code>.replace</code> å¯ä»¥æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶é€‰æ‹©æ€§åœ°æ·»åŠ æˆ–ä¿®æ”¹ç€è‰²å™¨ä»£ç ï¼Œä»è€Œå®ç°æ¡ä»¶ç¼–è¯‘çš„æ•ˆæœã€‚æ¯”å¦‚ï¼Œæ ¹æ®å¯¹è±¡æ˜¯å¦å—åˆ°ç‰¹å®šå½±å“ï¼Œå†³å®šæ˜¯å¦å¯ç”¨æŸäº›è®¡ç®—ã€‚</p><ol start="3"><li><strong>é¿å…ç¡¬ç¼–ç </strong></li></ol><p>ç¡¬ç¼–ç åœ¨ç€è‰²å™¨ä¸­æ˜¯ä¸çµæ´»çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠåˆ°å¾ªç¯æ¬¡æ•°æˆ–æ•°ç»„å¤§å°ç­‰å‚æ•°æ—¶ã€‚é€šè¿‡ <code>.replace</code> æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ç€è‰²å™¨ä»£ç è¿è¡Œå‰æ’å…¥è¿™äº›å€¼ï¼Œä½¿ç€è‰²å™¨ä»£ç æ›´åŠ é€šç”¨å’Œå¯é…ç½®ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡æ’å…¥ <code>$&#123;maxImpactAmount&#125;</code> æ¥ç¡®å®šå¾ªç¯çš„æ¬¡æ•°ï¼Œè¿™ä½¿å¾—åŒä¸€ä»½ç€è‰²å™¨ä»£ç å¯ä»¥é€‚åº”ä¸åŒæ•°é‡çš„å†²å‡»ç‚¹ã€‚</p><ol start="4"><li><strong>æ¨¡å—åŒ–å’Œä»£ç å¤ç”¨</strong></li></ol><p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½éœ€è¦åœ¨å¤šä¸ªç€è‰²å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨ä»£ç ç‰‡æ®µã€‚é€šè¿‡ä½¿ç”¨ <code>.replace</code> æ–¹æ³•ï¼Œå¯ä»¥ä»å¤–éƒ¨æ’å…¥å…±äº«çš„ä»£ç ç‰‡æ®µæˆ–åœ¨å¤šä¸ªç€è‰²å™¨ä¹‹é—´å¤ç”¨ä»£ç ï¼Œæé«˜ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>åœ¨ä½ çš„ç¤ºä¾‹ä¸­ï¼Œ<code>.replace</code> æ–¹æ³•è¢«ç”¨æ¥æ³¨å…¥è®¡ç®—é¡¶ç‚¹æœ€ç»ˆä½ç½®çš„é€»è¾‘åˆ°ä¸€ä¸ªåŸºæœ¬çš„é¡¶ç‚¹ç€è‰²å™¨æ¨¡æ¿ä¸­ã€‚è¿™ç§æ–¹å¼å¯ä»¥ä½¿ä¸»ç€è‰²å™¨ä»£ç ä¿æŒç›¸å¯¹ä¸å˜ï¼Œè€Œç‰¹å®šçš„è®¡ç®—å’Œè¡Œä¸ºå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°æ³¨å…¥ï¼Œå¦‚å¤„ç†ä¸åŒæ•°é‡çš„å†²å‡»ç‚¹æˆ–åº”ç”¨ä¸åŒçš„åŠ¨æ€æ•ˆæœã€‚</p><h3 id="è¡¥å……-defineçš„ä½œç”¨"><a href="#è¡¥å……-defineçš„ä½œç”¨" class="headerlink" title="è¡¥å…… | defineçš„ä½œç”¨"></a>è¡¥å…… | defineçš„ä½œç”¨</h3><p>åœ¨ Three.js ä¸­ï¼Œ<code>defines</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ç€è‰²å™¨çš„é¢„å¤„ç†å®ã€‚è¿™äº›å®æ˜¯ç€è‰²å™¨ä»£ç ä¸­çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œå¯ä»¥åœ¨ç¼–è¯‘ç€è‰²å™¨ä¹‹å‰è¿›è¡Œè®¾ç½®ã€‚é€šè¿‡è®¾ç½®è¿™äº›å®ï¼Œä½ å¯ä»¥å¯ç”¨æˆ–ä¿®æ”¹ç€è‰²å™¨çš„æŸäº›éƒ¨åˆ†ï¼Œä»è€Œè°ƒæ•´å…¶è¡Œä¸ºæˆ–æ€§èƒ½ï¼Œè€Œæ— éœ€æ”¹åŠ¨ç€è‰²å™¨çš„ä¸»ä½“ä»£ç ã€‚è¿™ä¸ºçµæ´»æ€§å’Œé‡ç”¨æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p><p>ä½¿ç”¨åœºæ™¯</p><ol><li><strong>æ¡ä»¶ç¼–è¯‘</strong>ï¼š<code>defines</code> å…è®¸ä½ æ ¹æ®éœ€æ±‚å¯ç”¨æˆ–ç¦ç”¨ç€è‰²å™¨ä»£ç ä¸­çš„ç‰¹å®šéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªç‰¹æ€§ï¼ˆå¦‚çº¹ç†æ˜ å°„ï¼‰åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code>defines</code> æ¥æ§åˆ¶è¿™ä¸€éƒ¨åˆ†ä»£ç çš„ç¼–è¯‘ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡ç¦ç”¨ä¸éœ€è¦çš„ç‰¹æ€§ï¼Œå¯ä»¥å‡å°‘ç€è‰²å™¨çš„å¤æ‚æ€§ï¼Œä»è€Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä½ çš„æè´¨ä¸éœ€è¦å¤„ç†UVåæ ‡ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç›¸åº”çš„å®æ¥é˜»æ­¢ç¼–è¯‘è¿™éƒ¨åˆ†ä»£ç ã€‚</li></ol><p>åœ¨ä»£ç ä¸­ï¼Œ<code>m.defines = &#123;&#39;USE_UV&#39;: &#39;&#39;&#125;;</code>  è¿™è¡Œä»£ç è®¾ç½®äº†ä¸€ä¸ªåä¸º <code>USE_UV</code> çš„å®ï¼Œè™½ç„¶åé¢ç´§è·Ÿç€çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œä½†å®ƒçš„å­˜åœ¨è¶³ä»¥è®©ç€è‰²å™¨ç¼–è¯‘å™¨åœ¨é¢„å¤„ç†æ—¶è®¤ä¸º <code>USE_UV</code> è¢«å®šä¹‰äº†ã€‚åœ¨ç€è‰²å™¨ä»£ç ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é¢„å¤„ç†æŒ‡ä»¤æ¥æ£€æŸ¥è¿™ä¸ªå®ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef USE_UV</span></span><br><span class="line">  <span class="comment">// æ‰§è¡Œä½¿ç”¨ UV åæ ‡çš„ä»£ç </span></span><br><span class="line"><span class="meta">#else</span></span><br><span class="line">  <span class="comment">// æ‰§è¡Œä¸ä½¿ç”¨ UV åæ ‡çš„ä»£ç </span></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¦‚æœ <code>m.defines</code> åŒ…å« <code>USE_UV</code>ï¼Œåˆ™ç€è‰²å™¨ä¸­ä¾èµ– UV åæ ‡çš„éƒ¨åˆ†ä¼šè¢«ç¼–è¯‘å’Œæ‰§è¡Œï¼›å¦‚æœæ²¡æœ‰å®šä¹‰ <code>USE_UV</code>ï¼Œåˆ™ç›¸å…³ä»£ç å—ä¸ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œå¯èƒ½å‡å°‘è®¡ç®—è´Ÿæ‹…ã€‚è¿™ç§æŠ€æœ¯éå¸¸é€‚åˆåœ¨è¿è¡Œæ—¶æ ¹æ®ä¸åŒçš„æè´¨å±æ€§æˆ–å›¾å½¢è®¾ç½®è°ƒæ•´ç€è‰²å™¨è¡Œä¸ºï¼Œæ˜¯å›¾å½¢ç¼–ç¨‹ä¸­ä¸€ç§å¸¸è§ä¸”å¼ºå¤§çš„ä¼˜åŒ–æ‰‹æ®µã€‚</p><h3 id="è¡¥å……-å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡"><a href="#è¡¥å……-å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡" class="headerlink" title="è¡¥å…… | å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡"></a>è¡¥å…… | å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡</h3><p>åœ¨ä¸Šè¿°æä¾›çš„ Three.js çš„é»˜è®¤ç€è‰²å™¨ä»£ç ä¸­ï¼Œ<code>vUv</code> å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨ç¡®å®å­˜åœ¨ï¼Œä½†å®ƒæ˜¯é€šè¿‡ Three.js çš„æ ‡å‡†ç€è‰²å™¨ç³»ç»Ÿå†…éƒ¨çš„ä»£ç ç‰‡æ®µè¿›è¡Œçš„ã€‚è¿™é‡Œæ˜¯å…·ä½“çš„åˆ†æï¼š</p><p>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä»£ç ä¸­ï¼Œæœ‰å¦‚ä¸‹å‡ è¡Œä»£ç æ˜¯å…³é”®ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#include &lt;uv_pars_vertex&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">#include &lt;uv_vertex&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong><code>&lt;uv_pars_vertex&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µé€šå¸¸åŒ…å«äº†ä¸ UV ç›¸å…³çš„å‚æ•°å®šä¹‰ï¼ŒåŒ…æ‹¬å¯¹ <code>vUv</code> çš„å£°æ˜ã€‚è¿™ä¸ªç‰‡æ®µçš„ä½œç”¨æ˜¯å‡†å¤‡æ‰€æœ‰å¿…è¦çš„ UV ç›¸å…³æ•°æ®ï¼Œä»¥ä¾¿åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ã€‚</li><li><strong><code>&lt;uv_vertex&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µè´Ÿè´£å°† UV æ•°æ®ä»é¡¶ç‚¹å±æ€§ä¼ é€’åˆ° <code>vUv</code> å˜é‡ä¸­ã€‚è¿™é€šå¸¸åŒ…æ‹¬ä»é¡¶ç‚¹æ•°æ®ä¸­è¯»å– UV åæ ‡ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ <code>vUv</code>ã€‚</li></ul><p>åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œç›¸å…³çš„ä»£ç ç‰‡æ®µåŒ…æ‹¬ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#include &lt;uv_pars_fragment&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li><strong><code>&lt;uv_pars_fragment&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µåŒ…æ‹¬å¯¹ <code>vUv</code> çš„ä½¿ç”¨ï¼Œå®ƒä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’çš„æ•°æ®ä¸­æ¥æ”¶ UV åæ ‡ã€‚è¿™åœ¨å¤„ç†çº¹ç†æ˜ å°„å’Œå…¶ä»–åŸºäº UV çš„æ“ä½œæ—¶éå¸¸å…³é”®ã€‚</li></ul><p>åœ¨ä½ çš„ä»£ç ä¸­ï¼Œ<code>vUv</code> çš„å¤„ç†æ˜¯é€šè¿‡æ ‡å‡†çš„ Three.js ç€è‰²å™¨ä»£ç ç‰‡æ®µé—´æ¥å®ç°çš„ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ä½ æ— éœ€ç›´æ¥åœ¨ä½ çš„ç€è‰²å™¨ä»£ç ä¸­å£°æ˜å’Œå®šä¹‰ <code>vUv</code>ï¼ŒThree.js å·²ç»åœ¨å…¶ç€è‰²å™¨åº“ä¸­å¤„ç†äº†æ‰€æœ‰è¿™äº›æ“ä½œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/"/>
    <id>https://youxt-njnu.github.io/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/</id>
    <published>2024-08-23T06:33:26.000Z</published>
    <updated>2024-08-27T06:07:37.456Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-shapes"><a href="#è®°å½•-shapes" class="headerlink" title="è®°å½•-shapes"></a>è®°å½•-shapes</h1><p>step(float edge, float x)ç±»ä¼¼äºif</p><p>vec3(float * float) ç›¸å½“äºæŠŠä¸¤ä¸ªè¿›è¡Œand</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uniform vec2 u_resolution;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // Each result will return 1.0 (white) or 0.0 (black).</span><br><span class="line">    float left = step(0.1,st.x);   // Similar to ( X greater than 0.1 )</span><br><span class="line">    float bottom = step(0.1,st.y); // Similar to ( Y greater than 0.1 )</span><br><span class="line"></span><br><span class="line">    // The multiplication of left*bottom will be similar to the logical AND.</span><br><span class="line">    color = vec3( left * bottom );</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŠŠä½¿ç”¨è¿™ä¸¤ä¸ªleft, bottomï¼Œç®€åŒ–ä¸ºä½¿ç”¨1ä¸ª</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec2 bl = step(vec2(0.1),st)</span><br></pre></td></tr></table></figure><p>åº”ç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // bottom-left</span><br><span class="line">    vec2 bl = step(vec2(0.1),st);</span><br><span class="line">    float pct = bl.x * bl.y;</span><br><span class="line"></span><br><span class="line">    // top-right</span><br><span class="line">    // vec2 tr = step(vec2(0.1),1.0-st);</span><br><span class="line">    // pct *= tr.x * tr.y;</span><br><span class="line"></span><br><span class="line">    color = vec3(pct);</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/23/1IsKBDcLtamyz4v.png" alt="image.png"></p><p>smoothstep()çš„å½¢çŠ¶æ•ˆæœï¼šè¾¹ç¼˜æ›´å¹³ç¼“</p><p>floor()çš„å½¢çŠ¶æ•ˆæœï¼šé˜¶æ¢¯å¼</p><p><img src="https://s2.loli.net/2024/08/23/lWRELpChy643jBM.png" alt="image.png"></p><p>ç»˜åˆ¶åœ†ï¼š</p><ul><li>å‚è€ƒåœ†è§„çš„æ€è·¯ï¼Œä»¥stä¸­å¿ƒç‚¹ä¸ºåœ†å¿ƒï¼Œåˆ¤æ–­stèŒƒå›´å†…çš„æ¯ä¸ªç‚¹ï¼Œæ˜¯å¦åœ¨åœ†çš„èŒƒå›´å†…ï¼›â€”â€” distance(), sqrt(), length()</li><li>é€šè¿‡stepåˆ‡å‡ºæ¥</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line"> <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">float</span> pct = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a. The DISTANCE from the pixel to the center</span></span><br><span class="line">    pct = <span class="built_in">distance</span>(st,<span class="type">vec2</span>(<span class="number">0.5</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// b. The LENGTH of the vector</span></span><br><span class="line">    <span class="comment">//    from the pixel to the center</span></span><br><span class="line">    <span class="comment">// vec2 toCenter = vec2(0.5)-st;</span></span><br><span class="line">    <span class="comment">// pct = length(toCenter);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// c. The SQUARE ROOT of the vector</span></span><br><span class="line">    <span class="comment">//    from the pixel to the center</span></span><br><span class="line">    <span class="comment">// vec2 tC = vec2(0.5)-st;</span></span><br><span class="line">    <span class="comment">// pct = sqrt(tC.x*tC.x+tC.y*tC.y);</span></span><br><span class="line">  </span><br><span class="line">    <span class="type">float</span> clipRes = <span class="number">1.</span>-<span class="built_in">step</span>(<span class="number">0.5</span>,pct);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(pct);</span><br><span class="line">    <span class="comment">// color = vec3(1.-clipRes*pct);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>( color, <span class="number">1.0</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¦è¾¹æ˜¯ä¸‰ç§æ–¹æ³•æ±‚è·ç¦»åçš„colorï¼Œå³è¾¹æ˜¯åŠ å…¥äº†stepå’Œ1.-çš„ä½¿ç”¨ï¼›</p><p><img src="https://s2.loli.net/2024/08/26/jvztG13xlTeMI7W.png" alt="image.png"></p><p>â€œdistance fieldâ€ï¼Œç±»ä¼¼ç¼“å†²åŒºï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">  vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">  // st.x *= u_resolution.x/u_resolution.y;</span><br><span class="line">  vec3 color = vec3(0.0);</span><br><span class="line">  float d = 0.0;</span><br><span class="line"></span><br><span class="line">  // Remap the space to -1. to 1.</span><br><span class="line">  st = st *2.-1.;</span><br><span class="line"></span><br><span class="line">  // Make the distance field</span><br><span class="line">  d = length( abs(st)-.3 );</span><br><span class="line">  //d = length( min(abs(st)-.3,0.) );</span><br><span class="line">  //d = length( max(abs(st)-.3,0.) );</span><br><span class="line"></span><br><span class="line">  // Visualize the distance field</span><br><span class="line">  gl_FragColor = vec4(vec3(d),1.0);</span><br><span class="line">  // gl_FragColor = vec4(vec3(fract(d*12.216)),1.0); // *çš„æ•°å€¼è¶Šå¤§ï¼Œdç•¥å¾®å˜åŒ–ä¸‹å‘ˆç°çš„å°æ•°éƒ¨åˆ†å°±æ›´å¤šæ ·</span><br><span class="line"></span><br><span class="line">  // Drawing with the distance field</span><br><span class="line">  gl_FragColor = vec4(vec3( step(.3,d) ),1.0);</span><br><span class="line">  gl_FragColor = vec4(vec3( step(.3,d) * step(d,.4)),1.0);</span><br><span class="line">  gl_FragColor = vec4(vec3( smoothstep(.3,.4,d)* smoothstep(.6,.5,d)) ,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/27/CZM4AR9LVQlF3e2.png" alt="img"></p><p>ä¸åŒæ›²çº¿è®¾ç½®ä¸‹çš„å½¢çŠ¶è¡¨ç°ï¼Œå¯ä»¥ç”¨æ¥åšèŠ±æœµã€é›ªèŠ±ã€é½¿è½®è¿™äº›ã€‚ã€‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    vec2 pos = vec2(0.5)-st; // -0.5~0.5</span><br><span class="line"></span><br><span class="line">    float r = length(pos)*2.0;</span><br><span class="line">    float a = atan(pos.y,pos.x);</span><br><span class="line"></span><br><span class="line">    float f = cos(a*3.);</span><br><span class="line">    f = abs(cos(a*3.));</span><br><span class="line">   f = abs(cos(a*2.5))*0.236+0.116;</span><br><span class="line">   f = abs(cos(a*12.)*sin(a*3.))*.8+.1;</span><br><span class="line">    f = smoothstep(-.5,1., cos(a*10.))*0.2+0.5;</span><br><span class="line"></span><br><span class="line">    //color = vec3(smoothstep(f,f+.01,r));</span><br><span class="line">    color = vec3(1.-smoothstep(f,f+0.01,r) );</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/27/LoCVqmx6WvzeMKh.png" alt="image.png"></p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p>å®ç°ä¸‹é¢çš„æ•ˆæœï¼š</p><p><img src="https://thebookofshaders.com/07/mondrian.jpg" alt="img"></p><p><a href="https://thndl.com/square-shaped-shaders.html">Square shaped shaders | thndl</a></p><p><a href="https://mstdn.thndl.com/@baldand">https://mstdn.thndl.com/@baldand</a></p><p><a href="https://www.mattdesl.com/">https://www.mattdesl.com/</a></p><p>lygia: <a href="https://lygia.xyz/draw">LYGIA Shader Library</a>, <a href="https://lygia.xyz/draw">LYGIA Shader Library sdfå‡½æ•°</a></p><p><a href="https://pixelspiritdeck.com/">åƒç´ ç²¾ç¥ (pixelspiritdeck.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/"/>
    <id>https://youxt-njnu.github.io/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/</id>
    <published>2024-08-19T03:55:26.000Z</published>
    <updated>2024-08-21T06:18:49.678Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-coloréƒ¨åˆ†"><a href="#è®°å½•-coloréƒ¨åˆ†" class="headerlink" title="è®°å½•-coloréƒ¨åˆ†"></a>è®°å½•-coloréƒ¨åˆ†</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec4 vector;</span><br><span class="line">vector[0] = vector.r = vector.x = vector.s;</span><br><span class="line">vector[1] = vector.g = vector.y = vector.t;</span><br><span class="line">vector[2] = vector.b = vector.z = vector.p;</span><br><span class="line">vector[3] = vector.a = vector.w = vector.q;</span><br></pre></td></tr></table></figure><p>æ”¯æŒswizzle(æ…åŠ¨)ï¼švec3 yellow&#x3D;vec3(1.,1.,0.); yellow.rgb, yellow.rgr, yellow.bgr â€¦â€¦</p><p>åˆ©ç”¨mix()è¿›è¡Œcoloræ··åˆï¼šmix(color1,color2,value) ï¼Œvalueä»0åˆ°1ï¼Œvalueè¶Šå°color1å€¼è¶Šå¤š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>); <span class="comment">// blue</span></span><br><span class="line"><span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>); <span class="comment">// yellow</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> pct = <span class="built_in">abs</span>(<span class="built_in">sin</span>(u_time)); <span class="comment">// ä»0åˆ°1ï¼Œsin(x)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Mix uses pct (a value from 0-1) to</span></span><br><span class="line">    <span class="comment">// mix the two colors</span></span><br><span class="line">    color = <span class="built_in">mix</span>(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="easing-function"><a href="#easing-function" class="headerlink" title="easing function"></a>easing function</h2><p>ç”¨äºè®¡ç®—åŠ¨ç”»çš„ç¼“åŠ¨å‡½æ•°<a href="https://easings.net/">easing function</a></p><ul><li>ä¸‹é¢çš„å¼å­æœ‰äº›ä½œè€…è¿›è¡Œäº†sin&#x2F;cosä¹‹é—´çš„å˜æ¢ï¼Œä»¥åŠå‘½åçš„é£æ ¼æ˜¯sineInå°±æ˜¯ä¸Šé¢é“¾æ¥é‡Œçš„easeInSine</li><li>ä¸Šé¢ç½‘é¡µé‡Œï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰å¯¹åº”çš„cssç”¨æ³•ï¼Œpostcssç”¨æ³•ï¼Œåœ¨å…ƒç´ å˜æ¢åŠ¨ç”»é‡Œçš„æ•ˆæœï¼Œåœ¨é¢œè‰²æ¸å˜æ··åˆé‡Œçš„æ•ˆæœï¼Œä½¿ç”¨è¯¥å‡½æ•°è¿›è¡Œå˜æ¢çš„æ ·ä¾‹ï¼ˆç¼©æ”¾ã€ç§»åŠ¨ã€é€æ˜åº¦å˜åŒ–ï¼‰,ä¹Ÿå¯ä»¥è°ƒæ•´å‚æ•°ç‚¹å‡»goè¿›è¡Œå¯¹æ¯”</li><li>æœ€åä¸€æ’ï¼šcssçš„å®ç°æ˜¯é€šè¿‡@keyframesï¼Œè®¾ç½®ä¸åŒçš„æ¡ä»¶ï¼›å‡½æ•°é‡Œé¢æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„åˆ¤æ–­æ¥èµ‹å€¼ï¼›</li><li>å‰å››æ’çš„éƒ½æ˜¯<a href="https://cubic-bezier.com/#.25,.1,.25,1">cube-bezier</a>å‡½æ•°è®¾ç½®ä¸åŒçš„å‚æ•°å¾—åˆ°çš„æ•ˆæœ</li></ul><blockquote><p>åœ¨ CSS ä¸­ï¼Œ<code>cubic-bezier</code> å‡½æ•°ç”¨äºå®šä¹‰ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼Œå¹¿æ³›åº”ç”¨äºåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœçš„æ—¶é—´å‡½æ•°ï¼ˆtiming functionï¼‰ã€‚è¿™ä¸ªå‡½æ•°çš„å››ä¸ªå‚æ•°æ§åˆ¶æ›²çº¿çš„å½¢çŠ¶ï¼Œä»è€Œå½±å“åŠ¨ç”»çš„é€Ÿåº¦å˜åŒ–ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>cubic-bezier(.12, 0, .33, 0)</code> ä¸­çš„å››ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ä¸º (0.12, 0)</li><li>ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ä¸º (0.33, 0)</li></ul><p>è¿™å››ä¸ªå‚æ•°å¯ä»¥è¿™æ ·è§£é‡Šï¼š</p><ol><li>**ç¬¬ä¸€ä¸ªå‚æ•° (0.12)**ï¼šè¿™æ˜¯ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„æ¨ªåæ ‡ï¼Œå®ƒå½±å“åŠ¨ç”»å¼€å§‹é˜¶æ®µçš„åŠ é€Ÿåº¦ã€‚å€¼ä¸º 0.12 è¡¨ç¤ºåœ¨åŠ¨ç”»å¼€å§‹é˜¶æ®µï¼Œé€Ÿåº¦ä»é›¶å¼€å§‹ç¼“æ…¢å¢åŠ ã€‚</li><li>**ç¬¬äºŒä¸ªå‚æ•° (0)**ï¼šè¿™æ˜¯ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡ï¼Œå®ƒåœ¨è¿™é‡Œè®¾ä¸º 0ï¼Œæ„å‘³ç€æ§åˆ¶ç‚¹ä½äºèµ·å§‹çº¿ä¸Šï¼Œå› æ­¤åŠ¨ç”»èµ·å§‹æ—¶ä¼šæ¯”è¾ƒå¹³ç¼“ï¼Œæ²¡æœ‰ç«‹å³åŠ é€Ÿã€‚</li><li>**ç¬¬ä¸‰ä¸ªå‚æ•° (0.33)**ï¼šè¿™æ˜¯ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„æ¨ªåæ ‡ï¼Œå½±å“åŠ¨ç”»ç»“æŸå‰çš„å‡é€Ÿè¿‡ç¨‹ã€‚å€¼è¾ƒå°ï¼ˆ0.33ï¼‰è¡¨æ˜åŠ¨ç”»åœ¨ç»“æŸå‰ä¸ä¹…å¼€å§‹å‡é€Ÿã€‚</li><li>**ç¬¬å››ä¸ªå‚æ•° (0)**ï¼šè¿™æ˜¯ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡ï¼ŒåŒæ ·ä¸º 0ï¼Œæ„å‘³ç€ç»“æŸæ—¶é€Ÿåº¦å‡åˆ° 0ï¼ŒåŠ¨ç”»ç»“æŸçš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒå¹³ç¼“çš„ã€‚</li></ol><p>é€šè¿‡è°ƒæ•´è¿™äº›å‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®æ§åˆ¶åŠ¨ç”»çš„é€Ÿåº¦æ›²çº¿ï¼Œä»è€Œåˆ›é€ å‡ºå„ç§åŠ¨ç”»æ•ˆæœã€‚åœ¨è¿™ä¸ªå…·ä½“ä¾‹å­ä¸­ï¼Œç”±äºä¸¤ä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡éƒ½æ˜¯ 0ï¼Œè¿™ç§æ›²çº¿é€šå¸¸ç”¨äºåˆ›å»ºæŸäº›å…·æœ‰æ˜æ˜¾èµ·å§‹å’Œç»“æŸé˜¶æ®µçš„åŠ¨ç”»æ•ˆæœã€‚</p></blockquote><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define PI 3.141592653589793</span></span><br><span class="line"><span class="meta">#define HALF_PI 1.5707963267948966</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Robert Penner&#x27;s easing functions in GLSL</span></span><br><span class="line"><span class="comment">// https://github.com/stackgl/glsl-easings</span></span><br><span class="line"><span class="type">float</span> linear(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">0.0</span> ? t : <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (t - <span class="number">1.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">1.0</span> ? t : <span class="number">1.0</span> - <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">0.0</span> || t == <span class="number">1.0</span></span><br><span class="line">    ? t</span><br><span class="line">    : t &lt; <span class="number">0.5</span></span><br><span class="line">      ? +<span class="number">0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span>, (<span class="number">20.0</span> * t) - <span class="number">10.0</span>)</span><br><span class="line">      : <span class="number">-0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> - (t * <span class="number">20.0</span>)) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>((t - <span class="number">1.0</span>) * HALF_PI) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(t * HALF_PI);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-0.5</span> * (<span class="built_in">cos</span>(PI * t) - <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">5.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - (<span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">5.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? +<span class="number">16.0</span> * <span class="built_in">pow</span>(t, <span class="number">5.0</span>)</span><br><span class="line">    : <span class="number">-0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span> * t - <span class="number">2.0</span>, <span class="number">5.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">4.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">3.0</span>) * (<span class="number">1.0</span> - t) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? +<span class="number">8.0</span> * <span class="built_in">pow</span>(t, <span class="number">4.0</span>)</span><br><span class="line">    : <span class="number">-8.0</span> * <span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">4.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> p = <span class="number">2.0</span> * t * t;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span> ? p : -p + (<span class="number">4.0</span> * t) - <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> -t * (t - <span class="number">2.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t * t * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = t - <span class="number">1.0</span>;</span><br><span class="line">  <span class="keyword">return</span> f * f * f + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">4.0</span> * t * t * t</span><br><span class="line">    : <span class="number">0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span> * t - <span class="number">2.0</span>, <span class="number">3.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(<span class="number">13.0</span> * t * HALF_PI) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (t - <span class="number">1.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(<span class="number">-13.0</span> * (t + <span class="number">1.0</span>) * HALF_PI) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * t) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * <span class="built_in">sin</span>(+<span class="number">13.0</span> * HALF_PI * <span class="number">2.0</span> * t) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (<span class="number">2.0</span> * t - <span class="number">1.0</span>))</span><br><span class="line">    : <span class="number">0.5</span> * <span class="built_in">sin</span>(<span class="number">-13.0</span> * HALF_PI * ((<span class="number">2.0</span> * t - <span class="number">1.0</span>) + <span class="number">1.0</span>)) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * (<span class="number">2.0</span> * t - <span class="number">1.0</span>)) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - <span class="built_in">sqrt</span>(<span class="number">1.0</span> - t * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sqrt</span>((<span class="number">2.0</span> - t) * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * (<span class="number">1.0</span> - <span class="built_in">sqrt</span>(<span class="number">1.0</span> - <span class="number">4.0</span> * t * t))</span><br><span class="line">    : <span class="number">0.5</span> * (<span class="built_in">sqrt</span>((<span class="number">3.0</span> - <span class="number">2.0</span> * t) * (<span class="number">2.0</span> * t - <span class="number">1.0</span>)) + <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> a = <span class="number">4.0</span> / <span class="number">11.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> b = <span class="number">8.0</span> / <span class="number">11.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> c = <span class="number">9.0</span> / <span class="number">10.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> ca = <span class="number">4356.0</span> / <span class="number">361.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> cb = <span class="number">35442.0</span> / <span class="number">1805.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> cc = <span class="number">16061.0</span> / <span class="number">1805.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">float</span> t2 = t * t;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> t &lt; a</span><br><span class="line">    ? <span class="number">7.5625</span> * t2</span><br><span class="line">    : t &lt; b</span><br><span class="line">      ? <span class="number">9.075</span> * t2 - <span class="number">9.9</span> * t + <span class="number">3.4</span></span><br><span class="line">      : t &lt; c</span><br><span class="line">        ? ca * t2 - cb * t + cc</span><br><span class="line">        : <span class="number">10.8</span> * t * t - <span class="number">20.52</span> * t + <span class="number">10.72</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - bounceOut(<span class="number">1.0</span> - t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * (<span class="number">1.0</span> - bounceOut(<span class="number">1.0</span> - t * <span class="number">2.0</span>))</span><br><span class="line">    : <span class="number">0.5</span> * bounceOut(t * <span class="number">2.0</span> - <span class="number">1.0</span>) + <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">3.0</span>) - t * <span class="built_in">sin</span>(t * PI);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = <span class="number">1.0</span> - t;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - (<span class="built_in">pow</span>(f, <span class="number">3.0</span>) - f * <span class="built_in">sin</span>(f * PI));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">2.0</span> * t</span><br><span class="line">    : <span class="number">1.0</span> - (<span class="number">2.0</span> * t - <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="type">float</span> g = <span class="built_in">pow</span>(f, <span class="number">3.0</span>) - f * <span class="built_in">sin</span>(f * PI);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * g</span><br><span class="line">    : <span class="number">0.5</span> * (<span class="number">1.0</span> - g) + <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line">    <span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> t = u_time*<span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> pct = cubicInOut( <span class="built_in">abs</span>(<span class="built_in">fract</span>(t)*<span class="number">2.0</span><span class="number">-1.</span>) );</span><br><span class="line">   <span class="comment">// t = u_time;</span></span><br><span class="line">   <span class="comment">// pct = cubicInOut( abs(fract(t)-1.) );</span></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(<span class="type">vec3</span>(<span class="built_in">mix</span>(colorA, colorB, pct)),<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¡¥å……è¯´æ˜ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> t = u_time * <span class="number">0.5</span>;</span><br><span class="line"><span class="type">float</span> pct = cubicInOut(<span class="built_in">abs</span>(<span class="built_in">fract</span>(t) * <span class="number">2.0</span> - <span class="number">1.0</span>));</span><br></pre></td></tr></table></figure><ol><li>**æ—¶é—´ç¼©æ”¾ (<code>t = u_time * 0.5</code>)**ï¼šè¿™é‡Œ <code>u_time</code> è¢«ä¹˜ä»¥ 0.5ï¼Œæ„å‘³ç€ <code>t</code> çš„å˜åŒ–é€Ÿåº¦æ˜¯ <code>u_time</code> çš„ä¸€åŠã€‚å¦‚æœ <code>u_time</code> æ˜¯ä¸€ä¸ªéšæ—¶é—´å¢åŠ çš„å˜é‡ï¼Œé‚£ä¹ˆ <code>t</code> çš„å¢é•¿é€Ÿåº¦æ›´æ…¢ã€‚</li><li>**è®¡ç®— <code>pct</code>**ï¼š<code>fract(t)</code> è·å– <code>t</code> çš„å°æ•°éƒ¨åˆ†ï¼Œè¿™æ ·å³ä½¿ <code>t</code> å¢é•¿åˆ° 1 ä»¥ä¸Šï¼Œ<code>fract(t)</code> ä¹Ÿä¼šé‡æ–°ä» 0 å¼€å§‹ï¼Œå®ç°å‘¨æœŸæ€§é‡ç½®ã€‚ä¹˜ä»¥ 2.0 ç„¶åå‡ 1.0 æ˜¯ä¸ºäº†å°†å‘¨æœŸå˜åŒ–ä» <code>[0,1]</code> è°ƒæ•´åˆ° <code>[-1,1]</code>ï¼Œè¿™æ · <code>abs(...)</code> åçš„å€¼å°†åœ¨ <code>[0,1]</code> ä¹‹é—´æŒ¯è¡ï¼Œå®ç°äº†å…ˆå¢åŠ åˆ° 1 ç„¶åå‡å°‘åˆ° 0 çš„å‘¨æœŸæ€§å˜åŒ–ã€‚</li><li><strong><code>cubicInOut</code> åŠ¨ç”»æ›²çº¿</strong>ï¼šè¿™ä¸ªå‡½æ•°é€šå¸¸å®šä¹‰äº†ä¸€ä¸ªç¼“å…¥ç¼“å‡ºçš„ä¸‰æ¬¡æ›²çº¿ï¼Œæ„å‘³ç€åŠ¨ç”»å¼€å§‹å’Œç»“æŸæ—¶é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸­é—´é€Ÿåº¦è¾ƒå¿«ã€‚</li></ol><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">t = u_time;</span><br><span class="line">pct = cubicInOut(<span class="built_in">abs</span>(<span class="built_in">fract</span>(t) - <span class="number">1.0</span>));</span><br></pre></td></tr></table></figure><ol><li>**æ—¶é—´è®¾ç½® (<code>t = u_time</code>)**ï¼šè¿™é‡Œæ²¡æœ‰å¯¹ <code>u_time</code> è¿›è¡Œç¼©æ”¾ï¼Œå› æ­¤ <code>t</code> ä»¥åŸå§‹é€Ÿåº¦å¢åŠ ã€‚</li><li>**è®¡ç®— <code>pct</code>**ï¼šè¿™é‡Œä»…ä½¿ç”¨äº† <code>fract(t)</code> å‡å» 1.0ï¼Œä¸ä¸Šé¢çš„ä»£ç ç›¸æ¯”ï¼Œè¿™æ ·å¤„ç†ä¼šäº§ç”Ÿä» <code>-1</code> åˆ° 0 çš„å‘¨æœŸæ€§å˜åŒ–ï¼ˆå› ä¸º <code>fract(t)</code> äº§ç”Ÿ <code>[0,1)</code>ï¼Œå‡ 1 åå˜ä¸º <code>[-1,0)</code>ï¼‰ã€‚åº”ç”¨ <code>abs(...)</code> åï¼Œå˜åŒ–å°†åœ¨ <code>[0,1)</code> é—´å‘ç”Ÿï¼Œå®ç°äº†å‘¨æœŸæ€§çš„ä» 0 å¢åŠ åˆ° 1ã€‚</li></ol><p>æ•ˆæœå·®å¼‚ï¼š</p><ul><li><strong>å˜åŒ–é€Ÿç‡</strong>ï¼šä¸Šé¢çš„ä»£ç ä¸­ <code>t</code> çš„å˜åŒ–é€Ÿåº¦ä¸ºåŸå§‹æ—¶é—´çš„ä¸€åŠï¼Œè¿™å¯¼è‡´æ•´ä½“åŠ¨ç”»é€Ÿåº¦æ›´æ…¢ã€‚</li><li><strong>æŒ¯è¡æ–¹å¼</strong>ï¼šä¸Šé¢çš„ä»£ç ä½¿å¾—æŒ¯è¡ä» 0 å¢åŠ åˆ° 1 ç„¶åå‡å°‘åˆ° 0ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å¾ªç¯ï¼Œè€Œä¸‹é¢çš„ä»£ç åªä» 0 å¢åŠ åˆ° 1ã€‚</li></ul><p>ç»“åˆè¿™äº›åˆ†æï¼Œä¸Šé¢çš„ä»£ç æä¾›äº†ä¸€ä¸ªæ›´å¹³æ»‘å’Œå¯¹ç§°çš„æŒ¯è¡æ¨¡å¼ï¼Œé€‚ç”¨äºéœ€è¦å¾ªç¯åŠ¨ç”»æ•ˆæœçš„åœºæ™¯ï¼Œå¦‚å‘¼å¸ç¯æ•ˆæœã€‚ä¸‹é¢çš„ä»£ç åˆ™æ›´é€‚åˆäºå•å‘çš„æ¸è¿›æˆ–æ¸å‡ºæ•ˆæœï¼Œå¦‚æ—¥å‡ºæ•ˆæœã€‚</p><h2 id="é¢œè‰²çš„æ¸å˜"><a href="#é¢œè‰²çš„æ¸å˜" class="headerlink" title="é¢œè‰²çš„æ¸å˜"></a>é¢œè‰²çš„æ¸å˜</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">void main() &#123;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"> vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    float pct = cubicInOut(st.y); </span><br><span class="line">    pct = circularInOut(st.y); // å› ä¸ºInOuté‚£è¾¹çš„æ›²çº¿æ˜¯åœ¨å¾ˆå°èŒƒå›´å†…çš„è‡ªå˜é‡ä¸‹å‘ç”Ÿäº†è¾ƒå¤§çš„å› å˜é‡å˜åŒ–ï¼Œæ‰€ä»¥åˆ†ç•Œçº¿ä¼šæ˜æ˜¾ï¼Œç›¸å¯¹ä¸Šé¢çš„æ¥è¯´</span><br><span class="line">    // Mix uses pct (a value from 0-1) to</span><br><span class="line">    // mix the two colors</span><br><span class="line">    color = mix(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/19/OmhPTZGRKIo1rfN.png"></p><h2 id="mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶"><a href="#mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶" class="headerlink" title="mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶"></a>mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶</h2><p>å¯ä»¥åˆ†åˆ«è®¾ç½®RGBä¸‰é€šé“çš„æ··åˆæ–¹å¼</p><p><img src="https://thebookofshaders.com/06/mix-vec.jpg" alt="img"></p><p>ç¤ºä¾‹</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define PI 3.14159265359</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line"><span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> plot (<span class="type">vec2</span> st, <span class="type">float</span> pct)&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="built_in">smoothstep</span>( pct<span class="number">-0.01</span>, pct, st.y) -</span><br><span class="line">          <span class="built_in">smoothstep</span>( pct, pct+<span class="number">0.01</span>, st.y); <span class="comment">// smoothstep(a-æå°å€¼,a,çº¹ç†åæ ‡)-smoothstep(a,a+æå°å€¼,çº¹ç†åæ ‡)ï¼Œå¯ä»¥ç”»å‡ºaçš„æ›²çº¿ï¼ˆä¹Ÿå°±æ˜¯ä»£ç é‡Œçš„pctï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution.xy;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> pct = <span class="type">vec3</span>(st.x);</span><br><span class="line"></span><br><span class="line">    pct.r = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>,<span class="number">1.0</span>, st.x);</span><br><span class="line">    pct.g = <span class="built_in">sin</span>(st.x*PI);</span><br><span class="line">    pct.b = <span class="built_in">pow</span>(st.x,<span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">    color = <span class="built_in">mix</span>(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Plot transition lines for each channel</span></span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.r));</span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.g));</span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.b));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/19/NtLrd5aD4mFjuSX.png"></p><p>æ··åˆåŠ å˜æ¢çš„ç»„åˆ</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> color1 = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line">    <span class="type">vec3</span> color2 = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">  </span><br><span class="line">    <span class="type">vec3</span> colorA = <span class="built_in">mix</span>(color1,color2,st.y);</span><br><span class="line">    <span class="type">vec3</span> colorB = <span class="built_in">mix</span>(color1,color2,<span class="number">1.</span>-st.y*st.x);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> t = u_time*<span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> pct = cubicInOut( <span class="built_in">abs</span>(<span class="built_in">fract</span>(t)*<span class="number">2.0</span><span class="number">-1.</span>) );</span><br><span class="line">   <span class="comment">// t = u_time;</span></span><br><span class="line">   <span class="comment">// pct = cubicInOut( abs(fract(t)-1.) );</span></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(<span class="type">vec3</span>(<span class="built_in">mix</span>(colorA, colorB, pct)),<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*2WK3NdpR_Oxt0QKN8r6Rgg.gif" alt="img"></p><h2 id="HSV"><a href="#HSV" class="headerlink" title="HSV"></a>HSV</h2><blockquote><p>shadertoyä»£ç ï¼š</p><p><a href="https://www.shadertoy.com/view/MsS3Wc">Smooth HSV (shadertoy.com)</a></p><p><a href="https://blog.csdn.net/ColdWindHA/article/details/82080176">OpenCVå­¦ä¹ ç¬”è®°â€”â€”HSVé¢œè‰²ç©ºé—´è¶…æè¯¦è§£&amp;inRangeå‡½æ•°ç”¨æ³•åŠå®æˆ˜_hsvå€¼æ˜¯ä»€ä¹ˆ-CSDNåšå®¢</a></p><p><a href="https://www.cnblogs.com/dablyo/p/6854947.html">HSVè‰²å½©ç©ºé—´å’Œé¢œè‰²åˆ†é‡èŒƒå›´ - å‹å–„çš„ç‹—W - åšå®¢å›­ (cnblogs.com)</a></p></blockquote><p><img src="https://s2.loli.net/2024/08/21/AleHoLjbR9I67Su.png" alt="image.png"></p><p>RGBå’ŒHSVçš„äº’è½¬</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> rgb2hsb( <span class="keyword">in</span> <span class="type">vec3</span> c )&#123;</span><br><span class="line">    <span class="type">vec4</span> K = <span class="type">vec4</span>(<span class="number">0.0</span>, <span class="number">-1.0</span> / <span class="number">3.0</span>, <span class="number">2.0</span> / <span class="number">3.0</span>, <span class="number">-1.0</span>);</span><br><span class="line">    <span class="type">vec4</span> p = <span class="built_in">mix</span>(<span class="type">vec4</span>(c.bg, K.wz),</span><br><span class="line">                 <span class="type">vec4</span>(c.gb, K.xy),</span><br><span class="line">                 <span class="built_in">step</span>(c.b, c.g));</span><br><span class="line">    <span class="type">vec4</span> q = <span class="built_in">mix</span>(<span class="type">vec4</span>(p.xyw, c.r),</span><br><span class="line">                 <span class="type">vec4</span>(c.r, p.yzx),</span><br><span class="line">                 <span class="built_in">step</span>(p.x, c.r));</span><br><span class="line">    <span class="type">float</span> d = q.x - <span class="built_in">min</span>(q.w, q.y);</span><br><span class="line">    <span class="type">float</span> e = <span class="number">1.0e-10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">vec3</span>(<span class="built_in">abs</span>(q.z + (q.w - q.y) / (<span class="number">6.0</span> * d + e)),</span><br><span class="line">                d / (q.x + e),</span><br><span class="line">                q.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Function from IÃ±igo Quiles</span></span><br><span class="line"><span class="comment">//  https://www.shadertoy.com/view/MsS3Wc</span></span><br><span class="line"><span class="type">vec3</span> hsb2rgb( <span class="keyword">in</span> <span class="type">vec3</span> c )&#123;</span><br><span class="line">    <span class="type">vec3</span> rgb = <span class="built_in">clamp</span>(<span class="built_in">abs</span>(<span class="built_in">mod</span>(c.x*<span class="number">6.0</span>+<span class="type">vec3</span>(<span class="number">0.0</span>,<span class="number">4.0</span>,<span class="number">2.0</span>),</span><br><span class="line">                             <span class="number">6.0</span>)<span class="number">-3.0</span>)<span class="number">-1.0</span>,</span><br><span class="line">                     <span class="number">0.0</span>,</span><br><span class="line">                     <span class="number">1.0</span> );</span><br><span class="line">    rgb = rgb*rgb*(<span class="number">3.0</span><span class="number">-2.0</span>*rgb);</span><br><span class="line">    <span class="keyword">return</span> c.z * <span class="built_in">mix</span>(<span class="type">vec3</span>(<span class="number">1.0</span>), rgb, c.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We map x (0.0 - 1.0) to the hue (0.0 - 1.0)</span></span><br><span class="line">    <span class="comment">// And the y (0.0 - 1.0) to the brightness</span></span><br><span class="line">    color = hsb2rgb(<span class="type">vec3</span>(st.x,<span class="number">1.0</span>,st.y)); <span class="comment">// ä¼ å…¥çš„ä½“ç°äº†h,s,b</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/21/8ZdlghIPOemGJwt.png" alt="image.png"></p><p>HSBä»ç¬›å¡å°”åæ ‡æ˜ å°„åˆ°æåæ ‡ï¼š</p><ul><li>è·å–è§’åº¦å’Œåˆ°å±å¹•ä¸­å¿ƒç‚¹çš„è·ç¦»</li><li>ä½¿ç”¨length()å’Œatan(y,x)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#define TWO_PI 6.28318530718</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">//  Function from IÃ±igo Quiles</span><br><span class="line">//  https://www.shadertoy.com/view/MsS3Wc</span><br><span class="line">vec3 hsb2rgb( in vec3 c )&#123;</span><br><span class="line">    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),</span><br><span class="line">                             6.0)-3.0)-1.0,</span><br><span class="line">                     0.0,</span><br><span class="line">                     1.0 );</span><br><span class="line">    rgb = rgb*rgb*(3.0-2.0*rgb);</span><br><span class="line">    return c.z * mix( vec3(1.0), rgb, c.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // Use polar coordinates instead of cartesian</span><br><span class="line">    vec2 toCenter = vec2(0.5)-st; // æŠŠçº¹ç†åæ ‡ç©ºé—´ç§»åˆ°-.5åˆ°.5</span><br><span class="line">    float angle = atan(toCenter.y,toCenter.x); // æ±‚æ¯ä¸ªç‚¹ç›¸å¯¹äºä¸­å¿ƒç‚¹çš„è§’åº¦</span><br><span class="line">    float radius = length(toCenter)*2.0; // é•¿åº¦çš„èŒƒå›´æ˜¯0~1</span><br><span class="line"></span><br><span class="line">    // Map the angle (-PI to PI) to the Hue (from 0 to 1)</span><br><span class="line">    // and the Saturation to the radius</span><br><span class="line">    color = hsb2rgb(vec3((angle/TWO_PI)+0.5,radius,1.0)); // ç¬¬ä¸€ä¸ªè¡¨ç¤ºhï¼Œæ ¹æ®ç›¸å¯¹äºä¸­å¿ƒç‚¹çš„è§’åº¦æ¥èµ‹äºˆé¢œè‰²ï¼ŒåŒæ—¶ç¼©æ”¾åˆ°äº†0-1ï¼Œç„¶åä¼ å…¥ï¼›radius: ç¦»ä¸­å¿ƒç‚¹è¶Šè¿œï¼Œradiusè¶Šå¤§ï¼Œså€¼è¶Šå¤§;</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/21/fTMw6RpQmVY3JWH.png" alt="image.png"></p><p><code>var toCenter = st - vec2(0.5);</code></p><p>è¿™æ ·å­ï¼ŒæŠŠä¸Šè¿°çš„å›¾æ—‹è½¬180åº¦çš„æ•ˆæœï¼›</p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p>ç»“åˆshaping functionï¼Œå‘ˆç°ä¸åŒçš„é¢œè‰²è¿‡æ¸¡ï¼›</p><p><img src="https://thebookofshaders.com/06/spectrums.jpg" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â… </title>
    <link href="https://youxt-njnu.github.io/2024/08/16/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%951/"/>
    <id>https://youxt-njnu.github.io/2024/08/16/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%951/</id>
    <published>2024-08-16T07:52:26.000Z</published>
    <updated>2024-08-19T05:51:27.668Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><p><a href="https://thebookofshaders.com/edit.php">GLSL Editor (thebookofshaders.com)</a> åœ¨çº¿çš„shaderç¼–è¾‘è°ƒè¯•</p><p><a href="https://github.com/patriciogonzalezvivo/glslGallery">patriciogonzalezvivo&#x2F;glslGallery (github.com)</a> çœ‹ç€ä¸é”™ï¼Œä½†æ˜¯æäº¤è‡ªå·±çš„ä¸Šå»åï¼Œæäº¤ä¸åˆ°å¯¹åº”çš„æœåŠ¡å™¨ï¼ˆç›´ç™½äº›å°±æ˜¯ä¿ºè¯•å®Œäº†ç”¨ä¸äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p><p><a href="https://patriciogonzalezvivo.github.io/glslGallery/">GLSL Gallery (patriciogonzalezvivo.github.io)</a> ä½œè€…çš„ä¸€äº›shaderï¼Œå¯ä»¥å€Ÿé‰´å­¦ä¹ </p><h1 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h1><h2 id="shader"><a href="#shader" class="headerlink" title="shader"></a>shader</h2><p>GPUç‰¹ç‚¹ï¼šblindï¼ˆä¸çŸ¥é“å…¶ä»–çš„pipe&#x2F;threadåœ¨å¹²å•¥ï¼‰ï¼Œmemorylessï¼ˆä¸çŸ¥é“ä»¥å‰å¹²äº†å•¥ï¼‰</p><p>ç‰‡å…ƒç€è‰²å™¨ï¼š</p><ul><li>void main() {} ä¸»å‡½æ•°</li><li>å†…ç½®å…¨å±€å˜é‡ï¼Œå¦‚gl_FragColor</li><li>é»˜è®¤è¾“å‡ºï¼šgl_fragColor</li><li>é»˜è®¤è¾“å…¥ï¼šgl_fragCoord  (æ˜¯varing)     &#x2F;&#x2F;    x,yéƒ½ä»0åˆ°1</li><li>æ•°æ®ç±»å‹ï¼Œvec4ï¼Œç²¾åº¦å¦‚float</li><li>æ ‡å‡†åŒ–normalized, æ˜ å°„map</li><li>å®ï¼Œ#defines, #ifdef, #endif, #ifndef</li><li>æ³¨æ„ï¼Œå¯¹äºæµ®ç‚¹çš„æ•°å­—æœ€å¥½å…»æˆåŠ ä¸Š.çš„ä¹ æƒ¯</li></ul><p>uniform:</p><ul><li>cpuç»™gpuçš„</li><li>ä¸€äº›æ‰€æœ‰threadéƒ½ä¸€æ ·çš„ï¼Œä¸ä¼šå˜çš„å€¼</li></ul><p>æ”¯æŒå†…ç½®æ•°å­¦å‡½æ•°ï¼Œå¦‚sin()</p><h2 id="shaping-functions"><a href="#shaping-functions" class="headerlink" title="shaping functions"></a>shaping functions</h2><h3 id="step"><a href="#step" class="headerlink" title="step"></a>step</h3><p>The <a href="https://thebookofshaders.com/glossary/?search=step"><code>step()</code></a> interpolation receives two parameters.</p><p>The first one is the limit or threshold, while the second one is the value we want to check or pass.</p><p>Any value under the limit will return <code>0.0</code> while everything above the limit will return <code>1.0</code>.</p><h3 id="smoothstep"><a href="#smoothstep" class="headerlink" title="smoothstep"></a>smoothstep</h3><p><a href="https://blog.csdn.net/weixin_61427881/article/details/127839417">ã€Shader Graphã€‘SmoothStepèŠ‚ç‚¹è¯¦è§£åŠå…¶åº”ç”¨-CSDNåšå®¢</a></p><h3 id="sin-x2F-cos"><a href="#sin-x2F-cos" class="headerlink" title="sin&#x2F;cos"></a>sin&#x2F;cos</h3><p>åŠ ä¸Šu_time: å®ç°æ²¿xè½´çš„ç§»åŠ¨</p><p>ä¹˜ä¸ŠPIç±»ä¼¼çš„ï¼šå®ç°æ›²çº¿çš„æ”¶ç¼©</p><p>åŠ ä¸Šå€¼ï¼šå®ç°æ›²çº¿ä¸Šä¸‹ç§»åŠ¨</p><p>å¤–é¢ä¹˜ä¸Šå€¼ï¼šå®ç°æ›²çº¿æ‹‰ä¼¸</p><p>å–ç»å¯¹å€¼abs()ï¼šå¼¹è·³çƒè½¨è¿¹</p><p>å–å°æ•°éƒ¨åˆ†fract()</p><p>å–ä¸Šä¸‹æ•´æ•°ceil(), floor()</p><p>y &#x3D; mod(x,0.5); &#x2F;&#x2F; return x modulo of 0.5<br>y &#x3D; fract(x); &#x2F;&#x2F; return only the fraction part of a number<br>y &#x3D; ceil(x);  &#x2F;&#x2F; nearest integer that is greater than or equal to x<br>y &#x3D; floor(x); &#x2F;&#x2F; nearest integer less than or equal to x<br>y &#x3D; sign(x);  &#x2F;&#x2F; extract the sign of x<br>y &#x3D; abs(x);   &#x2F;&#x2F; return the absolute value of x<br>y &#x3D; clamp(x,0.0,1.0); &#x2F;&#x2F; constrain x to lie between 0.0 and 1.0<br>y &#x3D; min(0.0,x);   &#x2F;&#x2F; return the lesser of x and 0.0<br>y &#x3D; max(0.0,x);   &#x2F;&#x2F; return the greater of x and 0.0</p><p>æœç´¢å…³é”®è¯ï¼šgenerative art</p><blockquote><p><a href="https://aiartists.org/generative-art-design">Generative Art: 50 Best Examples, Tools &amp; Artists (2021 GUIDE) â€” AIArtists.org</a></p></blockquote><h1 id="å‡ ä¸ªshader"><a href="#å‡ ä¸ªshader" class="headerlink" title="å‡ ä¸ªshader"></a>å‡ ä¸ªshader</h1><h2 id="é¼ æ ‡åæ ‡"><a href="#é¼ æ ‡åæ ‡" class="headerlink" title="é¼ æ ‡åæ ‡"></a><strong>é¼ æ ‡åæ ‡</strong></h2><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 03 code2</span></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution; <span class="comment">// å±å¹• å®½ï¼Œé«˜</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"> Â  <span class="type">vec2</span> mousePos;</span><br><span class="line"><span class="comment">// vec2 st = gl_FragCoord.xy/u_resolution; // æŠŠè¾“å…¥çº¹ç†åæ ‡ç¼©æ”¾åˆ°0~1</span></span><br><span class="line"><span class="comment">// gl_FragColor = vec4(st.x,st.y,0.0,1.0);</span></span><br><span class="line"><span class="type">vec2</span> center = u_resolution/<span class="number">2.</span>; <span class="comment">// è·å–ä¸­å¿ƒç‚¹çš„å±å¹•åæ ‡</span></span><br><span class="line"> Â  mousePos = (u_mouse.xy-center)/center; <span class="comment">// æŠŠé¼ æ ‡ä½ç½®ç¼©æ”¾åˆ°-1~1</span></span><br><span class="line"> Â  mousePos = mousePos*<span class="number">0.5</span> + <span class="number">0.5</span>; <span class="comment">// æŠŠé¼ æ ‡ä½ç½®ç¼©æ”¾åˆ°0~1</span></span><br><span class="line"> Â  <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(mousePos.x,mousePos.y,<span class="number">0.0</span>,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ·æ²¹æ¼†"><a href="#åˆ·æ²¹æ¼†" class="headerlink" title="åˆ·æ²¹æ¼†"></a><strong>åˆ·æ²¹æ¼†</strong></h2><ul><li>è·å–ä»0åˆ°1ç©ºé—´åæ ‡</li><li>åšå‡º0åˆ°1æ¸å˜ç°</li><li>åˆ¶é€ å‡½æ•°å’Œå¯¹åº”åŒºé—´</li><li>æŠŠå‡½æ•°æ¶‚ä¸Šé¢œè‰²</li></ul><p><img src="https://s2.loli.net/2024/08/16/p9GByiLT3MqlPCS.png" alt="image.png"></p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 05 code1</span></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å€¼åŒºé—´ï¼š</span></span><br><span class="line"><span class="comment">// abs(y-x)===0, return 1</span></span><br><span class="line"><span class="comment">// abs(y-x) 0~0.02, return abs(y-x)</span></span><br><span class="line"><span class="comment">// abs(y-x) &gt;0.02, return 0</span></span><br><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st) &#123;</span><br><span class="line"> Â  <span class="keyword">return</span> <span class="built_in">smoothstep</span>(<span class="number">0.02</span>,<span class="number">0.0</span>,<span class="built_in">abs</span>(st.y-st.x));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"> <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line"> Â  Â <span class="type">float</span> y = st.x;</span><br><span class="line"> Â  Â <span class="type">vec3</span> color = <span class="type">vec3</span>(y);</span><br><span class="line"> Â  Â <span class="comment">// æ¯ä¸ªç‚¹åªæœ‰xèµ·ä½œç”¨ï¼Œæ‰€ä»¥xä¸€æ ·çš„ï¼Œæ˜¾ç¤ºçš„é¢œè‰²æ˜¯ä¸€æ ·çš„ï¼›</span></span><br><span class="line"> Â  Â <span class="comment">// colorç”±ä¸‰ä¸ªxç»„æˆï¼Œæ‰€ä»¥æ˜¯ç°åº¦ï¼Œè€Œä¸”æ¸å˜å¤§</span></span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="type">float</span> line = plot(st);</span><br><span class="line"> Â  Â <span class="comment">// color = line*vec3(.0,1.,.0); // ç»˜åˆ¶å‡ºäº†ç»¿è‰²çš„çº¿</span></span><br><span class="line"> Â  Â <span class="comment">// color = (1.-line)*color; // æŠŠçº¿çš„åœ°æ–¹æ‰£æˆé»‘è‰²ï¼Œæ–¹ä¾¿åç»­åŠ è‰²</span></span><br><span class="line"> Â  Â <span class="comment">// åˆ†å‰²å‡ºçº¿ï¼ŒåŠ ä¸ŠèƒŒæ™¯</span></span><br><span class="line"> Â  Â color = (<span class="number">1.</span>-line)*color + line*<span class="type">vec3</span>(<span class="number">.0</span>,<span class="number">1.</span>,<span class="number">.0</span>);</span><br><span class="line"> <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å˜ç§"><a href="#å˜ç§" class="headerlink" title="å˜ç§"></a>å˜ç§</h2><p>st: åŸºäºå±å¹•çš„çº¹ç†åæ ‡</p><p>y: å’Œstæœ‰å…³ç³»çš„å‡½æ•°</p><p>color: å±•ç¤ºyçš„ç°åº¦é¢œè‰²</p><p>line: é€šè¿‡stå’Œyç»˜åˆ¶çš„æ ·æ¡å‡½æ•°ã€‚ã€‚</p><p>color: ç»™lineå‡½æ•°è¿›è¡Œå åŠ æ˜¾ç¤º</p><p><img src="https://s2.loli.net/2024/08/16/Qoudz1HApWlqJUK.png" alt="image.png"></p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒstçš„x^5, 0, yçš„å…³ç³»</span></span><br><span class="line"><span class="comment">// y&lt;x^5çš„ï¼Œéƒ½0</span></span><br><span class="line"><span class="comment">// yåœ¨0~x^5ï¼Œéƒ½åŸå€¼</span></span><br><span class="line"><span class="comment">// y=0çš„ï¼Œéƒ½1</span></span><br><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y,<span class="number">0.0</span>,st.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line"><span class="type">float</span> y = <span class="built_in">pow</span>(st.x,<span class="number">5.</span>);</span><br><span class="line"><span class="type">vec3</span> color = <span class="type">vec3</span>(y);</span><br><span class="line"><span class="type">float</span> line = plot(st,y);</span><br><span class="line">color = (<span class="number">1.</span>-line)*color + line*<span class="type">vec3</span>(<span class="number">.0</span>,<span class="number">1.</span>,<span class="number">.0</span>);</span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–ä¸ªåå†é”åŒ–ä¸‹</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y<span class="number">-0.02</span>,y,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/z6xAHaYDJFeQ7ct.png" alt="image.png"></p><p>æ±‚ä¸ªäº¤é›†</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y<span class="number">-0.03</span>,y,st.y)-<span class="built_in">smoothstep</span>(y<span class="number">-0.01</span>,y,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/O4LcxMDmrB2toTP.png" alt="image.png"></p><p>æ›´è‡ªç„¶äº›çš„äº¤é›†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">float plot(vec2 st,float y) &#123;</span><br><span class="line">    return smoothstep(y-0.03,y,st.y)-smoothstep(y,y+0.03,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/Ze68o1mKhicjrbW.png" alt="image.png"></p><p>stepéœ€è¦åˆ†ç‰‡æ¥çœ‹ï¼š</p><ul><li>step(): å·¦ç‰‡(&lt;0.5), å³ç‰‡(&gt;0.5) -&gt;y,ä¹Ÿå°±æ˜¯ä¼ è¿›poltçš„pct</li><li>smoothstep: å·¦ç‰‡ï¼Œæ‰€æœ‰çº¹ç†ç‚¹éƒ½æ˜¯1</li><li>smoothstep: å³ç‰‡ï¼Œçº¹ç†ç‚¹çš„åˆ†å‰²æŒ‰ç…§(1-0.02, 1, st.y)è¿›è¡Œï¼Œä¸‹0ï¼Œä¸­åŸå€¼ï¼Œä¸Š1</li></ul><p><img src="https://s2.loli.net/2024/08/17/sel5gGTcNRP2iJq.png" alt="image.png"></p><h1 id="å¯èƒ½çš„bug"><a href="#å¯èƒ½çš„bug" class="headerlink" title="å¯èƒ½çš„bug"></a>å¯èƒ½çš„bug</h1><p><strong>æ²¡å®šä¹‰ç²¾åº¦</strong> <code>No precision specified for (float)</code></p><blockquote><p>presion mediump floa<strong>t;</strong></p></blockquote><p><strong>fragment shaderåšå®Œäº†ä¸æ˜¾ç¤ºé¢œè‰²ï¼š</strong></p><blockquote><p>æ²¡ç»™gl_FragColorèµ‹å€¼</p></blockquote><p><strong>æ²¡æ‰¾åˆ°å‡½æ•°</strong> <code>&#39;setColor&#39; : no matching overloaded function found</code></p><blockquote><p>Cé‡Œé¢æŠŠå‡½æ•°å†™åœ¨void main()å‰é¢ï¼Œæˆ–è€…éœ€æå‰å£°æ˜</p></blockquote><h1 id="æ¨èå¾…æ›´æ–°"><a href="#æ¨èå¾…æ›´æ–°" class="headerlink" title="æ¨èå¾…æ›´æ–°"></a>æ¨èå¾…æ›´æ–°</h1><blockquote><p>å‡†å¤‡å…ˆè¿‡ä¸€éæ•™ç¨‹å†è¯´â€¦.</p></blockquote><p><a href="https://www.flong.com/">Flong.com â€¢ Golan Levin &amp; Collaborators çš„ä½œå“</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_poly/">Polynomial Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_exp/">Exponential Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_circ/index.html">Circular &amp; Elliptical Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_bez/">Bezier and Other Parametric Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><hr><p><a href="https://iquilezles.org/">Inigo Quilez :: computer graphics, mathematics, shaders, fractals, demoscene and more (iquilezles.org)</a></p><p><a href="https://iquilezles.org/articles/functions/">Inigo Quilez :: computer graphics, mathematics, shaders, fractals, demoscene and more (iquilezles.org)</a></p><hr><p><img src="https://thebookofshaders.com/05/kynd.png" alt="img"></p><hr><p><a href="https://www.shadertoy.com/view/XsXXDn">Creation by Silexars (shadertoy.com)</a></p><hr><p><a href="https://lygia.xyz/">LYGIA Shader Library</a></p><p><a href="https://graphtoy.com/">Graphtoy</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>Cesium APIå­¦ä¹  â… </title>
    <link href="https://youxt-njnu.github.io/2024/06/13/Cesium%E4%B8%8A/"/>
    <id>https://youxt-njnu.github.io/2024/06/13/Cesium%E4%B8%8A/</id>
    <published>2024-06-13T03:06:05.000Z</published>
    <updated>2024-06-13T02:41:45.033Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆæ­¥äº†è§£"><a href="#åˆæ­¥äº†è§£" class="headerlink" title="åˆæ­¥äº†è§£"></a>åˆæ­¥äº†è§£</h1><p><strong>Cesiumå®˜ç½‘</strong> <a href="https://cesium.com/">Cesium: The Platform for 3D Geospatial</a></p><p><strong>CesiumJS:</strong><a href="https://cesium.com/learn/cesiumjs-learn/cesiumjs-quickstart/">CesiumJS Quickstart â€“ Cesium</a></p><p><strong>Cesium for Unity:</strong><a href="https://cesium.com/learn/unity/">Cesium for Unity â€“ Cesium</a></p><p><a href="https://zhuanlan.zhihu.com/p/452345666">Hello React Cesium - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://cuifeng.blog.csdn.net/article/details/122828984?spm=1001.2014.3001.5502">Reacté›†æˆCesium+ThreeJsæµç¨‹æ±‡æ€»_react cesium-CSDNåšå®¢</a></p><h1 id="åŸºç¡€æ•™ç¨‹"><a href="#åŸºç¡€æ•™ç¨‹" class="headerlink" title="åŸºç¡€æ•™ç¨‹"></a>åŸºç¡€æ•™ç¨‹</h1><p><a href="https://www.cnblogs.com/tiandi/p/16580238.html">Cesiumå­¦ä¹ èµ„æºæ±‡æ€»</a></p><p><a href="https://sandcastle.cesium.com/">cesiumå®˜æ–¹æ¡ˆä¾‹</a></p><p><a href="https://github.com/vtxf/Cesium-Tutorials-Index">Cesiumç›¸å…³èµ„æ–™æ±‡æ€»</a>ã€<a href="https://zhuanlan.zhihu.com/p/557296232">æ±‡æ€»2</a></p><p><a href="https://pasu.github.io/ExamplesforCesium/examples/examples.html#Primer">cesiumé¡¹ç›®</a></p><p><a href="https://github.com/hujiulin/CesiumJS-tutorial/tree/master?tab=readme-ov-file">Cesiumä¸­æ–‡æ•™ç¨‹-github</a>, <a href="http://cesium.xin/wordpress/archives/16.html">cesiumä¸­æ–‡ç½‘</a></p><hr><p><strong>Cesiumæºç æ–‡ä»¶å¤¹</strong><a href="https://sandcastle.cesium.com/">cesiumå®˜æ–¹æ¡ˆä¾‹</a>ï¼Œ<a href="https://cesium.com/learn/cesiumjs/ref-doc/">å®˜æ–¹APIæ–‡æ¡£</a></p><h1 id="CesiumåŸºç¡€çŸ¥è¯†"><a href="#CesiumåŸºç¡€çŸ¥è¯†" class="headerlink" title="CesiumåŸºç¡€çŸ¥è¯†"></a>CesiumåŸºç¡€çŸ¥è¯†</h1><p><a href="https://www.zhihu.com/column/c_1317874447190585344">å­¦ä¹ é“¾æ¥</a></p><p><strong>Cesiumçš„é¡¹ç›®å®šä½ï¼šB&#x2F;Sæ¶æ„ä¸‹çš„å®¢æˆ·ç«¯åº”ç”¨å±‚é¢çš„ä¸‰ç»´å¼€å‘æ¡†æ¶</strong></p><p><img src="https://pic1.zhimg.com/v2-d566ed3f3b0bb0f8be5d099fb2393b10_r.jpg" alt="img"></p><p><strong>Cesiumçš„å­¦ä¹ è·¯çº¿ï¼š</strong></p><p><img src="https://pic4.zhimg.com/v2-7a32e7833314deff496ff31b5f48809f_r.jpg" alt="img"></p><p><strong>Cesiumè¿›é˜¶ä¹‹è·¯ï¼š</strong></p><ul><li><strong>Webå‰ç«¯æ–¹å‘ï¼š</strong> Cesiumä¸webpackï¼ˆè£å‰ªä»¥åŠå‹ç¼©ï¼‰ï¼ŒCesium ä¸vueï¼ˆæ¡†æ¶è®¾è®¡ï¼Œ åµŒå…¥å¤æ‚ä¸šåŠ¡ç³»ç»Ÿï¼‰ï¼ŒCesiumçš„UIï¼ˆUI è®¾è®¡ï¼Œå®šåˆ¶å¯å¤ç”¨çš„Cesiumäº¤äº’ç•Œé¢ï¼‰</li><li><strong>è®¡ç®—æœºå›¾å½¢å­¦æ–¹å‘ï¼š</strong> WebGLæ·±å…¥ï¼ŒåŸºäºCesium çš„å¯è§†åŒ–å®šåˆ¶ï¼ˆè§†é˜ˆã€æ°´æ·¹ã€æ°´é¢ã€çƒ­åŠ›å›¾ï¼Œæµåœºå›¾ã€é£çº¿å›¾ã€æ‰«æå›¾ï¼‰</li><li><strong>æ•°æ®é¢„å¤„ç†æ–¹å‘ï¼š</strong> æŠ•å½±å˜æ¢ï¼Œç©ºé—´ç´¢å¼•ï¼ŒLOD ï¼Œ3dtile ç”Ÿæˆï¼Œæ•°æ®å­˜å‚¨ï¼Œæ•°æ®åˆ†å‘æœåŠ¡ï¼Œè§£å†³è¶…å¤§ç©ºé—´æ•°æ®å¦‚ä½•åœ¨ Cesiumä¸Šæµç•…å¯è§†åŒ–çš„é—®é¢˜ã€‚</li></ul><h2 id="Viewer"><a href="#Viewer" class="headerlink" title="Viewer"></a>Viewer</h2><p><img src="https://i.loli.net/2018/08/13/5b70f7cbf3693.jpg" alt="img"></p><p><strong>Cesium ionæ˜¯ä¸€ä¸ªæä¾›ç“¦ç‰‡å›¾å’Œ3Dåœ°ç†ç©ºé—´æ•°æ®çš„å¹³å°ï¼ŒCesium ionæ”¯æŒæŠŠæ•°æ®æ·»åŠ åˆ°ç”¨æˆ·è‡ªå·±çš„CesiumJSåº”ç”¨ä¸­ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä½¿ç”¨Sentinal-2äºŒç»´è´´å›¾å’ŒCesiumä¸–ç•Œåœ°å½¢ï¼ŒäºŒè€…éƒ½éœ€è¦ionçš„æ”¯æŒã€‚</strong></p><p><strong>å¤‡æ³¨</strong> åœ¨æˆ‘ä»¬ä½¿ç”¨Cesiumçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç”³è¯·ionï¼ŒåŒæ—¶æ²¡æœ‰è‡ªå·±çš„æ•°æ®æºç”¨çš„cesiumæä¾›çš„æ•°æ®æºï¼Œviewerçš„åº•éƒ¨å¸¸å¸¸ä¼šæç¤ºä¸€è¡Œå°çš„è‹±æ–‡å­—æ¯ã€‚å¤§æ„å°±æ˜¯éœ€è¦ç”³è¯·access token.</p><ol><li><strong>æ‰“å¼€</strong><a href="https://cesium.com/ion/">https://cesium.com/ion/</a> ç„¶åæ³¨å†Œä¸€ä¸ªæ–°çš„è´¦æˆ·ã€‚</li><li><strong>ç‚¹å‡»â€Access Tokenâ€,</strong> é€‰æ‹©<em>Default</em>é»˜è®¤çš„access tokenæ‹·è´åˆ°contentsä¸­ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cesium.Ion.defaultAccessToken =</span><br><span class="line"> Â  Â  Â  Â &#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2NDk3OTUzYy01N2RjLTQyNDMtYTE1Zi0yYjgwNTJlZmYwOTAiLCJpZCI6MTk3MzM4LCJpYXQiOjE3MDg2NTc1NTh9.b8_XHsKZtIQVkUyk95dNvHHB4OE5nmebm5e_JFEIIbM&#x27;</span><br><span class="line">const viewer = new Cesium.Viewer(&#x27;cesiumContainer&#x27;)</span><br></pre></td></tr></table></figure><p><strong>Viewerçš„ç±»ç»„ç»‡</strong></p><p><img src="https://img2022.cnblogs.com/blog/237138/202208/237138-20220812154924431-1555328076.png" alt="img"></p><h3 id="å‚æ•°è§£é‡Š"><a href="#å‚æ•°è§£é‡Š" class="headerlink" title="å‚æ•°è§£é‡Š"></a>å‚æ•°è§£é‡Š</h3><ul><li><strong>infoBox, ç‚¹å‡»åå¼¹å‡ºçš„å³ä¸Šæ–¹ä¿¡æ¯</strong></li><li><strong>selectionIndicator: ç‚¹å‡»ååœ¨åŸåœ°å‡ºç°çš„ç»¿è‰²æŒ‡ç¤ºæ¡†</strong></li><li><strong>trackedEntity: Gets or sets the Entity instance currently being tracked by the camera.</strong></li><li><strong>orderIndependentTranslucency:</strong></li></ul><h2 id="åæ ‡ç³»"><a href="#åæ ‡ç³»" class="headerlink" title="åæ ‡ç³»"></a>åæ ‡ç³»</h2><ul><li><strong>å±å¹•åæ ‡ï¼Œå³äºŒç»´ç¬›å¡å°”å¹³é¢åæ ‡ç³»</strong></li><li><strong>ç¬›å¡å°”ç©ºé—´ç›´è§’åæ ‡&#x2F;ä¸–ç•Œåæ ‡</strong>ï¼ˆçº¢Xï¼Œç»¿Zï¼Œè“Yï¼›Xå‘å‰ï¼ŒYå‘å³ï¼ŒZå‘ä¸Šï¼›</li><li><strong>åœ°ç†åæ ‡ï¼ˆå¼§åº¦åˆ¶ï¼‰ï¼ŒCesium.Cartographic(lon, lat, height)ï¼Œå…¶ä¸­ç»çº¬åº¦éƒ½æ˜¯ç”¨å¼§åº¦è¡¨ç¤ºçš„</strong></li><li><strong>ç»çº¬åº¦åæ ‡ï¼Œé»˜è®¤WGS84åæ ‡ç³»ï¼Œ</strong></li></ul><p><strong>åæ ‡å˜æ¢ï¼š</strong></p><ul><li>ç»çº¬åº¦åæ ‡è½¬ä¸–ç•Œåæ ‡ï¼šCesium.Cartesian3.fromDegrees(lng, lat, height)</li><li>ä¸–ç•Œåæ ‡è½¬ç»çº¬åº¦åæ ‡ï¼šCesium.Cartographic.fromCartesian(cartesian3)</li><li>åœ°ç†åæ ‡ï¼ˆå¼§åº¦åˆ¶ï¼‰è½¬ç»çº¬åº¦åæ ‡ï¼šlng&#x3D;Cesium.Math.toDegrees(cartographic.longitude), lat&#x3D;Cesium.Math.toDegrees(cartographic.latitude), height&#x3D;cartographic.height;</li><li>å¼§åº¦è½¬ç»çº¬åº¦ï¼šCesium.Math.toDegrees(radians)</li><li>ç»çº¬åº¦è½¬å¼§åº¦ï¼šCesium.Math.toRadians(degrees)</li><li>å±å¹•åæ ‡è½¬ä¸–ç•Œåæ ‡ï¼šscene.globe.pick(viewer.camera.getPickRay(windowPosition), scene) â€”â€” ä¸€å®šè¦ä¿è¯å±å¹•åæ ‡åœ¨çƒä¸Šï¼Œä¸ç„¶å¾—åˆ°çš„å°±æ˜¯undefined</li><li>ä¸–ç•Œåæ ‡è½¬å±å¹•åæ ‡ï¼šCesium.SceneTransforms.wgs84ToWindowCoordinates(scene,cartesian3)</li></ul><p><img src="https://s2.loli.net/2024/04/07/QRdUelrvqxNkWHO.png"><img src="https://s2.loli.net/2024/04/07/QRdUelrvqxNkWHO.png"></p><p><strong>ç©ºé—´å˜æ¢ï¼š</strong></p><p><code>åªæœ‰è½¬æ¢åˆ°ç¬›å¡å°”åæ ‡ç³»åæ‰èƒ½è¿ç”¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„ä»¿å°„å˜æ¢çŸ¥è¯†è¿›è¡Œç©ºé—´ä½ç½®å˜æ¢å¦‚å¹³ç§»æ—‹è½¬ç¼©æ”¾ã€‚Cesiumä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹å‡ ç§å¾ˆæœ‰ç”¨çš„å˜æ¢å·¥å…·ç±»ï¼š</code></p><ul><li>Cesium.Cartesian3ï¼ˆç›¸å½“äºPoint3Dï¼‰</li><li>Cesium.Matrix3ï¼ˆ3x3çŸ©é˜µï¼Œç”¨äºæè¿°æ—‹è½¬å˜æ¢ï¼‰</li><li>Cesium.Matrix4ï¼ˆ4x4çŸ©é˜µï¼Œç”¨äºæè¿°æ—‹è½¬åŠ å¹³ç§»å˜æ¢ï¼‰</li><li>Cesium.Quaternionï¼ˆå››å…ƒæ•°ï¼Œç”¨äºæè¿°å›´ç»•æŸä¸ªå‘é‡*æ—‹è½¬ä¸€å®šè§’åº¦çš„å˜æ¢ï¼‰</li><li>Cesium.Transforms(åŒ…å«å°†ä½ç½®è½¬æ¢ä¸ºå„ç§å‚è€ƒç³»çš„åŠŸèƒ½)</li></ul><p><strong>Cesiumç›®å‰æ”¯æŒçš„åæ ‡ç³»ï¼š</strong></p><ul><li><strong>WGS1984ï¼Œ Terrainçš„TileScemeé»˜è®¤æ˜¯è¿™ä¸ª</strong></li><li><strong>å¢¨å¡æ‰˜æŠ•å½±ï¼ŒImageryçš„TileScemeé»˜è®¤æ˜¯è¿™ä¸ª</strong></li></ul><p><code>viewer.canvas.clientHeight - movement.endPosition.y</code> :</p><p><strong>åœ¨ Cesium å’Œå…¶ä»– WebGL åº”ç”¨ä¸­ï¼Œ</strong><code>viewer.canvas</code> å…ƒç´ çš„åæ ‡ç³»é€šå¸¸éµå¾ª HTML Canvas å…ƒç´ çš„å¸¸è§å¸ƒå±€ï¼š</p><ol><li><strong>åæ ‡ç³»èµ·ç‚¹</strong> ï¼šCanvas åæ ‡ç³»çš„åŸç‚¹ (0, 0) ä½äº Canvas çš„å·¦ä¸Šè§’ã€‚</li><li><strong>Xè½´æ–¹å‘</strong> ï¼šXè½´ä»å·¦å‘å³å¢é•¿ï¼Œå³åæ ‡å€¼ä» 0 å¢åŠ åˆ° <code>canvas.width</code>ã€‚</li><li><strong>Yè½´æ–¹å‘</strong> ï¼šYè½´ä»ä¸Šå‘ä¸‹å¢é•¿ï¼Œå³åæ ‡å€¼ä» 0 å¢åŠ åˆ° <code>canvas.clientHeight</code>ã€‚</li></ol><p>é’ˆå¯¹ä»£ç è¡Œ <code>viewer.canvas.clientHeight - movement.endPosition.y</code>ï¼Œè¿™é‡Œæ‰€è¡¨è¾¾çš„å«ä¹‰å’Œåæ ‡å‚è€ƒå¦‚ä¸‹ï¼š</p><ul><li><strong><code>viewer.canvas.clientHeight</code></strong> ï¼šè¿™æ˜¯ Canvas å…ƒç´ çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯ Y è½´çš„æœ€å¤§å€¼ã€‚</li><li><strong><code>movement.endPosition.y</code></strong> ï¼šè¿™é€šå¸¸æ˜¯é¼ æ ‡äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»æˆ–æ‹–åŠ¨äº‹ä»¶ï¼‰ç»“æŸæ—¶çš„ Y åæ ‡ä½ç½®ã€‚åœ¨ Cesium ä¸­ï¼Œè¿™ä¸ªåæ ‡ä¹Ÿéµå¾ª Canvas çš„åæ ‡ç³»ï¼Œå³ Y åæ ‡ä»ä¸Šåˆ°ä¸‹å¢å¤§ã€‚</li></ul><h2 id="ImageryProvider"><a href="#ImageryProvider" class="headerlink" title="ImageryProvider"></a>ImageryProvider</h2><p>åŠ è½½å½±åƒåº•å›¾API: <code>CesiumImagery.vue, ImageryLoading.vue</code></p><blockquote><p><strong>Cesium.: ImageryLayer, IonWorldImageryStyle, SingleTileImageryProvider, GridImageryProvider, TileCoordinateImagery</strong></p><p><strong>viewer:</strong></p><ul><li><strong>.scene.imageryLayers: sceneé‡Œçš„ï¼Œæ›´æ˜ç¡®</strong></li><li><strong>.imageryLayers: Gets the collection of image layers that will be rendered on the globe. æ›´ç®€æ´ï¼Œä¸¤è€…åŠŸèƒ½ä¸€æ ·</strong></li></ul></blockquote><p><strong>ä¸¤è€…å¯¹æ¯”</strong></p><p><strong>Imagery Providerä½¿ç”¨ç‰¹å®šçš„æœåŠ¡è¯·æ±‚Tilesï¼Œè€ŒLayerè¡¨ç¤ºæ¥è‡ªImagery Providerçš„displayed tilesã€‚æ¯”å¦‚è¯´,</strong></p><p><code>const layer = layers.addImageryProvider(imageryProvider);</code></p><p><strong>æ˜¯</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const layer = new Cesium.ImageryLayer(imageryProvider);</span><br><span class="line">layers.add(layer);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šå¸¸æ„å»ºä¸€ä¸ªimagery provideråªæ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªlayer; ç„¶åæˆ‘ä»¬ä½¿ç”¨layerçš„å±æ€§(å¦‚showã€ alphaã€brightnesså’Œcontrast)æ“ä½œè¯¥å›¾å±‚ä»¥æ”¹å˜å…¶è§†è§‰å¤–è§‚ã€‚è§£è€¦decoupling imagery providerå’Œlayerä½¿å¾—ç¼–å†™æ–°çš„imagery providerå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p>ä¸ä¸Šé¢ç¤ºä¾‹ä¸­çš„Layerä¸€æ ·ï¼Œimagery layer collectionå†³å®šäº†å›¾å±‚ç»˜åˆ¶çš„é¡ºåºã€‚layeræ˜¯æ ¹æ®æ·»åŠ çš„é¡ºåºä»åº•éƒ¨åˆ°é¡¶éƒ¨ç»˜åˆ¶çš„ã€‚åƒCesiumä¸­çš„ä»»ä½•å…¶ä»–é›†åˆä¸€æ ·ï¼Œä½¿ç”¨add, remove and getç­‰å‡½æ•°æ“ä½œimagery layer collectionã€‚æ­¤å¤–ï¼Œlayerå¯ä»¥ä½¿ç”¨ raiseã€ raiseToTopã€ lower å’Œ lowerTobottom æ¥é‡æ–°æ’åºã€‚</p><p>Mapboxå½±åƒåŠ è½½ï¼š</p><p>mapbox:&#x2F;&#x2F;styles&#x2F;foxziluliu1121&#x2F;clrzymvix009g01r67bowdcez</p><p><a href="https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg">https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token&#x3D;pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</a></p><ul><li><strong>ImageryLayer, ImageryProvider,</strong></li><li>**Vector Tiles API:  **<a href="https://c.tiles.mapbox.com/v4/foxziluliu1121.66qkqrxn/2/3/0.png?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg">https://c.tiles.mapbox.com/v4/foxziluliu1121.66qkqrxn/2/3/0.png?access_token&#x3D;pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</a></li><li>**static tiles API:  **<code>https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</code></li><li><strong>Mapboxçš„æ•°æ®æ ¼å¼ï¼š</strong><ul><li><strong>mapbox.mapbox-streets-v8</strong></li><li><code>foxziluliu1121.9mqo2ps2</code></li></ul></li></ul><h2 id="terrainProvider"><a href="#terrainProvider" class="headerlink" title="terrainProvider"></a>terrainProvider</h2><p>åœ°å½¢å›¾å±‚åªèƒ½æœ‰ä¸€ä¸ªï¼›</p><p>åœ°å½¢ç±»å‹ï¼š</p><ul><li>STK World Terrain</li><li>Small Terrain</li></ul><p>terrainProvider:</p><ul><li>EllipsoidTerrainProvider</li><li>CustomHeightmapTerrainProvider</li></ul><p>Ceisumæ¡ˆä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cesium.Terrain.fromWorldTerrain(&#123;</span><br><span class="line"> Â   requestWaterMask: true,</span><br><span class="line"> Â   requestVertexNormals: true,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="åŠ è½½çŸ¢é‡æ•°æ®"><a href="#åŠ è½½çŸ¢é‡æ•°æ®" class="headerlink" title="åŠ è½½çŸ¢é‡æ•°æ®"></a>åŠ è½½çŸ¢é‡æ•°æ®</h2><ul><li>CustomDataSource</li><li>CzmlDataSource</li><li>GeoJsonDataSource, GeoJson, TopoJson</li><li>KmlDataSource</li><li></li></ul><h2 id="ç©ºé—´æ•°æ®å¯è§†åŒ–"><a href="#ç©ºé—´æ•°æ®å¯è§†åŒ–" class="headerlink" title="ç©ºé—´æ•°æ®å¯è§†åŒ–"></a>ç©ºé—´æ•°æ®å¯è§†åŒ–</h2><h3 id="Entity-API"><a href="#Entity-API" class="headerlink" title="Entity API"></a>Entity API</h3><p>ä»¥Graphicsç»“å°¾ï¼š</p><ul><li>billboard, box, corridor, cylinder, ellipse, ellipsoid, label</li><li>model, tileset, path, plane,</li><li>point, polygon, polyline, polylineVolume, rectangle, wall,</li></ul><p><strong>ä½¿ç”¨æ³¨æ„ç‚¹ï¼š</strong></p><p>åœ¨Cesiumä¸­ï¼Œ<code>Cesium.BoxGraphics</code>æ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªå®ä½“ï¼ˆEntityï¼‰çš„ç›’çŠ¶å‡ ä½•ä½“çš„å¯è§†åŒ–å±æ€§çš„ç±»ã€‚è¿™ä¸ªç±»æœ¬èº«å¹¶ä¸è´Ÿè´£å°†å‡ ä½•ä½“æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼›ç›¸åï¼Œå®ƒè¢«ç”¨ä½œæè¿°å®ä½“çš„è§†è§‰å¤–è§‚çš„ä¸€éƒ¨åˆ†ã€‚ä¸ºäº†åœ¨Cesiumçš„3Dåœºæ™¯ä¸­æ˜¾ç¤ºä¸€ä¸ªç›’çŠ¶å‡ ä½•ä½“ï¼Œä½ éœ€è¦å°†è¿™ä¸ªå‡ ä½•ä½“ä¸ä¸€ä¸ªå®ä½“ï¼ˆEntityï¼‰å…³è”ï¼Œå¹¶å°†è¯¥å®ä½“æ·»åŠ åˆ°Cesiumçš„å®ä½“é›†åˆä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å®è·µä¸­ï¼Œä½ çœ‹åˆ°çš„ç¤ºä¾‹ä»£ç é€šå¸¸ä¼šä½¿ç”¨ <code>viewer.entities.add()</code>æ¥åˆ›å»ºå’Œæ·»åŠ å¸¦æœ‰ç›’çŠ¶å‡ ä½•ä½“çš„å®ä½“ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨ **<code>Cesium.BoxGraphics</code>é€šè¿‡ <code>viewer.entities.add()</code>æ·»åŠ ä¸€ä¸ªç›’çŠ¶å‡ ä½•ä½“åˆ°åœºæ™¯ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var viewer = new Cesium.Viewer(&#x27;cesiumContainer&#x27;);</span><br><span class="line"></span><br><span class="line">var box = viewer.entities.add(&#123;</span><br><span class="line"> Â  Â position: Cesium.Cartesian3.fromDegrees(-100.0, 40.0, 200000.0),</span><br><span class="line"> Â  Â box: &#123;</span><br><span class="line"> Â  Â  Â  Â dimensions: new Cesium.Cartesian3(400000.0, 300000.0, 500000.0),</span><br><span class="line"> Â  Â  Â  Â material: Cesium.Color.BLUE.withAlpha(0.5),</span><br><span class="line"> Â  Â  Â  Â outline: true,</span><br><span class="line"> Â  Â  Â  Â outlineColor: Cesium.Color.BLACK</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">viewer.zoomTo(viewer.entities);</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š</strong></p><ul><li><code>viewer</code>æ˜¯ <code>Cesium.Viewer</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¯Cesiumåº”ç”¨çš„ä¸»è¦ç•Œé¢ã€‚</li><li><code>viewer.entities.add(&#123;...&#125;)</code>æ˜¯æ·»åŠ æ–°å®ä½“åˆ°åœºæ™¯çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæè¿°äº†å®ä½“çš„å„ç§å±æ€§ï¼ŒåŒ…æ‹¬ä½ç½®ï¼ˆ<code>position</code>ï¼‰ã€å½¢çŠ¶ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ä¸€ä¸ªç›’å­ï¼Œé€šè¿‡ <code>box</code>å±æ€§å®šä¹‰ï¼‰ç­‰ã€‚</li><li><code>box</code>å±æ€§ä½¿ç”¨ <code>Cesium.BoxGraphics</code>çš„ä¸€ä¸ªå®ä¾‹æ¥å®šä¹‰ç›’çŠ¶å‡ ä½•ä½“çš„å¤–è§‚ï¼ŒåŒ…æ‹¬å°ºå¯¸ï¼ˆ<code>dimensions</code>ï¼‰ã€æè´¨ï¼ˆ<code>material</code>ï¼‰ã€è½®å»“çº¿æ˜¯å¦å¯è§ï¼ˆ<code>outline</code>ï¼‰ä»¥åŠè½®å»“çº¿çš„é¢œè‰²ï¼ˆ<code>outlineColor</code>ï¼‰ã€‚</li></ul><p><strong>æ€»ä¹‹ï¼Œ</strong><code>Cesium.BoxGraphics</code>æä¾›äº†å®šä¹‰ç›’çŠ¶å‡ ä½•ä½“è§†è§‰å¤–è§‚çš„æ–¹å¼ï¼Œè€Œ <code>viewer.entities.add()</code>åˆ™æ˜¯å°†è¿™æ ·å®šä¹‰çš„ç›’çŠ¶å‡ ä½•ä½“å®ä½“æ·»åŠ åˆ°Cesiumåœºæ™¯ä¸­çš„æ–¹æ³•ã€‚è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…ä»¥çµæ´»çš„æ–¹å¼åˆ›å»ºå’Œç®¡ç†åœºæ™¯ä¸­çš„å¯¹è±¡ï¼ŒåŒæ—¶æä¾›äº†ä¸°å¯Œçš„APIæ¥å®šä¹‰è¿™äº›å¯¹è±¡çš„è§†è§‰å¤–è§‚ã€‚</p><p>EntityClusterç±»+PinBuilderç±»ï¼šå®ç°billboards, points, labelsçš„èšåˆ</p><p>Entityç®¡ç†ï¼šviewer.entitiesçš„ç±»å‹æ˜¯EntityCollectionï¼ŒåŒ…æ‹¬äº†EntityCollectionç±»é‡Œé¢çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚.add(), .contains(), .getById(), .remove(), .removeAll(), .removeById()</p><p>Entityæ‹¾å–ï¼šviewer.scene.pick(), viewer.scene.drillPick()</p><p>Entityå›ºå®šï¼šheightReferenceå±æ€§å€¼ï¼Œ</p><h3 id="Primitive-API"><a href="#Primitive-API" class="headerlink" title="Primitive API"></a>Primitive API</h3><p>åŠ è½½æ•°æ®çš„æ€§èƒ½æ›´å¥½ï¼Œå¯ä»¥æ›´å¥½çš„åŠ è½½3D Tilesæ•°æ®ã€‚</p><p>Cesium.GeometryInstance()</p><p>Cesium.EllipsoidSurfaceAppearance</p><p>Cesium.Primitive()</p><p>scene.primitives.add()</p><h3 id="æè´¨"><a href="#æè´¨" class="headerlink" title="æè´¨"></a>æè´¨</h3><p><img src="https://s2.loli.net/2024/04/04/9bVKQRSEtL6Dnw4.png"></p><p><strong>MaterialProperty:</strong></p><ul><li>Cesium.ColorMaterialProperty</li><li>Cesium.ImageMaterialProperty</li><li></li></ul><h2 id="GLTFæ ¼å¼"><a href="#GLTFæ ¼å¼" class="headerlink" title="GLTFæ ¼å¼"></a>GLTFæ ¼å¼</h2><p><img src="https://pic2.zhimg.com/80/v2-a26039ef8457742c7121e9532289da51_1440w.webp" alt="img"></p><p><strong>CesiumåŠ è½½gltf:</strong></p><ul><li>viewer.entities.add()</li><li>viewer.scene.primitives.add(), Cesium.Model.fromGltf()</li></ul><h2 id="3D-Tilesæ ¼å¼"><a href="#3D-Tilesæ ¼å¼" class="headerlink" title="3D Tilesæ ¼å¼"></a>3D Tilesæ ¼å¼</h2><p>3D Tileså¯ä»¥ç†è§£ä¸ºå¸¦æœ‰LODçš„glTF,ä¸ºæµå¼ä¼ è¾“å’Œæ¸²æŸ“æµ·é‡3Dæ•°æ®è€Œè®¾è®¡ï¼Œä¾‹å¦‚å€¾æ–œæ‘„å½±ã€3Då»ºç­‘ã€BIM&#x2F;CADï¼Œå®ä¾‹åŒ–è¦ç´ é›†å’Œç‚¹äº‘ã€‚3D Tileså®šä¹‰äº†ä¸€ç§æ•°æ®åˆ†å±‚ç»“æ„å’Œä¸€ç»„åˆ‡ç‰‡æ–¹å¼ã€‚</p><p><strong>ç»„æˆï¼š</strong></p><ul><li>æè¿°ç“¦ç‰‡é›†Tilesetçš„JSONæ–‡ä»¶ â€”â€” tileset.json</li><li>ä¸€ç»„ç“¦ç‰‡Tile<ul><li>ç“¦ç‰‡å¯¹è±¡çš„æ ¼å¼å¯ä»¥ï¼šb3dm, i3dm, pnts, cmpt</li></ul></li></ul><p><strong>å¸¸ç”¨ç±»ï¼š</strong></p><ul><li>Cesium3Dtilesetï¼šç”¨äºæµå¼ä¼ è¾“å¤§é‡çš„å¼‚æ„3Dåœ°ç†ç©ºé—´æ•°æ®é›†ï¼›</li><li>Cesium3DTileStyleï¼šç“¦ç‰‡é›†æ ·å¼ï¼›</li><li>Cesium3DTileï¼šæ•°æ®é›†ä¸­çš„ä¸€ä¸ªç“¦ç‰‡;</li><li>Cesium3DTileContentï¼šç“¦ç‰‡å†…å®¹ï¼›</li><li>Cesium3DTileFeatureï¼šç“¦ç‰‡é›†è¦ç´ ï¼Œç”¨äºè®¿é—®Tileä¸­æ‰¹é‡è¡¨ä¸­çš„å±æ€§æ•°æ®ï¼Œå¯é€šè¿‡scene.pickæ–¹æ³•æ¥è·å–ä¸€ä¸ª BATCHï¼Œå³ä¸‰ç»´è¦ç´ ã€‚Cesium3DTileFeature.getPropertyNames() æ–¹æ³•è·å–æ‰¹é‡è¡¨ä¸­æ‰€æœ‰å±æ€§åï¼ŒCesium3DTileFeature.getProperty(string Name) æ¥è·å–å¯¹åº”å±æ€§åçš„å±æ€§å€¼ã€‚</li></ul><p><strong>æ“ä½œï¼š</strong></p><ol><li>åŠ è½½ï¼šviewer.scene.primitives.add(new Cesium.Cesium3DTileset())</li></ol><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><h4 id="Cesium3DTileset"><a href="#Cesium3DTileset" class="headerlink" title="Cesium3DTileset"></a>Cesium3DTileset</h4><p><a href="https://cesium.com/learn/cesiumjs/ref-doc/Cesium3DTileset.html?classFilter=Cesium3DTileset">å®˜ç½‘é“¾æ¥</a></p><p><code>featureIdLabel</code> å±æ€§åœ¨ Cesium çš„ <code>Cesium3DTileset</code> å¯¹è±¡ä¸­ç”¨äºæŒ‡å®šç”¨äºæ‹¾å–ï¼ˆpickingï¼‰å’Œæ ·å¼åŒ–ï¼ˆstylingï¼‰çš„ç‰¹å¾ ID é›†åˆã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™æ®µæ–‡æ¡£çš„è¯¦ç»†è§£é‡Šå’Œå®ƒçš„ä½œç”¨ï¼š</p><ol><li><strong>é€‰æ‹©ç‰¹å¾ ID é›†åˆ</strong>ï¼š<ul><li>åœ¨ <code>Cesium3DTileset</code> ä¸­ï¼Œ<code>featureIdLabel</code> ç”¨æ¥æ ‡è¯†å’Œé€‰æ‹©ç‰¹å®šçš„ç‰¹å¾ ID é›†åˆã€‚è¿™å¯¹äºæ‰§è¡Œæ‹¾å–æ“ä½œå’Œåº”ç”¨æ ·å¼è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯å½“æ¨¡å‹åŒ…å«å¤šä¸ªç‰¹å¾ ID é›†åˆæ—¶ã€‚</li></ul></li><li><strong>EXT_mesh_features å’Œ EXT_feature_metadata</strong>ï¼š<ul><li>å¯¹äºéµå¾ª <code>EXT_mesh_features</code> æ‰©å±•çš„æ•°æ®ï¼Œ<code>featureIdLabel</code> å¯ä»¥æ˜¯ç‰¹å¾ ID çš„ <code>label</code> å±æ€§ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º <code>&quot;featureId_N&quot;</code>ï¼ˆN æ˜¯ featureIds æ•°ç»„ä¸­çš„ç´¢å¼•ï¼‰ã€‚</li><li>å¯¹äºæ—§çš„ <code>EXT_feature_metadata</code> æ‰©å±•ï¼Œæ²¡æœ‰ <code>label</code> å­—æ®µï¼Œæ‰€ä»¥ç‰¹å¾ ID é›†æ€»æ˜¯ä»¥ <code>&quot;featureId_N&quot;</code> æ ‡è¯†ï¼Œå…¶ä¸­ N æ˜¯æ‰€æœ‰ç‰¹å¾ ID åˆ—è¡¨ä¸­çš„ç´¢å¼•ï¼Œç‰¹å¾ ID å±æ€§åœ¨ç‰¹å¾ ID çº¹ç†ä¹‹å‰åˆ—å‡ºã€‚</li></ul></li><li><strong>ç‰¹å¾ ID æ ‡ç­¾çš„è‡ªåŠ¨è½¬æ¢</strong>ï¼š<ul><li>å¦‚æœ <code>featureIdLabel</code> è¢«è®¾ç½®ä¸ºä¸€ä¸ªæ•´æ•° Nï¼Œå®ƒå°†è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸² <code>&quot;featureId_N&quot;</code>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç®€å•åœ°æŒ‡å®šä¸€ä¸ªç´¢å¼•ï¼ŒCesium ä¼šè‡ªåŠ¨è§£æä¸ºæ­£ç¡®çš„ç‰¹å¾ ID æ ‡ç­¾ã€‚</li></ul></li><li><strong>ä¼˜å…ˆçº§</strong>ï¼š<ul><li>å¦‚æœåŒæ—¶å­˜åœ¨æ¯ä¸ªåŸºå…ƒï¼ˆper-primitiveï¼‰å’Œæ¯ä¸ªå®ä¾‹ï¼ˆper-instanceï¼‰çš„ç‰¹å¾ IDsï¼Œå®ä¾‹ç‰¹å¾ IDs æœ‰ä¼˜å…ˆæƒã€‚è¿™å¯¹äºå†³å®šåœ¨å†²çªæ—¶å“ªç»„ç‰¹å¾ ID åº”è¯¥è¢«ä½¿ç”¨æ˜¯é‡è¦çš„ã€‚</li></ul></li></ol><p><strong>ä½œç”¨</strong></p><ul><li><strong>æ‹¾å–å’Œæ ·å¼åŒ–</strong>ï¼š<ul><li>é€šè¿‡æŒ‡å®š <code>featureIdLabel</code>ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®æ§åˆ¶å“ªä¸€ç»„ç‰¹å¾ ID è¢«ç”¨äºäº¤äº’ï¼ˆå¦‚é¼ æ ‡æ‹¾å–ï¼‰å’Œè§†è§‰æ ·å¼åŒ–ã€‚è¿™åœ¨å¤„ç†åŒ…å«å¤æ‚æ•°æ®é›†çš„å¤§å‹ 3D Tiles æ¨¡å‹æ—¶å°¤å…¶æœ‰ç”¨ã€‚</li></ul></li><li><strong>çµæ´»æ€§å’Œæ§åˆ¶</strong>ï¼š<ul><li>æä¾›äº†å¯¹æ¨¡å‹ç‰¹å¾çš„æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå…è®¸å¼€å‘è€…åŸºäºå…·ä½“çš„ç‰¹å¾ ID é›†æ¥åº”ç”¨æ ·å¼å’Œæ‰§è¡Œæ‹¾å–ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¨¡å‹ä¸­åµŒå…¥äº†å¤šç§æ•°æ®å±‚ï¼ˆå¦‚ä¸åŒçš„ç‰©ç†éƒ¨åˆ†æˆ–ä¸åŒç±»å‹çš„æ•°æ®æ ‡æ³¨ï¼‰æ—¶ã€‚</li></ul></li><li><strong>å®éªŒæ€§ç‰¹æ€§</strong>ï¼š<ul><li><strong>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œ</strong><code>featureIdLabel</code> æ˜¯ä¸€ä¸ªå®éªŒæ€§ç‰¹æ€§ï¼Œå±äº 3D Tiles è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œè¯¥è§„èŒƒå°šæœªæœ€ç»ˆç¡®å®šã€‚å› æ­¤ï¼Œä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ—¶éœ€è¦è°¨æ…ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šåœ¨æ²¡æœ‰æ ‡å‡†å¼ƒç”¨æ”¿ç­–çš„æƒ…å†µä¸‹æ”¹å˜ã€‚</li></ul></li></ul><p><code>featureIdLabel</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºåœ¨å¤æ‚çš„ 3D Tiles æ•°æ®é›†ä¸­è¿›è¡Œç²¾ç¡®çš„äº¤äº’å’Œè§†è§‰è¡¨ç¤ºã€‚å®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®ç‰¹å®šçš„ç‰¹å¾ ID é›†æ¥å®šåˆ¶æ¨¡å‹çš„è¡¨ç°å’Œè¡Œä¸ºï¼Œå¢å¼ºäº†æ¨¡å‹ä¸ç”¨æˆ·äº¤äº’çš„èƒ½åŠ›å’Œçµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒçš„å®éªŒæ€§è´¨ï¼Œä½¿ç”¨æ—¶éœ€è¦å…³æ³¨ Cesium æ›´æ–°å’Œå˜æ›´ã€‚</p><h2 id="Cesiumçš„Property"><a href="#Cesiumçš„Property" class="headerlink" title="Cesiumçš„Property"></a>Cesiumçš„Property</h2><p><strong>åŸºæœ¬property</strong></p><ul><li>CompositeProperty</li><li>ConstantProperty</li><li>SampledProperty</li><li>TimeIntervalCollectionProperty</li></ul><p><strong>Materialçš„property</strong></p><p><strong>PositionProperty</strong></p><p><strong>å…¶ä»–</strong></p><p><img src="https://pic4.zhimg.com/80/v2-9cb0b7aa0c14747709a9dc455c7dccf7_720w.webp" alt="img"></p><h2 id="ç»„ä»¶é‡å†™"><a href="#ç»„ä»¶é‡å†™" class="headerlink" title="ç»„ä»¶é‡å†™"></a>ç»„ä»¶é‡å†™</h2><p>homeButtonå›åˆ°ä¸»è¦é¡µé¢ï¼›</p><p>Geocoderç»„ä»¶é€šè¿‡OSMæœåŠ¡å®ç°ï¼›</p><p>è‡ªå®šä¹‰BaseLayerPicker:</p><ul><li>viewer.baseLayerPicker.viewModel.imageryProviderViewModels</li><li>viewer.baseLayerPicker.viewModel.terrainProviderViewModels</li></ul><h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><p>let handler &#x3D; new Cesium.ScreenSpaceEventHandler(viewer.canvas)</p><p>let eventType &#x3D; Cesium.ScreenSpaceEventType.LEFT_CLICK</p><p>handler.setInputAction((event) &#x3D;&gt; {}, eventType)</p><p>Keyboard: camera.moveForward, .moveBackward, .moveUp, .moveDown, .moveLeft, .moveRight</p><p>åœºæ™¯æ¸²æŸ“: scene.preUpdate, .postUpdate, .preRender, .postRender</p><h2 id="ç›¸æœºæ§åˆ¶"><a href="#ç›¸æœºæ§åˆ¶" class="headerlink" title="ç›¸æœºæ§åˆ¶"></a>ç›¸æœºæ§åˆ¶</h2><p>viewer.flyTo(target, options)</p><p>viewer.zoomTo(target, offset)</p><p>viewer.camera.flyTo(options)</p><p>viewer.camera.flyToBoundingSphere(boundingSphere, options)</p><p>viewer.camera.lookAt(target, offset)</p><p>viewer.camera.lookAtTransform(transform, offset)</p><p>viewer.camera.setView(options)</p><h2 id="æµ‹é‡"><a href="#æµ‹é‡" class="headerlink" title="æµ‹é‡"></a>æµ‹é‡</h2><p>è·ç¦»</p><p>é¢ç§¯</p><p>handler.setInputAction(func(), Cesium.ScreenSpacEventType.RIGHT_CLICK)</p><h2 id="è°ƒè¯•é¢æ¿"><a href="#è°ƒè¯•é¢æ¿" class="headerlink" title="è°ƒè¯•é¢æ¿"></a>è°ƒè¯•é¢æ¿</h2><p>CesiumInspector</p><blockquote><p>äº†è§£Cesiumæ¸²æŸ“æ•ˆæœä»¥åŠæ€§èƒ½è°ƒä¼˜</p><p>viewer.extend(Cesium.viewerCesiumInspectorMixin)</p></blockquote><p>Cesium3DTilesInspector</p><blockquote><p>ç”¨äºç›‘è§†3D Tilesæ•°æ®çš„ç›‘è§†å™¨</p><p>viewer.extend(Cesium.viewerCesium3DTilesInspector)</p></blockquote><h2 id="ç²’å­ç³»ç»Ÿ"><a href="#ç²’å­ç³»ç»Ÿ" class="headerlink" title="ç²’å­ç³»ç»Ÿ"></a>ç²’å­ç³»ç»Ÿ</h2><p>new Cesium.ParticleSystem()</p><h2 id="åœºæ™¯åå¤„ç†"><a href="#åœºæ™¯åå¤„ç†" class="headerlink" title="åœºæ™¯åå¤„ç†"></a>åœºæ™¯åå¤„ç†</h2><p>postProgressç±»</p><p>postProgressStage</p><p>postProgressStageLibrary</p><p>postProgressStageCollection</p><h2 id="ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ"><a href="#ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ" class="headerlink" title="ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ"></a>ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ</h2><p>ThreeJS</p><ol><li>åˆå§‹åŒ–ä¸¤ä¸ªå®¹å™¨ï¼Œå’Œå„è‡ªçš„æ¸²æŸ“å™¨</li><li>è°ƒæ•´å„è‡ªçš„æ¸²æŸ“é¢‘ç‡å’Œç›¸æœºä¸€è‡´</li><li>åŠ å…¥è¦å±•ç¤ºçš„å†…å®¹</li></ol><p>ECharts</p><p>Heatmap</p><p>Turf</p><h2 id="æºç æ‰“åŒ…"><a href="#æºç æ‰“åŒ…" class="headerlink" title="æºç æ‰“åŒ…"></a>æºç æ‰“åŒ…</h2><p>gulp, webpack</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆæ­¥äº†è§£&quot;&gt;&lt;a href=&quot;#åˆæ­¥äº†è§£&quot; class=&quot;headerlink&quot; title=&quot;åˆæ­¥äº†è§£&quot;&gt;&lt;/a&gt;åˆæ­¥äº†è§£&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Cesiumå®˜ç½‘&lt;/strong&gt; &lt;a href=&quot;https://cesium.com/&quot;&gt;Cesium</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="Cesium" scheme="https://youxt-njnu.github.io/tags/Cesium/"/>
    
  </entry>
  
  <entry>
    <title>WebAPIs çŸ¥è¯†ç‚¹æ¢³ç†</title>
    <link href="https://youxt-njnu.github.io/2024/06/13/WebAPIs/"/>
    <id>https://youxt-njnu.github.io/2024/06/13/WebAPIs/</id>
    <published>2024-06-13T01:33:26.000Z</published>
    <updated>2024-06-13T02:42:39.009Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h1 id="Web-APIs"><a href="#Web-APIs" class="headerlink" title="Web APIs"></a>Web APIs</h1><ol><li><strong>API æ˜¯ä¸ºæˆ‘ä»¬ç¨‹åºå‘˜æä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°æŸç§åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å°±å¯ä»¥äº†ï¼Œä¸å¿…çº ç»“å†…éƒ¨å¦‚ä½•å®ç°</strong></li><li><strong>Web API ä¸»è¦æ˜¯é’ˆå¯¹äºæµè§ˆå™¨æä¾›çš„æ¥å£ï¼Œä¸»è¦é’ˆå¯¹äºæµè§ˆå™¨åšäº¤äº’æ•ˆæœã€‚</strong></li><li><strong>Web API ä¸€èˆ¬éƒ½æœ‰è¾“å…¥å’Œè¾“å‡ºï¼ˆ å‡½æ•°çš„ä¼ å‚å’Œè¿”å›å€¼ï¼‰ï¼ŒWeb API å¾ˆå¤šéƒ½æ˜¯æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰</strong></li><li><strong>å­¦ä¹  Web API å¯ä»¥ç»“åˆå‰é¢å­¦ä¹ å†…ç½®å¯¹è±¡æ–¹æ³•çš„æ€è·¯å­¦ä¹ </strong></li></ol><h2 id="1-2-DOM-ä»‹ç»"><a href="#1-2-DOM-ä»‹ç»" class="headerlink" title="1.2. DOM ä»‹ç»"></a>1.2. DOM ä»‹ç»</h2><h3 id="1-2-1-ä»€ä¹ˆæ˜¯DOM"><a href="#1-2-1-ä»€ä¹ˆæ˜¯DOM" class="headerlink" title="1.2.1 ä»€ä¹ˆæ˜¯DOM"></a>1.2.1 ä»€ä¹ˆæ˜¯DOM</h3><p>**æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼Œç®€ç§°DOMï¼‰ï¼Œæ˜¯ **<a href="https://baike.baidu.com/item/W3C">W3C</a> ç»„ç»‡æ¨èçš„å¤„ç†<a href="https://baike.baidu.com/item/%E5%8F%AF%E6%89%A9%E5%B1%95%E7%BD%AE%E6%A0%87%E8%AF%AD%E8%A8%80">å¯æ‰©å±•æ ‡è®°è¯­è¨€</a>ï¼ˆhtmlæˆ–è€…xhtmlï¼‰çš„æ ‡å‡†<a href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3">ç¼–ç¨‹æ¥å£</a>ã€‚</p><p><strong>W3C å·²ç»å®šä¹‰äº†ä¸€ç³»åˆ—çš„ DOM æ¥å£ï¼Œé€šè¿‡è¿™äº› DOM æ¥å£å¯ä»¥æ”¹å˜ç½‘é¡µçš„å†…å®¹ã€ç»“æ„å’Œæ ·å¼ã€‚</strong></p><blockquote><p><strong>DOMæ˜¯W3Cç»„ç»‡åˆ¶å®šçš„ä¸€å¥—å¤„ç† htmlå’Œxmlæ–‡æ¡£çš„è§„èŒƒï¼Œæ‰€æœ‰çš„æµè§ˆå™¨éƒ½éµå¾ªäº†è¿™å¥—æ ‡å‡†ã€‚</strong></p></blockquote><h3 id="1-2-2-DOMæ ‘"><a href="#1-2-2-DOMæ ‘" class="headerlink" title="1.2.2. DOMæ ‘"></a>1.2.2. DOMæ ‘</h3><p><img src="https://s2.loli.net/2024/06/13/bIQ3ek6qtW9CFBm.png"></p><p><strong>DOMæ ‘åˆç§°ä¸ºæ–‡æ¡£æ ‘æ¨¡å‹ï¼ŒæŠŠæ–‡æ¡£æ˜ å°„æˆæ ‘å½¢ç»“æ„ï¼Œé€šè¿‡èŠ‚ç‚¹å¯¹è±¡å¯¹å…¶å¤„ç†ï¼Œå¤„ç†çš„ç»“æœå¯ä»¥åŠ å…¥åˆ°å½“å‰çš„é¡µé¢ã€‚</strong></p><ul><li><strong>æ–‡æ¡£ï¼šä¸€ä¸ªé¡µé¢å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼ŒDOMä¸­ä½¿ç”¨documentè¡¨ç¤º</strong></li><li><strong>èŠ‚ç‚¹ï¼šç½‘é¡µä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œåœ¨æ–‡æ¡£æ ‘ä¸­éƒ½æ˜¯èŠ‚ç‚¹ï¼ˆæ ‡ç­¾ã€å±æ€§ã€æ–‡æœ¬ã€æ³¨é‡Šç­‰ï¼‰ï¼Œä½¿ç”¨nodeè¡¨ç¤º</strong></li><li><strong>æ ‡ç­¾èŠ‚ç‚¹ï¼šç½‘é¡µä¸­çš„æ‰€æœ‰æ ‡ç­¾ï¼Œé€šå¸¸ç§°ä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œåˆç®€ç§°ä¸ºâ€œå…ƒç´ â€ï¼Œä½¿ç”¨elementè¡¨ç¤º</strong></li></ul><p><strong>DOMæŠŠä»¥ä¸Šå†…å®¹éƒ½çœ‹æˆå¯¹è±¡ï¼›</strong></p><h2 id="1-3-è·å–å…ƒç´ "><a href="#1-3-è·å–å…ƒç´ " class="headerlink" title="1.3. è·å–å…ƒç´ "></a>1.3. è·å–å…ƒç´ </h2><p><strong>ä¸ºä»€ä¹ˆè¦è·å–é¡µé¢å…ƒç´ ï¼Ÿ</strong></p><p><strong>ä¾‹å¦‚ï¼šæˆ‘ä»¬æƒ³è¦æ“ä½œé¡µé¢ä¸Šçš„æŸéƒ¨åˆ†(æ˜¾ç¤º&#x2F;éšè—ï¼ŒåŠ¨ç”»)ï¼Œéœ€è¦å…ˆè·å–åˆ°è¯¥éƒ¨åˆ†å¯¹åº”çš„å…ƒç´ ï¼Œå†å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</strong></p><h3 id="1-3-1-æ ¹æ®IDè·å–"><a href="#1-3-1-æ ¹æ®IDè·å–" class="headerlink" title="1.3.1. æ ¹æ®IDè·å–"></a>1.3.1. æ ¹æ®IDè·å–</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šdocument.getElementById(id)</span><br><span class="line">ä½œç”¨ï¼šæ ¹æ®IDè·å–å…ƒç´ å¯¹è±¡</span><br><span class="line">å‚æ•°ï¼šidå€¼ï¼ŒåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²</span><br><span class="line">è¿”å›å€¼ï¼šå…ƒç´ å¯¹è±¡ æˆ– null</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div id=&quot;time&quot;&gt;2019-9-9&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // å› ä¸ºæˆ‘ä»¬æ–‡æ¡£é¡µé¢ä»ä¸Šå¾€ä¸‹åŠ è½½ï¼Œæ‰€ä»¥å…ˆå¾—æœ‰æ ‡ç­¾ æ‰€ä»¥æˆ‘ä»¬scriptå†™åˆ°æ ‡ç­¾çš„ä¸‹é¢</span><br><span class="line"> Â  Â  Â  Â var timer = document.getElementById(&#x27;time&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(timer);</span><br><span class="line"> Â  Â  Â  Â console.log(typeof timer);</span><br><span class="line"> Â  Â  Â  Â // console.dir æ‰“å°æˆ‘ä»¬è¿”å›çš„å…ƒç´ å¯¹è±¡ æ›´å¥½çš„æŸ¥çœ‹é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="line"> Â  Â  Â  Â console.dir(timer);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/06/13/srPCptxVckEZMWQ.png"></p><h3 id="1-3-2-æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ "><a href="#1-3-2-æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ " class="headerlink" title="1.3.2. æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ "></a>1.3.2. æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ </h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šdocument.getElementsByTagName(&#x27;æ ‡ç­¾å&#x27;) æˆ–è€… element.getElementsByTagName(&#x27;æ ‡ç­¾å&#x27;) </span><br><span class="line">ä½œç”¨ï¼šæ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ å¯¹è±¡</span><br><span class="line">å‚æ•°ï¼šæ ‡ç­¾å</span><br><span class="line">è¿”å›å€¼ï¼šå…ƒç´ å¯¹è±¡é›†åˆï¼ˆä¼ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯å…ƒç´ å¯¹è±¡ï¼‰</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;ul&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…11&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…22&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…33&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…44&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…55&lt;/li&gt;</span><br><span class="line"> Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;ul id=&quot;nav&quot;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1.è¿”å›çš„æ˜¯ è·å–è¿‡æ¥å…ƒç´ å¯¹è±¡çš„é›†åˆ ä»¥ä¼ªæ•°ç»„çš„å½¢å¼å­˜å‚¨çš„</span><br><span class="line"> Â  Â  Â  Â var lis = document.getElementsByTagName(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(lis);</span><br><span class="line"> Â  Â  Â  Â console.log(lis[0]);</span><br><span class="line"> Â  Â  Â  Â // 2. æˆ‘ä»¬æƒ³è¦ä¾æ¬¡æ‰“å°é‡Œé¢çš„å…ƒç´ å¯¹è±¡æˆ‘ä»¬å¯ä»¥é‡‡å–éå†çš„æ–¹å¼</span><br><span class="line"> Â  Â  Â  Â for (var i = 0; i &lt; lis.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(lis[i]);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â // 3. element.getElementsByTagName()  å¯ä»¥å¾—åˆ°è¿™ä¸ªå…ƒç´ é‡Œé¢çš„æŸäº›æ ‡ç­¾</span><br><span class="line"> Â  Â  Â  Â var nav = document.getElementById(&#x27;nav&#x27;); // è¿™ä¸ªè·å¾—nav å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var navLis = nav.getElementsByTagName(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(navLis);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong><br><strong>1.å› ä¸ºå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„é›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¦æ“ä½œé‡Œé¢çš„å…ƒç´ å°±éœ€è¦éå†</strong><br><strong>2.å¾—åˆ°å…ƒç´ å¯¹è±¡æ˜¯åŠ¨æ€çš„</strong></p><p><strong>æ³¨æ„ï¼šgetElementsByTagName()è·å–åˆ°æ˜¯åŠ¨æ€é›†åˆï¼Œå³ï¼šå½“é¡µé¢å¢åŠ äº†æ ‡ç­¾ï¼Œè¿™ä¸ªé›†åˆä¸­ä¹Ÿå°±å¢åŠ äº†å…ƒç´ ã€‚</strong></p><h3 id="1-3-3-H5æ–°å¢è·å–å…ƒç´ æ–¹å¼"><a href="#1-3-3-H5æ–°å¢è·å–å…ƒç´ æ–¹å¼" class="headerlink" title="1.3.3. H5æ–°å¢è·å–å…ƒç´ æ–¹å¼"></a>1.3.3. H5æ–°å¢è·å–å…ƒç´ æ–¹å¼</h3><p><strong>1.document.getElementsByclassName(â€˜ç±»åâ€™);&#x2F;&#x2F;æ ¹æ®ç±»åè¿”å›å…ƒç´ å¯¹è±¡é›†åˆ</strong><br><strong>2.document.uerySelector(â€˜é€‰æ‹©å™¨)ï¼›&#x2F;&#x2F;æ ¹æ®æŒ‡å®šé€‰æ‹©å™¨è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡</strong><br><strong>3.document.querySelectorAll(â€˜é€‰æ‹©å™¨â€™); &#x2F;&#x2F;æ ¹æ®æŒ‡å®šé€‰æ‹©å™¨è¿”å›</strong><br><strong>æ³¨æ„ï¼š</strong><br><strong>querySelectorå’ŒquerySelectorAllé‡Œé¢çš„é€‰æ‹©å™¨éœ€è¦åŠ ç¬¦å·ï¼Œæ¯”å¦‚ï¼šdocument.querySelector(â€˜#navâ€™);</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;box&quot;&gt;ç›’å­1&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;box&quot;&gt;ç›’å­2&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;div id=&quot;nav&quot;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;ul&gt;</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;li&gt;é¦–é¡µ&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;li&gt;äº§å“&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. getElementsByClassName æ ¹æ®ç±»åè·å¾—æŸäº›å…ƒç´ é›†åˆ</span><br><span class="line"> Â  Â  Â  Â var boxs = document.getElementsByClassName(&#x27;box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(boxs);</span><br><span class="line"> Â  Â  Â  Â // 2. querySelector è¿”å›æŒ‡å®šé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡  åˆ‡è®° é‡Œé¢çš„é€‰æ‹©å™¨éœ€è¦åŠ ç¬¦å· .box  #nav</span><br><span class="line"> Â  Â  Â  Â var firstBox = document.querySelector(&#x27;.box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(firstBox);</span><br><span class="line"> Â  Â  Â  Â var nav = document.querySelector(&#x27;#nav&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(nav);</span><br><span class="line"> Â  Â  Â  Â var li = document.querySelector(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(li);</span><br><span class="line"> Â  Â  Â  Â // 3. querySelectorAll()è¿”å›æŒ‡å®šé€‰æ‹©å™¨çš„æ‰€æœ‰å…ƒç´ å¯¹è±¡é›†åˆ</span><br><span class="line"> Â  Â  Â  Â var allBox = document.querySelectorAll(&#x27;.box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(allBox);</span><br><span class="line"> Â  Â  Â  Â var lis = document.querySelectorAll(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(lis);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-3-4-è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰"><a href="#1-3-4-è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰" class="headerlink" title="1.3.4 è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰"></a>1.3.4 è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰</h3><p><strong>è·å–bodyå…ƒç´  1.doucumnet.body&#x2F;&#x2F;è¿”å›bodyå…ƒç´ å¯¹è±¡</strong><br><strong>è·å–htmlå…ƒç´  1.document.documentElement&#x2F;&#x2F;è¿”å›htmlå…ƒç´ å¯¹è±¡</strong></p><h2 id="1-4-äº‹ä»¶åŸºç¡€"><a href="#1-4-äº‹ä»¶åŸºç¡€" class="headerlink" title="1.4. äº‹ä»¶åŸºç¡€"></a>1.4. äº‹ä»¶åŸºç¡€</h2><h3 id="1-4-1-äº‹ä»¶æ¦‚è¿°"><a href="#1-4-1-äº‹ä»¶æ¦‚è¿°" class="headerlink" title="1.4.1. äº‹ä»¶æ¦‚è¿°"></a>1.4.1. äº‹ä»¶æ¦‚è¿°</h3><p><strong>JavaScript ä½¿æˆ‘ä»¬æœ‰èƒ½åŠ›åˆ›å»ºåŠ¨æ€é¡µé¢ï¼Œè€Œäº‹ä»¶æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚</strong></p><p>**ç®€å•ç†è§£ï¼š **<strong>è§¦å‘ â€” å“åº”æœºåˆ¶</strong>ã€‚</p><p><strong>ç½‘é¡µä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥äº§ç”ŸæŸäº›å¯ä»¥è§¦å‘ JavaScript çš„äº‹ä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·ç‚¹å‡»æŸæŒ‰é’®æ—¶äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åå»æ‰§è¡ŒæŸäº›æ“ä½œã€‚</strong></p><h3 id="1-4-2-äº‹ä»¶ä¸‰è¦ç´ "><a href="#1-4-2-äº‹ä»¶ä¸‰è¦ç´ " class="headerlink" title="1.4.2. äº‹ä»¶ä¸‰è¦ç´ "></a>1.4.2. äº‹ä»¶ä¸‰è¦ç´ </h3><ul><li><strong>äº‹ä»¶æºï¼ˆè°ï¼‰ï¼šè§¦å‘äº‹ä»¶çš„å…ƒç´ </strong></li><li><strong>äº‹ä»¶ç±»å‹ï¼ˆä»€ä¹ˆäº‹ä»¶ï¼‰ï¼š ä¾‹å¦‚ click ç‚¹å‡»äº‹ä»¶</strong></li><li><strong>äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆåšå•¥ï¼‰ï¼šäº‹ä»¶è§¦å‘åè¦æ‰§è¡Œçš„ä»£ç (å‡½æ•°å½¢å¼)ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°</strong></li></ul><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;btn&quot;&gt;å”ä¼¯è™&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå¼¹å‡ºå¯¹è¯æ¡†</span><br><span class="line"> Â  Â  Â  Â // 1. äº‹ä»¶æ˜¯æœ‰ä¸‰éƒ¨åˆ†ç»„æˆ  äº‹ä»¶æº  äº‹ä»¶ç±»å‹  äº‹ä»¶å¤„ç†ç¨‹åº Â  æˆ‘ä»¬ä¹Ÿç§°ä¸ºäº‹ä»¶ä¸‰è¦ç´ </span><br><span class="line"> Â  Â  Â  Â //(1) äº‹ä»¶æº äº‹ä»¶è¢«è§¦å‘çš„å¯¹è±¡ Â  è°  æŒ‰é’®</span><br><span class="line"> Â  Â  Â  Â var btn = document.getElementById(&#x27;btn&#x27;);</span><br><span class="line"> Â  Â  Â  Â //(2) äº‹ä»¶ç±»å‹  å¦‚ä½•è§¦å‘ ä»€ä¹ˆäº‹ä»¶ æ¯”å¦‚é¼ æ ‡ç‚¹å‡»(onclick) è¿˜æ˜¯é¼ æ ‡ç»è¿‡ è¿˜æ˜¯é”®ç›˜æŒ‰ä¸‹</span><br><span class="line"> Â  Â  Â  Â //(3) äº‹ä»¶å¤„ç†ç¨‹åº  é€šè¿‡ä¸€ä¸ªå‡½æ•°èµ‹å€¼çš„æ–¹å¼ å®Œæˆ</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â alert(&#x27;ç‚¹ç§‹é¦™&#x27;);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-4-3-æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤"><a href="#1-4-3-æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤" class="headerlink" title="1.4.3. æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤"></a>1.4.3. æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤</h3><p><strong>1.è·å–äº‹ä»¶æº</strong><br><strong>2.æ³¨å†Œäº‹ä»¶ï¼ˆç»‘å®šäº‹ä»¶ï¼‰</strong><br><strong>3.æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆé‡‡å–å‡½æ•°èµ‹å€¼å½¢å¼ï¼‰</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;123&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // æ‰§è¡Œäº‹ä»¶æ­¥éª¤</span><br><span class="line"> Â  Â  Â  Â // ç‚¹å‡»div æ§åˆ¶å°è¾“å‡º æˆ‘è¢«é€‰ä¸­äº†</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–äº‹ä»¶æº</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2.ç»‘å®šäº‹ä»¶ æ³¨å†Œäº‹ä»¶</span><br><span class="line"> Â  Â  Â  Â // div.onclick </span><br><span class="line"> Â  Â  Â  Â // 3.æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº </span><br><span class="line"> Â  Â  Â  Â div.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(&#x27;æˆ‘è¢«é€‰ä¸­äº†&#x27;);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-4-4-å¸¸è§çš„é¼ æ ‡äº‹ä»¶"><a href="#1-4-4-å¸¸è§çš„é¼ æ ‡äº‹ä»¶" class="headerlink" title="1.4.4. å¸¸è§çš„é¼ æ ‡äº‹ä»¶"></a>1.4.4. å¸¸è§çš„é¼ æ ‡äº‹ä»¶</h3><p><img src="https://s2.loli.net/2024/06/13/DPX2E1hGYSAmIjo.png"></p><h3 id="1-4-5-åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰"><a href="#1-4-5-åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰" class="headerlink" title="1.4.5. åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰"></a>1.4.5. åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰</h3><ul><li><strong>ä¸‹æ‹‰èœå•ä¸‰è¦ç´ </strong></li><li><strong>å…³é—­å¹¿å‘Šä¸‰è¦ç´ </strong></li></ul><h2 id="1-5-æ“ä½œå…ƒç´ "><a href="#1-5-æ“ä½œå…ƒç´ " class="headerlink" title="1.5. æ“ä½œå…ƒç´ "></a>1.5. æ“ä½œå…ƒç´ </h2><p>**    JavaScriptçš„ DOM æ“ä½œå¯ä»¥æ”¹å˜ç½‘é¡µå†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ DOM æ“ä½œå…ƒç´ æ¥æ”¹å˜å…ƒç´ é‡Œé¢çš„å†…å®¹ã€å±æ€§ç­‰ã€‚ï¼ˆæ³¨æ„ï¼šè¿™äº›æ“ä½œéƒ½æ˜¯é€šè¿‡å…ƒç´ å¯¹è±¡çš„å±æ€§å®ç°çš„ï¼‰**</p><h3 id="1-5-1-æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰"><a href="#1-5-1-æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰" class="headerlink" title="1.5.1. æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰"></a>1.5.1. æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰</h3><p><strong>element.innerText</strong><br><strong>ä»èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å†…å®¹ï¼Œä½†å®ƒå»é™¤htmlæ ‡ç­¾ï¼ŒåŒæ—¶ç©ºæ ¼å’Œæ¢è¡Œä¹Ÿä¼šå»æ‰</strong><br><strong>element.innerHTML</strong><br><strong>èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å…¨éƒ¨å†…å®¹ï¼ŒåŒ…æ‹¬htmlæ ‡ç­¾ï¼ŒåŒæ—¶ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ</strong></p><p><strong>innerTextæ”¹å˜å…ƒç´ å†…å®¹</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button&gt;æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;div&gt;æŸä¸ªæ—¶é—´&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;p&gt;1123&lt;/p&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // å½“æˆ‘ä»¬ç‚¹å‡»äº†æŒ‰é’®ï¼Œ  divé‡Œé¢çš„æ–‡å­—ä¼šå‘ç”Ÿå˜åŒ–</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´  </span><br><span class="line"> Â  Â  Â  Â var btn = document.querySelector(&#x27;button&#x27;);</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2.æ³¨å†Œäº‹ä»¶</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // div.innerText = &#x27;2019-6-6&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â div.innerHTML = getDate();</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â function getDate() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var date = new Date();</span><br><span class="line"> Â  Â  Â  Â  Â  Â // æˆ‘ä»¬å†™ä¸€ä¸ª 2019å¹´ 5æœˆ 1æ—¥ æ˜ŸæœŸä¸‰</span><br><span class="line"> Â  Â  Â  Â  Â  Â var year = date.getFullYear();</span><br><span class="line"> Â  Â  Â  Â  Â  Â var month = date.getMonth() + 1;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var dates = date.getDate();</span><br><span class="line"> Â  Â  Â  Â  Â  Â var arr = [&#x27;æ˜ŸæœŸæ—¥&#x27;, &#x27;æ˜ŸæœŸä¸€&#x27;, &#x27;æ˜ŸæœŸäºŒ&#x27;, &#x27;æ˜ŸæœŸä¸‰&#x27;, &#x27;æ˜ŸæœŸå››&#x27;, &#x27;æ˜ŸæœŸäº”&#x27;, &#x27;æ˜ŸæœŸå…­&#x27;];</span><br><span class="line"> Â  Â  Â  Â  Â  Â var day = date.getDay();</span><br><span class="line"> Â  Â  Â  Â  Â  Â return &#x27;ä»Šå¤©æ˜¯ï¼š&#x27; + year + &#x27;å¹´&#x27; + month + &#x27;æœˆ&#x27; + dates + &#x27;æ—¥ &#x27; + arr[day];</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><strong>innerTextå’ŒinnerHTMLçš„åŒºåˆ«</strong></p><ul><li><strong>è·å–å†…å®¹æ—¶çš„åŒºåˆ«ï¼š</strong></li></ul><p>**    innerTextä¼šå»é™¤ç©ºæ ¼å’Œæ¢è¡Œï¼Œè€ŒinnerHTMLä¼šä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ    **</p><ul><li><strong>è®¾ç½®å†…å®¹æ—¶çš„åŒºåˆ«ï¼š</strong></li></ul><p>**    innerTextä¸ä¼šè¯†åˆ«htmlï¼Œè€ŒinnerHTMLä¼šè¯†åˆ«**</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;p&gt;</span><br><span class="line"> Â  Â  Â  Â æˆ‘æ˜¯æ–‡å­—</span><br><span class="line"> Â  Â  Â  Â &lt;span&gt;123&lt;/span&gt;</span><br><span class="line"> Â  Â &lt;/p&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // innerText å’Œ innerHTMLçš„åŒºåˆ« </span><br><span class="line"> Â  Â  Â  Â // 1. innerText ä¸è¯†åˆ«htmlæ ‡ç­¾ éæ ‡å‡†  å»é™¤ç©ºæ ¼å’Œæ¢è¡Œ</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // div.innerText = &#x27;&lt;strong&gt;ä»Šå¤©æ˜¯ï¼š&lt;/strong&gt; 2019&#x27;;</span><br><span class="line"> Â  Â  Â  Â // 2. innerHTML è¯†åˆ«htmlæ ‡ç­¾ W3Cæ ‡å‡† ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œçš„</span><br><span class="line"> Â  Â  Â  Â div.innerHTML = &#x27;&lt;strong&gt;ä»Šå¤©æ˜¯ï¼š&lt;/strong&gt; 2019&#x27;;</span><br><span class="line"> Â  Â  Â  Â // è¿™ä¸¤ä¸ªå±æ€§æ˜¯å¯è¯»å†™çš„  å¯ä»¥è·å–å…ƒç´ é‡Œé¢çš„å†…å®¹</span><br><span class="line"> Â  Â  Â  Â var p = document.querySelector(&#x27;p&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(p.innerText);</span><br><span class="line"> Â  Â  Â  Â console.log(p.innerHTML);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-2-å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ"><a href="#1-5-2-å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ" class="headerlink" title="1.5.2. å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ"></a>1.5.2. å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ</h3><p><strong>1.innerText,innerHTML æ”¹å˜å…ƒç´ å†…å®¹</strong><br><strong>2.srcã€href</strong><br><strong>3.idã€altã€title</strong></p><p><strong>è·å–å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å</strong></p></blockquote><p><strong>è®¾ç½®å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å &#x3D; å€¼</strong></p></blockquote><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;ldh&quot;&gt;åˆ˜å¾·å&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;zxy&quot;&gt;å¼ å­¦å‹&lt;/button&gt; &lt;br&gt;</span><br><span class="line"> Â  Â &lt;img src=&quot;images/ldh.jpg&quot; alt=&quot;&quot; title=&quot;åˆ˜å¾·å&quot;&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // ä¿®æ”¹å…ƒç´ å±æ€§  src</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var ldh = document.getElementById(&#x27;ldh&#x27;);</span><br><span class="line"> Â  Â  Â  Â var zxy = document.getElementById(&#x27;zxy&#x27;);</span><br><span class="line"> Â  Â  Â  Â var img = document.querySelector(&#x27;img&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶  å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â zxy.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.src = &#x27;images/zxy.jpg&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.title = &#x27;å¼ å­¦å‹æ€å¯†è¾¾&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â ldh.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.src = &#x27;images/ldh.jpg&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.title = &#x27;åˆ˜å¾·å&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-3-æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™"><a href="#1-5-3-æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™" class="headerlink" title="1.5.3. æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™"></a>1.5.3. æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™</h3><p><img src="https://s2.loli.net/2024/06/13/ki3jF4NTnWQKRpL.png"></p><h3 id="1-5-4-è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ"><a href="#1-5-4-è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ" class="headerlink" title="1.5.4. è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ"></a>1.5.4. è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ</h3><p><strong>åˆ©ç”¨DOMå¯ä»¥æ“ä½œå¦‚ä¸‹è¡¨å•å…ƒç´ çš„å±æ€§ï¼š</strong><br><strong>typeã€valueã€checkedã€selectedã€disabled</strong></p><p><strong>è·å–å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å</strong></p></blockquote><p><strong>è®¾ç½®å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å &#x3D; å€¼</strong></p><p><strong>è¡¨å•å…ƒç´ ä¸­æœ‰ä¸€äº›å±æ€§å¦‚ï¼šdisabledã€checkedã€selectedï¼Œå…ƒç´ å¯¹è±¡çš„è¿™äº›å±æ€§çš„å€¼æ˜¯å¸ƒå°”å‹ã€‚</strong></p></blockquote><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button&gt;æŒ‰é’®&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;input type=&quot;text&quot; value=&quot;è¾“å…¥å†…å®¹&quot;&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var btn = document.querySelector(&#x27;button&#x27;);</span><br><span class="line"> Â  Â  Â  Â var input = document.querySelector(&#x27;input&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶ å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // è¡¨å•é‡Œé¢çš„å€¼ æ–‡å­—å†…å®¹æ˜¯é€šè¿‡ value æ¥ä¿®æ”¹çš„</span><br><span class="line"> Â  Â  Â  Â  Â  Â input.value = &#x27;è¢«ç‚¹å‡»äº†&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // å¦‚æœæƒ³è¦æŸä¸ªè¡¨å•è¢«ç¦ç”¨ ä¸èƒ½å†ç‚¹å‡» disabled  æˆ‘ä»¬æƒ³è¦è¿™ä¸ªæŒ‰é’® buttonç¦ç”¨</span><br><span class="line"> Â  Â  Â  Â  Â  Â // btn.disabled = true;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.disabled = true;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this æŒ‡å‘çš„æ˜¯äº‹ä»¶å‡½æ•°çš„è°ƒç”¨è€… btn</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-5-æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç "><a href="#1-5-5-æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç " class="headerlink" title="1.5.5. æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç "></a>1.5.5. æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç </h3><p><img src="https://s2.loli.net/2024/06/13/G9BXQyrReOTxI65.png"></p><h3 id="1-5-6-æ ·å¼å±æ€§æ“ä½œ"><a href="#1-5-6-æ ·å¼å±æ€§æ“ä½œ" class="headerlink" title="1.5.6. æ ·å¼å±æ€§æ“ä½œ"></a>1.5.6. æ ·å¼å±æ€§æ“ä½œ</h3><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡ JS ä¿®æ”¹å…ƒç´ çš„å¤§å°ã€é¢œè‰²ã€ä½ç½®ç­‰æ ·å¼ã€‚</strong></p><p><strong>å¸¸ç”¨æ–¹å¼</strong></p><p><strong>1.element.style  è¡Œå†…æ ·å¼æ“ä½œ</strong><br><strong>2.element.className  ç±»åæ ·å¼æ“ä½œ</strong></p><h4 id="æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§"><a href="#æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§" class="headerlink" title="æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§"></a>æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§</h4><blockquote><p><strong>å…ƒç´ å¯¹è±¡çš„styleå±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼</strong></p><p><strong>å…ƒç´ å¯¹è±¡.style.æ ·å¼å±æ€§ &#x3D; å€¼;</strong></p></blockquote><p><strong>æ³¨æ„ï¼š</strong><br><strong>1.JS é‡Œé¢çš„æ ·å¼é‡‡å–å°é©¼å³°å‘½åæ³•æ¯”å¦‚fontsizeã€backgroundColor</strong><br><strong>2.JSä¿®æ”¹styleæ ·å¼æ“ä½œï¼Œäº§ç”Ÿçš„æ˜¯è¡Œå†…æ ·å¼ï¼Œcssæƒé‡æ¯”è¾ƒé«˜</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶ å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â div.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // div.styleé‡Œé¢çš„å±æ€§ é‡‡å–é©¼å³°å‘½åæ³• </span><br><span class="line"> Â  Â  Â  Â  Â  Â this.style.backgroundColor = &#x27;purple&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.style.width = &#x27;250px&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç "><a href="#æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç " class="headerlink" title="æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç "></a>æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç </h4><p><img src="https://s2.loli.net/2024/06/13/M17o26KwY4Tx9yR.png"></p><h4 id="æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯"><a href="#æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯" class="headerlink" title="æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯"></a>æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯</h4><p><img src="https://s2.loli.net/2024/06/13/RHjG1g8Dzhw4kuB.png"></p><h4 id="æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹"><a href="#æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹" class="headerlink" title="æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹"></a>æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹</h4><p><img src="https://s2.loli.net/2024/06/13/yQxe7VT3YXpkrU5.png"></p><h4 id="æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§"><a href="#æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§" class="headerlink" title="æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§"></a>æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§</h4><blockquote><p><strong>å…ƒç´ å¯¹è±¡.className &#x3D; å€¼;</strong></p><p><strong>å› ä¸ºclassæ˜¯å…³é”®å­—ï¼Œæ‰€æœ‰ä½¿ç”¨classNameã€‚</strong></p></blockquote><p><strong>æ³¨æ„ï¼š</strong><br><strong>1,å¦‚æœæ ·å¼ä¿®æ”¹è¾ƒå¤šï¼Œå¯ä»¥é‡‡å–æ“ä½œç±»åæ–¹å¼æ›´æ”¹å…ƒç´ æ ·å¼ã€‚</strong><br><strong>2.classå› ä¸ºæ˜¯ä¸ªä¿ç•™å­—ï¼Œå› æ­¤ä½¿ç”¨classNameæ¥æ“ä½œå…ƒç´ ç±»åå±æ€§</strong><br><strong>3.className ä¼šç›´æ¥æ›´æ”¹å…ƒç´ çš„ç±»åï¼Œä¼šè¦†ç›–åŸå…ˆçš„ç±»åã€‚</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;first&quot;&gt;æ–‡æœ¬&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. ä½¿ç”¨ element.style è·å¾—ä¿®æ”¹å…ƒç´ æ ·å¼  å¦‚æœæ ·å¼æ¯”è¾ƒå°‘ æˆ–è€… åŠŸèƒ½ç®€å•çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="line"> Â  Â  Â  Â var test = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â test.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.backgroundColor = &#x27;purple&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.color = &#x27;#fff&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.fontSize = &#x27;25px&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.marginTop = &#x27;100px&#x27;;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â  Â  Â // 2. æˆ‘ä»¬å¯ä»¥é€šè¿‡ ä¿®æ”¹å…ƒç´ çš„classNameæ›´æ”¹å…ƒç´ çš„æ ·å¼ é€‚åˆäºæ ·å¼è¾ƒå¤šæˆ–è€…åŠŸèƒ½å¤æ‚çš„æƒ…å†µ</span><br><span class="line"> Â  Â  Â  Â  Â  Â // 3. å¦‚æœæƒ³è¦ä¿ç•™åŸå…ˆçš„ç±»åï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš å¤šç±»åé€‰æ‹©å™¨</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.className = &#x27;change&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.className = &#x27;first change&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯"><a href="#æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯" class="headerlink" title="æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯"></a>æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯</h4><p><img src="https://s2.loli.net/2024/06/13/6OkmXxy9sSY3bv7.png"></p><p><strong>æ€»ç»“ï¼š</strong></p><p><img src="https://s2.loli.net/2024/06/13/5KReAgoXG1VIpdZ.png"></p><h2 id="1-6-H5è‡ªå®šä¹‰å±æ€§"><a href="#1-6-H5è‡ªå®šä¹‰å±æ€§" class="headerlink" title="1.6. H5è‡ªå®šä¹‰å±æ€§"></a>1.6. H5è‡ªå®šä¹‰å±æ€§</h2><p><strong>è‡ªå®šä¹‰å±æ€§ç›®çš„ï¼šæ˜¯ä¸ºäº†ä¿å­˜å¹¶ä½¿ç”¨æ•°æ®ã€‚æœ‰äº›æ•°æ®å¯ä»¥ä¿å­˜åˆ°é¡µé¢ä¸­è€Œä¸ç”¨ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</strong></p><p><strong>è‡ªå®šä¹‰å±æ€§è·å–æ˜¯é€šè¿‡getAttribute(â€˜å±æ€§â€™) è·å–ã€‚</strong></p><p><strong>ä½†æ˜¯æœ‰äº›è‡ªå®šä¹‰å±æ€§å¾ˆå®¹æ˜“å¼•èµ·æ­§ä¹‰ï¼Œä¸å®¹æ˜“åˆ¤æ–­æ˜¯å…ƒç´ çš„å†…ç½®å±æ€§è¿˜æ˜¯è‡ªå®šä¹‰å±æ€§ã€‚</strong></p><p><strong>H5ç»™æˆ‘ä»¬æ–°å¢äº†è‡ªå®šä¹‰å±æ€§ï¼š</strong></p><p><strong>1.è®¾ç½®H5è‡ªå®šä¹‰å±æ€§</strong><br><strong>H5è§„å®šè‡ªå®šä¹‰å±æ€§data-å¼€å¤´åšä¸ºå±æ€§åå¹¶ç›®èµ‹å€¼ã€‚</strong><br><strong>æ¯”å¦‚</strong> <code>&lt;div data-index=&quot;1&quot;&gt;</code><strong><code>&lt;/div&gt;</code></strong><br><strong>æˆ–è€…ä½¿ç”¨JSè®¾ç½®</strong><br><strong>element.setAttribute(â€˜data-indexâ€™,2)</strong></p><p><strong>2.è·å–H5è‡ªå®šä¹‰å±æ€§</strong><br><strong>1.å…¼å®¹æ€§è·å–element.getAttribute(â€˜data-indexâ€™):</strong><br><strong>2.H5æ–°å¢element.dataset.indexæˆ–è€…element.dataset[â€˜indexâ€™]   ie11æ‰å¼€å§‹æ”¯æŒ</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  Â &lt;div getTime=&quot;20&quot; data-index=&quot;2&quot; data-list-name=&quot;andy&quot;&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // console.log(div.getTime);</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;getTime&#x27;));</span><br><span class="line"> Â  Â  Â  Â div.setAttribute(&#x27;data-time&#x27;, 20);</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;data-index&#x27;));</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;data-list-name&#x27;));</span><br><span class="line"> Â  Â  Â  Â // h5æ–°å¢çš„è·å–è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³• å®ƒåªèƒ½è·å–data-å¼€å¤´çš„</span><br><span class="line"> Â  Â  Â  Â // dataset æ˜¯ä¸€ä¸ªé›†åˆé‡Œé¢å­˜æ”¾äº†æ‰€æœ‰ä»¥dataå¼€å¤´çš„è‡ªå®šä¹‰å±æ€§</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset.index);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset[&#x27;index&#x27;]);</span><br><span class="line"> Â  Â  Â  Â // å¦‚æœè‡ªå®šä¹‰å±æ€§é‡Œé¢æœ‰å¤šä¸ª-é“¾æ¥çš„å•è¯ï¼Œæˆ‘ä»¬è·å–çš„æ—¶å€™é‡‡å– é©¼å³°å‘½åæ³•</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset.listName);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset[&#x27;listName&#x27;]);//data-list-name</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="1-7-èŠ‚ç‚¹æ“ä½œ"><a href="#1-7-èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="1.7. èŠ‚ç‚¹æ“ä½œ"></a>1.7. èŠ‚ç‚¹æ“ä½œ</h2><p><strong>ä¸€èˆ¬åœ°ï¼ŒèŠ‚ç‚¹è‡³å°‘æ‹¥æœ‰nodeTypeï¼ˆèŠ‚ç‚¹ç±»å‹ï¼‰ã€nodeNameï¼ˆèŠ‚ç‚¹åç§°ï¼‰å’ŒnodeValueï¼ˆèŠ‚ç‚¹å€¼ï¼‰è¿™ä¸‰ä¸ªåŸºæœ¬å±æ€§ã€‚</strong></p><ul><li><strong>å…ƒç´ èŠ‚ç‚¹nodeTypeä¸º1</strong></li><li><strong>å±æ€§èŠ‚ç‚¹nodeTypeä¸º2</strong></li><li><strong>æ–‡æœ¬èŠ‚ç‚¹nodeTypeä¸º3(æ–‡æœ¬èŠ‚ç‚¹åŒ…å«æ–‡å­—ã€ç©ºæ ¼ã€æ¢è¡Œç­‰)</strong></li></ul><p><strong>æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼ŒèŠ‚ç‚¹æ“ä½œä¸»è¦æ“ä½œçš„æ˜¯å…ƒç´ èŠ‚ç‚¹</strong></p><h3 id="1-7-1-èŠ‚ç‚¹å±‚çº§"><a href="#1-7-1-èŠ‚ç‚¹å±‚çº§" class="headerlink" title="1.7.1. èŠ‚ç‚¹å±‚çº§"></a>1.7.1. èŠ‚ç‚¹å±‚çº§</h3><p>**    åˆ©ç”¨ DOM æ ‘å¯ä»¥æŠŠèŠ‚ç‚¹åˆ’åˆ†ä¸ºä¸åŒçš„å±‚çº§å…³ç³»ï¼Œå¸¸è§çš„æ˜¯**<strong>çˆ¶å­å…„å±‚çº§å…³ç³»</strong>ã€‚</p><p><img src="https://s2.loli.net/2024/06/13/Ogtv9nHuEMZqyhA.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node.parentNode</span><br><span class="line">parentNode.childNodes</span><br><span class="line">parentNode.children</span><br><span class="line">parentNode.firstChild</span><br><span class="line">parentNode.lastChild</span><br><span class="line">parentNode.firstElementChild</span><br><span class="line">parentNode.lastElementChild</span><br><span class="line">parentNode.children[0]</span><br><span class="line">parentNode.children[parentNode.children.length-1]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node.nextSibling</span><br><span class="line">node.previousSibling</span><br><span class="line">node.nextElementSibling</span><br><span class="line">node.previousElementSibling</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  function getNextElementSibling(element) &#123;</span><br><span class="line"> Â  Â  Â var el = element;</span><br><span class="line"> Â  Â  Â while (el = el.nextSibling) &#123;</span><br><span class="line"> Â  Â  Â  Â if (el.nodeType === 1) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â return el;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;//æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œå°±è¿”å›</span><br><span class="line"> Â  Â  Â return null;//ä¸æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œè¿”å›null</span><br><span class="line"> Â   &#125; Â </span><br></pre></td></tr></table></figure><h3 id="1-7-2-èŠ‚ç‚¹æ“ä½œ"><a href="#1-7-2-èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="1.7.2. èŠ‚ç‚¹æ“ä½œ"></a>1.7.2. èŠ‚ç‚¹æ“ä½œ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.createElement(&#x27;tagName&#x27;)</span><br><span class="line">node.appendChild(child)</span><br><span class="line">node.insertBefore(child,æŒ‡å®šå…ƒç´ )</span><br><span class="line">node.removeChild(child)</span><br><span class="line">node.cloneNode()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>GISé›†æˆæ¡ˆä¾‹æ±‡æŠ¥</title>
    <link href="https://youxt-njnu.github.io/2024/05/31/%E8%AF%BE%E7%A8%8B%E6%B1%87%E6%8A%A5-GIS/"/>
    <id>https://youxt-njnu.github.io/2024/05/31/%E8%AF%BE%E7%A8%8B%E6%B1%87%E6%8A%A5-GIS/</id>
    <published>2024-05-31T01:33:26.000Z</published>
    <updated>2024-06-13T01:51:08.928Z</updated>
    
    <content type="html"><![CDATA[<p>åœ°ç†ä¿¡æ¯é›†æˆè¯¾ç¨‹æ±‡æŠ¥ï¼ˆä¸TLQåˆä½œï¼Œæ„Ÿè°¢ï¼ï¼‰</p><p><img src="https://s2.loli.net/2024/05/31/3d8OD9FK1LaHZYx.png" alt="1.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/ogFZUMn2bLBsxHP.png" alt="2.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/2FgX7cUQiRzIfJd.png" alt="3.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/dLPKfYwCpylSWih.png" alt="4.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/8fx5bjDVnpERuOd.png" alt="5.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=341481481&bvid=BV1CR4y1A78S&cid=717991642&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/M4D6bAowy8iZ7Yv.png" alt="7.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/imL2PkUsGajWxbF.png" alt="8.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/ColDRx4TSG5Amh6.png" alt="9.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/8cQWF73tgzKTjCn.png" alt="10.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/5JTNYdMo6naiU3O.png" alt="11.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/rdKkcylwaPmAG8i.png" alt="å¹»ç¯ç‰‡12.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/kgHosDmy3AGECqT.png" alt="å¹»ç¯ç‰‡13.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/GWtdX9sfi8VUIx1.png" alt="å¹»ç¯ç‰‡14.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=1555426770&bvid=BV1h1421y7nD&cid=1566027972&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/1KMZYlqzh2Wy5s4.png" alt="å¹»ç¯ç‰‡15.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/1KJnBzQ7edx4SYV.png" alt="å¹»ç¯ç‰‡16.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/jo2gOWszI619Y7v.png" alt="å¹»ç¯ç‰‡17.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/hnAwgIOZo3TtSs6.png" alt="å¹»ç¯ç‰‡18.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/o76d5WrFwU4b8Gf.png" alt="å¹»ç¯ç‰‡19.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/O9aCgdNFh4GmoyL.png" alt="å¹»ç¯ç‰‡20.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=1555426770&bvid=BV1h1421y7nD&cid=1566027972&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/4SUDLPcJXMGzops.png" alt="å¹»ç¯ç‰‡21.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/eVAFpTj6o1LwKv3.png" alt="å¹»ç¯ç‰‡22.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/cfq8XexUyz16S5k.png" alt="å¹»ç¯ç‰‡23.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/oN3VCuPRYZwMB8z.png" alt="å¹»ç¯ç‰‡24.PNG"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ°ç†ä¿¡æ¯é›†æˆè¯¾ç¨‹æ±‡æŠ¥ï¼ˆä¸TLQåˆä½œï¼Œæ„Ÿè°¢ï¼ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/05/31/3d8OD9FK1LaHZYx.png&quot; alt=&quot;1.PNG&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli</summary>
      
    
    
    
    <category term="AR" scheme="https://youxt-njnu.github.io/categories/AR/"/>
    
    
    <category term="AR" scheme="https://youxt-njnu.github.io/tags/AR/"/>
    
    <category term="æ±‡æŠ¥PPT" scheme="https://youxt-njnu.github.io/tags/%E6%B1%87%E6%8A%A5PPT/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptåŸºç¡€çŸ¥è¯†â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A2/"/>
    <id>https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A2/</id>
    <published>2024-03-17T01:33:26.000Z</published>
    <updated>2024-03-17T01:42:27.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h2 id="11-å¯¹è±¡"><a href="#11-å¯¹è±¡" class="headerlink" title="11. å¯¹è±¡"></a>11. å¯¹è±¡</h2><ul><li><p><strong>åˆ©ç”¨å­—é¢é‡åˆ›å»ºå¯¹è±¡</strong></p><h5 id="ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š"><a href="#ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š" class="headerlink" title="ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š"></a><strong>ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡</strong>ï¼š</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°±æ˜¯èŠ±æ‹¬å· &#123; &#125; é‡Œé¢åŒ…å«äº†è¡¨è¾¾è¿™ä¸ªå…·ä½“äº‹ç‰©ï¼ˆå¯¹è±¡ï¼‰çš„å±æ€§å’Œæ–¹æ³•ï¼›&#123; &#125; é‡Œé¢é‡‡å–é”®å€¼å¯¹çš„å½¢å¼è¡¨ç¤º </span><br></pre></td></tr></table></figure><ul><li><p>é”®ï¼šç›¸å½“äºå±æ€§å</p></li><li><p>å€¼ï¼šç›¸å½“äºå±æ€§å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ï¼ˆæ•°å­—ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹ï¼Œå‡½æ•°ç±»å‹ç­‰ï¼‰<br>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var star = &#123;</span><br><span class="line"> Â  Â name : &#x27;pink&#x27;,</span><br><span class="line"> Â  Â age : 18,</span><br><span class="line"> Â  Â sex : &#x27;ç”·&#x27;,</span><br><span class="line"> Â  Â sayHi : function()&#123;</span><br><span class="line"> Â  Â  Â  Â alert(&#x27;å¤§å®¶å¥½å•Š~&#x27;);</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ starå³æ˜¯åˆ›å»ºçš„å¯¹è±¡ã€‚</p></li></ul></li><li><p>å¯¹è±¡çš„ä½¿ç”¨</p><ul><li><p>å¯¹è±¡çš„å±æ€§</p><ul><li>å¯¹è±¡ä¸­å­˜å‚¨å…·ä½“æ•°æ®çš„ â€œé”®å€¼å¯¹â€ä¸­çš„ â€œé”®â€ç§°ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œå³å¯¹è±¡ä¸­å­˜å‚¨å…·ä½“æ•°æ®çš„é¡¹</li></ul></li><li><p>å¯¹è±¡çš„æ–¹æ³•</p><ul><li>å¯¹è±¡ä¸­å­˜å‚¨å‡½æ•°çš„ â€œé”®å€¼å¯¹â€ä¸­çš„ â€œé”®â€ç§°ä¸ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå³å¯¹è±¡ä¸­å­˜å‚¨å‡½æ•°çš„é¡¹</li></ul></li><li><p>è®¿é—®å¯¹è±¡çš„å±æ€§</p><ul><li>å¯¹è±¡é‡Œé¢çš„å±æ€§è°ƒç”¨ : å¯¹è±¡.å±æ€§å ï¼Œè¿™ä¸ªå°ç‚¹ . å°±ç†è§£ä¸ºâ€œ çš„ â€</li><li>å¯¹è±¡é‡Œé¢å±æ€§çš„å¦ä¸€ç§è°ƒç”¨æ–¹å¼ : å¯¹è±¡[â€˜å±æ€§åâ€™]ï¼Œæ³¨æ„æ–¹æ‹¬å·é‡Œé¢çš„å±æ€§å¿…é¡»åŠ å¼•å·<br><strong>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(star.name) Â  Â  // è°ƒç”¨åå­—å±æ€§</span><br><span class="line">console.log(star[&#x27;name&#x27;]) Â // è°ƒç”¨åå­—å±æ€§</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</strong></p><ul><li>å¯¹è±¡é‡Œé¢çš„æ–¹æ³•è°ƒç”¨ï¼šå¯¹è±¡.æ–¹æ³•å() ï¼Œæ³¨æ„è¿™ä¸ªæ–¹æ³•åå­—åé¢ä¸€å®šåŠ æ‹¬å·<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">star.sayHi(); Â  Â  Â  Â  Â  Â  Â // è°ƒç”¨ sayHi æ–¹æ³•,æ³¨æ„ï¼Œä¸€å®šä¸è¦å¿˜è®°å¸¦åé¢çš„æ‹¬å·</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å˜é‡ã€å±æ€§ã€å‡½æ•°ã€æ–¹æ³•æ€»ç»“</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å±æ€§æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå˜é‡ä¸æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå˜é‡æ˜¯å•ç‹¬å­˜å‚¨æ•°æ®çš„å®¹å™¨</span><br></pre></td></tr></table></figure><ul><li>å˜é‡ï¼šå•ç‹¬å£°æ˜èµ‹å€¼ï¼Œå•ç‹¬å­˜åœ¨</li><li>å±æ€§ï¼šå¯¹è±¡é‡Œé¢çš„å˜é‡ç§°ä¸ºå±æ€§ï¼Œä¸éœ€è¦å£°æ˜ï¼Œç”¨æ¥æè¿°è¯¥å¯¹è±¡çš„ç‰¹å¾<br>æ–¹æ³•æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå‡½æ•°ä¸æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå‡½æ•°æ˜¯å•ç‹¬å°è£…æ“ä½œçš„å®¹å™¨</li><li>å‡½æ•°ï¼šå•ç‹¬å­˜åœ¨çš„ï¼Œé€šè¿‡â€œå‡½æ•°å()â€çš„æ–¹å¼å°±å¯ä»¥è°ƒç”¨</li><li>æ–¹æ³•ï¼šå¯¹è±¡é‡Œé¢çš„å‡½æ•°ç§°ä¸ºæ–¹æ³•ï¼Œæ–¹æ³•ä¸éœ€è¦å£°æ˜ï¼Œä½¿ç”¨â€œå¯¹è±¡.æ–¹æ³•å()â€çš„æ–¹å¼å°±å¯ä»¥è°ƒç”¨ï¼Œæ–¹æ³•ç”¨æ¥æè¿°è¯¥å¯¹è±¡çš„è¡Œä¸ºå’ŒåŠŸèƒ½</li></ul></li></ul></li><li><p><strong>åˆ©ç”¨ new Object åˆ›å»ºå¯¹è±¡</strong></p><ul><li><p>åˆ›å»ºç©ºå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var andy = new Obect();</span><br></pre></td></tr></table></figure><p>é€šè¿‡å†…ç½®æ„é€ å‡½æ•°Objectåˆ›å»ºå¯¹è±¡ï¼Œæ­¤æ—¶andyå˜é‡å·²ç»ä¿å­˜äº†åˆ›å»ºå‡ºæ¥çš„ç©ºå¯¹è±¡</p></li><li><p>ç»™ç©ºå¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</p><ul><li>é€šè¿‡å¯¹è±¡æ“ä½œå±æ€§å’Œæ–¹æ³•çš„æ–¹å¼ï¼Œæ¥ä¸ºå¯¹è±¡å¢åŠ å±æ€§å’Œæ–¹æ³•<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">andy.name = &#x27;pink&#x27;;</span><br><span class="line">andy.age = 18;</span><br><span class="line">andy.sex = &#x27;ç”·&#x27;;</span><br><span class="line">andy.sayHi = function()&#123;</span><br><span class="line"> Â  Â alert(&#x27;å¤§å®¶å¥½å•Š~&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>Object() ï¼šç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™</li><li>new Object() ï¼šéœ€è¦ new å…³é”®å­—</li><li>ä½¿ç”¨çš„æ ¼å¼ï¼šå¯¹è±¡.å±æ€§ &#x3D;  å€¼;</li></ul></li></ul></li><li><p><strong>åˆ©ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</strong></p><ul><li>æ„é€ å‡½æ•°<ul><li><p>æ„é€ å‡½æ•°ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œå³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œå®ƒæ€»ä¸ new è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå¯¹è±¡ä¸­ä¸€äº›å…¬å…±çš„å±æ€§å’Œæ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œç„¶åå°è£…åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚</p></li><li><p>æ„é€ å‡½æ•°çš„å°è£…æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function æ„é€ å‡½æ•°å(å½¢å‚1,å½¢å‚2,å½¢å‚3) &#123;</span><br><span class="line"> Â  Â  this.å±æ€§å1 = å‚æ•°1;</span><br><span class="line"> Â  Â  this.å±æ€§å2 = å‚æ•°2;</span><br><span class="line"> Â  Â  this.å±æ€§å3 = å‚æ•°3;</span><br><span class="line"> Â  Â  this.æ–¹æ³•å = å‡½æ•°ä½“;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ„é€ å‡½æ•°çš„è°ƒç”¨æ ¼å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var obj = new æ„é€ å‡½æ•°å(å®å‚1ï¼Œå®å‚2ï¼Œå®å‚3)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œobjå³æ¥æ”¶åˆ°æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ã€‚</p></li><li><p>æ³¨æ„äº‹é¡¹</p><ol><li>æ„é€ å‡½æ•°çº¦å®šé¦–å­—æ¯å¤§å†™ã€‚</li><li>å‡½æ•°å†…çš„å±æ€§å’Œæ–¹æ³•å‰é¢éœ€è¦æ·»åŠ <strong>this</strong> ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li><strong>æ„é€ å‡½æ•°ä¸­ä¸éœ€è¦ return è¿”å›ç»“æœ</strong>ã€‚</li><li>å½“æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»ç”¨ new æ¥è°ƒç”¨æ„é€ å‡½æ•°ã€‚</li></ol></li><li><p><strong>å…¶ä»–</strong><br>æ„é€ å‡½æ•°ï¼Œå¦‚ Stars()ï¼ŒæŠ½è±¡äº†å¯¹è±¡çš„å…¬å…±éƒ¨åˆ†ï¼Œå°è£…åˆ°äº†å‡½æ•°é‡Œé¢ï¼Œå®ƒæ³›æŒ‡æŸä¸€å¤§ç±»ï¼ˆclassï¼‰<br>åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ new Stars()ï¼Œç‰¹æŒ‡æŸä¸€ä¸ªï¼Œé€šè¿‡ new å…³é”®å­—åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æˆ‘ä»¬ä¹Ÿç§°ä¸ºå¯¹è±¡å®ä¾‹åŒ–</p></li></ul></li></ul></li><li><p><strong>newå…³é”®å­—çš„ä½œç”¨</strong></p><ol><li>åœ¨æ„é€ å‡½æ•°ä»£ç å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li><li>ä¿®æ”¹thisçš„æŒ‡å‘ï¼ŒæŠŠthisæŒ‡å‘åˆ›å»ºå‡ºæ¥çš„ç©ºå¯¹è±¡ï¼›</li><li>æ‰§è¡Œå‡½æ•°çš„ä»£ç </li><li>åœ¨å‡½æ•°å®Œæˆä¹‹åï¼Œè¿”å›thisâ€”å³åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</li></ol><h3 id="5-3-éå†å¯¹è±¡"><a href="#5-3-éå†å¯¹è±¡" class="headerlink" title="5.3 éå†å¯¹è±¡"></a>5.3 éå†å¯¹è±¡</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for...in è¯­å¥ç”¨äºå¯¹æ•°ç»„æˆ–è€…å¯¹è±¡çš„å±æ€§è¿›è¡Œå¾ªç¯æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">å…¶è¯­æ³•å¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (å˜é‡ in å¯¹è±¡åå­—) &#123;</span><br><span class="line"> Â  Â // åœ¨æ­¤æ‰§è¡Œä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ä¸­çš„å˜é‡æ˜¯è‡ªå®šä¹‰çš„ï¼Œå®ƒéœ€è¦ç¬¦åˆå‘½åè§„èŒƒï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°†è¿™ä¸ªå˜é‡å†™ä¸º k æˆ–è€… keyã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (var k in obj) &#123;</span><br><span class="line"> Â  Â console.log(k); Â  Â  Â // è¿™é‡Œçš„ k æ˜¯å±æ€§å</span><br><span class="line"> Â  Â console.log(obj[k]); // è¿™é‡Œçš„ obj[k] æ˜¯å±æ€§å€¼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-1-å†…ç½®å¯¹è±¡"><a href="#1-1-å†…ç½®å¯¹è±¡" class="headerlink" title="1.1 å†…ç½®å¯¹è±¡"></a>1.1 å†…ç½®å¯¹è±¡</h3><p>JavaScript ä¸­çš„å¯¹è±¡åˆ†ä¸º3ç§ï¼šè‡ªå®šä¹‰å¯¹è±¡ ã€å†…ç½®å¯¹è±¡ã€ æµè§ˆå™¨å¯¹è±¡<br><strong>å‰é¢ä¸¤ç§å¯¹è±¡æ˜¯JS åŸºç¡€å†…å®¹ï¼Œå±äº ECMAScriptï¼›  ç¬¬ä¸‰ä¸ªæµè§ˆå™¨å¯¹è±¡å±äº JS ç‹¬æœ‰çš„ï¼Œ JS API è®²è§£å†…ç½®å¯¹è±¡å°±æ˜¯æŒ‡ JS è¯­è¨€è‡ªå¸¦çš„ä¸€äº›å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå¹¶æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æˆ–æ˜¯</strong>æœ€åŸºæœ¬è€Œå¿…è¦çš„åŠŸèƒ½ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå†…ç½®å¯¹è±¡æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¼€å‘</p><p>**JavaScript æä¾›äº†å¤šä¸ªå†…ç½®å¯¹è±¡ï¼šMathã€ Date ã€Arrayã€Stringç­‰    **</p><h3 id="1-2-æŸ¥æ–‡æ¡£"><a href="#1-2-æŸ¥æ–‡æ¡£" class="headerlink" title="1.2 æŸ¥æ–‡æ¡£"></a>1.2 æŸ¥æ–‡æ¡£</h3><p>æŸ¥æ‰¾æ–‡æ¡£ï¼šå­¦ä¹ ä¸€ä¸ªå†…ç½®å¯¹è±¡çš„ä½¿ç”¨ï¼Œåªè¦å­¦ä¼šå…¶å¸¸ç”¨æˆå‘˜çš„ä½¿ç”¨å³å¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥æ–‡æ¡£å­¦ä¹ ï¼Œå¯ä»¥é€šè¿‡MDN&#x2F;W3Cæ¥æŸ¥è¯¢ã€‚<br>Mozilla å¼€å‘è€…ç½‘ç»œï¼ˆMDNï¼‰æä¾›äº†æœ‰å…³å¼€æ”¾ç½‘ç»œæŠ€æœ¯ï¼ˆOpen Webï¼‰çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ HTMLã€CSS å’Œä¸‡ç»´ç½‘åŠ HTML5 åº”ç”¨çš„ APIã€‚<br>MDN:<a href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p><h3 id="1-3-Mathå¯¹è±¡"><a href="#1-3-Mathå¯¹è±¡" class="headerlink" title="1.3 Mathå¯¹è±¡"></a>1.3 Mathå¯¹è±¡</h3><p>Math å¯¹è±¡ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œå®ƒå…·æœ‰æ•°å­¦å¸¸æ•°å’Œå‡½æ•°çš„å±æ€§å’Œæ–¹æ³•ã€‚è·Ÿæ•°å­¦ç›¸å…³çš„è¿ç®—ï¼ˆæ±‚ç»å¯¹å€¼ï¼Œå–æ•´ã€æœ€å¤§å€¼ç­‰ï¼‰å¯ä»¥ä½¿ç”¨ Math ä¸­çš„æˆå‘˜ã€‚</p><table><thead><tr><th>å±æ€§ã€æ–¹æ³•å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Math.PI</td><td>åœ†å‘¨ç‡</td></tr><tr><td>Math.floor()</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>Math.ceil()</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>Math.round()</td><td>å››èˆäº”å…¥ç‰ˆ å°±è¿‘å–æ•´   æ³¨æ„ -3.5   ç»“æœæ˜¯  -3</td></tr><tr><td>Math.abs()</td><td>ç»å¯¹å€¼</td></tr><tr><td>Math.max()&#x2F;Math.min()</td><td>æ±‚æœ€å¤§å’Œæœ€å°å€¼</td></tr><tr><td>Math.random()</td><td>è·å–èŒƒå›´åœ¨[0,1)å†…çš„éšæœºå€¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼šä¸Šé¢çš„æ–¹æ³•ä½¿ç”¨æ—¶å¿…é¡»å¸¦æ‹¬å·</strong></p><p>è·å–æŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•´æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function getRandom(min, max) &#123;</span><br><span class="line"> Â return Math.floor(Math.random() * (max - min + 1)) + min; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åˆ©ç”¨å¯¹è±¡å°è£…è‡ªå·±çš„æ•°å­¦å¯¹è±¡  é‡Œé¢æœ‰ PI æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br><span class="line"> Â  Â  Â  Â var myMath = &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â PI: 3.141592653,</span><br><span class="line"> Â  Â  Â  Â  Â  Â max: function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â var max = arguments[0];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â for (var i = 1; i &lt; arguments.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (arguments[i] &gt; max) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â max = arguments[i];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â return max;</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;,</span><br><span class="line"> Â  Â  Â  Â  Â  Â min: function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â var min = arguments[0];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â for (var i = 1; i &lt; arguments.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (arguments[i] &lt; min) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â min = arguments[i];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â return min;</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.PI);</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.max(1, 5, 9));</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.min(1, 5, 9));</span><br></pre></td></tr></table></figure><h3 id="1-4-æ—¥æœŸå¯¹è±¡"><a href="#1-4-æ—¥æœŸå¯¹è±¡" class="headerlink" title="1.4 æ—¥æœŸå¯¹è±¡"></a>1.4 æ—¥æœŸå¯¹è±¡</h3><p>Date å¯¹è±¡å’Œ Math å¯¹è±¡ä¸ä¸€æ ·ï¼ŒDateæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨å…¶ä¸­å…·ä½“æ–¹æ³•å’Œå±æ€§ã€‚Date å®ä¾‹ç”¨æ¥å¤„ç†æ—¥æœŸå’Œæ—¶é—´</p><ul><li><p>ä½¿ç”¨Dateå®ä¾‹åŒ–æ—¥æœŸå¯¹è±¡</p><ul><li>è·å–å½“å‰æ—¶é—´å¿…é¡»å®ä¾‹åŒ–ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var now = new Date();</span><br></pre></td></tr></table></figure><ul><li>è·å–æŒ‡å®šæ—¶é—´çš„æ—¥æœŸå¯¹è±¡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var future = new Date(&#x27;2019/5/1&#x27;);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœåˆ›å»ºå®ä¾‹æ—¶å¹¶æœªä¼ å…¥å‚æ•°ï¼Œåˆ™å¾—åˆ°çš„æ—¥æœŸå¯¹è±¡æ˜¯å½“å‰æ—¶é—´å¯¹åº”çš„æ—¥æœŸå¯¹è±¡</p></li><li><p><strong>ä½¿ç”¨Dateå®ä¾‹çš„æ–¹æ³•å’Œå±æ€§</strong><br><img src="https://s2.loli.net/2024/03/17/Bt7q6c4fYMbLpgr.png" alt="å›¾ç‰‡1"></p></li><li><p>é€šè¿‡Dateå®ä¾‹è·å–æ€»æ¯«ç±³æ•°</p><ul><li>æ€»æ¯«ç§’æ•°çš„å«ä¹‰<br>åŸºäº1970å¹´1æœˆ1æ—¥ï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰èµ·çš„æ¯«ç§’æ•°</li><li>è·å–æ€»æ¯«ç§’æ•°<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å®ä¾‹åŒ–Dateå¯¹è±¡</span><br><span class="line">var now = new Date();</span><br><span class="line">// 1. ç”¨äºè·å–å¯¹è±¡çš„åŸå§‹å€¼</span><br><span class="line">console.log(date.valueOf()) Â  Â </span><br><span class="line">console.log(date.getTime()) Â  Â </span><br><span class="line">// 2. ç®€å•å†™å¯ä»¥è¿™ä¹ˆåš</span><br><span class="line">var now = + new Date(); Â  Â  Â  Â  Â  Â </span><br><span class="line">// 3. HTML5ä¸­æä¾›çš„æ–¹æ³•ï¼Œæœ‰å…¼å®¹æ€§é—®é¢˜</span><br><span class="line">var now = Date.now();</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="1-5-æ•°ç»„å¯¹è±¡"><a href="#1-5-æ•°ç»„å¯¹è±¡" class="headerlink" title="1.5 æ•°ç»„å¯¹è±¡"></a>1.5 æ•°ç»„å¯¹è±¡</h3><h4 id="åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼"><a href="#åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼"></a>åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼</h4><ul><li>å­—é¢é‡æ–¹å¼<ul><li>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1,&quot;test&quot;,true];</span><br></pre></td></tr></table></figure></li></ul></li><li>new Array()<ul><li><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = new Array();</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸Šé¢ä»£ç ä¸­arråˆ›å»ºå‡ºçš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ„é€ å‡½æ•°Arrayåˆ›å»ºéç©ºæ•°ç»„ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ•°ç»„æ—¶ä¼ å…¥å‚æ•°</p><p>å‚æ•°ä¼ é€’è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœåªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å‚æ•°è§„å®šäº†æ•°ç»„çš„é•¿åº¦</li><li>å¦‚æœä¼ å…¥äº†å¤šä¸ªå‚æ•°ï¼Œåˆ™å‚æ•°ç§°ä¸ºæ•°ç»„çš„å…ƒç´ </li></ul></li></ul></li></ul><h4 id="æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„"><a href="#æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„" class="headerlink" title="æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„"></a>æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„</h4><ul><li>instanceof è¿ç®—ç¬¦<ul><li>instanceof å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 23];</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">console.log(arr instanceof Array); // true</span><br><span class="line">console.log(obj instanceof Array); // false</span><br></pre></td></tr></table></figure></li></ul></li><li>Array.isArray()<ul><li>Array.isArray()ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ï¼ŒisArray() æ˜¯ HTML5 ä¸­æä¾›çš„æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 23];</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">console.log(Array.isArray(arr)); Â  // true</span><br><span class="line">console.log(Array.isArray(obj)); Â  // false</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•"><a href="#æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•" class="headerlink" title="æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•"></a>æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­æœ‰è¿›è¡Œå¢åŠ ã€åˆ é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨<br><img src="https://s2.loli.net/2024/03/17/uebmUwin5S3j91r.png" alt="pushpop"><br>æ³¨æ„ï¼špushã€unshiftä¸ºå¢åŠ å…ƒç´ æ–¹æ³•ï¼›popã€shiftä¸ºåˆ é™¤å…ƒç´ çš„æ–¹æ³•</li></ul><h4 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h4><ul><li><strong>æ•°ç»„ä¸­æœ‰å¯¹æ•°ç»„æœ¬èº«æ’åºçš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨</strong><br><img src="https://s2.loli.net/2024/03/17/DOPv2ZCqMBnpmsN.png"><br>æ³¨æ„ï¼šsortæ–¹æ³•éœ€è¦ä¼ å…¥å‚æ•°æ¥è®¾ç½®å‡åºã€é™åºæ’åº<ul><li>å¦‚æœä¼ å…¥â€œfunction(a,b){ return a-b;}â€ï¼Œåˆ™ä¸ºå‡åº</li><li>å¦‚æœä¼ å…¥â€œfunction(a,b){ return b-a;}â€ï¼Œåˆ™ä¸ºé™åº</li></ul></li></ul><h4 id="æ•°ç»„ç´¢å¼•æ–¹æ³•"><a href="#æ•°ç»„ç´¢å¼•æ–¹æ³•" class="headerlink" title="æ•°ç»„ç´¢å¼•æ–¹æ³•"></a>æ•°ç»„ç´¢å¼•æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­æœ‰è·å–æ•°ç»„æŒ‡å®šå…ƒç´ ç´¢å¼•å€¼çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨<br><img src="https://s2.loli.net/2024/03/17/IFPG26TQdrbw1NK.png"></li></ul><h4 id="æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"><a href="#æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"></a>æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h4><ul><li><strong>æ•°ç»„ä¸­æœ‰æŠŠæ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨</strong><br><img src="https://s2.loli.net/2024/03/17/fGBnsd1I65ZK7tz.png"><br><strong>æ³¨æ„ï¼šjoinæ–¹æ³•å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œåˆ™æŒ‰ç…§ â€œ , â€æ‹¼æ¥å…ƒç´ </strong></li></ul><h4 id="å…¶ä»–æ–¹æ³•"><a href="#å…¶ä»–æ–¹æ³•" class="headerlink" title="å…¶ä»–æ–¹æ³•"></a>å…¶ä»–æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­è¿˜æœ‰å…¶ä»–æ“ä½œæ–¹æ³•ï¼ŒåŒå­¦ä»¬å¯ä»¥åœ¨è¯¾ä¸‹è‡ªè¡ŒæŸ¥é˜…å­¦ä¹ <br><img src="https://s2.loli.net/2024/03/17/3iDC7uAtBHdKRGr.png"></li></ul><h3 id="1-6-å­—ç¬¦ä¸²å¯¹è±¡"><a href="#1-6-å­—ç¬¦ä¸²å¯¹è±¡" class="headerlink" title="1.6 å­—ç¬¦ä¸²å¯¹è±¡"></a>1.6 å­—ç¬¦ä¸²å¯¹è±¡</h3><h4 id="åŸºæœ¬åŒ…è£…ç±»å‹"><a href="#åŸºæœ¬åŒ…è£…ç±»å‹" class="headerlink" title="åŸºæœ¬åŒ…è£…ç±»å‹"></a>åŸºæœ¬åŒ…è£…ç±»å‹</h4><p>ä¸ºäº†æ–¹ä¾¿æ“ä½œåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒJavaScript è¿˜æä¾›äº†ä¸‰ä¸ªç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼šStringã€Numberå’Œ Booleanã€‚</p><p>åŸºæœ¬åŒ…è£…ç±»å‹å°±æ˜¯æŠŠç®€å•æ•°æ®ç±»å‹åŒ…è£…æˆä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œè¿™æ ·åŸºæœ¬æ•°æ®ç±»å‹å°±æœ‰äº†å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ä¸‹é¢ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span><br><span class="line">var str = &#x27;andy&#x27;;</span><br><span class="line">console.log(str.length);</span><br></pre></td></tr></table></figure><p>æŒ‰é“ç†åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ²¡æœ‰å±æ€§å’Œæ–¹æ³•çš„ï¼Œè€Œå¯¹è±¡æ‰æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†ä¸Šé¢ä»£ç å´å¯ä»¥æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºjsä¼šæŠŠåŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. ç”Ÿæˆä¸´æ—¶å˜é‡ï¼ŒæŠŠç®€å•ç±»å‹åŒ…è£…ä¸ºå¤æ‚æ•°æ®ç±»å‹</span><br><span class="line">var temp = new String(&#x27;andy&#x27;);</span><br><span class="line">// 2. èµ‹å€¼ç»™æˆ‘ä»¬å£°æ˜çš„å­—ç¬¦å˜é‡</span><br><span class="line">str = temp;</span><br><span class="line">// 3. é”€æ¯ä¸´æ—¶å˜é‡</span><br><span class="line">temp = null;</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²çš„ä¸å¯å˜"><a href="#å­—ç¬¦ä¸²çš„ä¸å¯å˜" class="headerlink" title="å­—ç¬¦ä¸²çš„ä¸å¯å˜"></a>å­—ç¬¦ä¸²çš„ä¸å¯å˜</h4><p>æŒ‡çš„æ˜¯é‡Œé¢çš„å€¼ä¸å¯å˜ï¼Œè™½ç„¶çœ‹ä¸Šå»å¯ä»¥æ”¹å˜å†…å®¹ï¼Œä½†å…¶å®æ˜¯åœ°å€å˜äº†ï¼Œå†…å­˜ä¸­æ–°å¼€è¾Ÿäº†ä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚</p><p>å½“é‡æ–°ç»™å­—ç¬¦ä¸²å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå˜é‡ä¹‹å‰ä¿å­˜çš„å­—ç¬¦ä¸²ä¸ä¼šè¢«ä¿®æ”¹ï¼Œä¾ç„¶åœ¨å†…å­˜ä¸­é‡æ–°ç»™å­—ç¬¦ä¸²èµ‹å€¼ï¼Œä¼šé‡æ–°åœ¨å†…å­˜ä¸­å¼€è¾Ÿç©ºé—´ï¼Œè¿™ä¸ªç‰¹ç‚¹å°±æ˜¯å­—ç¬¦ä¸²çš„ä¸å¯å˜ã€‚<br>ç”±äºå­—ç¬¦ä¸²çš„ä¸å¯å˜ï¼Œåœ¨****å¤§é‡æ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ä¼šæœ‰æ•ˆç‡é—®é¢˜</p><h4 id="æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®"><a href="#æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®" class="headerlink" title="æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®"></a>æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®</h4><p>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯è¿”å›æŒ‡å®šå­—ç¬¦çš„ä½ç½®çš„æ–¹æ³•ï¼š</p><p><img src="https://s2.loli.net/2024/03/17/7QdYZoglVsuOrxw.png"></p><p><strong>æ¡ˆä¾‹ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²â€abcoefoxyozzoppâ€ä¸­æ‰€æœ‰oå‡ºç°çš„ä½ç½®ä»¥åŠæ¬¡æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var str = &quot;oabcoefoxyozzopp&quot;;</span><br><span class="line">var index = str.indexOf(&#x27;o&#x27;);</span><br><span class="line">var num = 0;</span><br><span class="line">// console.log(index);</span><br><span class="line">while (index !== -1) &#123;</span><br><span class="line"> Â  Â  Â console.log(index);</span><br><span class="line"> Â  Â  Â num++;</span><br><span class="line"> Â  Â  Â index = str.indexOf(&#x27;o&#x27;, index + 1);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;oå‡ºç°çš„æ¬¡æ•°æ˜¯: &#x27; + num);</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦"><a href="#æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦" class="headerlink" title="æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦"></a>æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦</h4><p>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯æ ¹æ®ä½ç½®è¿”å›æŒ‡å®šä½ç½®ä¸Šçš„å­—ç¬¦ï¼š</p><p><img src="https://s2.loli.net/2024/03/17/6S5Z3Ezf4BYJH9T.png"></p><p>æ¡ˆä¾‹ï¼šåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸² â€˜abcoefoxyozzoppâ€™ ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œå¹¶ç»Ÿè®¡å…¶æ¬¡æ•°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  Â  Â var o = &#123;&#125;;</span><br><span class="line"> Â  Â  Â var str = &quot;abcoefoxyozzopp&quot;;</span><br><span class="line"> Â  Â  Â // Â  for (var k in str) &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  if (o[str[k]]) &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  Â  o[str[k]]++;</span><br><span class="line"> Â  Â  Â // Â  Â  &#125; else &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  Â  o[str[k]] = 1;</span><br><span class="line"> Â  Â  Â // Â  Â  &#125;</span><br><span class="line"> Â  Â  Â // Â  &#125;</span><br><span class="line"> Â  Â  Â for (var i = 0; i &lt; str.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â var chars = str.charAt(i);</span><br><span class="line"> Â  Â  Â  Â if (o[chars]) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â o[chars]++;</span><br><span class="line"> Â  Â  Â   &#125; else &#123;</span><br><span class="line"> Â  Â  Â  Â  Â o[chars] = 1;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;</span><br><span class="line"> Â  Â  Â console.log(o);</span><br><span class="line"> Â  Â  Â var max = 0;</span><br><span class="line"> Â  Â  Â var ch = &quot;&quot;;</span><br><span class="line"> Â  Â  Â for (var k in o) &#123;</span><br><span class="line"> Â  Â  Â  Â if (o[k] &gt; max) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â max = o[k];</span><br><span class="line"> Â  Â  Â  Â  Â ch = k;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;</span><br><span class="line"> Â  Â  Â console.log(max);</span><br><span class="line"> Â  Â  Â console.log(ch);</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"></a>å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•</h4><p><strong>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ“ä½œæ–¹æ³•ï¼š</strong></p><p><img src="https://s2.loli.net/2024/03/17/zO5PavVILoNGh9l.png"></p><h4 id="replace-æ–¹æ³•"><a href="#replace-æ–¹æ³•" class="headerlink" title="replace()æ–¹æ³•"></a>replace()æ–¹æ³•</h4><p><strong>replace() æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œå…¶ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­—ç¬¦ä¸².replace(è¢«æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼Œ è¦æ›¿æ¢ä¸ºçš„å­—ç¬¦ä¸²)ï¼›</span><br></pre></td></tr></table></figure><h4 id="split-æ–¹æ³•"><a href="#split-æ–¹æ³•" class="headerlink" title="split()æ–¹æ³•"></a>split()æ–¹æ³•</h4><p><strong>split()æ–¹æ³•ç”¨äºåˆ‡åˆ†å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥å°†å­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºæ•°ç»„ã€‚åœ¨åˆ‡åˆ†å®Œæ¯•ä¹‹åï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­—ç¬¦ä¸².split(&quot;åˆ†å‰²å­—ç¬¦&quot;)</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚æ•°æ®ç±»å‹ä¼ å‚"><a href="#å¤æ‚æ•°æ®ç±»å‹ä¼ å‚" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹ä¼ å‚"></a>å¤æ‚æ•°æ®ç±»å‹ä¼ å‚</h3><p><strong>å‡½æ•°çš„å½¢å‚ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå½“æˆ‘ä»¬æŠŠå¼•ç”¨ç±»å‹å˜é‡ä¼ ç»™å½¢å‚æ—¶ï¼Œå…¶å®æ˜¯æŠŠå˜é‡åœ¨æ ˆç©ºé—´é‡Œä¿å­˜çš„å †åœ°å€å¤åˆ¶ç»™äº†å½¢å‚ï¼Œå½¢å‚å’Œå®å‚å…¶å®ä¿å­˜çš„æ˜¯åŒä¸€ä¸ªå †åœ°å€ï¼Œæ‰€ä»¥æ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function Person(name) &#123;//æ„é€ å‡½æ•°</span><br><span class="line"> Â  Â this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">function f1(x) &#123; // x = p</span><br><span class="line"> Â  Â console.log(x.name); // 2.åˆ˜å¾·å Â  </span><br><span class="line"> Â  Â x.name = &quot;å¼ å­¦å‹&quot;;</span><br><span class="line"> Â  Â console.log(x.name); // 3. å¼ å­¦å‹ Â </span><br><span class="line">&#125;</span><br><span class="line">var p = new Person(&quot;åˆ˜å¾·å&quot;); //å®ä¾‹</span><br><span class="line">console.log(p.name); Â  Â // 1.åˆ˜å¾·å</span><br><span class="line">f1(p);</span><br><span class="line">console.log(p.name); Â  Â // 4. å¼ å­¦å‹</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptåŸºç¡€çŸ¥è¯†â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A1/"/>
    <id>https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A1/</id>
    <published>2024-03-17T01:27:26.000Z</published>
    <updated>2024-03-17T01:32:58.272Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h2 id="7-è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰"><a href="#7-è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰" class="headerlink" title="7. è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰"></a>7. è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰</h2><p><strong>æµ®ç‚¹æ•°çš„ç²¾åº¦é—®é¢˜</strong></p><p><strong>æµ®ç‚¹æ•°å€¼çš„æœ€é«˜ç²¾åº¦æ˜¯ 17 ä½å°æ•°ï¼Œä½†åœ¨è¿›è¡Œç®—æœ¯è®¡ç®—æ—¶å…¶ç²¾ç¡®åº¦è¿œè¿œä¸å¦‚æ•´æ•°ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="number">0.1</span> + <span class="number">0.2</span>; Â  Â <span class="comment">// ç»“æœä¸æ˜¯ 0.3ï¼Œè€Œæ˜¯ï¼š0.30000000000000004</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0.07</span> * <span class="number">100</span>); Â  <span class="comment">// ç»“æœä¸æ˜¯ 7ï¼Œ  è€Œæ˜¯ï¼š7.000000000000001</span></span><br></pre></td></tr></table></figure><p><strong>æ‰€ä»¥ï¼šä¸è¦ç›´æ¥åˆ¤æ–­ä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ !</strong></p><h2 id="8-æ–­ç‚¹è°ƒè¯•"><a href="#8-æ–­ç‚¹è°ƒè¯•" class="headerlink" title="8. æ–­ç‚¹è°ƒè¯•"></a>8. æ–­ç‚¹è°ƒè¯•</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–­ç‚¹è°ƒè¯•æ˜¯æŒ‡è‡ªå·±åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œè°ƒè¯•æ—¶ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œå°±ä¼šåœä½ï¼Œç„¶åä½ å¯ä»¥ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è°ƒè¯•ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥çœ‹å„ä¸ªå˜é‡å½“å‰çš„å€¼ï¼Œå‡ºé”™çš„è¯ï¼Œè°ƒè¯•åˆ°å‡ºé”™çš„ä»£ç è¡Œå³æ˜¾ç¤ºé”™è¯¯ï¼Œåœä¸‹ã€‚æ–­ç‚¹è°ƒè¯•å¯ä»¥å¸®åŠ©è§‚å¯Ÿç¨‹åºçš„è¿è¡Œè¿‡ç¨‹</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–­ç‚¹è°ƒè¯•çš„æµç¨‹ï¼š</span><br><span class="line">1ã€æµè§ˆå™¨ä¸­æŒ‰ F12--&gt; sources --&gt;æ‰¾åˆ°éœ€è¦è°ƒè¯•çš„æ–‡ä»¶--&gt;åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®æ–­ç‚¹</span><br><span class="line">2ã€Watch: ç›‘è§†ï¼Œé€šè¿‡watchå¯ä»¥ç›‘è§†å˜é‡çš„å€¼çš„å˜åŒ–ï¼Œéå¸¸çš„å¸¸ç”¨ã€‚</span><br><span class="line">3ã€æ‘ä¸‹F11ï¼Œç¨‹åºå•æ­¥æ‰§è¡Œï¼Œè®©ç¨‹åºä¸€è¡Œä¸€è¡Œçš„æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè§‚å¯Ÿwatchä¸­å˜é‡çš„å€¼çš„å˜åŒ–ã€‚</span><br></pre></td></tr></table></figure><p><strong>æ ‡è¯†ç¬¦å‘½åè§„èŒƒ</strong></p><ul><li><strong>å˜é‡ã€å‡½æ•°çš„å‘½åå¿…é¡»è¦æœ‰æ„ä¹‰</strong></li><li><strong>å˜é‡çš„åç§°ä¸€èˆ¬ç”¨åè¯</strong></li><li><strong>å‡½æ•°çš„åç§°ä¸€èˆ¬ç”¨åŠ¨è¯</strong></li></ul><h2 id="9-æ•°ç»„"><a href="#9-æ•°ç»„" class="headerlink" title="9. æ•°ç»„"></a>9. æ•°ç»„</h2><p><strong>JS ä¸­åˆ›å»ºæ•°ç»„æœ‰ä¸¤ç§æ–¹å¼ï¼š</strong></p><ul><li><p><strong>åˆ©ç”¨  new åˆ›å»ºæ•°ç»„</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> æ•°ç»„å = <span class="keyword">new</span> <span class="title class_">Array</span>() ï¼›</span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(); Â  <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ Array () ï¼ŒA è¦å¤§å†™</strong></p></li><li><p><strong>åˆ©ç”¨æ•°ç»„å­—é¢é‡åˆ›å»ºæ•°ç»„</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. ä½¿ç”¨æ•°ç»„å­—é¢é‡æ–¹å¼åˆ›å»ºç©ºçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> Â æ•°ç»„å = []ï¼›</span><br><span class="line"><span class="comment">//2. ä½¿ç”¨æ•°ç»„å­—é¢é‡æ–¹å¼åˆ›å»ºå¸¦åˆå§‹å€¼çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> Â æ•°ç»„å = [<span class="string">&#x27;å°ç™½&#x27;</span>,<span class="string">&#x27;å°é»‘&#x27;</span>,<span class="string">&#x27;å¤§é»„&#x27;</span>,<span class="string">&#x27;ç‘å¥‡&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>**æ•°ç»„çš„å­—é¢é‡æ˜¯æ–¹æ‹¬å· [ ] **</li><li><strong>å£°æ˜æ•°ç»„å¹¶èµ‹å€¼ç§°ä¸ºæ•°ç»„çš„åˆå§‹åŒ–</strong></li><li><strong>è¿™ç§å­—é¢é‡æ–¹å¼ä¹Ÿæ˜¯æˆ‘ä»¬ä»¥åæœ€å¤šä½¿ç”¨çš„æ–¹å¼</strong></li></ul></li><li><p><strong>æ•°ç»„å…ƒç´ çš„ç±»å‹</strong><br><strong>æ•°ç»„ä¸­å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ç­‰ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arrStus = [<span class="string">&#x27;å°ç™½&#x27;</span>,<span class="number">12</span>,<span class="literal">true</span>,<span class="number">28.9</span>];</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> arrStus = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="comment">// è·å–æ•°ç»„ä¸­çš„ç¬¬2ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="title function_">alert</span>(arrStus[<span class="number">1</span>]); Â  Â </span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå¦‚æœè®¿é—®æ—¶æ•°ç»„æ²¡æœ‰å’Œç´¢å¼•å€¼å¯¹åº”çš„å…ƒç´ ï¼Œåˆ™å¾—åˆ°çš„å€¼æ˜¯undefined</strong></p><ul><li><p><strong>æ•°ç»„çš„é•¿åº¦</strong><br><strong>æ•°ç»„çš„é•¿åº¦ï¼šé»˜è®¤æƒ…å†µä¸‹è¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°</strong><br><strong>ä½¿ç”¨â€œæ•°ç»„å.lengthâ€å¯ä»¥è®¿é—®æ•°ç»„å…ƒç´ çš„æ•°é‡ï¼ˆæ•°ç»„é•¿åº¦ï¼‰ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arrStus = [1,2,3];</span><br><span class="line">alert(arrStus.length); Â // 3</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p></li><li><p><strong>æ­¤å¤„æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„å…ƒç´ çš„ä¸ªæ•° ï¼Œä¸è¦å’Œæ•°ç»„çš„ç´¢å¼•å·æ··æ·†ã€‚</strong></p></li><li><p><strong>å½“æˆ‘ä»¬æ•°ç»„é‡Œé¢çš„å…ƒç´ ä¸ªæ•°å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ª length å±æ€§è·Ÿç€ä¸€èµ·å˜åŒ–</strong></p></li><li><p><strong>æ•°ç»„çš„lengthå±æ€§å¯ä»¥è¢«ä¿®æ”¹ï¼š</strong></p></li><li><p><strong>å¦‚æœè®¾ç½®çš„lengthå±æ€§å€¼å¤§äºæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆ™ä¼šåœ¨æ•°ç»„æœ«å°¾å‡ºç°ç©ºç™½å…ƒç´ ï¼›</strong></p></li><li><p><strong>å¦‚æœè®¾ç½®çš„lengthå±æ€§å€¼å°äºæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆ™ä¼šæŠŠè¶…è¿‡è¯¥å€¼çš„æ•°ç»„å…ƒç´ åˆ é™¤</strong></p></li></ul><h2 id="10-å‡½æ•°"><a href="#10-å‡½æ•°" class="headerlink" title="10. å‡½æ•°"></a>10. å‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å£°æ˜å‡½æ•°</span><br><span class="line">function å‡½æ•°å() &#123;</span><br><span class="line"> Â  Â //å‡½æ•°ä½“ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>function æ˜¯å£°æ˜å‡½æ•°çš„å…³é”®å­—,å¿…é¡»å°å†™</strong></p></li><li><p><strong>ç”±äºå‡½æ•°ä¸€èˆ¬æ˜¯ä¸ºäº†å®ç°æŸä¸ªåŠŸèƒ½æ‰å®šä¹‰çš„ï¼Œ æ‰€ä»¥é€šå¸¸æˆ‘ä»¬å°†å‡½æ•°åå‘½åä¸ºåŠ¨è¯ï¼Œæ¯”å¦‚ getSum</strong></p><h3 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è°ƒç”¨å‡½æ•°</span><br><span class="line">å‡½æ•°å(); Â // é€šè¿‡è°ƒç”¨å‡½æ•°åæ¥æ‰§è¡Œå‡½æ•°ä½“ä»£ç </span><br></pre></td></tr></table></figure><h3 id="argumentsçš„ä½¿ç”¨"><a href="#argumentsçš„ä½¿ç”¨" class="headerlink" title="argumentsçš„ä½¿ç”¨"></a>argumentsçš„ä½¿ç”¨</h3><p><strong>å½“ä¸ç¡®å®šæœ‰å¤šå°‘ä¸ªå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ arguments æ¥è·å–ã€‚JavaScript ä¸­ï¼Œargumentså®é™…ä¸Šå®ƒæ˜¯å½“å‰å‡½æ•°çš„ä¸€ä¸ªå†…ç½®å¯¹è±¡ã€‚æ‰€æœ‰å‡½æ•°éƒ½å†…ç½®äº†ä¸€ä¸ª arguments å¯¹è±¡ï¼Œarguments å¯¹è±¡ä¸­å­˜å‚¨äº†ä¼ é€’çš„æ‰€æœ‰å®å‚ã€‚argumentså±•ç¤ºå½¢å¼æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œéå†ã€‚ä¼ªæ•°ç»„å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</strong></p></li><li><p><strong>å…·æœ‰ length å±æ€§</strong></p></li><li><p><strong>æŒ‰ç´¢å¼•æ–¹å¼å‚¨å­˜æ•°æ®</strong></p></li><li><p><strong>ä¸å…·æœ‰æ•°ç»„çš„ push , pop ç­‰æ–¹æ³•</strong><br><strong>æ³¨æ„ï¼šåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œç”¨æ­¤å¯¹è±¡è·å–å‡½æ•°è°ƒç”¨æ—¶ä¼ çš„å®å‚ã€‚</strong></p></li></ul><h3 id="å‡½æ•°æ¡ˆä¾‹"><a href="#å‡½æ•°æ¡ˆä¾‹" class="headerlink" title="å‡½æ•°æ¡ˆä¾‹"></a>å‡½æ•°æ¡ˆä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨åŒä¸€ä½œç”¨åŸŸä»£ç ä¸­ï¼Œå‡½æ•°åå³ä»£è¡¨å°è£…çš„æ“ä½œï¼Œä½¿ç”¨å‡½æ•°ååŠ æ‹¬å·å³å¯ä»¥å°†å°è£…çš„æ“ä½œæ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼"><a href="#å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼" class="headerlink" title="å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼"></a>å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼</h3><ul><li><p><strong>è‡ªå®šä¹‰å‡½æ•°æ–¹å¼(å‘½åå‡½æ•°)</strong><br><strong>åˆ©ç”¨å‡½æ•°å…³é”®å­— function è‡ªå®šä¹‰å‡½æ•°æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å£°æ˜å®šä¹‰æ–¹å¼</span><br><span class="line">function fn() &#123;...&#125;</span><br><span class="line">// è°ƒç”¨ Â </span><br><span class="line">fn(); Â </span><br></pre></td></tr></table></figure><ul><li><strong>å› ä¸ºæœ‰åå­—ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºå‘½åå‡½æ•°</strong></li><li><strong>è°ƒç”¨å‡½æ•°çš„ä»£ç æ—¢å¯ä»¥æ”¾åˆ°å£°æ˜å‡½æ•°çš„å‰é¢ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å£°æ˜å‡½æ•°çš„åé¢</strong></li></ul></li><li><p><strong>å‡½æ•°è¡¨è¾¾å¼æ–¹å¼(åŒ¿åå‡½æ•°ï¼‰</strong><br>**åˆ©ç”¨å‡½æ•°è¡¨è¾¾å¼æ–¹å¼çš„å†™æ³•å¦‚ä¸‹ï¼š **</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è¿™æ˜¯å‡½æ•°è¡¨è¾¾å¼å†™æ³•ï¼ŒåŒ¿åå‡½æ•°åé¢è·Ÿåˆ†å·ç»“æŸ</span><br><span class="line">var fn = function()&#123;...&#125;ï¼›</span><br><span class="line">// è°ƒç”¨çš„æ–¹å¼ï¼Œå‡½æ•°è°ƒç”¨å¿…é¡»å†™åˆ°å‡½æ•°ä½“ä¸‹é¢</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure><ul><li><strong>å› ä¸ºå‡½æ•°æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºåŒ¿åå‡½æ•°</strong></li><li>**è¿™ä¸ªfn é‡Œé¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå‡½æ•°  **</li><li><strong>å‡½æ•°è¡¨è¾¾å¼æ–¹å¼åŸç†è·Ÿå£°æ˜å˜é‡æ–¹å¼æ˜¯ä¸€è‡´çš„</strong></li><li><strong>å‡½æ•°è°ƒç”¨çš„ä»£ç å¿…é¡»å†™åˆ°å‡½æ•°ä½“åé¢</strong></li></ul></li></ul><h2 id="10-ä½œç”¨åŸŸ"><a href="#10-ä½œç”¨åŸŸ" class="headerlink" title="10 - ä½œç”¨åŸŸ"></a>10 - ä½œç”¨åŸŸ</h2><h3 id="1-1-ä½œç”¨åŸŸæ¦‚è¿°"><a href="#1-1-ä½œç”¨åŸŸæ¦‚è¿°" class="headerlink" title="1.1 ä½œç”¨åŸŸæ¦‚è¿°"></a>1.1 ä½œç”¨åŸŸæ¦‚è¿°</h3><p><strong>é€šå¸¸æ¥è¯´ï¼Œä¸€æ®µç¨‹åºä»£ç ä¸­æ‰€ç”¨åˆ°çš„åå­—å¹¶ä¸æ€»æ˜¯æœ‰æ•ˆå’Œå¯ç”¨çš„ï¼Œè€Œé™å®šè¿™ä¸ªåå­—çš„å¯ç”¨æ€§çš„ä»£ç èŒƒå›´å°±æ˜¯è¿™ä¸ªåå­—çš„ä½œç”¨åŸŸã€‚ä½œç”¨åŸŸçš„ä½¿ç”¨æé«˜äº†ç¨‹åºé€»è¾‘çš„å±€éƒ¨æ€§ï¼Œå¢å¼ºäº†ç¨‹åºçš„å¯é æ€§ï¼Œå‡å°‘äº†åå­—å†²çªã€‚</strong></p><p><strong>JavaScriptï¼ˆes6å‰ï¼‰ä¸­çš„ä½œç”¨åŸŸæœ‰ä¸¤ç§ï¼š</strong></p><ul><li><strong>å…¨å±€ä½œç”¨åŸŸ</strong></li><li><strong>å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</strong></li></ul><h3 id="1-2-å…¨å±€ä½œç”¨åŸŸ"><a href="#1-2-å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="1.2 å…¨å±€ä½œç”¨åŸŸ"></a>1.2 å…¨å±€ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨äºæ‰€æœ‰ä»£ç æ‰§è¡Œçš„ç¯å¢ƒ(æ•´ä¸ªscriptæ ‡ç­¾å†…éƒ¨)æˆ–ç‹¬ç«‹çš„jsæ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><h3 id="1-3-å±€éƒ¨ä½œç”¨åŸŸ"><a href="#1-3-å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="1.3 å±€éƒ¨ä½œç”¨åŸŸ"></a>1.3 å±€éƒ¨ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨äºå‡½æ•°å†…çš„ä»£ç ç¯å¢ƒï¼Œå°±æ˜¯å±€éƒ¨ä½œç”¨åŸŸã€‚ </span><br><span class="line">å› ä¸ºè·Ÿå‡½æ•°æœ‰å…³ç³»ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸã€‚</span><br></pre></td></tr></table></figure><h3 id="1-4-jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ"><a href="#1-4-jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ" class="headerlink" title="1.4 jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ"></a>1.4 jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ</h3><ul><li><strong>å—ä½œç”¨åŸŸç”± { } åŒ…æ‹¬ã€‚</strong></li><li><strong>åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼ˆå¦‚ javaã€c#ç­‰ï¼‰ï¼Œåœ¨ if è¯­å¥ã€å¾ªç¯è¯­å¥ä¸­åˆ›å»ºçš„å˜é‡ï¼Œä»…ä»…åªèƒ½åœ¨æœ¬ if è¯­å¥ã€æœ¬å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ï¼›</strong><br><strong>jsä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼ˆåœ¨ES6ä¹‹å‰ï¼‰</strong><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if(true)&#123;</span><br><span class="line"> Â var num = 123;</span><br><span class="line"> Â //console.log(num); //123</span><br><span class="line">&#125;</span><br><span class="line">console.log(num); Â  //123</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5-å˜é‡çš„ä½œç”¨åŸŸ"><a href="#1-5-å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="1.5 å˜é‡çš„ä½œç”¨åŸŸ"></a>1.5 å˜é‡çš„ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨JavaScriptä¸­ï¼Œæ ¹æ®ä½œç”¨åŸŸçš„ä¸åŒï¼Œå˜é‡å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</span><br></pre></td></tr></table></figure><ul><li><strong>å…¨å±€å˜é‡</strong></li><li><strong>å±€éƒ¨å˜é‡</strong></li></ul><p><strong>2.1 å…¨å±€å˜é‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å«åšå…¨å±€å˜é‡ï¼ˆåœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼‰ã€‚</span><br></pre></td></tr></table></figure><ul><li><strong>å…¨å±€å˜é‡åœ¨ä»£ç çš„ä»»ä½•ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨</strong></li><li><strong>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ var å£°æ˜çš„å˜é‡ æ˜¯å…¨å±€å˜é‡</strong></li><li><strong>ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°å†…ä¸ä½¿ç”¨ var å£°æ˜çš„å˜é‡ä¹Ÿæ˜¯å…¨å±€å˜é‡ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</strong></li></ul><p><strong>2.2 å±€éƒ¨å˜é‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å«åšå±€éƒ¨å˜é‡ï¼ˆåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼‰</span><br></pre></td></tr></table></figure><ul><li><strong>å±€éƒ¨å˜é‡åªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨ä½¿ç”¨</strong></li><li><strong>åœ¨å‡½æ•°å†…éƒ¨ var å£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡</strong></li><li><strong>å‡½æ•°çš„å½¢å‚å®é™…ä¸Šå°±æ˜¯å±€éƒ¨å˜é‡</strong></li></ul><p><strong>2.3 å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</strong></p><ul><li><strong>å…¨å±€å˜é‡ï¼šåœ¨ä»»ä½•ä¸€ä¸ªåœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œåªæœ‰åœ¨æµè§ˆå™¨å…³é—­æ—¶æ‰ä¼šè¢«é”€æ¯ï¼Œå› æ­¤æ¯”è¾ƒå å†…å­˜</strong></li><li><strong>å±€éƒ¨å˜é‡ï¼šåªåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå½“å…¶æ‰€åœ¨çš„ä»£ç å—è¢«æ‰§è¡Œæ—¶ï¼Œä¼šè¢«åˆå§‹åŒ–ï¼›å½“ä»£ç å—è¿è¡Œç»“æŸåï¼Œå°±ä¼šè¢«é”€æ¯ï¼Œå› æ­¤æ›´èŠ‚çœå†…å­˜ç©ºé—´</strong></li></ul><h3 id="1-6-ä½œç”¨åŸŸé“¾"><a href="#1-6-ä½œç”¨åŸŸé“¾" class="headerlink" title="1.6 - ä½œç”¨åŸŸé“¾"></a>1.6 - ä½œç”¨åŸŸé“¾</h3><p><strong>åªè¦æ˜¯ä»£ç éƒ½ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œå†™åœ¨å‡½æ•°å†…éƒ¨çš„å±€éƒ¨ä½œç”¨åŸŸï¼Œæœªå†™åœ¨ä»»ä½•å‡½æ•°å†…éƒ¨å³åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼›å¦‚æœå‡½æ•°ä¸­è¿˜æœ‰å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­å°±åˆå¯ä»¥è¯ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼›æ ¹æ®åœ¨</strong>**[å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°å˜é‡]**çš„è¿™ç§æœºåˆ¶ï¼Œç”¨é“¾å¼æŸ¥æ‰¾å†³å®šå“ªäº›æ•°æ®èƒ½è¢«å†…éƒ¨å‡½æ•°è®¿é—®ï¼Œå°±ç§°ä½œä½œç”¨åŸŸé“¾ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ¡ˆä¾‹åˆ†æ1ï¼š</span><br><span class="line">function f1() &#123;</span><br><span class="line"> Â  Â var num = 123;</span><br><span class="line"> Â  Â function f2() &#123;</span><br><span class="line"> Â  Â  Â  Â console.log( num );//123</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â f2();</span><br><span class="line">&#125;</span><br><span class="line">var num = 456;</span><br><span class="line">f1();</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨åŸŸé“¾ï¼šé‡‡å–å°±è¿‘åŸåˆ™çš„æ–¹å¼æ¥æŸ¥æ‰¾å˜é‡æœ€ç»ˆçš„å€¼</span><br><span class="line">var a = 1;</span><br><span class="line">function fn1() &#123;</span><br><span class="line"> Â  Â var a = 2;</span><br><span class="line"> Â  Â var b = &#x27;22&#x27;;</span><br><span class="line"> Â  Â fn2();</span><br><span class="line"> Â  Â function fn2() &#123;</span><br><span class="line"> Â  Â  Â  Â var a = 3;</span><br><span class="line"> Â  Â  Â  Â fn3();</span><br><span class="line"> Â  Â  Â  Â function fn3() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var a = 4;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(a); //açš„å€¼ 4</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(b); //bçš„å€¼ 22</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br></pre></td></tr></table></figure><p><img src="file://F:/20-%E6%B1%82%E8%81%8C/02-%E5%89%8D%E7%AB%AF/images/js/%E5%9B%BE%E7%89%872-16779152458061.png?lastModify=1710638944"></p><h3 id="1-7-é¢„è§£æ"><a href="#1-7-é¢„è§£æ" class="headerlink" title="1.7 - é¢„è§£æ"></a>1.7 - é¢„è§£æ</h3><p><strong>JavaScript ä»£ç æ˜¯ç”±æµè§ˆå™¨ä¸­çš„ JavaScript è§£æå™¨æ¥æ‰§è¡Œçš„ã€‚</strong></p><p><strong>JavaScript è§£æå™¨åœ¨è¿è¡Œ JavaScript ä»£ç çš„æ—¶å€™åˆ†ä¸ºä¸¤æ­¥ï¼š</strong></p><p><strong>é¢„è§£æå’Œä»£ç æ‰§è¡Œã€‚</strong></p><ul><li><strong>é¢„è§£æï¼šåœ¨å½“å‰ä½œç”¨åŸŸä¸‹, JS ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤æŠŠå¸¦æœ‰ var å’Œ function å£°æ˜çš„å˜é‡åœ¨å†…å­˜ä¸­è¿›è¡Œæå‰å£°æ˜æˆ–è€…å®šä¹‰</strong>ï¼Œé¢„è§£æä¹Ÿå«åšå˜é‡ã€å‡½æ•°æå‡ã€‚</li><li><strong>ä»£ç æ‰§è¡Œï¼š ä»ä¸Šåˆ°ä¸‹æ‰§è¡ŒJSè¯­å¥ã€‚</strong><br><strong>æ³¨æ„ï¼š****é¢„è§£æä¼šæŠŠå˜é‡å’Œå‡½æ•°çš„å£°æ˜åœ¨ä»£ç æ‰§è¡Œä¹‹å‰æ‰§è¡Œå®Œæˆã€‚</strong></li></ul><p><strong>å˜é‡é¢„è§£æï¼š</strong></p><p><strong>å˜é‡çš„å£°æ˜ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€ä¸Šé¢ï¼Œå˜é‡çš„èµ‹å€¼ä¸ä¼šæå‡ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(num); Â // undefined</span><br><span class="line">var num = 10;</span><br><span class="line">//æ³¨æ„ï¼šå˜é‡æå‡åªæå‡å£°æ˜ï¼Œä¸æå‡èµ‹å€¼</span><br></pre></td></tr></table></figure><p><strong>å‡½æ•°é¢„è§£æï¼š</strong></p><p><strong>å‡½æ•°çš„å£°æ˜ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€ä¸Šé¢ï¼Œä½†æ˜¯ä¸ä¼šè°ƒç”¨å‡½æ•°ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn();</span><br><span class="line">function fn() &#123;</span><br><span class="line"> Â  Â console.log(&#x27;æ‰“å°&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼šæ§åˆ¶å°æ‰“å°å­—ç¬¦ä¸² â€” â€æ‰“å°â€œ</strong></p><p><strong>æ³¨æ„ï¼šå‡½æ•°å£°æ˜ä»£è¡¨å‡½æ•°æ•´ä½“ï¼Œæ‰€ä»¥å‡½æ•°æå‡åï¼Œå‡½æ•°åä»£è¡¨æ•´ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å‡½æ•°å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼</strong></p><p><strong>å‡½æ•°è¡¨è¾¾å¼å£°æ˜å‡½æ•°é—®é¢˜ï¼š</strong></p><p><strong>å‡½æ•°è¡¨è¾¾å¼åˆ›å»ºå‡½æ•°ï¼Œä¼šæ‰§è¡Œå˜é‡æå‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn();</span><br><span class="line">var Â fn = function() &#123;</span><br><span class="line"> Â  Â console.log(&#x27;æƒ³ä¸åˆ°å§&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼šæŠ¥é”™æç¤º â€fn is not a functionâ€</strong></p><blockquote><p><strong>è§£é‡Šï¼šè¯¥æ®µä»£ç æ‰§è¡Œä¹‹å‰ï¼Œä¼šåšå˜é‡å£°æ˜æå‡ï¼Œfnåœ¨æå‡ä¹‹åçš„å€¼æ˜¯undefinedï¼›è€Œfnè°ƒç”¨æ˜¯åœ¨fnè¢«èµ‹å€¼ä¸ºå‡½æ•°ä½“ä¹‹å‰ï¼Œæ­¤æ—¶fnçš„å€¼æ˜¯undefinedï¼Œæ‰€ä»¥æ— æ³•æ­£ç¡®è°ƒç”¨</strong></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>react+vite+hexo|é¡¹ç›®å‘ˆç°</title>
    <link href="https://youxt-njnu.github.io/2024/03/10/react+vite%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/"/>
    <id>https://youxt-njnu.github.io/2024/03/10/react+vite%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/</id>
    <published>2024-03-10T03:51:26.000Z</published>
    <updated>2024-03-09T03:55:48.877Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/yayuya/p/17046666.html">Viteé¡¹ç›®æ‰“åŒ…é…ç½®è¯¦è§£ - çˆµå²š - åšå®¢å›­ (cnblogs.com)</a></p><p><a href="https://juejin.cn/post/7208946311885586492">é€šè¿‡Hexo + Github Pageséƒ¨ç½²ä½ çš„reacté¡¹ç›® - æ˜é‡‘ (juejin.cn)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/yayuya/p/17046666.html&quot;&gt;Viteé¡¹ç›®æ‰“åŒ…é…ç½®è¯¦è§£ - çˆµå²š - åšå®¢å›­ (cnblogs.com)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post</summary>
      
    
    
    
    <category term="å‘¨è¾¹æ‰©å±•" scheme="https://youxt-njnu.github.io/categories/%E5%91%A8%E8%BE%B9%E6%89%A9%E5%B1%95/"/>
    
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
    <category term="Hexo" scheme="https://youxt-njnu.github.io/tags/Hexo/"/>
    
    <category term="ä¸ªäººåšå®¢" scheme="https://youxt-njnu.github.io/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>three+react|ä¸ªäººä¸»é¡µå®æˆ˜â…¡(è¡¥)</title>
    <link href="https://youxt-njnu.github.io/2024/03/09/threejs%E5%AE%9E%E6%88%9821/"/>
    <id>https://youxt-njnu.github.io/2024/03/09/threejs%E5%AE%9E%E6%88%9821/</id>
    <published>2024-03-09T03:34:05.000Z</published>
    <updated>2024-06-13T02:14:51.235Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p><a href="https://github.com/youxt-njnu/3d_portfolio_primary">æ¨¡ä»¿é¡¹ç›®åœ°å€</a>ï¼Œ<a href="https://www.youtube.com/watch?v=FkowOdMjvYo">å‚è€ƒçš„è§†é¢‘æ•™ç¨‹å‡ºå¤„</a>ï¼Œ<a href="https://juejin.cn/post/6960262593265025031">reactå…¥é—¨</a></p><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/your-first-scene#adding-lights">react three fiber</a></p><p>ChatGPTè¾…åŠ©ç”Ÿæˆâ—è‡ªè¾¨â—â—â—</p><h1 id="ç›¸å…³åº“è¡¥å……"><a href="#ç›¸å…³åº“è¡¥å……" class="headerlink" title="ç›¸å…³åº“è¡¥å……"></a>ç›¸å…³åº“è¡¥å……</h1><h2 id="react-vertical-timeline-component"><a href="#react-vertical-timeline-component" class="headerlink" title="react-vertical-timeline-component"></a>react-vertical-timeline-component</h2><p><code>react-vertical-timeline-component</code> æ˜¯ä¸€ä¸ªReactåº“ï¼Œç”¨äºåˆ›å»ºå’Œæ˜¾ç¤ºå‚ç›´æ—¶é—´çº¿ã€‚è¿™ä¸ªåº“æä¾›äº†ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹å¼æ¥å±•ç¤ºæŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„äº‹ä»¶æˆ–æ­¥éª¤ï¼Œéå¸¸é€‚åˆç”¨äºå±•ç¤ºé¡¹ç›®é‡Œç¨‹ç¢‘ã€å†å²äº‹ä»¶ã€å·¥ä½œç»å†ç­‰ã€‚å®ƒåŸºäºReactå¼€å‘ï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°é›†æˆåˆ°ç°æœ‰çš„Reactåº”ç”¨ä¸­ã€‚</p><h3 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h3><ul><li><strong>æ˜“äºä½¿ç”¨</strong>ï¼šé€šè¿‡æä¾›çš„ç»„ä»¶å’Œå±æ€§ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿæ„å»ºå‡ºç¾è§‚ã€å“åº”å¼çš„æ—¶é—´çº¿ã€‚</li><li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰é¢œè‰²ã€å›¾æ ‡å’Œå†…å®¹ï¼Œä½¿æ—¶é—´çº¿èƒ½å¤ŸåŒ¹é…åº”ç”¨çš„é£æ ¼å’Œä¸»é¢˜ã€‚</li><li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šæ—¶é—´çº¿ä¼šè‡ªåŠ¨é€‚åº”ä¸åŒå±å¹•å°ºå¯¸ï¼Œä¿è¯åœ¨ç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢è®¾å¤‡ä¸Šéƒ½èƒ½è‰¯å¥½å±•ç¤ºã€‚</li><li><strong>åŠ¨ç”»æ•ˆæœ</strong>ï¼šå†…ç½®åŠ¨ç”»æ•ˆæœï¼Œä¸ºæ—¶é—´çº¿çš„å±•ç¤ºå¢æ·»è§†è§‰å¸å¼•åŠ›ã€‚</li></ul><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p>è¦å¼€å§‹ä½¿ç”¨ <code>react-vertical-timeline-component</code>ï¼Œé¦–å…ˆéœ€è¦å°†å®ƒæ·»åŠ åˆ°ä½ çš„Reacté¡¹ç›®ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install react-vertical-timeline-component</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">yarn add react-vertical-timeline-component</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨æ—¶é—´çº¿ç»„ä»¶åŠå…¶ç›¸å…³çš„å­ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">VerticalTimeline</span>,</span><br><span class="line">  <span class="title class_">VerticalTimelineElement</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-vertical-timeline-component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;react-vertical-timeline-component/style.min.css&#x27;</span>; <span class="comment">// å¼•å…¥æ ·å¼æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">MyTimeline</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">VerticalTimeline</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">VerticalTimelineElement</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;vertical-timeline-element--work&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">date</span>=<span class="string">&quot;2011 - present&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">iconStyle</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> &#x27;<span class="attr">rgb</span>(<span class="attr">33</span>, <span class="attr">150</span>, <span class="attr">243</span>)&#x27;, <span class="attr">color:</span> &#x27;#<span class="attr">fff</span>&#x27; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      // <span class="attr">icon</span>=<span class="string">&#123;</span>&lt;<span class="attr">WorkIcon</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">className</span>=<span class="string">&quot;vertical-timeline-element-title&quot;</span>&gt;</span>Creative Director<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h4</span> <span class="attr">className</span>=<span class="string">&quot;vertical-timeline-element-subtitle&quot;</span>&gt;</span>Miami, FL<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Creative Direction, User Experience, Visual Design, Project Management, Team Leading</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">VerticalTimelineElement</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* å¯ä»¥æ·»åŠ æ›´å¤šçš„ VerticalTimelineElement ç»„ä»¶æ¥å±•ç¤ºå…¶ä»–äº‹ä»¶ */&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">VerticalTimeline</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyTimeline</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>VerticalTimeline</code>æ˜¯å®¹çº³æ‰€æœ‰æ—¶é—´çº¿å…ƒç´ çš„å®¹å™¨ï¼Œè€Œ <code>VerticalTimelineElement</code>ä»£è¡¨æ—¶é—´çº¿ä¸Šçš„å•ä¸ªäº‹ä»¶æˆ–é‡Œç¨‹ç¢‘ã€‚ä½ å¯ä»¥é€šè¿‡ä¼ é€’ä¸åŒçš„propsæ¥å®šåˆ¶æ¯ä¸ªæ—¶é—´çº¿å…ƒç´ çš„å¤–è§‚å’Œå†…å®¹ã€‚</p><h3 id="è‡ªå®šä¹‰å’Œæ ·å¼"><a href="#è‡ªå®šä¹‰å’Œæ ·å¼" class="headerlink" title="è‡ªå®šä¹‰å’Œæ ·å¼"></a>è‡ªå®šä¹‰å’Œæ ·å¼</h3><p><code>react-vertical-timeline-component</code>æä¾›äº†å¤šç§æ–¹å¼æ¥å®šåˆ¶æ—¶é—´çº¿çš„æ ·å¼å’Œè¡Œä¸ºï¼š</p><ul><li><strong>é¢œè‰²å’Œå›¾æ ‡</strong>ï¼šé€šè¿‡ <code>iconStyle</code>å±æ€§è‡ªå®šä¹‰å›¾æ ‡æ ·å¼ï¼Œä»¥åŠé€šè¿‡ <code>icon</code>å±æ€§æ·»åŠ è‡ªå®šä¹‰å›¾æ ‡ã€‚</li><li><strong>å†…å®¹å¸ƒå±€</strong>ï¼šæ¯ä¸ª <code>VerticalTimelineElement</code>å¯ä»¥åŒ…å«æ ‡é¢˜ã€å‰¯æ ‡é¢˜å’Œä»»æ„çš„HTMLå†…å®¹ï¼Œå…è®¸çµæ´»åœ°å±•ç¤ºä¿¡æ¯ã€‚</li><li><strong>è‡ªå®šä¹‰ç±»å</strong>ï¼šå¯ä»¥ä¸ºæ—¶é—´çº¿å…ƒç´ æ·»åŠ è‡ªå®šä¹‰CSSç±»åï¼Œè¿›ä¸€æ­¥é€šè¿‡CSSæ¥å®šåˆ¶æ ·å¼ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>react-vertical-timeline-component</code>æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œä¸”æ˜“äºä½¿ç”¨çš„Reactåº“ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…åœ¨åº”ç”¨ä¸­å¿«é€Ÿåˆ›å»ºå‡ºç¾è§‚ã€å“åº”å¼çš„å‚ç›´æ—¶é—´çº¿ã€‚é€šè¿‡å¹¿æ³›çš„å®šåˆ¶é€‰é¡¹ï¼Œå®ƒèƒ½å¤Ÿæ»¡è¶³å¤šç§å±•ç¤ºéœ€æ±‚ï¼Œä½¿å¾—æ—¶é—´çº¿æ—¢èƒ½ä¼ è¾¾å¿…è¦çš„ä¿¡æ¯ï¼Œåˆå…·æœ‰å¸å¼•äººçš„è§†è§‰æ•ˆæœã€‚</p><h2 id="emailjs-x2F-browser"><a href="#emailjs-x2F-browser" class="headerlink" title="@emailjs&#x2F;browser"></a>@emailjs&#x2F;browser</h2><p><code>@emailjs/browser</code> æ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯ç›´æ¥ä»å‰ç«¯åº”ç”¨ä¸­å‘é€ç”µå­é‚®ä»¶ï¼Œæ— éœ€åç«¯æœåŠ¡å™¨ã€‚é€šè¿‡ä½¿ç”¨ EmailJS æœåŠ¡ï¼Œå¼€å‘è€…å¯ä»¥åœ¨Webé¡µé¢ä¸­é›†æˆç”µå­é‚®ä»¶å‘é€åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç æˆ–å­˜å‚¨ç”¨æˆ·çš„ç”µå­é‚®ä»¶å‡­æ®ã€‚è¿™ä½¿å¾—åœ¨è”ç³»è¡¨å•ã€é€šçŸ¥ç³»ç»Ÿæˆ–ä»»ä½•éœ€è¦å‘é€ç”µå­é‚®ä»¶çš„åœºæ™¯ä¸­ï¼Œå®ç°é‚®ä»¶å‘é€å˜å¾—å¼‚å¸¸ç®€å•å’Œå®‰å…¨ã€‚</p><h3 id="æ ¸å¿ƒç‰¹æ€§-1"><a href="#æ ¸å¿ƒç‰¹æ€§-1" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h3><ul><li><strong>æ— æœåŠ¡å™¨</strong>ï¼šä¸éœ€è¦è‡ªå·±çš„æœåŠ¡å™¨æ¥å‘é€ç”µå­é‚®ä»¶ï¼Œå‡å°‘äº†å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚</li><li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šæä¾›äº†ç®€æ´çš„APIï¼Œå¯ä»¥å¿«é€Ÿåœ¨å‰ç«¯ä»£ç ä¸­é›†æˆå’Œä½¿ç”¨ã€‚</li><li><strong>å®‰å…¨</strong>ï¼šä¸éœ€è¦åœ¨å®¢æˆ·ç«¯æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚SMTPæœåŠ¡å™¨ç™»å½•å‡­æ®ç­‰ã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ç”µå­é‚®ä»¶æ¨¡æ¿ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å‘é€ä¸åŒå†…å®¹çš„é‚®ä»¶ã€‚</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>**é€šè¿‡npmæˆ–yarnå®‰è£… **<code>@emailjs/browser</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install @emailjs/browser</span><br><span class="line"># æˆ–è€…</span><br><span class="line">yarn add @emailjs/browser</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬ä½¿ç”¨-1"><a href="#åŸºæœ¬ä½¿ç”¨-1" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p>**è¦ä½¿ç”¨ **<code>@emailjs/browser</code>å‘é€ç”µå­é‚®ä»¶ï¼Œé¦–å…ˆéœ€è¦åœ¨ EmailJS ç½‘ç«™ä¸Šæ³¨å†Œè´¦æˆ·ï¼Œåˆ›å»ºé‚®ä»¶æ¨¡æ¿ï¼Œå¹¶è·å–å¿…è¦çš„æœåŠ¡IDã€æ¨¡æ¿IDå’Œç”¨æˆ·IDã€‚</p><p>**åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨ **<code>emailjs</code>æˆ–ä»»ä½•å…¶ä»–ä¾èµ–äºç¯å¢ƒå˜é‡çš„æœåŠ¡æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª <code>.env.local</code>æ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®‰å…¨å’Œé…ç½®çš„çµæ´»æ€§ã€‚è¿™ä¸ªæ–‡ä»¶è¢«ç”¨æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯å’Œé¡¹ç›®é…ç½®ï¼Œå¦‚APIå¯†é’¥ã€æœåŠ¡IDã€ç”¨æˆ·IDç­‰ï¼Œè¿™äº›ä¿¡æ¯å¯¹äºåº”ç”¨çš„è¿è¡Œè‡³å…³é‡è¦ï¼Œä½†ä½ ä¸å¸Œæœ›å®ƒä»¬è¢«ç›´æ¥ç¡¬ç¼–ç åˆ°æºä»£ç ä¸­æˆ–è¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚Gitï¼‰ä¸­ã€‚è¿™æ ·åšä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p><ol><li><strong>å®‰å…¨æ€§</strong>ï¼šä¿æŠ¤ä½ çš„æ•æ„Ÿä¿¡æ¯ä¸è¢«å…¬å¼€ï¼Œå¦‚APIå¯†é’¥å’Œå¯†ç ã€‚å¦‚æœè¿™äº›ä¿¡æ¯è¢«ç¡¬ç¼–ç åœ¨åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­ï¼Œå¹¶ä¸”æºä»£ç è¢«ä¸Šä¼ åˆ°äº†å…¬å¼€çš„ä»£ç ä»“åº“ï¼Œé‚£ä¹ˆè¿™äº›æ•æ„Ÿä¿¡æ¯å°±æœ‰æ³„éœ²çš„é£é™©ã€‚</li><li><strong>é…ç½®çš„çµæ´»æ€§</strong>ï¼šå…è®¸ä½ åœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ï¼‰ä¸­ä½¿ç”¨ä¸åŒçš„é…ç½®ï¼Œè€Œä¸éœ€è¦æ”¹å˜ä»£ç ã€‚æ¯”å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ä¸åŒçš„APIå¯†é’¥ã€‚</li><li><strong>ä¾¿äºç»´æŠ¤</strong>ï¼šå°†é…ç½®ä»ä»£ç ä¸­åˆ†ç¦»ï¼Œä½¿å¾—é…ç½®çš„æ›´æ”¹æ›´åŠ å®¹æ˜“ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½è§¦æ‘¸ä»£ç æœ¬èº«ã€‚</li></ol><p><code>.env.local</code>æ˜¯ä¸€ç§ç‰¹æ®Šçš„ <code>.env</code>æ–‡ä»¶ï¼Œå®ƒè¢«è®¾è®¡ç”¨æ¥åœ¨ä½ çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è¦†ç›– <code>.env</code>æ–‡ä»¶ä¸­çš„é»˜è®¤è®¾ç½®ã€‚Reactå’Œè®¸å¤šå…¶ä»–ç°ä»£å‰ç«¯æ¡†æ¶éƒ½æ”¯æŒä½¿ç”¨ <code>.env</code>æ–‡ä»¶æ¥å®šä¹‰ç¯å¢ƒå˜é‡ã€‚è¿™äº›å˜é‡åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šè¢«åµŒå…¥åˆ°æœ€ç»ˆçš„JavaScriptåŒ…ä¸­ï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶å¯ä»¥è®¿é—®å®ƒä»¬ã€‚</p><p>**è¦åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨ **<code>.env.local</code>ä¸­å®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œä½ éœ€è¦éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>**åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª **<code>.env.local</code>æ–‡ä»¶ã€‚</li><li>**åœ¨ **<code>.env.local</code>æ–‡ä»¶ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œéµå¾ª <code>REACT_APP_</code>å‰ç¼€çš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REACT_APP_EMAILJS_USER_ID=ä½ çš„ç”¨æˆ·ID</span><br><span class="line">REACT_APP_EMAILJS_SERVICE_ID=ä½ çš„æœåŠ¡ID</span><br><span class="line">REACT_APP_EMAILJS_TEMPLATE_ID=ä½ çš„æ¨¡æ¿ID</span><br></pre></td></tr></table></figure></li><li>**åœ¨ä½ çš„Reactåº”ç”¨ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ **<code>process.env.REACT_APP_EMAILJS_USER_ID</code>è¿™æ ·çš„æ–¹å¼è®¿é—®è¿™äº›å˜é‡ã€‚</li></ol><p>**ä½¿ç”¨ **<code>.env.local</code>æ–‡ä»¶æ˜¯ä¸€ç§å®è·µï¼Œæ—¨åœ¨æé«˜é¡¹ç›®çš„å®‰å…¨æ€§å’Œé…ç½®çš„çµæ´»æ€§ï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ°å¤„ç†æ•æ„Ÿä¿¡æ¯æ—¶ã€‚è¿™ç§æ–¹æ³•æœ‰åŠ©äºé¿å…å°†æ•æ„Ÿæ•°æ®æš´éœ²ç»™å…¬ä¼—ï¼ŒåŒæ—¶è¿˜æä¾›äº†åœ¨ä¸åŒç¯å¢ƒä¸‹è½»æ¾åˆ‡æ¢é…ç½®çš„èƒ½åŠ›ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VITE_APP_EMAILJS_SERVICE_ID=service_5bezaam</span><br><span class="line">VITE_APP_EMAILJS_TEMPLATE_ID=template_dafnzfi</span><br><span class="line">VITE_APP_EMAILJS_PUBLIC_KEY=JpbkxBEdlS8faxCrq</span><br></pre></td></tr></table></figure><p><strong>åœ¨ä½¿ç”¨Viteä½œä¸ºæ„å»ºå·¥å…·çš„é¡¹ç›®ä¸­ï¼Œç¯å¢ƒå˜é‡çš„å‘½åéµå¾ªç‰¹å®šçš„å‰ç¼€è§„åˆ™ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿è¿™äº›å˜é‡åœ¨æ„å»ºæ—¶è¢«æ­£ç¡®åœ°åŠ è½½å’Œæ³¨å…¥åˆ°é¡¹ç›®ä¸­ã€‚</strong></p><ol><li><strong><code>VITE_</code>å‰ç¼€</strong>ï¼šViteè¦æ±‚æ‰€æœ‰åº”è¯¥æš´éœ²ç»™é¡¹ç›®å‰ç«¯ä»£ç çš„ç¯å¢ƒå˜é‡éƒ½å¿…é¡»ä»¥ <code>VITE_</code>ä¸ºå‰ç¼€ã€‚è¿™æ˜¯ä¸€ä¸ªçº¦å®šï¼Œç”¨äºä¿æŠ¤ä½ çš„ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿åªæœ‰å¸¦æœ‰è¿™ä¸ªå‰ç¼€çš„å˜é‡æ‰ä¼šè¢«åŒ…å«åœ¨æœ€ç»ˆçš„å‰ç«¯æ„å»ºä¸­ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ— æ„é—´å°†æ•æ„Ÿçš„æœåŠ¡å™¨ç«¯ç¯å¢ƒå˜é‡æš´éœ²ç»™å®¢æˆ·ç«¯ã€‚</li><li>**<code>APP</code>**ï¼šè¿™ä¸ªéƒ¨åˆ†ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå¸¸è§çš„åšæ³•ï¼Œç”¨äºæŒ‡ç¤ºè¿™äº›ç¯å¢ƒå˜é‡æ˜¯åº”ç”¨çº§åˆ«çš„ã€‚åŠ ä¸Š <code>APP</code>ï¼ˆæˆ–è€…å…¶ä»–ç±»ä¼¼çš„æ ‡è¯†ç¬¦ï¼‰æœ‰åŠ©äºåœ¨ç¯å¢ƒå˜é‡ä¸­åˆ›å»ºä¸€ä¸ªé€»è¾‘ä¸Šçš„åˆ†ç»„ï¼Œä½¿å¾—å®ƒä»¬æ›´æ˜“äºç®¡ç†å’Œè¯†åˆ«ã€‚</li><li>**<code>EMAILJS_SERVICE_ID</code>ã€<code>EMAILJS_TEMPLATE_ID</code>ã€<code>EMAILJS_PUBLIC_KEY</code>**ï¼šè¿™äº›éƒ¨åˆ†å…·ä½“æŒ‡æ˜äº†å˜é‡çš„ç”¨é€”ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºæ ‡è¯†EmailJSæœåŠ¡çš„IDã€æ¨¡æ¿çš„IDå’Œå…¬å…±å¯†é’¥ã€‚è¿™æ ·çš„å‘½åæ–¹æ³•æœ‰åŠ©äºæ¸…æ™°åœ°è¡¨è¾¾æ¯ä¸ªç¯å¢ƒå˜é‡çš„ä½œç”¨å’Œå…³è”çš„æœåŠ¡ã€‚</li></ol><p>**ä½ å¯ä»¥ä¿®æ”¹ç¯å¢ƒå˜é‡çš„åç§°ï¼Œä½†éœ€è¦ä¿æŒ **<code>VITE_</code>å‰ç¼€ä¸å˜ï¼Œä»¥ç¡®ä¿Viteèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†è¿™äº›å˜é‡ã€‚å¦‚æœä½ å†³å®šæ›´æ”¹å˜é‡åç§°ï¼ˆæ¯”å¦‚ï¼Œå°† <code>VITE_APP_EMAILJS_PUBLIC_KEY</code>æ›´æ”¹ä¸º <code>VITE_APP_EMAILJS_KEY</code>ï¼‰ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™äº›ç¯å¢ƒå˜é‡çš„åœ°æ–¹ä¹Ÿåšç›¸åº”çš„æ›´æ”¹ï¼Œä»¥ç¡®ä¿ä¸€è‡´æ€§å’Œæ­£ç¡®çš„å˜é‡è®¿é—®ã€‚</p><p><strong>ç„¶åï¼Œå¯ä»¥åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨è¿™äº›IDæ¥å‘é€é‚®ä»¶ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import emailjs from &#x27;@emailjs/browser&#x27;;</span><br><span class="line"></span><br><span class="line">// åœ¨ç»„ä»¶åŠ è½½æ—¶åˆå§‹åŒ– EmailJS æœåŠ¡ï¼ˆä¾‹å¦‚ï¼Œåœ¨Reactç»„ä»¶çš„useEffectä¸­ï¼‰</span><br><span class="line">emailjs.init(&quot;your-user-id&quot;); // ä½¿ç”¨ä½ çš„User IDæ›¿æ¢&quot;your-user-id&quot;</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºå‘é€é‚®ä»¶çš„å‡½æ•°</span><br><span class="line">const sendEmail = () =&gt; &#123;</span><br><span class="line"> Â const templateParams = &#123;</span><br><span class="line"> Â  Â to_name: &#x27;æ”¶ä»¶äººåå­—&#x27;,</span><br><span class="line"> Â  Â from_name: &#x27;å‘ä»¶äººåå­—&#x27;,</span><br><span class="line"> Â  Â message: &#x27;é‚®ä»¶å†…å®¹&#x27;,</span><br><span class="line"> Â  Â // ...å…¶ä»–æ¨¡æ¿å‚æ•°</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"> Â emailjs.send(&#x27;your-service-id&#x27;, &#x27;your-template-id&#x27;, templateParams)</span><br><span class="line"> Â   .then((response) =&gt; &#123;</span><br><span class="line"> Â  Â  Â  console.log(&#x27;SUCCESS!&#x27;, response.status, response.text);</span><br><span class="line"> Â   &#125;, (error) =&gt; &#123;</span><br><span class="line"> Â  Â  Â  console.log(&#x27;FAILED...&#x27;, error);</span><br><span class="line"> Â   &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p><code>@emailjs/browser</code>é€‚ç”¨äºå¤šç§åœºæ™¯ï¼Œå¦‚ï¼š</p><ul><li><strong>è”ç³»è¡¨å•</strong>ï¼šåœ¨é™æ€ç½‘ç«™æˆ–SPAä¸­æ”¶é›†ç”¨æˆ·åé¦ˆæˆ–æŸ¥è¯¢ï¼Œç›´æ¥ä»å‰ç«¯å‘é€é‚®ä»¶ã€‚</li><li><strong>æ³¨å†Œç¡®è®¤</strong>ï¼šåœ¨ç”¨æˆ·æ³¨å†Œæµç¨‹ä¸­å‘é€æ¬¢è¿é‚®ä»¶æˆ–ç¡®è®¤é‚®ä»¶ã€‚</li><li><strong>é€šçŸ¥ç³»ç»Ÿ</strong>ï¼šå‘ç”¨æˆ·å‘é€é€šçŸ¥é‚®ä»¶ï¼Œå¦‚è®¢å•çŠ¶æ€æ›´æ–°ã€æ´»åŠ¨æé†’ç­‰ã€‚</li></ul><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>@emailjs/browser</code>æä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹å¼ï¼Œä½¿å¾—åœ¨æ²¡æœ‰åç«¯çš„æƒ…å†µä¸‹ç›´æ¥ä»æµè§ˆå™¨å‘é€ç”µå­é‚®ä»¶æˆä¸ºå¯èƒ½ã€‚é€šè¿‡å‡å°‘æœåŠ¡å™¨ç«¯çš„éœ€æ±‚å’Œå¤æ‚æ€§ï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºç”¨æˆ·ä½“éªŒå’Œå‰ç«¯åŠŸèƒ½çš„å®ç°ï¼ŒåŒæ—¶ä¿æŒåº”ç”¨çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="tailwindcss"><a href="#tailwindcss" class="headerlink" title="tailwindcss"></a>tailwindcss</h2><p><a href="https://tailwindcss.com/docs/installation">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://segmentfault.com/a/1190000022622923">15åˆ†é’Ÿå…¥é—¨</a></p><p><a href="http://www.xcj.com/front-end-life/CSS/TailwindCSS.html">å…¥é—¨æ•™ç¨‹</a></p><p><strong>å»¶ç”³æ’ä»¶ï¼š</strong></p><blockquote><p><strong>Typography</strong></p><p><strong>Forms</strong></p><p><strong>Aspect Ratio</strong></p><p><strong>Container Queries</strong></p></blockquote><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><strong>å®‰è£…å’Œé…ç½®Tailwind CSSä¸»è¦æ¶‰åŠä¸¤ä¸ªæ­¥éª¤ï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤é€šè¿‡ä¸Šè¿°å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å¯¹è¿™ä¸¤æ¡å‘½ä»¤çš„è§£é‡Šï¼š</strong></p><ol><li><code>npm install -D tailwindcss postcss autoprefixer</code></li></ol><p><strong>è¿™æ¡å‘½ä»¤ä½¿ç”¨npmï¼ˆNode.jsåŒ…ç®¡ç†å™¨ï¼‰æ¥å®‰è£…ä¸‰ä¸ªå¼€å‘ä¾èµ–ï¼š</strong></p><ul><li>**<code>tailwindcss</code>**ï¼šTailwind CSSåº“æœ¬èº«ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„CSSæ¡†æ¶ï¼Œå…è®¸ä½ é€šè¿‡åœ¨HTMLä¸­æ·»åŠ ç±»æ¥ç›´æ¥åº”ç”¨æ ·å¼ï¼Œä»è€ŒåŠ å¿«å¼€å‘é€Ÿåº¦ã€‚</li><li>**<code>postcss</code>**ï¼šPostCSSæ˜¯ä¸€ä¸ªç”¨JavaScriptå·¥å…·å’Œæ’ä»¶è½¬æ¢CSSä»£ç çš„å·¥å…·ã€‚Tailwind CSSä¾èµ–äºPostCSSï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯ä¸€ç»„PostCSSæ’ä»¶ï¼Œç”¨äºç”Ÿæˆå’Œå¤„ç†Tailwindçš„å·¥å…·ç±»ã€‚</li><li>**<code>autoprefixer</code>**ï¼šAutoprefixeræ˜¯ä¸€ä¸ªPostCSSæ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‚å•†å‰ç¼€åˆ°CSSè§„åˆ™ä¸­ï¼Œç¡®ä¿CSSå±æ€§åœ¨ä¸åŒçš„æµè§ˆå™¨ä¸­èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚è¿™å¯¹äºå…¼å®¹æ€§æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ul><p><code>-D</code>æ ‡å¿—è¡¨ç¤ºè¿™äº›åŒ…è¢«å®‰è£…ä¸ºå¼€å‘ä¾èµ–é¡¹ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªåœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒçš„æ„å»ºè¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p><ol start="2"><li><code>npx tailwindcss init -p</code></li></ol><p><strong>è¿™æ¡å‘½ä»¤ç”¨äºåˆå§‹åŒ–Tailwind CSSçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨ç”ŸæˆPostCSSé…ç½®æ–‡ä»¶ã€‚</strong></p><ul><li><code>npx</code>æ˜¯ä¸€ä¸ªnpmåŒ…è¿è¡Œå™¨ï¼Œå®ƒå…è®¸ä½ æ‰§è¡Œå®‰è£…åœ¨æœ¬åœ°node_modulesç›®å½•ä¸­çš„åŒ…è€Œä¸éœ€è¦å…¨å±€å®‰è£…è¿™äº›åŒ…ã€‚</li><li><code>tailwindcss init</code>æ˜¯Tailwind CLIçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç”Ÿæˆ <code>tailwind.config.js</code>æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯Tailwind CSSçš„é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­è‡ªå®šä¹‰ä½ çš„è®¾è®¡ç³»ç»Ÿï¼Œå¦‚é¢œè‰²ã€å­—ä½“å¤§å°ã€é—´è·ç­‰ã€‚</li><li><code>-p</code>æ ‡å¿—è¡¨ç¤ºåŒæ—¶ç”Ÿæˆ <code>postcss.config.js</code>æ–‡ä»¶ï¼Œè¿™æ˜¯PostCSSçš„é…ç½®æ–‡ä»¶ï¼ŒTailwind CSSä½œä¸ºPostCSSæ’ä»¶è¿è¡Œæ—¶éœ€è¦è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ ‡å¿—ç¡®ä¿äº† <code>autoprefixer</code>ä¹Ÿè¢«åŒ…å«åœ¨PostCSSé…ç½®ä¸­ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¸Tailwind CSSä¸€èµ·ä½¿ç”¨ä»¥ç¡®ä¿æœ€ä½³çš„æµè§ˆå™¨å…¼å®¹æ€§ã€‚</li></ul><p><strong>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤å…±åŒå®Œæˆäº†Tailwind CSSå’Œå…¶ä¾èµ–çš„å®‰è£…ï¼Œä»¥åŠä¸ºé¡¹ç›®ç”Ÿæˆå¿…è¦çš„é…ç½®æ–‡ä»¶ï¼Œè®©ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨Tailwind CSSæ¥æ„å»ºé¡¹ç›®ã€‚</strong></p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>**åœ¨ **<code>tailwind.config.js</code>æ–‡ä»¶ä¸­ï¼Œ<code>content</code>ã€<code>theme</code>ã€å’Œ <code>plugins</code>æ˜¯Tailwind CSSé…ç½®çš„ä¸»è¦éƒ¨åˆ†ï¼Œå®ƒä»¬å„è‡ªæ‰¿æ‹…ç€ä¸åŒçš„è§’è‰²ï¼Œä»¥ä¾¿å®šåˆ¶å’Œæ§åˆ¶Tailwind CSSçš„è¡Œä¸ºã€‚ä¸‹é¢æ˜¯å®ƒä»¬å„è‡ªçš„ä½œç”¨ï¼š</p><ol><li><code>content</code></li></ol><p><code>content</code>å±æ€§ç”¨äºæŒ‡å®šTailwind CSSåº”è¯¥æ‰«æå“ªäº›æ–‡ä»¶æ¥å¯»æ‰¾ç±»åã€‚è¿™æ˜¯Tailwind CSSçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œç§°ä¸ºPurgeCSSï¼ˆåœ¨Tailwind CSS v3.xä¸­ï¼Œè¿™ä¸€ç‰¹æ€§å·²ç»å†…ç½®ä¸”é»˜è®¤å¯ç”¨ï¼‰ï¼Œå®ƒç”¨äºç§»é™¤æœ€ç»ˆCSSæ–‡ä»¶ä¸­æœªä½¿ç”¨çš„æ ·å¼ï¼Œä»¥å‡å°æ–‡ä»¶å¤§å°å’Œæé«˜åŠ è½½é€Ÿåº¦ã€‚</p><p>**åœ¨ **<code>tailwind.config.js</code>æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½® <code>content</code>å±æ€§ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> Â content: [&#x27;./src/**/*.&#123;html,js,jsx,ts,tsx&#125;&#x27;],</span><br><span class="line"> Â // å…¶ä»–é…ç½®...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>**è¿™å‘Šè¯‰Tailwind CSSæ‰«æä½ é¡¹ç›®ä¸­çš„ **<code>src</code>ç›®å½•ä¸‹æ‰€æœ‰çš„HTMLå’ŒJavaScriptæ–‡ä»¶ï¼ŒåŒ…æ‹¬Reactï¼ˆ<code>.jsx</code>ï¼‰ã€TypeScriptï¼ˆ<code>.ts</code>ã€<code>.tsx</code>ï¼‰ç­‰æ–‡ä»¶ï¼Œæ¥ç¡®å®šå“ªäº›æ ·å¼æ˜¯å®é™…è¢«ä½¿ç”¨çš„ã€‚</p><ol start="2"><li><code>theme</code></li></ol><p><code>theme</code>å±æ€§ç”¨äºå®šåˆ¶Tailwind CSSæä¾›çš„é»˜è®¤è®¾è®¡ç³»ç»Ÿã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒæ•´é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰é»˜è®¤è®¾ç½®ï¼Œæˆ–è€…æ·»åŠ è‡ªå·±çš„è®¾è®¡ä»¤ç‰Œï¼ˆtokensï¼‰ã€‚è¿™ä½¿å¾—Tailwind CSSæå…¶çµæ´»ï¼Œèƒ½å¤Ÿé€‚åº”å‡ ä¹ä»»ä½•è®¾è®¡éœ€æ±‚ã€‚</p><p><strong>ä¾‹å¦‚ï¼Œä½ å¯ä»¥å®šåˆ¶ä¸»é¢˜é¢œè‰²å’Œå­—ä½“å¤§å°ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> Â // å…¶ä»–é…ç½®...</span><br><span class="line"> Â theme: &#123;</span><br><span class="line"> Â  Â extend: &#123;</span><br><span class="line"> Â  Â  Â colors: &#123;</span><br><span class="line"> Â  Â  Â  Â &#x27;custom-blue&#x27;: &#x27;#5b6d5b&#x27;,</span><br><span class="line"> Â  Â   &#125;,</span><br><span class="line"> Â  Â  Â fontSize: &#123;</span><br><span class="line"> Â  Â  Â  Â &#x27;big&#x27;: &#x27;2rem&#x27;,</span><br><span class="line"> Â  Â   &#125;,</span><br><span class="line"> Â   &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"> Â // å…¶ä»–é…ç½®...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>extend</code>å±æ€§ç”¨äºæ‰©å±•è€Œä¸æ˜¯è¦†ç›–é»˜è®¤çš„ä¸»é¢˜è®¾ç½®ã€‚</p><p>**åœ¨ **<code>tailwind.config.js</code>æ–‡ä»¶çš„ <code>extend</code>å¯¹è±¡ä¸­å¯¹ <code>colors</code>çš„è®¾ç½®å…è®¸ä½ è‡ªå®šä¹‰æˆ–æ‰©å±•é»˜è®¤çš„é¢œè‰²ç³»ç»Ÿã€‚è¿™ç§æ–¹å¼è®©ä½ å¯ä»¥æ·»åŠ æ–°çš„é¢œè‰²æˆ–è¦†ç›–ç°æœ‰é¢œè‰²çš„æŸäº›é˜¶çº§ï¼ˆå¦‚100-900è¿™æ ·çš„æƒé‡çº§åˆ«é€šå¸¸ç”¨äºè¡¨ç¤ºé¢œè‰²çš„æµ…åˆ°æ·±ï¼‰ã€‚è¿™é‡Œæ˜¯å¯¹ç»™å‡ºçš„è®¾ç½®çš„è¯¦ç»†è§£é‡Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">colors: &#123;</span><br><span class="line"> Â black: &#123;</span><br><span class="line"> Â  Â DEFAULT: &#x27;#000&#x27;,</span><br><span class="line"> Â  Â 500: &#x27;#1D2235&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>**<code>black</code>**ï¼š</p><ul><li><code>DEFAULT</code>ï¼šè¿™é‡ŒæŒ‡å®šäº† <code>black</code>é¢œè‰²çš„é»˜è®¤å€¼ä¸º <code>#000</code>ã€‚åœ¨Tailwind CSSä¸­ï¼Œå¦‚æœä½ ç›´æ¥ä½¿ç”¨ <code>text-black</code>æˆ– <code>bg-black</code>è¿™æ ·çš„ç±»ï¼Œå°†ä¼šåº”ç”¨è¿™ä¸ªé»˜è®¤é¢œè‰²å€¼ã€‚</li><li><code>500</code>ï¼šé™¤äº†é»˜è®¤å€¼ä¹‹å¤–ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ª <code>500</code>é˜¶çº§çš„é»‘è‰² <code>black-500</code>ä¸º <code>#1D2235</code>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ <code>text-black-500</code>æˆ– <code>bg-black-500</code>æ¥ä½¿ç”¨è¿™ä¸ªç‰¹å®šçš„æ·±åº¦å€¼ã€‚</li></ul><ol start="3"><li><code>plugins</code></li></ol><p><code>plugins</code>å±æ€§å…è®¸ä½ æ·»åŠ ç¬¬ä¸‰æ–¹æ’ä»¶æˆ–è‡ªå®šä¹‰çš„æ’ä»¶åˆ°Tailwind CSSä¸­ï¼Œä»¥æ‰©å±•å…¶åŠŸèƒ½ã€‚è¿™äº›æ’ä»¶å¯ä»¥æ·»åŠ æ–°çš„å·¥å…·ç±»ã€ç»„ä»¶ï¼Œæˆ–æ˜¯åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„åŠŸèƒ½æ€§é’©å­ã€‚</p><p><strong>ä½ å¯ä»¥è¿™æ ·æ·»åŠ æ’ä»¶ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> Â // å…¶ä»–é…ç½®...</span><br><span class="line"> Â plugins: [</span><br><span class="line"> Â  Â require(&#x27;@tailwindcss/forms&#x27;),</span><br><span class="line"> Â  Â // å…¶ä»–æ’ä»¶...</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>**è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº† **<code>@tailwindcss/forms</code>æ’ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®˜æ–¹æ’ä»¶ï¼Œç”¨äºé‡ç½®å’Œå®šåˆ¶è¡¨å•å…ƒç´ çš„æ ·å¼ã€‚</p><p><strong>æ€»çš„æ¥è¯´ï¼Œ</strong><code>tailwind.config.js</code>ä¸­çš„ <code>content</code>ã€<code>theme</code>ã€å’Œ <code>plugins</code>é…ç½®é¡¹æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æœºåˆ¶æ¥å®šåˆ¶å’Œä¼˜åŒ–ä½ çš„Tailwind CSSé›†æˆï¼Œä½¿å…¶æ›´é€‚åˆä½ çš„é¡¹ç›®éœ€æ±‚ã€‚</p><h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><p>**åœ¨Tailwind CSSä¸­ï¼Œä½¿ç”¨ **<code>@tailwind</code>æŒ‡ä»¤åœ¨ <code>index.css</code>ï¼ˆæˆ–ä»»ä½•ä¸»CSSæ–‡ä»¶ï¼‰ä¸­å¯¼å…¥Tailwindçš„å±‚æ˜¯åˆå§‹åŒ–å’Œä½¿ç”¨Tailwind CSSæ¡†æ¶çš„å…³é”®æ­¥éª¤ã€‚è¿™äº›æŒ‡ä»¤å‘Šè¯‰Tailwind CSSåœ¨æ„å»ºè¿‡ç¨‹ä¸­å°†å…¶åŠŸèƒ½ç±»å’Œæ ·å¼æ³¨å…¥åˆ°CSSæ–‡ä»¶ä¸­ã€‚ä¸‹é¢æ˜¯è¿™ä¸‰ä¸ªæŒ‡ä»¤çš„ä½œç”¨ï¼š</p><ol><li><code>@tailwind base;</code></li></ol><p>**è¿™ä¸ªæŒ‡ä»¤å¯¼å…¥Tailwindçš„åŸºç¡€æ ·å¼ï¼Œè¿™äº›æ ·å¼åŒ…æ‹¬æµè§ˆå™¨æ ·å¼çš„é‡ç½®å’Œå½’ä¸€åŒ–ä»¥åŠä¸€äº›åŸºæœ¬çš„HTMLå…ƒç´ æ ·å¼ã€‚è¿™ä¸ºä½ çš„é¡¹ç›®æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„åŸºçº¿æ ·å¼ï¼Œç¡®ä¿åœ¨ä¸åŒæµè§ˆå™¨ä¸­å…·æœ‰ä¸€è‡´çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚åŸºç¡€æ ·å¼è¿˜åŒ…æ‹¬å¯¹æ ‡å‡†å…ƒç´ ï¼ˆå¦‚ **<code>&lt;h1&gt;</code>åˆ° <code>&lt;h6&gt;</code>ã€<code>&lt;p&gt;</code>ç­‰ï¼‰çš„é»˜è®¤æ ·å¼è®¾ç½®ï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨ä¸éœ€è¦é¢å¤–ç±»çš„æƒ…å†µä¸‹ç«‹å³å¼€å§‹å·¥ä½œã€‚</p><ol start="2"><li><code>@tailwind components;</code></li></ol><p>**è¿™ä¸ªæŒ‡ä»¤å¯¼å…¥ç”±ä½ æˆ–å…¶ä»–äººåˆ›å»ºçš„ç»„ä»¶ç±»ã€‚åœ¨Tailwindä¸­ï¼Œç»„ä»¶ä¸æ˜¯æŒ‡UIç»„ä»¶åº“ä¸­çš„ç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ç»„å¯ä»¥é‡ç”¨çš„å·¥å…·ç±»ç»„åˆï¼Œç”¨äºæ„å»ºç•Œé¢å…ƒç´ ã€‚é€šè¿‡åœ¨ **<code>tailwind.config.js</code>æ–‡ä»¶ä¸­è‡ªå®šä¹‰æˆ–æ‰©å±•ï¼Œä½ å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ç»„ä»¶æ ·å¼ï¼Œè¿™äº›è‡ªå®šä¹‰æ ·å¼å°†é€šè¿‡è¿™ä¸ªæŒ‡ä»¤è¢«å¼•å…¥ã€‚è¿™å…è®¸ä½ å®šä¹‰ä¸€äº›å¸¸ç”¨çš„æ ·å¼æ¨¡å¼ï¼Œå¦‚æŒ‰é’®ã€å¡ç‰‡ç­‰ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªé¡¹ç›®ä¸­é‡ç”¨ã€‚</p><ol start="3"><li><code>@tailwind utilities;</code></li></ol><p><strong>è¿™ä¸ªæŒ‡ä»¤å¯¼å…¥Tailwindçš„å·¥å…·ç±»ï¼Œè¿™æ˜¯Tailwind CSSæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ã€‚å·¥å…·ç±»åŒ…æ‹¬äº†è¾¹è·ã€å¡«å……ã€æ–‡å­—å¤§å°ã€é¢œè‰²ç­‰å‡ ä¹æ‰€æœ‰CSSå±æ€§çš„ç±»ã€‚è¿™äº›ç±»è®¾è®¡ä¸ºåŸå­ç±»ï¼Œæ„å‘³ç€æ¯ä¸ªç±»éƒ½å…·æœ‰å•ä¸€çš„è´£ä»»ï¼Œä½ å¯ä»¥ç»„åˆå®ƒä»¬æ¥åˆ›å»ºå¤æ‚çš„è®¾è®¡ã€‚è¿™ç§æ–¹æ³•æä¾›äº†æé«˜çš„çµæ´»æ€§å’Œå®šåˆ¶æ€§ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿå¿«é€Ÿæ„å»ºå’Œè°ƒæ•´ç•Œé¢ã€‚</strong></p><p>**é€šè¿‡åœ¨CSSæ–‡ä»¶ä¸­åŒ…å«è¿™äº› **<code>@tailwind</code>æŒ‡ä»¤ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨æ¿€æ´»Tailwind CSSçš„å¼ºå¤§åŠŸèƒ½ï¼Œä½¿å…¶æˆä¸ºæ„å»ºå’Œè®¾è®¡ä½ çš„Webé¡¹ç›®çš„åŸºç¡€ã€‚è¿™ç§æ–¹æ³•å…è®¸ä½ åˆ©ç”¨Tailwindçš„æ‰€æœ‰é¢„å®šä¹‰æ ·å¼å’Œå·¥å…·ï¼ŒåŒæ—¶ä¿æŒäº†æ‰©å±•å’Œè‡ªå®šä¹‰çš„èƒ½åŠ›ã€‚</p><h3 id="Tailwind-CSS-IntelliSense"><a href="#Tailwind-CSS-IntelliSense" class="headerlink" title="Tailwind CSS IntelliSense"></a>Tailwind CSS IntelliSense</h3><p><strong>Tailwind CSS IntelliSense æ˜¯ä¸€ä¸ª Visual Studio Code (VSCode) æ’ä»¶ï¼Œå®ƒæå¤§åœ°å¢å¼ºäº†åœ¨ä½¿ç”¨VSCodeå¼€å‘æ—¶ä½¿ç”¨Tailwind CSSçš„ä½“éªŒã€‚è¿™ä¸ªæ’ä»¶æä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ—¨åœ¨æé«˜å¼€å‘æ•ˆç‡å’Œå‡å°‘ç¼–ç é”™è¯¯ã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</strong></p><ul><li><strong>ç±»åæç¤º</strong>ï¼šåœ¨ç¼–å†™HTMLæˆ–JSXç­‰æ–‡ä»¶æ—¶ï¼Œ<strong>æ’ä»¶ä¼šæä¾›Tailwind CSSç±»åçš„è‡ªåŠ¨å®Œæˆå»ºè®®</strong>ã€‚è¿™æ„å‘³ç€ä½ å¼€å§‹é”®å…¥æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºå¯ç”¨çš„Tailwind ç±»ååˆ—è¡¨ï¼Œè®©ä½ å¿«é€Ÿé€‰æ‹©è€Œä¸éœ€è¦è®°ä½æ¯ä¸ªå…·ä½“çš„ç±»åã€‚</li><li><strong>æ‚¬åœåå¯ä»¥æ ·å¼é¢„è§ˆ</strong>ï¼šå½“ä½ å°†é¼ æ ‡æ‚¬åœåœ¨æŸä¸ªTailwind CSSç±»åä¸Šæ—¶ï¼ŒIntelliSenseä¼šæ˜¾ç¤ºä¸€ä¸ªå°å¼¹çª—ï¼Œå…¶ä¸­å±•ç¤ºäº†è¿™ä¸ªç±»åå¯¹åº”çš„CSSæ ·å¼ã€‚è¿™ä½¿å¾—ç†è§£å’Œæ£€æŸ¥ç±»åçš„ä½œç”¨å˜å¾—ç›´æ¥ä¸”æ–¹ä¾¿ã€‚</li><li><strong>é”™è¯¯æ£€æŸ¥</strong>ï¼šæ’ä»¶èƒ½å¤Ÿè¯†åˆ«å¹¶é«˜äº®æ˜¾ç¤ºä¸å­˜åœ¨çš„Tailwind CSSç±»åï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½å¹¶ä¿®æ­£é”™è¯¯æˆ–æ‹¼å†™é—®é¢˜ã€‚</li><li><strong>é¢œè‰²é¢„è§ˆ</strong>ï¼šå¯¹äºé¢œè‰²ç›¸å…³çš„ç±»åï¼ˆå¦‚èƒŒæ™¯ã€æ–‡å­—é¢œè‰²ç­‰ï¼‰ï¼ŒIntelliSenseä¼šåœ¨ç±»åæ—è¾¹æ˜¾ç¤ºä¸€ä¸ªå°è‰²å—ï¼Œç›´è§‚åœ°å±•ç¤ºè¿™ä¸ªç±»åå¯¹åº”çš„é¢œè‰²ï¼Œå¢å¼ºäº†é¢œè‰²é€‰æ‹©çš„ç›´è§‚æ€§ã€‚</li><li><strong>@applyæŒ‡ä»¤æ”¯æŒ</strong>ï¼šå½“ä½¿ç”¨ <code>@apply</code>æŒ‡ä»¤åœ¨CSSæˆ–SCSSæ–‡ä»¶ä¸­åº”ç”¨Tailwind CSSå®ç”¨ç¨‹åºç±»æ—¶ï¼ŒIntelliSenseä¹Ÿä¼šæä¾›è‡ªåŠ¨å®Œæˆå’ŒéªŒè¯åŠŸèƒ½ã€‚</li><li><strong>è‡ªå®šä¹‰é…ç½®æ”¯æŒ</strong>ï¼šIntelliSenseæ’ä»¶èƒ½å¤Ÿè¯»å–å¹¶æ ¹æ®ä½ çš„ <code>tailwind.config.js</code>æ–‡ä»¶æä¾›è‡ªå®šä¹‰é…ç½®çš„è‡ªåŠ¨å®Œæˆå»ºè®®ï¼Œè¿™åŒ…æ‹¬ä½ æ·»åŠ æˆ–ä¿®æ”¹çš„é¢œè‰²ã€é—´è·ç­‰è‡ªå®šä¹‰ä¸»é¢˜è®¾ç½®ã€‚</li></ul><p><strong>æ€»ä¹‹ï¼ŒTailwind CSS IntelliSense æ’ä»¶é€šè¿‡æä¾›å¼ºå¤§çš„ä»£ç å®Œæˆã€éªŒè¯å’Œé¢„è§ˆåŠŸèƒ½ï¼Œæå¤§åœ°æé«˜äº†ä½¿ç”¨Tailwind CSSè¿›è¡Œå¼€å‘çš„æ•ˆç‡å’Œèˆ’é€‚åº¦ã€‚å®ƒå¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°ç¼–å†™ä»£ç ï¼Œå‡å°‘é”™è¯¯ï¼Œå¹¶åœ¨ç¼–ç æ—¶è·å¾—å³æ—¶çš„æ ·å¼åé¦ˆã€‚</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/youxt-njnu/3d_portfolio_primary&quot;&gt;æ¨¡ä»¿é¡¹ç›®åœ°å€&lt;/a</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>three+react|ä¸ªäººä¸»é¡µå®æˆ˜â…£</title>
    <link href="https://youxt-njnu.github.io/2024/03/09/threejs%E5%AE%9E%E6%88%984/"/>
    <id>https://youxt-njnu.github.io/2024/03/09/threejs%E5%AE%9E%E6%88%984/</id>
    <published>2024-03-09T03:26:05.000Z</published>
    <updated>2024-06-13T02:14:58.115Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p><a href="https://github.com/youxt-njnu/3d_portfolio_primary">æ¨¡ä»¿é¡¹ç›®åœ°å€</a>ï¼Œ<a href="https://www.youtube.com/watch?v=FkowOdMjvYo">å‚è€ƒçš„è§†é¢‘æ•™ç¨‹å‡ºå¤„</a>ï¼Œ<a href="https://juejin.cn/post/6960262593265025031">reactå…¥é—¨</a></p><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/your-first-scene#adding-lights">react three fiber</a></p><p>æœ¬æ–‡æ˜¯å¯¹Island.jsxåŠå…¶ç›¸å…³æ–‡ä»¶çš„å­¦ä¹ è§£è¯»ï¼Œå†…å®¹ä¸­å«ChatGPTè¾…åŠ©ç”Ÿæˆâ—è‡ªè¾¨â—â—â—</p><h1 id="ç›¸å…³æ¡ˆä¾‹è¡¥å……"><a href="#ç›¸å…³æ¡ˆä¾‹è¡¥å……" class="headerlink" title="ç›¸å…³æ¡ˆä¾‹è¡¥å……"></a>ç›¸å…³æ¡ˆä¾‹è¡¥å……</h1><h2 id="Birdæ¡ˆä¾‹"><a href="#Birdæ¡ˆä¾‹" class="headerlink" title="Birdæ¡ˆä¾‹"></a>Birdæ¡ˆä¾‹</h2><h3 id="const-x3D-useGLTF-birdScene"><a href="#const-x3D-useGLTF-birdScene" class="headerlink" title="const &#x3D; useGLTF(birdScene)"></a>const &#x3D; useGLTF(birdScene)</h3><p><code>&lt;primitive /&gt;</code> is a component from React Three Fiber that allows you to directly include three.js objects into the React component tree. By setting the <code>object</code> prop to <code>scene</code>, youâ€™re telling React Three Fiber to render the entire GLTF scene, which <code>useGLTF</code> hook returns, without having to manually construct the scene with React components. This is a straightforward way to include complex 3D models and their associated hierarchies into your 3D scene.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//è¿™ç§å½¢å¼</span><br><span class="line">&lt;mesh</span><br><span class="line"> Â  geometry=&#123;nodes.pCube11_rocks1_0.geometry&#125;</span><br><span class="line"> Â  material=&#123;materials.PaletteMaterial001&#125;</span><br><span class="line">/&gt;</span><br><span class="line">//å’Œè¿™ç§å½¢å¼</span><br><span class="line">&lt;mesh</span><br><span class="line"> Â  ref=&#123;birdRef&#125;</span><br><span class="line"> Â  position=&#123;[-5, 2, 1]&#125;</span><br><span class="line"> Â  scale=&#123;[0.003, 0.003, 0.003]&#125;</span><br><span class="line">&gt;</span><br><span class="line"> Â  &lt;primitive object=&#123;scene&#125; /&gt;</span><br><span class="line">&lt;/mesh&gt;</span><br></pre></td></tr></table></figure><p>**ç¬¬ä¸€ç§å½¢å¼ç›´æ¥ä½¿ç”¨äº†GLTFæ¨¡å‹ä¸­çš„å…·ä½“èŠ‚ç‚¹ï¼ˆå¦‚ **<code>pCube11_rocks1_0</code>ï¼‰å’Œæè´¨ï¼ˆå¦‚ <code>PaletteMaterial001</code>ï¼‰æ¥åˆ›å»ºä¸€ä¸ª <code>&lt;mesh&gt;</code>ã€‚è¿™ç§æ–¹å¼å…è®¸ä½ ç²¾ç»†æ§åˆ¶æ¨¡å‹çš„æ¯ä¸ªéƒ¨åˆ†ï¼Œä¾‹å¦‚æŒ‡å®šä½¿ç”¨æ¨¡å‹ä¸­çš„å“ªä¸ªèŠ‚ç‚¹å’Œå“ªç§æè´¨ã€‚</p><p>**ç¬¬äºŒç§å½¢å¼ä½¿ç”¨äº† **<code>&lt;primitive object=&#123;scene&#125; /&gt;</code>æ¥ç›´æ¥æ¸²æŸ“æ•´ä¸ªåœºæ™¯ï¼ˆ<code>scene</code>ï¼‰ï¼Œè¿™é‡Œçš„ <code>scene</code>æ˜¯ <code>useGLTF</code>é’©å­è¿”å›çš„æ•´ä¸ªGLTFåœºæ™¯å¯¹è±¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ç®€å•å¿«æ·åœ°åœ¨React Three Fiberä¸­æ¸²æŸ“æ•´ä¸ª3Dæ¨¡å‹ï¼Œè€Œä¸éœ€è¦é€ä¸ªæŒ‡å®šæ¨¡å‹çš„æ¯ä¸ªéƒ¨åˆ†ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºå½“ä½ æƒ³è¦åŸå°ä¸åŠ¨åœ°æ¸²æŸ“æ•´ä¸ªæ¨¡å‹ï¼Œè€Œä¸éœ€è¦å¯¹æ¨¡å‹çš„å•ç‹¬éƒ¨åˆ†è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚</p><h3 id="Unityä¸­å¯¼å…¥glb-x2F-gltf"><a href="#Unityä¸­å¯¼å…¥glb-x2F-gltf" class="headerlink" title="Unityä¸­å¯¼å…¥glb&#x2F;gltf"></a>Unityä¸­å¯¼å…¥glb&#x2F;gltf</h3><p><strong>åœ¨Unityä¸­å¯¼å…¥GLBæ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨Unityçš„GLTFUtilityæ’ä»¶ï¼Œæ”¯æŒå¯¼å…¥GLBå’ŒGLTFæ ¼å¼çš„3Dæ¨¡å‹ã€‚é¦–å…ˆéœ€è¦ä»</strong><a href="https://github.com/Siccity/GLTFUtility">GitHubè·å–URL</a>ï¼Œç„¶ååœ¨Unityä¸­ä½¿ç”¨package manageræ¥è¿›è¡Œå®‰è£…ã€‚å¯¼å…¥æ’ä»¶åï¼Œä½ å¯ä»¥ç›´æ¥å°†GLBæ¨¡å‹æ‹–æ‹½åˆ°Unityçš„Assetsæ–‡ä»¶å¤¹ä¸­ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†æ¨¡å‹çš„å¯¼å…¥è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ç®€å•å¿«é€Ÿï¼Œä¸éœ€è¦å¤æ‚çš„é…ç½®ã€‚</p><h3 id="useFrame"><a href="#useFrame" class="headerlink" title="useFrame()"></a>useFrame()</h3><p>**åœ¨ **<code>useFrame</code>å›è°ƒå‡½æ•°ä¸­ï¼Œ<code>&#123; clock, camera &#125;</code>æ˜¯ä»React Three Fiberçš„æ¸²æŸ“å¾ªç¯ä¸­è§£æ„å‡ºæ¥çš„å¯¹è±¡ã€‚<code>clock</code>æ˜¯ä¸€ä¸ª <code>THREE.Clock</code>å®ä¾‹ï¼Œç”¨äºè¿½è¸ªæ—¶é—´ï¼›<code>camera</code>æ˜¯å½“å‰åœºæ™¯ä¸­çš„ç›¸æœºå¯¹è±¡ã€‚è¿™ç§å†™æ³•å…è®¸ä½ ç›´æ¥è®¿é—®è¿™äº›å¯¹è±¡è€Œä¸éœ€è¦ä»å¤–éƒ¨ä¼ å…¥ï¼Œå› ä¸º <code>useFrame</code>å·²ç»ä¸ºä½ æä¾›äº†å¯¹å®ƒä»¬çš„å¼•ç”¨ï¼Œè¿™æ˜¯React Three Fiberæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨ç®€åŒ–åŠ¨ç”»å’Œæ¸²æŸ“é€»è¾‘çš„å®ç°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useFrame((&#123; clock, camera &#125;) =&gt; &#123; // è¿™é‡Œéœ€è¦ç»™clock, cameraå¤–é¢åŠ ä¸Š&#123;&#125;ï¼Œä¸ç„¶ä¼šæŠ¥é”™</span><br><span class="line"> Â  Â // Update the Y position simulate the flight moving in a sin wave </span><br><span class="line"> Â  Â birdRef.current.position.y = Math.sin(clock.elapsedTime) * 0.2 + 2;</span><br><span class="line"></span><br><span class="line"> Â  Â // æ§åˆ¶é¸Ÿåœ¨islandçš„èŒƒå›´å†…ï¼ˆç›¸æœºä½ç½®çš„å‰å10ä¸ªå•ä½ï¼‰</span><br><span class="line"> Â  Â if (birdRef.current.position.x &gt; camera.position.x + 10) &#123;</span><br><span class="line"> Â  Â  Â birdRef.current.rotation.y = Math.PI;</span><br><span class="line"> Â   &#125; else if (birdRef.current.position.x &lt; camera.position.x - 10) &#123;</span><br><span class="line"> Â  Â  Â birdRef.current.rotation.y = 0;</span><br><span class="line"> Â   &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>**åœ¨ **<code>useFrame</code>ä¸­ï¼Œé™¤äº† <code>clock</code>å’Œ <code>camera</code>ï¼Œä½ è¿˜å¯ä»¥æ¥æ”¶åˆ°ä¸€ä¸ª <code>state</code>å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå®ƒåŒ…å«äº†React Three Fiberæ¸²æŸ“å¾ªç¯ä¸­çš„å½“å‰çŠ¶æ€å’Œä¸€äº›å®ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™äº›åŒ…æ‹¬åœºæ™¯ï¼ˆ<code>scene</code>ï¼‰ã€æ¸²æŸ“å™¨ï¼ˆ<code>gl</code>ï¼‰ã€å¤§å°ï¼ˆ<code>size</code>ï¼‰ã€é¼ æ ‡ä½ç½®ï¼ˆ<code>mouse</code>ï¼‰ç­‰ã€‚<code>useFrame</code>å‡½æ•°æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ¥å£ï¼Œè®©ä½ å¯ä»¥åœ¨æ¯ä¸€å¸§ä¸­è®¿é—®å’Œä¿®æ”¹è¿™äº›å¯¹è±¡ï¼Œä»è€Œåˆ›å»ºåŠ¨ç”»å’Œäº¤äº’ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â useFrame((_, delta) =&gt; &#123;</span><br><span class="line"> Â  Â if (isRotating) &#123;</span><br><span class="line"> Â  Â  Â skyRef.current.rotation.y += 0.15 * delta;</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>**In the **<code>useFrame</code> hook, the first parameter (<code>_</code> in this case) is the state object provided by React Three Fiber, which contains information about the current render state, such as the scene, camera, etc. The underscore <code>_</code> is often used to indicate that the parameter is not being used in the function. The second parameter, <code>delta</code>, represents the time in seconds since the last frame was rendered. This is useful for creating time-dependent animations or simulations, ensuring smooth and consistent motion regardless of the frame rate.</p><h2 id="Home"><a href="#Home" class="headerlink" title="Home"></a>Home</h2><h3 id="Audioçš„ä½¿ç”¨"><a href="#Audioçš„ä½¿ç”¨" class="headerlink" title="Audioçš„ä½¿ç”¨"></a>Audioçš„ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const audioRef = useRef(new Audio(sakura));</span><br></pre></td></tr></table></figure><p>**The **<code>Audio</code> in refers to the HTML Audio element, which is a standard part of the Web APIs provided by browsers for playing sound. It does not need to be imported from a module because itâ€™s globally available in the browser environment, similar to <code>document</code> or <code>window</code>. This API allows you to programmatically control audio playback, such as play, pause, and volume control directly from your React components.</p><p>**To use the **<code>Audio</code> interface in JavaScript, you simply create a new <code>Audio</code> object, optionally passing the URL of the audio file you wish to play as a parameter. You can then use methods like <code>play()</code>, <code>pause()</code>, and properties such as <code>volume</code> to control playback.</p><p><strong>Example:</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const audio = new Audio(&#x27;path/to/your/audio/file.mp3&#x27;);</span><br><span class="line">audio.play(); // To start playing the audio</span><br><span class="line">audio.pause(); // To pause the audio</span><br><span class="line">audio.volume = 0.5; // To set the volume to 50%</span><br></pre></td></tr></table></figure><p>**In a React component, you might use it with **<code>useRef</code> to keep a reference to the audio object.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const [isPlayingMusic, setIsPlayingMusic] = useState(false);</span><br><span class="line"></span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â  Â if (isPlayingMusic) &#123; audioRef.current.play(); &#125;</span><br><span class="line"></span><br><span class="line"> Â  Â return () =&gt; &#123;</span><br><span class="line"> Â  Â  Â audioRef.current.pause();</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;, [isPlayingMusic]);</span><br><span class="line"></span><br><span class="line">// returné‡Œé¢ï¼š</span><br><span class="line">&lt;div className=&#x27;absolute bottom-2 left-2&#x27;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;img</span><br><span class="line"> Â  Â  Â  Â  Â src=&#123;!isPlayingMusic ? soundoff : soundon&#125;</span><br><span class="line"> Â  Â  Â  Â  Â alt=&quot;sound&quot;</span><br><span class="line"> Â  Â  Â  Â  Â className=&#x27;w-10 h-10 cursor-pointer object-contain&#x27;</span><br><span class="line"> Â  Â  Â  Â  Â onClick=&#123;() =&gt; setIsPlayingMusic(!isPlayingMusic)&#125;</span><br><span class="line"> Â  Â  Â  Â /&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>**This component plays the audio when it mounts and pauses when it unmounts, with the **<code>src</code> prop specifying the audio fileâ€™s path.</p><h3 id="currentStageçš„åˆ‡æ¢"><a href="#currentStageçš„åˆ‡æ¢" class="headerlink" title="currentStageçš„åˆ‡æ¢"></a>currentStageçš„åˆ‡æ¢</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div className=&quot;absolute top-28 left-0 right-0 z-10 flex items-center justify-center&quot;&gt;</span><br><span class="line"> Â  Â  Â   &#123;currentStage &amp;&amp; &lt;HomeInfo currentStage=&#123;currentStage&#125; /&gt;&#125; &lt;/div&gt;&#125;</span><br></pre></td></tr></table></figure><p><strong>HomeInfoä¸­</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HomeInfo = (&#123; currentStage &#125;) =&gt; &#123;</span><br><span class="line"> Â return renderContent[currentStage] || null;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>Islandä¸­</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">switch (true) &#123;</span><br><span class="line"> Â  Â  Â  Â case normalizeRotation &gt;= 5.45 &amp;&amp; normalizeRotation &lt;= 5.85:</span><br><span class="line"> Â  Â  Â  Â  Â setCurrentStage(4);</span><br><span class="line"> Â  Â  Â  Â  Â break;</span><br><span class="line"> Â  Â  Â  Â case normalizeRotation &gt;= 0.85 &amp;&amp; normalizeRotation &lt;= 1.3:</span><br><span class="line"> Â  Â  Â  Â  Â setCurrentStage(3);</span><br><span class="line"> Â  Â  Â  Â  Â break;</span><br><span class="line"> Â  Â  Â  Â case normalizeRotation &gt;= 2.4 &amp;&amp; normalizeRotation &lt;= 2.6:</span><br><span class="line"> Â  Â  Â  Â  Â setCurrentStage(2);</span><br><span class="line"> Â  Â  Â  Â  Â break;</span><br><span class="line"> Â  Â  Â  Â case normalizeRotation &gt;= 4.25 &amp;&amp; normalizeRotation &lt;= 4.75:</span><br><span class="line"> Â  Â  Â  Â  Â setCurrentStage(1);</span><br><span class="line"> Â  Â  Â  Â  Â break;</span><br><span class="line"> Â  Â  Â  Â default:</span><br><span class="line"> Â  Â  Â  Â  Â setCurrentStage(null); // å½“ä¸åœ¨ç‰¹å®šè§’åº¦ä¸‹ï¼ŒcurrentStageä¸ºnullï¼Œæ‰€ä»¥Home.jsxé‡Œè¦å¯¹currentStageè¿›è¡Œåˆ¤æ–­</span><br><span class="line"> Â  Â   &#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰€ä»¥éœ€è¦å…ˆåˆ¤æ–­currentStageï¼Œä¸æ˜¯nullä¹‹åå†æ¸²æŸ“HomeInfo</strong></p><h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div className=&#x27;flex justify-center items-center&#x27;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;div className=&quot;w-20 h-20 border-4 border-opacity-20 border-purple-500 border-t-purple-800 rounded-full animate-spin&quot;&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â  Â &lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨Tailwind CSSå®ç°çš„ç®€å•æ—‹è½¬åŠ¨ç”»ç¤ºä¾‹ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªå±…ä¸­çš„åœ†å½¢divï¼Œè¯¥divå…·æœ‰æ—‹è½¬åŠ¨ç”»ã€‚ä¸‹é¢æ˜¯è¯¦ç»†è§£æï¼š</strong></p><ul><li><code>className=&#39;flex justify-center items-center&#39;</code>ï¼šè¿™ä¸‰ä¸ªç±»ä¸€èµ·ä½¿ç”¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ªflexå®¹å™¨ï¼Œå…¶ä¸­çš„å†…å®¹æ°´å¹³ï¼ˆ<code>justify-center</code>ï¼‰å’Œå‚ç›´ï¼ˆ<code>items-center</code>ï¼‰å±…ä¸­ã€‚è¿™ç¡®ä¿äº†å†…éƒ¨çš„divï¼ˆæ—‹è½¬å…ƒç´ ï¼‰åœ¨çˆ¶å®¹å™¨ä¸­å±…ä¸­ã€‚</li><li>**<code>w-20 h-20</code>**ï¼šè®¾ç½®divçš„å®½åº¦å’Œé«˜åº¦ä¸º5remï¼ˆæ ¹æ®Tailwind CSSçš„é»˜è®¤é…ç½®ï¼Œ<code>20</code>å•ä½ç­‰äº5remï¼Œå¦‚æœæ²¡æœ‰è‡ªå®šä¹‰é…ç½®çš„è¯ï¼‰ã€‚</li><li>**<code>border-4</code>**ï¼šè®¾ç½®è¾¹æ¡†å®½åº¦ä¸º4åƒç´ ã€‚</li><li>**<code>border-opacity-20</code>**ï¼šè®¾ç½®è¾¹æ¡†é€æ˜åº¦ä¸º20%ï¼Œä½¿è¾¹æ¡†é¢œè‰²è¾ƒæµ…ã€‚</li><li>**<code>border-purple-500</code>**ï¼šè®¾ç½®è¾¹æ¡†çš„é»˜è®¤é¢œè‰²ä¸ºç´«è‰²ï¼Œé€æ˜åº¦ç”± <code>border-opacity-20</code>æ§åˆ¶ã€‚</li><li>**<code>border-t-purple-800</code>**ï¼šç‰¹åˆ«ä¸ºä¸Šè¾¹æ¡†è®¾ç½®äº†è¾ƒæ·±çš„ç´«è‰²ï¼ˆ<code>purple-800</code>ï¼‰ï¼Œè¿™åœ¨æ—‹è½¬æ—¶ä¼šäº§ç”Ÿè§†è§‰æ•ˆæœï¼Œä½¿å¾—çœ‹èµ·æ¥åƒæ˜¯åœ¨æ—‹è½¬ã€‚</li><li>**<code>rounded-full</code>**ï¼šä½¿divå˜ä¸ºåœ†å½¢ã€‚</li><li>**<code>animate-spin</code>**ï¼šåº”ç”¨Tailwind CSSå†…ç½®çš„æ—‹è½¬åŠ¨ç”»ï¼Œä½¿divæ— é™æœŸæ—‹è½¬ã€‚è¿™ä¸ªåŠ¨ç”»æ˜¯é€šè¿‡CSSçš„ <code>@keyframes</code>å®ç°çš„ï¼Œå®šä¹‰äº†ä»0%åˆ°100%çš„è½¬åŠ¨ï¼Œå®ç°äº†è¿ç»­æ—‹è½¬çš„æ•ˆæœã€‚Tailwind CSSå†…éƒ¨å®šä¹‰äº†è¿™ä¸ªåŠ¨ç”»å…³é”®å¸§ï¼Œå®ç°äº†å…ƒç´ çš„360åº¦æ—‹è½¬ã€‚åŠ¨ç”»æ˜¯å¾ªç¯æ’­æ”¾çš„ï¼Œå› æ­¤æ—‹è½¬åŠ¨ç”»ä¼šä¸€ç›´æŒç»­ï¼Œç›´åˆ°è¢«å¦å¤–çš„CSSè§„åˆ™è¦†ç›–æˆ–è€…ä»DOMä¸­ç§»é™¤ã€‚</li></ul><h3 id="åŒ¿åå‡½æ•°çš„-å’Œ"><a href="#åŒ¿åå‡½æ•°çš„-å’Œ" class="headerlink" title="åŒ¿åå‡½æ•°çš„()å’Œ{}"></a>åŒ¿åå‡½æ•°çš„()å’Œ{}</h3><ul><li>**ä½¿ç”¨ **<code>()=&gt;()</code>æ—¶ï¼Œç®­å¤´å‡½æ•°ä¼šç›´æ¥è¿”å›åœ†æ‹¬å· <code>()</code>ä¸­çš„è¡¨è¾¾å¼ç»“æœã€‚è¿™é€‚ç”¨äºè¿”å›å•ä¸ªè¡¨è¾¾å¼æˆ–JSXå…ƒç´ çš„ç®€çŸ­å‡½æ•°ã€‚</li><li>**ä½¿ç”¨ **<code>()=&gt;&#123;&#125;</code>æ—¶ï¼Œä½ å¯ä»¥åœ¨èŠ±æ‹¬å· <code>&#123;&#125;</code>ä¸­æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œä½†å¦‚æœæƒ³è¦è¿”å›å€¼ï¼Œéœ€è¦æ˜¾å¼ä½¿ç”¨ <code>return</code>è¯­å¥ã€‚è¿™é€‚ç”¨äºæ›´å¤æ‚çš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…å«äº†å¤šæ¡è¯­å¥ã€‚</li></ul><h2 id="Contact"><a href="#Contact" class="headerlink" title="Contact"></a>Contact</h2><h3 id="useAnimations"><a href="#useAnimations" class="headerlink" title="useAnimations"></a>useAnimations</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const group = useRef();</span><br><span class="line"> Â const &#123; nodes, materials, animations &#125; = useGLTF(scene);</span><br><span class="line"> Â const &#123; actions &#125; = useAnimations(animations, group);</span><br><span class="line"></span><br><span class="line"> Â useEffect(() =&gt; &#123;</span><br><span class="line"> Â  Â console.log(actions);// å¯ä»¥æŸ¥çœ‹æ¨¡å‹æœ‰å“ªäº›åŠ¨ç”»</span><br><span class="line"> Â  Â Object.values(actions).forEach((action) =&gt; &#123; action.stop() &#125;);</span><br><span class="line"> Â  Â if (actions[currentAnimation]) actions[currentAnimation].play();</span><br><span class="line"></span><br><span class="line">  &#125;, [actions, currentAnimation]);</span><br></pre></td></tr></table></figure><p><code>Object.values()</code> æ˜¯ä¸€ä¸ªJavaScriptæ–¹æ³•ï¼Œå®ƒä»ä¸€ä¸ªå¯¹è±¡ä¸­æå–å‡ºæ‰€æœ‰å¯æšä¸¾çš„å±æ€§å€¼ï¼Œå¹¶ä»¥æ•°ç»„çš„å½¢å¼è¿”å›è¿™äº›å€¼ã€‚è¿™ä¸ªæ–¹æ³•è®©ä½ èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°éå†å¯¹è±¡çš„å€¼ã€‚</p><p><strong>ä½¿ç”¨æ–¹æ³•:</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const object = &#123; a: 1, b: &#x27;text&#x27;, c: true &#125;;</span><br><span class="line">const values = Object.values(object);</span><br><span class="line">console.log(values); // è¾“å‡º: [1, &#x27;text&#x27;, true]</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹:</strong><br><strong>å‡è®¾ä½ æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå­˜å‚¨äº†ä¸åŒåŠ¨ç”»çš„çŠ¶æ€ï¼Œä½ æƒ³è¦åœæ­¢æ‰€æœ‰æ­£åœ¨æ’­æ”¾çš„åŠ¨ç”»ï¼Œå¯ä»¥è¿™æ ·åš:</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const animations = &#123;</span><br><span class="line"> Â walk: &#123; /* åŠ¨ç”»å¯¹è±¡ */ &#125;,</span><br><span class="line"> Â run: &#123; /* åŠ¨ç”»å¯¹è±¡ */ &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// åœæ­¢æ‰€æœ‰åŠ¨ç”»</span><br><span class="line">Object.values(animations).forEach(animation =&gt; &#123;</span><br><span class="line"> Â animation.stop(); // å‡è®¾æ¯ä¸ªåŠ¨ç”»å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªstopæ–¹æ³•</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>è¿™æ ·ï¼Œ</strong><code>Object.values()</code>å¸®åŠ©ä½ è·å–äº† <code>animations</code>å¯¹è±¡ä¸­æ‰€æœ‰åŠ¨ç”»çš„é›†åˆï¼Œç„¶åä½ å¯ä»¥ä½¿ç”¨ <code>forEach</code>éå†è¿™ä¸ªé›†åˆï¼Œå¹¶å¯¹æ¯ä¸ªåŠ¨ç”»è°ƒç”¨ <code>stop</code>æ–¹æ³•ã€‚</p><h3 id="useAlert"><a href="#useAlert" class="headerlink" title="useAlert"></a>useAlert</h3><p><strong>æ–°å»ºçš„ä¸€ä¸ªè‡ªå®šä¹‰Hook;</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">const useAlert = () =&gt; &#123;</span><br><span class="line"> Â const [alert, setAlert] = React.useState(&#123;</span><br><span class="line"> Â  Â show: false,</span><br><span class="line"> Â  Â text: &#x27;&#x27;,</span><br><span class="line"> Â  Â type: &#x27;danger&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line"> Â const showAlert = (&#123; text, type = &#x27;danger&#x27; &#125;) =&gt;</span><br><span class="line"> Â  Â setAlert(&#123; show: true, text, type &#125;)</span><br><span class="line"> Â const hideAlert = () =&gt; setAlert(&#123; show: false, text: &#x27;&#x27;, type: &#x27;danger&#x27; &#125;)</span><br><span class="line"> Â return &#123; alert, showAlert, hideAlert &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default useAlert</span><br></pre></td></tr></table></figure><p><strong>åœ¨useStateçš„åŸºç¡€ä¸Šï¼Œæ–°å»ºäº†ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯ä¼ å…¥å‚æ•°+setAlertè¿›è¡Œç»„åˆï¼›æœ€åè¿”å›alertï¼Œå‡çº§çš„setAlert(ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°)</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/youxt-njnu/3d_portfolio_primary&quot;&gt;æ¨¡ä»¿é¡¹ç›®åœ°å€&lt;/a</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>three+react|ä¸ªäººä¸»é¡µå®æˆ˜â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/02/25/threejs%E5%AE%9E%E6%88%983/"/>
    <id>https://youxt-njnu.github.io/2024/02/25/threejs%E5%AE%9E%E6%88%983/</id>
    <published>2024-02-25T03:50:05.000Z</published>
    <updated>2024-06-13T02:15:02.801Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p><a href="https://github.com/youxt-njnu/3d_portfolio_primary">æ¨¡ä»¿é¡¹ç›®åœ°å€</a>ï¼Œ<a href="https://www.youtube.com/watch?v=FkowOdMjvYo">å‚è€ƒçš„è§†é¢‘æ•™ç¨‹å‡ºå¤„</a>ï¼Œ<a href="https://juejin.cn/post/6960262593265025031">reactå…¥é—¨</a></p><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/your-first-scene#adding-lights">react three fiber</a></p><p>æœ¬æ–‡æ˜¯å¯¹Island.jsxåŠå…¶ç›¸å…³æ–‡ä»¶çš„å­¦ä¹ è§£è¯»ï¼Œå†…å®¹ä¸­å«ChatGPTè¾…åŠ©ç”Ÿæˆâ—è‡ªè¾¨â—â—â—</p><h1 id="ç›¸å…³ä»£ç "><a href="#ç›¸å…³ä»£ç " class="headerlink" title="ç›¸å…³ä»£ç "></a>ç›¸å…³ä»£ç </h1><h2 id="Island-jsx"><a href="#Island-jsx" class="headerlink" title="Island.jsx"></a>Island.jsx</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Auto-generated by: https://github.com/pmndrs/gltfjsx</span></span><br><span class="line"><span class="comment">Author: nimzu (https://sketchfab.com/nimzuk)</span></span><br><span class="line"><span class="comment">License: CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)</span></span><br><span class="line"><span class="comment">Source: https://sketchfab.com/3d-models/foxs-islands-163b68e09fcc47618450150be7785907</span></span><br><span class="line"><span class="comment">Title: Fox&#x27;s islands</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; a &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/three&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useGLTF &#125; <span class="keyword">from</span> <span class="string">&quot;@react-three/drei&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useFrame, useThree &#125; <span class="keyword">from</span> <span class="string">&quot;@react-three/fiber&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> isLandScene <span class="keyword">from</span> <span class="string">&#x27;../assets/3d/island.glb&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Island</span> = (<span class="params">&#123; isRotating, setIsRotating, setCurrentStage, ...props &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> islandRef = <span class="title function_">useRef</span>(); <span class="comment">// å¯¹åº”åˆ°äº†Threeçš„Group, ç”¨äºæ§åˆ¶æ•´ä¸ªæ¨¡å‹(islandRef.current, å³islandçš„gameobject)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; gl, viewport &#125; = <span class="title function_">useThree</span>();<span class="comment">// è·å–Threeçš„æ¸²æŸ“å™¨ï¼Œè§†å£</span></span><br><span class="line">  <span class="keyword">const</span> &#123; nodes, materials &#125; = <span class="title function_">useGLTF</span>(isLandScene); <span class="comment">// è·å–æ¨¡å‹çš„nodeså’Œmaterials</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> lastX = <span class="title function_">useRef</span>(<span class="number">0</span>); <span class="comment">// ç”¨äºè®°å½•ä¸Šä¸€æ¬¡çš„é¼ æ ‡ä½ç½®ã€‚è¿™ä¸ªå€¼åœ¨ç»„ä»¶çš„é‡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜ï¼Œè€Œä¸”è¿™äº›å€¼çš„å˜åŒ–ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> rotationSpeed = <span class="title function_">useRef</span>(<span class="number">0</span>);  <span class="comment">// è¿™ä¸ªå€¼åœ¨ç»„ä»¶çš„é‡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜ï¼Œè€Œä¸”è¿™äº›å€¼çš„å˜åŒ–ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> dampingFactor = <span class="number">0.95</span>; <span class="comment">// é˜»å°¼ç³»æ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handlePointerDown</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="title function_">setIsRotating</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> clientX = e.<span class="property">touches</span> ? e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span> : e.<span class="property">clientX</span>; <span class="comment">//åªéœ€è¦è€ƒè™‘Xæ–¹å‘çš„</span></span><br><span class="line">    lastX.<span class="property">current</span> = clientX;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handlePointerUp</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="title function_">setIsRotating</span>(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handlePointerMove</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isRotating) &#123;</span><br><span class="line">      <span class="keyword">const</span> clientX = e.<span class="property">touches</span> ? e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span> : e.<span class="property">clientX</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> delta = (clientX - lastX.<span class="property">current</span>) / viewport.<span class="property">width</span>;</span><br><span class="line">      islandRef.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span> += delta * <span class="number">0.01</span> * <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">      lastX.<span class="property">current</span> = clientX;</span><br><span class="line">      rotationSpeed.<span class="property">current</span> = delta * <span class="number">0.01</span> * <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleKeyDown</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;ArrowLeft&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isRotating) <span class="title function_">setIsRotating</span>(<span class="literal">true</span>);</span><br><span class="line">      islandRef.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span> += <span class="number">0.01</span> * <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">      rotationSpeed.<span class="property">current</span> = <span class="number">0.0125</span>;<span class="comment">// è®©æ—‹è½¬çš„æ•ˆæœæ›´èˆ’é€‚äº›</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;ArrowRight&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isRotating) <span class="title function_">setIsRotating</span>(<span class="literal">true</span>);</span><br><span class="line">      islandRef.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span> -= <span class="number">0.01</span> * <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">      rotationSpeed.<span class="property">current</span> = -<span class="number">0.0125</span>;<span class="comment">// è®©æ—‹è½¬çš„æ•ˆæœæ›´èˆ’é€‚äº›</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleKeyUp</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;ArrowLeft&#x27;</span> || e.<span class="property">key</span> === <span class="string">&#x27;ArrowRight&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">setIsRotating</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useFrame</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isRotating) &#123;</span><br><span class="line">      rotationSpeed.<span class="property">current</span> *= dampingFactor; <span class="comment">//æ¯å¸§éƒ½ä¼šå‡å°æ—‹è½¬é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(rotationSpeed.<span class="property">current</span>) &lt; <span class="number">0.001</span>) &#123; <span class="comment">//è®¾å®šé˜ˆå€¼åï¼Œåœæ­¢æ—‹è½¬</span></span><br><span class="line">        rotationSpeed.<span class="property">current</span> = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      islandRef.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span> += rotationSpeed.<span class="property">current</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> rotation = islandRef.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Mormalize the rotation value to ensure it stays within the range[0, 2 * Math.PI].</span></span><br><span class="line">      <span class="comment">// The goal is to ensure that the rotation value remains within a specific range to prevent potential issues with very large or negative rotation values.</span></span><br><span class="line">      <span class="comment">//   Here&#x27;s a step-by-step explanation of what this code does:</span></span><br><span class="line">      <span class="comment">// 1. rotation % (2 * Math.PI) calculates the remainder of the rotation value when divided by 2 * Math.PI.This essentially wraps the rotation value around once it reaches a full circle(360 degrees) so that it stays within the range of 0 to 2 * Math.PI.</span></span><br><span class="line">      <span class="comment">// 2.(rotation % (2 * Math.PI)) + 2 * Math.PI adds 2 * Math.PI to the result from step 1. This is done to ensure that the value remains positive and within the range of 0 to 2 * Math.PI even if it was negative after the modulo operation in step 1.</span></span><br><span class="line">      <span class="comment">// 3. Finally, ((rotation%(2*Math.PI))+2*Math.PI)%(2*Math.PI) applies another modulo operation to the value obtained in step 2. This step guarantees that the value always stays with the range of 0 to 2*Math.PI, which is equivalent to a full circle in radians.</span></span><br><span class="line">      <span class="keyword">const</span> normalizeRotation = ((rotation % (<span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>)) + <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>) % (<span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//set the current stage based on the island&#x27;s orientation</span></span><br><span class="line">      <span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> normalizeRotation &gt;= <span class="number">5.45</span> &amp;&amp; normalizeRotation &lt;= <span class="number">5.85</span>: </span><br><span class="line">          <span class="title function_">setCurrentStage</span>(<span class="number">4</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> normalizeRotation &gt;= <span class="number">0.85</span> &amp;&amp; normalizeRotation &lt;= <span class="number">1.3</span>:</span><br><span class="line">          <span class="title function_">setCurrentStage</span>(<span class="number">3</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> normalizeRotation &gt;= <span class="number">2.4</span> &amp;&amp; normalizeRotation &lt;= <span class="number">2.6</span>:</span><br><span class="line">          <span class="title function_">setCurrentStage</span>(<span class="number">2</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> normalizeRotation &gt;= <span class="number">4.25</span> &amp;&amp; normalizeRotation &lt;= <span class="number">4.75</span>:</span><br><span class="line">          <span class="title function_">setCurrentStage</span>(<span class="number">1</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          <span class="title function_">setCurrentStage</span>(<span class="literal">null</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> canvas = gl.<span class="property">domElement</span>;</span><br><span class="line">    canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pointerdown&#x27;</span>, handlePointerDown);</span><br><span class="line">    canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pointerup&#x27;</span>, handlePointerUp);</span><br><span class="line">    canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pointermove&#x27;</span>, handlePointerMove);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, handleKeyDown);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, handleKeyUp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      canvas.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;pointerdown&#x27;</span>, handlePointerDown);</span><br><span class="line">      canvas.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;pointerup&#x27;</span>, handlePointerUp);</span><br><span class="line">      canvas.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;pointermove&#x27;</span>, handlePointerMove);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, handleKeyDown);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, handleKeyUp);</span><br><span class="line">    &#125;  <span class="comment">// è¿”å›çš„è¿™ä¸ªå‡½æ•°å°†åœ¨ç»„ä»¶å¸è½½æˆ–ä¾èµ–é¡¹æ”¹å˜ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">  &#125;, [gl, handlePointerDown, handlePointerUp, handlePointerMove]); <span class="comment">//åªæœ‰å½“è¿™ä¸‰ä¸ªå˜é‡æ”¹å˜æ—¶ï¼Œé‡Œé¢å‡½æ•°æ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">a.group</span> <span class="attr">ref</span>=<span class="string">&#123;islandRef&#125;</span> &#123;<span class="attr">...props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface944_tree_body_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface945_tree1_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface946_tree2_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface947_tree1_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface948_tree_body_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface949_tree_body_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.pCube11_rocks1_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">a.group</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Island</span>;</span><br></pre></td></tr></table></figure><h2 id="Home-jsx"><a href="#Home-jsx" class="headerlink" title="Home.jsx"></a>Home.jsx</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Canvas</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-three/fiber&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Suspense</span>, useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeInfo</span> <span class="keyword">from</span> <span class="string">&#x27;../components/HomeInfo&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Loader</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Loader&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Island</span> <span class="keyword">from</span> <span class="string">&#x27;../models/Island&#x27;</span></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  ......</span><br><span class="line">  <span class="keyword">const</span> [isRotating, setIsRotating] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [currentStage, setCurrentStage] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">adjustIslandForScreenSize</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> screenScale = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> screenPosition = [<span class="number">0</span>, -<span class="number">6.5</span>, -<span class="number">43</span>];</span><br><span class="line">    <span class="keyword">let</span> rotation = [<span class="number">0.1</span>, <span class="number">4.7</span>, <span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span> &lt; <span class="number">768</span>) &#123;</span><br><span class="line">      screenScale = [<span class="number">0.9</span>, <span class="number">0.9</span>, <span class="number">0.9</span>];</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      screenScale = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [screenScale, screenPosition, rotation];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [islandScale, islandPosition, islandRotation] = <span class="title function_">adjustIslandForScreenSize</span>();</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&#x27;w-full h-screen relative&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;absolute top-28 left-0 right-0 z-10 flex items-center justify-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;currentStage &amp;&amp; <span class="tag">&lt;<span class="name">HomeInfo</span> <span class="attr">currentStage</span>=<span class="string">&#123;currentStage&#125;</span> /&gt;</span>&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Canvas</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">w-full</span> <span class="attr">h-screen</span> <span class="attr">bg-transparent</span> $&#123;<span class="attr">isRotating</span> ? &#x27;<span class="attr">cursor-grabbing</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">cursor-grab</span>&#x27;&#125; `&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">camera</span>=<span class="string">&#123;&#123;</span> <span class="attr">near:</span> <span class="attr">0.1</span>, <span class="attr">far:</span> <span class="attr">1000</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* Suspense ç”¨äºè§£å†³åŠ è½½ç»„ä»¶æ—¶çš„ç™½å±ï¼Œå¯ä»¥æ˜¾ç¤ºå…¶ä»–çš„å†…å®¹ï¼Œè€Œå…¶ä»–å†…å®¹ä¸å…è®¸ä½¿ç”¨ lazyåŠ è½½ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">Loader</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">directionalLight</span> <span class="attr">position</span>=<span class="string">&#123;[1,</span> <span class="attr">1</span>, <span class="attr">1</span>]&#125; <span class="attr">intensity</span>=<span class="string">&#123;2&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          ......</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Island</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">position</span>=<span class="string">&#123;islandPosition&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">scale</span>=<span class="string">&#123;islandScale&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">rotation</span>=<span class="string">&#123;islandRotation&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">isRotating</span>=<span class="string">&#123;isRotating&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setIsRotating</span>=<span class="string">&#123;setIsRotating&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setCurrentStage</span>=<span class="string">&#123;setCurrentStage&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Canvas</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ......</span></span><br><span class="line"><span class="language-xml">    &lt;/section &gt;</span></span><br><span class="line"><span class="language-xml">  )</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">export default Home</span></span><br></pre></td></tr></table></figure><h1 id="æ¶‰åŠçŸ¥è¯†ç‚¹"><a href="#æ¶‰åŠçŸ¥è¯†ç‚¹" class="headerlink" title="æ¶‰åŠçŸ¥è¯†ç‚¹"></a>æ¶‰åŠçŸ¥è¯†ç‚¹</h1><h2 id="Three"><a href="#Three" class="headerlink" title="Three"></a>Three</h2><h3 id="a-in-â€˜-react-spring-x2F-threeâ€™"><a href="#a-in-â€˜-react-spring-x2F-threeâ€™" class="headerlink" title="a in â€˜@react-spring&#x2F;threeâ€™"></a>a in â€˜@react-spring&#x2F;threeâ€™</h3><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; a &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/three&#x27;</span>;</span><br><span class="line">......</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">a.group</span> <span class="attr">ref</span>=<span class="string">&#123;islandRef&#125;</span> &#123;<span class="attr">...props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mesh</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">geometry</span>=<span class="string">&#123;nodes.polySurface944_tree_body_0.geometry&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">material</span>=<span class="string">&#123;materials.PaletteMaterial001&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      ......</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">a.group</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>a</code>å¾ˆå¯èƒ½æ˜¯ <code>@react-spring/three</code>åº“çš„å‘½åå¯¼å…¥ï¼Œç”¨äºè®¿é—® <code>react-spring</code>æä¾›çš„ç”¨äºThree.jså¯¹è±¡çš„åŠ¨ç”»åŒ–åŒ…è£…å™¨ã€‚<code>react-spring</code>æ˜¯ä¸€ä¸ªæµè¡Œçš„Reactåº“ï¼Œç”¨äºåˆ›å»ºæµç•…å’Œè‡ªç„¶çš„åŠ¨ç”»æ•ˆæœã€‚<code>@react-spring/three</code>æ˜¯ä¸“é—¨ä¸ºThree.jsé›†æˆæä¾›çš„ï¼Œä½¿å¾—åœ¨Three.jsç¯å¢ƒä¸­ä½¿ç”¨ <code>react-spring</code>å˜å¾—ç®€å•ã€‚</p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼š</p><ul><li>**<code>a.group</code>**ï¼šè¿™æ˜¯ <code>@react-spring/three</code>æä¾›çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ˜¯å¯¹Three.jsä¸­ <code>THREE.Group</code>çš„åŠ¨ç”»åŒ–åŒ…è£…ã€‚åœ¨Three.jsä¸­ï¼Œ<code>Group</code>å¯¹è±¡ç”¨äºåˆ›å»ºå¯¹è±¡çš„é›†åˆï¼Œè¿™æ ·ä½ å¯ä»¥ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥å¹³ç§»ã€æ—‹è½¬å’Œç¼©æ”¾å®ƒä»¬ã€‚åœ¨ <code>react-spring/three</code>ä¸­ï¼Œ<code>a.group</code>å…è®¸ä½ å¯¹è¿™ä¸ªç»„åº”ç”¨åŠ¨ç”»ï¼Œæ¯”å¦‚å¹³ç§»ã€æ—‹è½¬æˆ–é€æ˜åº¦å˜åŒ–ç­‰ã€‚</li><li>**<code>&lt;mesh /&gt;</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªThree.jsä¸­ç”¨äºè¡¨ç¤ºå…·æœ‰å‡ ä½•å½¢çŠ¶å’Œæè´¨çš„ç‰©ä½“çš„ç»„ä»¶ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>mesh</code>ç»„ä»¶ä½¿ç”¨äº† <code>geometry</code>ï¼ˆå‡ ä½•ä½“ï¼‰å’Œ <code>material</code>ï¼ˆæè´¨ï¼‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æŒ‡å®šäº†ç‰©ä½“çš„å½¢çŠ¶å’Œè¡¨é¢å¤„ç†ã€‚è¿™ä¸æ˜¯ <code>react-spring</code>ç‰¹æœ‰çš„ï¼Œè€Œæ˜¯Three.jsä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œä½†åœ¨è¿™é‡Œå®ƒè¢«æ”¾ç½®åœ¨ <code>a.group</code>å†…éƒ¨ï¼Œè¡¨æ˜ä½ å¯ä»¥å¯¹æ•´ä¸ªç»„å’Œç»„å†…çš„å•ä¸ªç‰©ä½“è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚</li></ul><p><code>a</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‰ç¼€ï¼Œç”¨äºè®¿é—® <code>react-spring/three</code>æä¾›çš„åŠ¨ç”»åŒ–ç»„ä»¶ã€‚ä½¿ç”¨ <code>react-spring/three</code>ï¼Œä½ å¯ä»¥ç»™Three.jsçš„å¯¹è±¡æ·»åŠ æµç•…çš„ç‰©ç†åŸºç¡€åŠ¨ç”»ï¼Œæ¯”å¦‚å¼¹ç°§åŠ¨ç”»ã€‚<code>react-spring</code>çš„åŠ¨ç”»ä¸ä»…é™äºç®€å•çš„è¿‡æ¸¡ï¼Œå®ƒæ”¯æŒä»åˆå§‹çŠ¶æ€åˆ°ç»“æŸçŠ¶æ€çš„è‡ªç„¶åŠ¨ç”»ï¼ŒåŒ…æ‹¬åå¼¹ã€åœæ­¢ç­‰è‡ªç„¶è¿åŠ¨çš„æ•ˆæœã€‚</p><p><code>&lt;a.group&gt;</code>ç»„ä»¶ç»§æ‰¿è‡ªThree.jsçš„ <code>Group</code>ç±»ï¼Œå°†Three.jså¯¹è±¡ï¼ˆå¦‚ <code>Group</code>ã€<code>Mesh</code>ç­‰ï¼‰ç”¨ <code>a.</code>å‰ç¼€åŒ…è£…ï¼Œå¹¶é€šè¿‡ <code>@react-spring/three</code>è·å¾—äº†åŠ¨ç”»èƒ½åŠ›ã€‚åœ¨Three.jsä¸­ï¼Œ<code>Group</code>æ˜¯ä¸€ä¸ªç”¨äºåŒ…å«å’Œç®¡ç†å¤šä¸ªå…¶ä»–å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œå‡ ä½•ä½“ã€ç½‘æ ¼ç­‰ï¼‰çš„å®¹å™¨ã€‚å®ƒæœ¬èº«æ˜¯ <code>Object3D</code>çš„ä¸€ä¸ªå­ç±»ï¼Œè¿™æ„å‘³ç€å®ƒç»§æ‰¿äº† <code>Object3D</code>çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ <code>position</code>ã€<code>scale</code>å’Œ <code>rotation</code>ã€‚</p><h3 id="useThree-â€œ-react-three-x2F-fiberâ€"><a href="#useThree-â€œ-react-three-x2F-fiberâ€" class="headerlink" title="useThree â€œ@react-three&#x2F;fiberâ€"></a>useThree â€œ@react-three&#x2F;fiberâ€</h3><p>åœ¨ <code>@react-three/fiber</code> ä¸­ï¼Œ<code>useThree</code> æ˜¯ä¸€ä¸ª React Hookï¼Œå®ƒæä¾›äº†è®¿é—® Three.js æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­çš„å„ç§å±æ€§å’Œæ–¹æ³•çš„èƒ½åŠ›ã€‚</p><p>å½“ä½ åœ¨ç»„ä»¶ä¸­è°ƒç”¨ <code>useThree()</code> æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†å½“å‰ Three.js æ¸²æŸ“ä¸Šä¸‹æ–‡çš„å¤šä¸ªå±æ€§å’Œå®ä¾‹ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­ç›´æ¥è®¿é—®å’Œä½¿ç”¨è¿™äº›å±æ€§å’Œå®ä¾‹ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç®¡ç†å®ƒä»¬ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; gl, viewport &#125; = <span class="title function_">useThree</span>();</span><br></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ä» <code>useThree()</code> è¿”å›çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è§£æ„å‡º <code>gl</code> å’Œ <code>viewport</code> ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li>**<code>gl</code>**ï¼šè¿™æ˜¯å¯¹ WebGLRenderer çš„å¼•ç”¨ï¼Œå³ Three.js ä½¿ç”¨çš„ WebGL æ¸²æŸ“å™¨å®ä¾‹ã€‚é€šè¿‡è¿™ä¸ªå®ä¾‹ï¼Œä½ å¯ä»¥æ§åˆ¶æ¸²æŸ“è¿‡ç¨‹ï¼Œæ¯”å¦‚è°ƒæ•´æ¸…é™¤é¢œè‰²ã€æ‰§è¡Œåå¤„ç†ç­‰ã€‚</li><li>**<code>viewport</code>**ï¼šè¿™åŒ…å«äº†å…³äºå½“å‰è§†å£çš„ä¿¡æ¯ï¼Œå¦‚è§†å£çš„å®½åº¦å’Œé«˜åº¦ï¼Œä»¥åŠä¸€äº›ç”¨äºå°†å±å¹•åæ ‡è½¬æ¢ä¸ºThree.jsä¸–ç•Œåæ ‡çš„å·¥å…·å‡½æ•°ã€‚è¿™å¯¹äºå“åº”å¼è®¾è®¡å’ŒåŠ¨æ€å¸ƒå±€éå¸¸æœ‰ç”¨ã€‚</li></ul><p>åœ¨Three.jsä¸­ï¼Œ<code>WebGLRenderer</code>æ˜¯ç”¨æ¥æ¸²æŸ“åœºæ™¯ï¼ˆ<code>THREE.Scene</code>ï¼‰åˆ°ä¸€ä¸ªWebé¡µé¢ä¸Šçš„canvaså…ƒç´ ä¸­ã€‚å®ƒä½¿ç”¨WebGL APIæ¥ç»˜åˆ¶å®šä¹‰å¥½çš„3Då¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>(&#123; <span class="attr">antialias</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br></pre></td></tr></table></figure><p><code>WebGLRenderer</code>ç”Ÿæˆçš„canvaså…ƒç´ éœ€è¦è¢«æ·»åŠ åˆ°HTMLæ–‡æ¡£ä¸­ï¼Œè¿™æ ·æ¸²æŸ“çš„ç»“æœæ‰èƒ½æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br><span class="line">......</span><br><span class="line">renderer.<span class="title function_">render</span>(scene, camera);</span><br></pre></td></tr></table></figure><h3 id="useFrame"><a href="#useFrame" class="headerlink" title="useFrame()"></a>useFrame()</h3><p><code>useFrame</code> æ˜¯ä¸€ä¸ªæ¥è‡ª <code>@react-three/fiber</code> çš„ React Hookï¼Œå®ƒå…è®¸ä½ åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­æ’å…¥å’Œä½¿ç”¨æ¸²æŸ“å¾ªç¯ã€‚åœ¨ 3D åº”ç”¨å’Œæ¸¸æˆå¼€å‘ä¸­ï¼Œæ¸²æŸ“å¾ªç¯ï¼ˆä¹Ÿç§°ä¸ºåŠ¨ç”»å¾ªç¯ï¼‰æ˜¯æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œè´Ÿè´£åœ¨æ¯ä¸€å¸§æ›´æ–°åœºæ™¯ã€ç›¸æœºã€ç‰©ä½“çŠ¶æ€ç­‰ï¼Œä»¥åŠæ‰§è¡Œæ¸²æŸ“æ“ä½œã€‚</p><p><code>useFrame</code> æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨çš„åŠ¨ç”»å¸§å¾ªç¯ä¸­è¢«ä¸æ–­è°ƒç”¨ã€‚é€šå¸¸ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯æ¸²æŸ“å™¨çš„ <code>state</code>ï¼Œå¦ä¸€ä¸ªæ˜¯æ¸²æŸ“çš„ <code>delta</code> æ—¶é—´ï¼ˆå³ä»ä¸Šä¸€å¸§åˆ°å½“å‰å¸§çš„æ—¶é—´å·®ï¼Œå•ä½ä¸ºç§’ï¼‰ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useFrame</span>(<span class="function">(<span class="params">state, delta</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œç¼–å†™æ¯å¸§è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å‡è®¾ä½ æƒ³åœ¨ä¸€ä¸ªä¸‰ç»´åœºæ™¯ä¸­æ—‹è½¬ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>useFrame</code> æ¥æ›´æ–°ç«‹æ–¹ä½“çš„æ—‹è½¬çŠ¶æ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useFrame &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-three/fiber&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Mesh</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">RotatingBox</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = useRef&lt;<span class="title class_">Mesh</span>&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useFrame</span>(<span class="function">(<span class="params">state, delta</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ref.<span class="property">current</span>) &#123;</span><br><span class="line">      ref.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">x</span> += delta;</span><br><span class="line">      ref.<span class="property">current</span>.<span class="property">rotation</span>.<span class="property">y</span> += delta;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">mesh</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">boxGeometry</span> <span class="attr">args</span>=<span class="string">&#123;[1,</span> <span class="attr">1</span>, <span class="attr">1</span>]&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">meshStandardMaterial</span> <span class="attr">color</span>=<span class="string">&quot;orange&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">mesh</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸€å¸§éƒ½ä¼šå¢åŠ ç«‹æ–¹ä½“çš„ <code>x</code> å’Œ <code>y</code> è½´æ—‹è½¬ï¼Œ<code>delta</code> å‚æ•°ç¡®ä¿äº†æ—‹è½¬é€Ÿåº¦ä¸å¸§ç‡æ— å…³ï¼Œæä¾›äº†å¹³æ»‘ä¸€è‡´çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>æ³¨æ„äº‹é¡¹</p><ul><li>ä½¿ç”¨ <code>useFrame</code> æ—¶è¦è€ƒè™‘æ€§èƒ½ã€‚å› ä¸ºå›è°ƒå‡½æ•°ä¼šåœ¨æ¯ä¸€å¸§è¢«è°ƒç”¨ï¼Œé¿å…åœ¨å…¶ä¸­æ‰§è¡Œå¤æ‚çš„è®¡ç®—æˆ–çŠ¶æ€æ›´æ–°ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</li><li><code>useFrame</code> æ˜¯ <code>@react-three/fiber</code> ç‰¹æœ‰çš„ï¼Œä¸æ˜¯ React å®˜æ–¹ API çš„ä¸€éƒ¨åˆ†ã€‚å®ƒä¸“é—¨ç”¨äºåœ¨ <code>@react-three/fiber</code> æä¾›çš„ <code>&lt;Canvas&gt;</code> ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè¿™ä¸ªç»„ä»¶ç”¨äºæ¸²æŸ“ Three.js çš„ 3D åœºæ™¯ã€‚</li></ul><h3 id="äº¤äº’äº‹ä»¶pointerdown"><a href="#äº¤äº’äº‹ä»¶pointerdown" class="headerlink" title="äº¤äº’äº‹ä»¶pointerdown"></a>äº¤äº’äº‹ä»¶pointerdown</h3><p>åœ¨Three.jsä¸­ï¼Œè™½ç„¶åº“æœ¬èº«ä¸»è¦èšç„¦äº3Dåœºæ™¯çš„æ¸²æŸ“ï¼Œä½†å®ƒé€šå¸¸ç”¨äºWebç¯å¢ƒï¼Œå› æ­¤ç»å¸¸ä¸HTMLå…ƒç´ ï¼ˆå¦‚ <code>canvas</code>ï¼‰ä»¥åŠWebäº‹ä»¶æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚<code>pointerdown</code>ã€<code>pointerup</code>å’Œ <code>pointermove</code>æ˜¯æŒ‡é’ˆäº‹ä»¶ï¼Œæ˜¯Webæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå¤„ç†å„ç§æŒ‡é’ˆè®¾å¤‡ï¼ˆå¦‚é¼ æ ‡ã€è§¦æ‘¸å±å’Œç¬”è®¾å¤‡ï¼‰çš„è¾“å…¥ã€‚è¿™äº›äº‹ä»¶å¯ä»¥è¢«ç”¨æ¥å¢å¼ºThree.jsåœºæ™¯çš„äº¤äº’æ€§ã€‚ä¸‹é¢æ˜¯æ¯ä¸ªäº‹ä»¶çš„åŸºæœ¬è¯´æ˜ï¼š</p><p>pointerdown</p><ul><li><strong>æ“ä½œ</strong>ï¼šå½“ç”¨æˆ·æŒ‰ä¸‹ä»»ä½•æŒ‡é’ˆè®¾å¤‡ï¼ˆä¾‹å¦‚ï¼Œé¼ æ ‡æŒ‰é”®ã€è§¦æ‘¸å±çš„è§¦æ‘¸ï¼‰æ—¶è§¦å‘ã€‚</li><li><strong>ç”¨é€”</strong>ï¼šåœ¨Three.jsåº”ç”¨ä¸­ï¼Œ<code>pointerdown</code>å¯ä»¥ç”¨æ¥æ£€æµ‹ç”¨æˆ·å¼€å§‹ä¸åœºæ™¯ä¸­çš„å¯¹è±¡è¿›è¡Œäº¤äº’çš„æ—¶åˆ»ï¼Œæ¯”å¦‚å¼€å§‹æ‹–åŠ¨ç‰©ä½“ã€é€‰ä¸­ä¸€ä¸ªç‰©ä½“ç­‰ã€‚</li></ul><p>pointerup</p><ul><li><strong>æ“ä½œ</strong>ï¼šå½“ç”¨æˆ·é‡Šæ”¾ä¹‹å‰æŒ‰ä¸‹çš„æŒ‡é’ˆè®¾å¤‡æ—¶è§¦å‘ã€‚</li><li><strong>ç”¨é€”</strong>ï¼šåœ¨Three.jsåº”ç”¨ä¸­ï¼Œ<code>pointerup</code>äº‹ä»¶å¯ä»¥ç”¨æ¥æ£€æµ‹ç”¨æˆ·ç»“æŸäº¤äº’çš„æ—¶åˆ»ï¼Œä¾‹å¦‚æ”¾å¼€æ‹–åŠ¨çš„ç‰©ä½“ã€ç¡®è®¤é€‰ä¸­çš„ç‰©ä½“ç­‰ã€‚</li></ul><p>pointermove</p><ul><li><strong>æ“ä½œ</strong>ï¼šå½“æŒ‡é’ˆè®¾å¤‡åœ¨å±å¹•ä¸Šç§»åŠ¨æ—¶è§¦å‘ï¼Œä¸è®ºæ˜¯å¦æŒ‰ä¸‹ã€‚</li><li><strong>ç”¨é€”</strong>ï¼š<code>pointermove</code>åœ¨Three.jsä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç”¨æ¥å®ç°å¯¹è±¡çš„æ‹–æ‹½æ•ˆæœã€åœ¨åœºæ™¯ä¸­å¯¼èˆªï¼ˆå¦‚æ—‹è½¬è§†è§’ã€ç¼©æ”¾åœºæ™¯ï¼‰æˆ–å®æ—¶è¿½è¸ªé¼ æ ‡&#x2F;è§¦æ‘¸çš„ä½ç½®ä»¥åˆ›å»ºåŠ¨æ€æ•ˆæœã€‚</li></ul><p>ä¸ºäº†åœ¨Three.jsçš„ <code>canvas</code>å…ƒç´ ä¸Šç›‘å¬è¿™äº›äº‹ä»¶ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ <code>canvas</code>å…ƒç´ ä¸Šæ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> canvas = renderer.<span class="property">domElement</span>; <span class="comment">// å‡è®¾ä½ å·²ç»æœ‰ä¸€ä¸ªThree.jsæ¸²æŸ“å™¨</span></span><br><span class="line"></span><br><span class="line">canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pointerdown&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Pointer down&#x27;</span>, event);</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œæ·»åŠ å½“æŒ‡é’ˆæŒ‰ä¸‹æ—¶çš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Pointer Type: <span class="subst">$&#123;event.pointerType&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Pointer Position: (<span class="subst">$&#123;event.clientX&#125;</span>, <span class="subst">$&#123;event.clientY&#125;</span>)`</span>);</span><br><span class="line">    <span class="comment">// é˜»æ­¢é»˜è®¤è¡Œä¸ºå’Œäº‹ä»¶å†’æ³¡</span></span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line">    event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>event</code>å¯¹è±¡çš„ä½œç”¨</p><ul><li><strong>äº‹ä»¶ç±»å‹è¯†åˆ«</strong>ï¼š<code>event.type</code>å±æ€§å¯ä»¥å‘Šè¯‰ä½ äº‹ä»¶çš„å…·ä½“ç±»å‹ï¼ˆå¦‚ <code>&quot;pointerdown&quot;</code>ï¼‰ï¼Œæœ‰åŠ©äºåœ¨ä½¿ç”¨åŒä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°å¤„ç†å¤šç§äº‹ä»¶ç±»å‹æ—¶è¿›è¡ŒåŒºåˆ†ã€‚</li><li><strong>è·å–æŒ‡é’ˆä½ç½®</strong>ï¼š<code>event.clientX</code>å’Œ <code>event.clientY</code>å±æ€§æä¾›äº†æŒ‡é’ˆåœ¨è§†å£ä¸­çš„åæ ‡ä½ç½®ï¼Œè€Œ <code>event.pageX</code>å’Œ <code>event.pageY</code>åˆ™æä¾›äº†æŒ‡é’ˆåœ¨æ•´ä¸ªé¡µé¢ä¸­çš„ä½ç½®ã€‚è¿™å¯¹äºå®ç°æ‹–æ‹½åŠŸèƒ½æˆ–åœ¨ç”»å¸ƒä¸Šç»˜å›¾ç­‰åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚</li><li><strong>åŒºåˆ†æŒ‡é’ˆè®¾å¤‡</strong>ï¼š<code>event.pointerType</code>å±æ€§å¯ä»¥å‘Šè¯‰ä½ è§¦å‘äº‹ä»¶çš„æŒ‡é’ˆè®¾å¤‡ç±»å‹ï¼ˆå¦‚ <code>&quot;mouse&quot;</code>ã€<code>&quot;pen&quot;</code>æˆ– <code>&quot;touch&quot;</code>ï¼‰ï¼Œè¿™æœ‰åŠ©äºå®ç°é’ˆå¯¹ä¸åŒè®¾å¤‡çš„ç‰¹å®šäº¤äº’å“åº”ã€‚</li><li><strong>é˜»æ­¢é»˜è®¤è¡Œä¸º</strong>ï¼š<code>event.preventDefault()</code>æ–¹æ³•å¯ä»¥ç”¨æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä¾‹å¦‚é˜»æ­¢ç‚¹å‡»é“¾æ¥å¯¼èˆªåˆ°æ–°é¡µé¢çš„é»˜è®¤è¡Œä¸ºã€‚</li><li><strong>åœæ­¢äº‹ä»¶å†’æ³¡</strong>ï¼š<code>event.stopPropagation()</code>æ–¹æ³•å¯ä»¥é˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥ä¼ æ’­åˆ°å…¶ä»–äº‹ä»¶ç›‘å¬å™¨ã€‚</li></ul><p>æ³¨æ„äº‹é¡¹</p><ul><li>ä½¿ç”¨æŒ‡é’ˆäº‹ä»¶å¯ä»¥è®©ä½ çš„åº”ç”¨æ›´å¥½åœ°é€‚åº”ä¸åŒçš„è¾“å…¥è®¾å¤‡ï¼Œè€Œä¸ä»…ä»…æ˜¯é¼ æ ‡ã€‚</li><li>ç¡®ä¿åˆç†ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨ï¼Œé¿å…åœ¨é«˜é¢‘äº‹ä»¶ï¼ˆå¦‚ <code>pointermove</code>ï¼‰ä¸­æ‰§è¡Œè®¡ç®—é‡å¤§çš„æ“ä½œï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚</li><li>åœ¨å¤„ç†è¿™äº›äº‹ä»¶æ—¶ï¼Œè€ƒè™‘äº‹ä»¶å¯¹è±¡ï¼ˆ<code>event</code>ï¼‰æä¾›çš„ä¿¡æ¯ï¼Œå¦‚æŒ‡é’ˆä½ç½®ã€æŒ‰ä¸‹çš„æŒ‰é’®ç­‰ï¼Œè¿™äº›ä¿¡æ¯å¯¹äºå®ç°ç²¾ç¡®çš„äº¤äº’é€»è¾‘éå¸¸æœ‰ç”¨ã€‚</li></ul><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><p><code>useState</code> æ˜¯Reactçš„ä¸€ä¸ªHookï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ã€‚åœ¨React 16.8ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶è¢«ç§°ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œæ„å‘³ç€ä½ ä¸èƒ½åœ¨å…¶ä¸­ä½¿ç”¨çŠ¶æ€ï¼ˆstateï¼‰æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚<code>useState</code>çš„å¼•å…¥æ”¹å˜äº†è¿™ä¸€ç‚¹ï¼Œè®©å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½å¤Ÿæ‹¥æœ‰å’Œç±»ç»„ä»¶ä¸€æ ·çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚</p><p><code>useState</code>çš„åŸºæœ¬ç”¨æ³•éå¸¸ç®€å•ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯çŠ¶æ€çš„åˆå§‹å€¼ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼šå½“å‰çš„çŠ¶æ€å€¼å’Œä¸€ä¸ªæ›´æ–°è¿™ä¸ªçŠ¶æ€å€¼çš„å‡½æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React, &#123; useState &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function Example() &#123;</span><br><span class="line"> Â // å£°æ˜ä¸€ä¸ªæ–°çš„çŠ¶æ€å˜é‡ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¹‹ä¸º &quot;count&quot;</span><br><span class="line"> Â const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line"> Â return (</span><br><span class="line"> Â  Â &lt;div&gt;</span><br><span class="line"> Â  Â  Â &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line"> Â  Â  Â &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span><br><span class="line"> Â  Â  Â   Click me</span><br><span class="line"> Â  Â  Â &lt;/button&gt;</span><br><span class="line"> Â  Â &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ</strong><code>useState(0)</code>å£°æ˜äº†ä¸€ä¸ªæ–°çš„çŠ¶æ€å˜é‡ <code>count</code>ï¼Œå¹¶å°†å…¶åˆå§‹å€¼è®¾ä¸º0ã€‚<code>setCount</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ›´æ–° <code>count</code>çš„å€¼ã€‚å½“ä½ ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ <code>setCount(count + 1)</code>æ¥å¢åŠ  <code>count</code>çš„å€¼ã€‚</p><p><strong>ä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¤šæ¬¡è°ƒç”¨</strong> <code>useState</code>ï¼Œä»¥å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React, &#123; useState &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function ExampleWithManyStates() &#123;</span><br><span class="line"> Â // å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡</span><br><span class="line"> Â const [age, setAge] = useState(42);</span><br><span class="line"> Â const [fruit, setFruit] = useState(&#x27;banana&#x27;);</span><br><span class="line"> Â const [todos, setTodos] = useState([&#123; text: &#x27;å­¦ä¹  Hook&#x27; &#125;]);</span><br><span class="line"></span><br><span class="line"> Â // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å‡½æ•°å¼æ›´æ–°ï¼šå¦‚æœæ–°çš„çŠ¶æ€ä¾èµ–äºå‰ä¸€ä¸ªçŠ¶æ€ï¼Œä½ å¯ä»¥ç»™æ›´æ–°å‡½æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†æ¥æ”¶å‰ä¸€ä¸ªçŠ¶æ€ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çŠ¶æ€ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function Counter() &#123;</span><br><span class="line"> Â const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line"> Â return (</span><br><span class="line"> Â  Â &lt;div&gt;</span><br><span class="line"> Â  Â  Â &lt;p&gt;The count is &#123;count&#125;&lt;/p&gt;</span><br><span class="line"> Â  Â  Â &lt;button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount + 1)&#125;&gt;+1&lt;/button&gt;</span><br><span class="line"> Â  Â  Â &lt;button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount - 1)&#125;&gt;-1&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æƒ°æ€§åˆå§‹çŠ¶æ€"><a href="#æƒ°æ€§åˆå§‹çŠ¶æ€" class="headerlink" title="æƒ°æ€§åˆå§‹çŠ¶æ€"></a>æƒ°æ€§åˆå§‹çŠ¶æ€</h4><p><code>useState</code>å…è®¸ä½ ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ¥å»¶è¿Ÿè®¡ç®—åˆå§‹çŠ¶æ€ï¼Œè¿™å¯¹äºåˆå§‹çŠ¶æ€è®¡ç®—å¼€é”€è¾ƒå¤§çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const [state, setState] = useState(() =&gt; &#123;</span><br><span class="line"> Â const initialState = someExpensiveComputation(props);</span><br><span class="line"> Â return initialState;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ</strong><code>someExpensiveComputation</code>åªä¼šåœ¨ç»„ä»¶åˆæ¬¡æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼Œä»è€Œé¿å…äº†åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½é‡æ–°è®¡ç®—åˆå§‹çŠ¶æ€çš„å¼€é”€ã€‚</p><p><strong>é€šè¿‡</strong> <code>useState</code>ï¼ŒReactä¸ºå‡½æ•°ç»„ä»¶æä¾›äº†çŠ¶æ€ç®¡ç†çš„èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨ç±»ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œä»¥ä¸€ç§ç®€æ´ä¸”æ˜“äºç†è§£çš„æ–¹å¼æ„å»ºåŠ¨æ€ä¸”å“åº”å¼çš„ç”¨æˆ·ç•Œé¢ã€‚</p><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><p><code>useRef</code> æ˜¯Reactçš„ä¸€ä¸ªHookï¼Œå®ƒç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å¼•ç”¨å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚<code>useRef</code>æœ€å¸¸è§çš„ç”¨é€”æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯è®¿é—®DOMèŠ‚ç‚¹ï¼ŒäºŒæ˜¯å­˜å‚¨ä»»ä½•å¯å˜å€¼ã€‚</p><h4 id="è®¿é—®DOMèŠ‚ç‚¹"><a href="#è®¿é—®DOMèŠ‚ç‚¹" class="headerlink" title="è®¿é—®DOMèŠ‚ç‚¹"></a>è®¿é—®DOMèŠ‚ç‚¹</h4><p><strong>å½“ä½ éœ€è¦ç›´æ¥æ“ä½œDOMå…ƒç´ æ—¶ï¼Œæ¯”å¦‚è®¾ç½®ç„¦ç‚¹ã€æµ‹é‡å…ƒç´ å¤§å°æˆ–ä½ç½®ç­‰ï¼Œ</strong><code>useRef</code>å¯ä»¥ç”¨æ¥è·å–DOMèŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React, &#123; useRef, useEffect &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function TextInputWithFocusButton() &#123;</span><br><span class="line"> Â // åˆå§‹åŒ–ä¸€ä¸ªref</span><br><span class="line"> Â const inputEl = useRef(null);</span><br><span class="line"></span><br><span class="line"> Â const onButtonClick = () =&gt; &#123;</span><br><span class="line"> Â  Â // å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œä½¿ç”¨currentå±æ€§è®¿é—®DOMèŠ‚ç‚¹ï¼Œå¹¶è°ƒç”¨focusæ–¹æ³•</span><br><span class="line"> Â  Â inputEl.current.focus();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"> Â return (</span><br><span class="line"> Â  Â &lt;&gt;</span><br><span class="line"> Â  Â   &#123;/* ä½¿ç”¨refå±æ€§å°†inputEl refé™„åŠ åˆ°è¾“å…¥å…ƒç´ ä¸Š */&#125;</span><br><span class="line"> Â  Â  Â &lt;input ref=&#123;inputEl&#125; type=&quot;text&quot; /&gt;</span><br><span class="line"> Â  Â  Â &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å­˜å‚¨ä»»ä½•å¯å˜å€¼"><a href="#å­˜å‚¨ä»»ä½•å¯å˜å€¼" class="headerlink" title="å­˜å‚¨ä»»ä½•å¯å˜å€¼"></a>å­˜å‚¨ä»»ä½•å¯å˜å€¼</h4><p><code>useRef</code>ä¹Ÿå¯ä»¥ç”¨æ¥å­˜å‚¨ä»»ä½•å¯å˜å€¼ï¼Œ<strong>è¿™ä¸ªå€¼åœ¨ç»„ä»¶çš„é‡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜ã€‚è¿™å¯¹äºå­˜å‚¨ä»»æ„å€¼ï¼Œå¦‚è®¡æ—¶å™¨IDã€å¤–éƒ¨åº“çš„å®ä¾‹ç­‰ç‰¹åˆ«æœ‰ç”¨ï¼Œè€Œä¸”è¿™äº›å€¼çš„å˜åŒ–ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</strong>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React, &#123; useRef, useEffect &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function TimerComponent() &#123;</span><br><span class="line"> Â const intervalId = useRef(null);</span><br><span class="line"></span><br><span class="line"> Â useEffect(() =&gt; &#123;</span><br><span class="line"> Â  Â intervalId.current = setInterval(() =&gt; &#123;</span><br><span class="line"> Â  Â  Â console.log(&#x27;Timer tick&#x27;);</span><br><span class="line"> Â   &#125;, 1000);</span><br><span class="line"></span><br><span class="line"> Â  Â return () =&gt; &#123;</span><br><span class="line"> Â  Â  Â clearInterval(intervalId.current);</span><br><span class="line"> Â   &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line"> Â return &lt;div&gt;Check the console for timer ticks.&lt;/div&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ</strong><code>intervalId</code>ç”¨äºå­˜å‚¨è®¡æ—¶å™¨IDï¼Œä»¥ä¾¿å¯ä»¥åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤è®¡æ—¶å™¨ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ã€‚</p><h4 id="useRef-vs-useState"><a href="#useRef-vs-useState" class="headerlink" title="useRef vs. useState"></a><code>useRef</code> vs. <code>useState</code></h4><p><strong>è™½ç„¶</strong> <code>useState</code>ä¹Ÿå¯ä»¥ç”¨äºå­˜å‚¨æ•°æ®ï¼Œä½†ä¸ <code>useRef</code>ç›¸æ¯”ï¼Œå½“çŠ¶æ€æ›´æ–°æ—¶ï¼Œ<code>useState</code>ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œ <code>useRef</code>ä¸­çš„å˜åŒ–ä¸ä¼šã€‚å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åœ¨ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜çš„æ•°æ®ï¼Œä¸”è¿™äº›æ•°æ®çš„å˜åŒ–ä¸åº”è¯¥è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œ<code>useRef</code>æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><code>useRef</code>åœ¨Reactå‡½æ•°ç»„ä»¶ä¸­æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è®¿é—®DOMèŠ‚ç‚¹å’Œå­˜å‚¨å¯å˜æ•°æ®ã€‚é€šè¿‡ <code>useRef</code>ï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå¯¹æŸä¸ªå€¼çš„å¼•ç”¨ï¼Œè€Œä¸ä¼šå¼•èµ·é¢å¤–çš„æ¸²æŸ“ã€‚è¿™ä½¿å¾— <code>useRef</code>æˆä¸ºåœ¨éœ€è¦ç›´æ¥æ“ä½œDOMæˆ–éœ€è¦è·¨æ¸²æŸ“å‘¨æœŸä¿æŒæ•°æ®ä¸å˜æ—¶çš„ç†æƒ³é€‰æ‹©ã€‚</p><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><code>useEffect</code> æ˜¯ React çš„ä¸€ä¸ª Hookï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚å‰¯ä½œç”¨å¯ä»¥åŒ…æ‹¬æ•°æ®è·å–ã€è®¢é˜…æˆ–æ‰‹åŠ¨ä¿®æ”¹ DOM ç­‰æ“ä½œï¼Œè¿™äº›æ“ä½œé€šå¸¸åœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åæ‰§è¡Œã€‚<code>useEffect</code> çš„ç”¨æ³•æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„æ–¹å¼æ¥å¤„ç†è¿™äº›æ“ä½œã€‚<code>useEffect</code> æä¾›äº†ä¸€ç§åœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„çµæ´»æ–¹å¼ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°ç®¡ç†å‰¯ä½œç”¨å’Œèµ„æºã€‚</p><p><code>useEffect</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ä¾èµ–æ•°ç»„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â // åœ¨è¿™é‡Œæ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</span><br><span class="line">&#125;, [/* ä¾èµ–é¡¹åˆ—è¡¨ */]);</span><br></pre></td></tr></table></figure><h4 id="æ²¡æœ‰ä¾èµ–çš„-useEffect"><a href="#æ²¡æœ‰ä¾èµ–çš„-useEffect" class="headerlink" title="æ²¡æœ‰ä¾èµ–çš„ useEffect"></a>æ²¡æœ‰ä¾èµ–çš„ useEffect</h4><p>å¦‚æœ <code>b</code> çš„ä¾èµ–é¡¹åˆ—è¡¨ä¸ºç©ºï¼ˆ<code>[]</code>ï¼‰ï¼Œå‰¯ä½œç”¨å‡½æ•°åªä¼šåœ¨ç»„ä»¶æŒ‚è½½ï¼ˆmountï¼‰åæ‰§è¡Œä¸€æ¬¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â // åªä¼šåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œä¸€æ¬¡</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="å¸¦æœ‰ä¾èµ–çš„-useEffect"><a href="#å¸¦æœ‰ä¾èµ–çš„-useEffect" class="headerlink" title="å¸¦æœ‰ä¾èµ–çš„ useEffect"></a>å¸¦æœ‰ä¾èµ–çš„ useEffect</h4><p><strong>å½“ä½ åœ¨ä¾èµ–é¡¹åˆ—è¡¨ä¸­æŒ‡å®šå˜é‡æ—¶ï¼Œåªæœ‰å½“è¿™äº›å˜é‡æ”¹å˜æ—¶ï¼Œå‰¯ä½œç”¨å‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚è¿™æä¾›äº†ä¸€ç§æ–¹å¼æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„å‰¯ä½œç”¨æ“ä½œã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â // å½“ `count` å˜åŒ–æ—¶ï¼Œè¿™ä¸ªå‰¯ä½œç”¨å°±ä¼šæ‰§è¡Œ</span><br><span class="line"> Â document.title = `You clicked $&#123;count&#125; times`;</span><br><span class="line">&#125;, [count]); // ä¾èµ–é¡¹åˆ—è¡¨ä¸­åŒ…å« `count`</span><br></pre></td></tr></table></figure><h4 id="æ¸…ç†å‰¯ä½œç”¨"><a href="#æ¸…ç†å‰¯ä½œç”¨" class="headerlink" title="æ¸…ç†å‰¯ä½œç”¨"></a>æ¸…ç†å‰¯ä½œç”¨</h4><p><strong>æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ç»„ä»¶å¸è½½ï¼ˆunmountï¼‰æˆ–ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…æˆ–æ¸…é™¤å®šæ—¶å™¨ç­‰ã€‚ä¸ºæ­¤ï¼Œä½ çš„å‰¯ä½œç”¨å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â const id = setInterval(() =&gt; &#123;</span><br><span class="line"> Â  Â // æ‰§è¡Œä¸€äº›é‡å¤çš„æ“ä½œ</span><br><span class="line">  &#125;, 1000);</span><br><span class="line"></span><br><span class="line"> Â // è¿”å›çš„è¿™ä¸ªå‡½æ•°å°†åœ¨ç»„ä»¶å¸è½½æˆ–ä¾èµ–é¡¹æ”¹å˜ä¹‹å‰æ‰§è¡Œ</span><br><span class="line"> Â return () =&gt; clearInterval(id);</span><br><span class="line">&#125;, [/* ä¾èµ–é¡¹ */]);</span><br></pre></td></tr></table></figure><h4 id="æ²¡æœ‰ä¾èµ–é¡¹çš„-useEffect"><a href="#æ²¡æœ‰ä¾èµ–é¡¹çš„-useEffect" class="headerlink" title="æ²¡æœ‰ä¾èµ–é¡¹çš„ useEffect"></a>æ²¡æœ‰ä¾èµ–é¡¹çš„ useEffect</h4><p>**å¦‚æœ **<code>useEffect</code> è¢«è°ƒç”¨æ—¶æ²¡æœ‰æä¾›ä¾èµ–é¡¹åˆ—è¡¨ï¼Œå‰¯ä½œç”¨å‡½æ•°å°†åœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œã€‚è¿™é€šå¸¸ä¸æ¨èï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line"> Â // æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œ</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="â€¦props"><a href="#â€¦props" class="headerlink" title="â€¦props"></a>â€¦props</h3><p><strong>åœ¨JSXä¸­ï¼Œ</strong><code>...props</code>æ˜¯ä¸€ä¸ªä½¿ç”¨äº†JavaScriptçš„å±•å¼€è¿ç®—ç¬¦ï¼ˆSpread Operatorï¼‰çš„è¡¨è¾¾å¼ï¼Œå®ƒç”¨äºå°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°å½“å‰å¯¹è±¡ä¸­ã€‚åœ¨Reactç»„ä»¶ä¸­ï¼Œè¿™ç§è¯­æ³•ç»å¸¸ç”¨æ¥ä¼ é€’ <code>props</code>ï¼ˆå±æ€§ï¼‰ã€‚</p><p><strong>å½“ä½ åœ¨JSXæ ‡ç­¾ä¸­ä½¿ç”¨</strong> <code>...props</code>æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯å°†ä¸€ä¸ªåŒ…å«å¤šä¸ªå±æ€§çš„å¯¹è±¡â€œå±•å¼€â€ï¼Œå¹¶å°†è¿™äº›å±æ€§ä½œä¸ºå•ç‹¬çš„propsä¼ é€’ç»™ç»„ä»¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥ä¿æŒç»„ä»¶æ¥å£çš„çµæ´»æ€§ï¼ŒåŒæ—¶å‡å°‘äº†ä»£ç çš„å†—ä½™ã€‚</p><p><strong>å‡è®¾ä½ æœ‰ä¸€ä¸ªç»„ä»¶</strong> <code>&lt;MyComponent /&gt;</code>ï¼Œä½ æƒ³ä¼ é€’ç»™å®ƒå¤šä¸ªpropsï¼Œå¦‚ <code>title</code>å’Œ <code>onClick</code>ç­‰ï¼Œè€Œè¿™äº›propsæ˜¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡ <code>props</code>ç®¡ç†çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const props = &#123;</span><br><span class="line"> Â title: &#x27;Hello World&#x27;,</span><br><span class="line"> Â onClick: () =&gt; console.log(&#x27;Clicked&#x27;),</span><br><span class="line"> Â // æ›´å¤šprops...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>åœ¨ä¸ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦é€ä¸€ä¼ é€’æ¯ä¸ªå±æ€§ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;MyComponent title=&#123;props.title&#125; onClick=&#123;props.onClick&#125; /&gt;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;MyComponent &#123;...props&#125; /&gt;</span><br></pre></td></tr></table></figure><p><strong>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯å°†</strong> <code>props</code>å¯¹è±¡ä¸­çš„æ¯ä¸ªå±æ€§éƒ½ä½œä¸ºå•ç‹¬çš„propä¼ é€’ç»™ <code>MyComponent</code>ç»„ä»¶ã€‚è¿™ä¸ä»…ä½¿ä»£ç æ›´ç®€æ´ï¼Œè¿˜ä½¿å¾— <code>MyComponent</code>ç»„ä»¶èƒ½å¤Ÿæ¥æ”¶ä»»ä½•é€šè¿‡ <code>props</code>å¯¹è±¡ä¼ é€’çš„é¢å¤–å±æ€§ï¼Œè€Œæ— éœ€æ¯æ¬¡éƒ½æ˜¾å¼å£°æ˜å®ƒä»¬ã€‚</p><p><strong>è™½ç„¶ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å¯ä»¥æé«˜ä»£ç çš„çµæ´»æ€§å’Œå¯è¯»æ€§ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿéœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºï¼š</strong></p><ul><li><strong>æ€§èƒ½å½±å“</strong>ï¼šå¦‚æœå¯¹è±¡å¾ˆå¤§ï¼Œæˆ–è¿™ç§æ“ä½œåœ¨ä¸€ä¸ªå¤§å‹åº”ç”¨ä¸­é¢‘ç¹æ‰§è¡Œï¼Œå®ƒå¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚</li><li><strong>å±æ€§è¦†ç›–</strong>ï¼šå¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒçš„å±æ€§åï¼Œåé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚åœ¨ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦æ—¶ï¼Œéœ€è¦æ³¨æ„å±æ€§çš„é¡ºåºå’Œé‡å¤æ€§ã€‚</li><li><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šåœ¨TypeScriptç­‰é™æ€ç±»å‹æ£€æŸ¥çš„ç¯å¢ƒä¸­ï¼Œä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ä¼ é€’propsæ—¶ï¼Œå¯èƒ½éœ€è¦ç¡®ä¿ä¼ é€’çš„å¯¹è±¡å±æ€§ä¸ç»„ä»¶çš„propsç±»å‹å…¼å®¹ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è°ƒç”¨ä¸ºï¼š</span><br><span class="line">&lt;Island</span><br><span class="line">position=&#123;islandPosition&#125;</span><br><span class="line">scale=&#123;islandScale&#125;</span><br><span class="line">rotation=&#123;islandRotation&#125;</span><br><span class="line">isRotating=&#123;isRotating&#125;</span><br><span class="line">setIsRotating=&#123;setIsRotating&#125;</span><br><span class="line">setCurrentStage=&#123;setCurrentStage&#125;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line">å†…å®¹ä¸ºï¼š</span><br><span class="line">const Island = (&#123; isRotating, setIsRotating, setCurrentStage, ...props &#125;) =&gt; &#123; </span><br><span class="line"> Â  Â ......</span><br><span class="line"> Â  Â return (</span><br><span class="line"> Â  Â  Â  Â &lt;a.group ref=&#123;islandRef&#125; &#123;...props&#125;&gt;</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;mesh</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â geometry=&#123;nodes.polySurface944_tree_body_0.geometry&#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â material=&#123;materials.PaletteMaterial001&#125; </span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â /&gt;</span><br><span class="line"> Â  Â  Â  Â  Â   ......</span><br><span class="line"> Â   )&#125; </span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ</strong><code>&lt;Island /&gt;</code>ç»„ä»¶æ¥æ”¶äº†å¤šä¸ªå±æ€§ï¼ˆ<code>props</code>ï¼‰ï¼ŒåŒ…æ‹¬ <code>isRotating</code>ã€<code>setIsRotating</code>ã€<code>setCurrentStage</code>ä»¥åŠå…¶ä»–å¯èƒ½çš„å±æ€§ï¼ˆå¦‚ <code>position</code>ã€<code>scale</code>ã€<code>rotation</code>ç­‰, è¿™äº›å±æ€§å¯¹äºThree.jsä¸­çš„å¯¹è±¡æ¥è¯´æ˜¯å¸¸è§çš„å˜æ¢å±æ€§ï¼‰ã€‚åœ¨ <code>Island</code>ç»„ä»¶çš„å‡½æ•°ç­¾åä¸­ï¼Œ<code>...props</code>ä½¿ç”¨äº†JavaScriptçš„å±•å¼€è¿ç®—ç¬¦æ¥æ”¶é›†é™¤ <code>isRotating</code>ã€<code>setIsRotating</code>ã€<code>setCurrentStage</code>ä¹‹å¤–çš„æ‰€æœ‰ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§ã€‚</p><p><strong>åœ¨</strong> <code>Island</code>ç»„ä»¶å†…éƒ¨ï¼Œ<code>...props</code>çš„ä½œç”¨æ˜¯å°†è¿™äº›é¢å¤–çš„å±æ€§ä¼ é€’ç»™ <code>&lt;a.group&gt;</code>ç»„ä»¶ã€‚è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š</p><ol><li><strong>çµæ´»æ€§</strong>ï¼šå…è®¸ <code>Island</code>ç»„ä»¶æ¥æ”¶ä»»ä½•é¢å¤–çš„å±æ€§ï¼Œå¹¶å°†å®ƒä»¬ç›´æ¥ä¼ é€’ç»™å†…éƒ¨çš„ <code>&lt;a.group&gt;</code>ç»„ä»¶ï¼Œè€Œæ— éœ€ç»„ä»¶æ˜¾å¼åœ°å£°æ˜æˆ–å¤„ç†è¿™äº›å±æ€§ã€‚è¿™ä½¿å¾— <code>Island</code>ç»„ä»¶æ›´åŠ çµæ´»ï¼Œå¯ä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚</li><li><strong>ç®€æ´æ€§</strong>ï¼šé¿å…äº†éœ€è¦æ˜¾å¼åœ°ä¸ºæ¯ä¸ªå¯èƒ½çš„å±æ€§ç¼–å†™ä¼ é€’é€»è¾‘ï¼Œä»è€Œä½¿ç»„ä»¶ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</li><li><strong>ç»„ä»¶å°è£…</strong>ï¼šä¿æŒäº† <code>Island</code>ç»„ä»¶å¯¹äºå…¶å†…éƒ¨å®ç°çš„å°è£…æ€§ã€‚è°ƒç”¨è€…æ— éœ€å…³å¿ƒ <code>Island</code>å¦‚ä½•å¤„ç†æˆ–è½¬å‘è¿™äº›å±æ€§ï¼Œåªéœ€è¦çŸ¥é“å®ƒå¯ä»¥æ¥æ”¶å¹¶é€‚å½“åœ°ä½¿ç”¨è¿™äº›å±æ€§ã€‚</li></ol><p><code>&lt;a.group&gt;</code>ç»„ä»¶ç»§æ‰¿è‡ªThree.jsçš„ <code>Group</code>ç±»ï¼Œå°†Three.jså¯¹è±¡ï¼ˆå¦‚ <code>Group</code>ã€<code>Mesh</code>ç­‰ï¼‰ç”¨ <code>a.</code>å‰ç¼€åŒ…è£…ï¼Œå¹¶é€šè¿‡ <code>@react-spring/three</code>è·å¾—äº†åŠ¨ç”»èƒ½åŠ›ã€‚åœ¨Three.jsä¸­ï¼Œ<code>Group</code>æ˜¯ä¸€ä¸ªç”¨äºåŒ…å«å’Œç®¡ç†å¤šä¸ªå…¶ä»–å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œå‡ ä½•ä½“ã€ç½‘æ ¼ç­‰ï¼‰çš„å®¹å™¨ã€‚å®ƒæœ¬èº«æ˜¯ <code>Object3D</code>çš„ä¸€ä¸ªå­ç±»ï¼Œè¿™æ„å‘³ç€å®ƒç»§æ‰¿äº† <code>Object3D</code>çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ <code>position</code>ã€<code>scale</code>å’Œ <code>rotation</code>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/youxt-njnu/3d_portfolio_primary&quot;&gt;æ¨¡ä»¿é¡¹ç›®åœ°å€&lt;/a</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>three+react|ä¸ªäººä¸»é¡µå®æˆ˜â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/02/25/three%E5%AE%9E%E6%88%982/"/>
    <id>https://youxt-njnu.github.io/2024/02/25/three%E5%AE%9E%E6%88%982/</id>
    <published>2024-02-25T03:28:05.000Z</published>
    <updated>2024-06-13T02:14:37.761Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p><a href="https://github.com/youxt-njnu/3d_portfolio_primary">æ¨¡ä»¿é¡¹ç›®åœ°å€</a>ï¼Œ<a href="https://www.youtube.com/watch?v=FkowOdMjvYo">å‚è€ƒçš„è§†é¢‘æ•™ç¨‹å‡ºå¤„</a>ï¼Œ<a href="https://juejin.cn/post/6960262593265025031">reactå…¥é—¨</a></p><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/your-first-scene#adding-lights">react three fiber</a></p><p>ChatGPTè¾…åŠ©ç”Ÿæˆâ—è‡ªè¾¨â—â—â—</p><h1 id="ç›¸å…³åº“"><a href="#ç›¸å…³åº“" class="headerlink" title="ç›¸å…³åº“"></a>ç›¸å…³åº“</h1><h2 id="React-Three"><a href="#React-Three" class="headerlink" title="React Three"></a>React Three</h2><p><code>@react-three/fiber</code>è¡¨æ˜è¿™ä¸ªåŒ…æ˜¯React Threeï¼ˆä¸€ä¸ªä¸“æ³¨äºåœ¨Reactä¸­ä½¿ç”¨three.jsçš„é¡¹ç›®ï¼‰ä¸‹çš„ä¸€ä¸ªæ¨¡å—æˆ–å­é¡¹ç›®ã€‚è¿™æœ‰åŠ©äºå¼€å‘è€…å¿«é€Ÿè¯†åˆ«åŒ…çš„æ¥æºï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿äº†å¯¹é¡¹ç›®åŒ…çš„ç®¡ç†ã€‚</p><p>ä½œç”¨åŸŸåŒ…çš„ç»“æ„è®©å¼€å‘è€…æ›´å®¹æ˜“åœ°å‘ç°å’Œç»´æŠ¤ç›¸å…³çš„åŒ…ã€‚ä¾‹å¦‚ï¼ŒReact Threeé¡¹ç›®å¯èƒ½åŒ…å«å¤šä¸ªç›¸å…³åŒ…ï¼ˆå¦‚ <code>@react-three/fiber</code>ã€<code>@react-three/drei</code>ç­‰ï¼‰ï¼Œè¿™äº›éƒ½è¢«å½’ç±»åœ¨ <code>@react-three</code>è¿™ä¸ªä½œç”¨åŸŸä¸‹ã€‚è¿™ç§ç»„ç»‡æ–¹å¼ä½¿å¾—ç»´æŠ¤è€…å’Œä½¿ç”¨è€…èƒ½å¤Ÿè½»æ¾åœ°è¯†åˆ«å’Œæ›´æ–°è¿™äº›ç›¸äº’å…³è”çš„åŒ…ã€‚</p><h3 id="1-react-three-fiber"><a href="#1-react-three-fiber" class="headerlink" title="1. @react-three/fiber"></a>1. <code>@react-three/fiber</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šè¿™æ˜¯React Three Fiberé¡¹ç›®çš„æ ¸å¿ƒåº“ï¼Œæä¾›äº†å°†three.jsé›†æˆåˆ°Reactçš„åŸºç¡€æ¶æ„ã€‚å®ƒæ˜¯ä¸€ä¸ªReactæ¸²æŸ“å™¨ï¼Œå…è®¸ä½ ä»¥å£°æ˜å¼çš„æ–¹å¼åœ¨Reactåº”ç”¨ä¸­åˆ›å»ºå’Œæ§åˆ¶3Dåœºæ™¯ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä½œä¸ºåŸºç¡€åº“ï¼Œå®ƒä¸æä¾›é¢å¤–çš„three.jså¯¹è±¡æˆ–æŠ½è±¡ï¼Œè€Œæ˜¯ä¸“æ³¨äºæä¾›ä¸Reactå…¼å®¹çš„three.jsæ¸²æŸ“ç¯å¢ƒã€‚</li></ul><h3 id="2-react-three-drei"><a href="#2-react-three-drei" class="headerlink" title="2. @react-three/drei"></a>2. <code>@react-three/drei</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼š<code>drei</code>æ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œæä¾›äº†è®¸å¤šæœ‰ç”¨çš„è¾…åŠ©ç»„ä»¶å’Œé’©å­ï¼ˆhooksï¼‰ï¼Œä»¥ç®€åŒ–åœ¨React Three Fiberä¸­å¼€å‘3Dåœºæ™¯çš„è¿‡ç¨‹ã€‚è¿™äº›ç»„ä»¶åŒ…æ‹¬ç¯å¢ƒç¯å…‰ã€æ•ˆæœã€åŠ è½½å™¨ã€æŠ½è±¡çš„3Då¯¹è±¡ç­‰ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸ <code>@react-three/fiber</code>ç›¸æ¯”ï¼Œ<code>drei</code>æ›´å¤šåœ°æä¾›äº†æ„å»º3Dåœºæ™¯æ—¶çš„â€å¿«æ·æ–¹å¼â€ï¼Œå¸®åŠ©å¼€å‘è€…å‡å°‘æ ·æ¿ä»£ç å’ŒåŠ å¿«å¼€å‘æµç¨‹ã€‚</li></ul><h3 id="3-react-three-cannon"><a href="#3-react-three-cannon" class="headerlink" title="3. @react-three/cannon"></a>3. <code>@react-three/cannon</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªåŒ…æä¾›äº†ç‰©ç†å¼•æ“çš„é›†æˆï¼ŒåŸºäº <code>cannon.js</code>ç‰©ç†å¼•æ“ã€‚å®ƒå…è®¸å¼€å‘è€…åœ¨React Three Fiberåˆ›å»ºçš„3Dåœºæ™¯ä¸­æ·»åŠ ç‰©ç†æ•ˆæœï¼Œå¦‚ç¢°æ’æ£€æµ‹ã€é‡åŠ›å’Œå¼¹æ€§ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸“æ³¨äºä¸º3Då¯¹è±¡æ·»åŠ ç‰©ç†ç‰¹æ€§ï¼Œè€Œä¸æ˜¯3Dæ¸²æŸ“æˆ–ç»„ä»¶çš„ç›´æ¥åˆ›å»ºã€‚</li></ul><h3 id="4-react-three-postprocessing"><a href="#4-react-three-postprocessing" class="headerlink" title="4. @react-three/postprocessing"></a>4. <code>@react-three/postprocessing</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šè¯¥åŒ…æä¾›äº†å¯¹åå¤„ç†æ•ˆæœçš„æ”¯æŒï¼Œå…è®¸å¼€å‘è€…åœ¨React Three Fiberåœºæ™¯ä¸­æ·»åŠ å’Œé…ç½®åå¤„ç†æ•ˆæœï¼Œå¦‚æ¨¡ç³Šã€å…‰æ™•ã€è‰²å½©æ ¡æ­£ç­‰ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸“æ³¨äºæ¸²æŸ“æµç¨‹ä¸­çš„åæœŸå¤„ç†æ•ˆæœï¼Œæ”¹å–„æˆ–å¢åŠ åœºæ™¯çš„è§†è§‰æ•ˆæœã€‚</li></ul><h3 id="5-react-three-gui"><a href="#5-react-three-gui" class="headerlink" title="5. @react-three/gui"></a>5. <code>@react-three/gui</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šæä¾›äº†ä¸€ä¸ªç®€æ˜“çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ï¼Œç”¨äºåœ¨å¼€å‘è¿‡ç¨‹ä¸­è°ƒè¯•å’Œä¿®æ”¹three.jsåœºæ™¯çš„å‚æ•°ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸»è¦ç”¨äºå¼€å‘å’Œè°ƒè¯•é˜¶æ®µï¼Œé€šè¿‡å›¾å½¢ç•Œé¢å¿«é€Ÿè°ƒæ•´åœºæ™¯å‚æ•°ï¼Œè€Œä¸ç›´æ¥å½±å“3Då†…å®¹çš„æ¸²æŸ“æˆ–é€»è¾‘ã€‚</li></ul><h3 id="6-react-three-xr"><a href="#6-react-three-xr" class="headerlink" title="6. @react-three/xr"></a>6. <code>@react-three/xr</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šæ”¯æŒæ„å»ºè™šæ‹Ÿç°å®ï¼ˆVRï¼‰å’Œå¢å¼ºç°å®ï¼ˆARï¼‰ä½“éªŒã€‚å®ƒæä¾›äº†åˆ›å»ºå’Œç®¡ç†XRä¼šè¯çš„å·¥å…·ï¼Œå…è®¸å¼€å‘è€…åœ¨å…¼å®¹çš„è®¾å¤‡ä¸Šæä¾›æ²‰æµ¸å¼çš„3Dä½“éªŒã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸“é—¨é’ˆå¯¹XRåº”ç”¨çš„å¼€å‘ï¼Œæä¾›äº†ä¸VRå’ŒARæŠ€æœ¯é›†æˆçš„å·¥å…·å’Œç»„ä»¶</li></ul><h1 id="React-Three-Fiber"><a href="#React-Three-Fiber" class="headerlink" title="React Three Fiber"></a>React Three Fiber</h1><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/your-first-scene#adding-lights">å®˜ç½‘æ•™ç¨‹</a></p><h2 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a><a href="https://docs.pmnd.rs/react-three-fiber/api/canvas">Canvas</a></h2><p><strong>Scene+Camera+raycaster+(shadow)</strong></p><p>**Canvasé‡Œé¢çš„å†…å®¹ï¼Œå¯ä»¥ç”¨é©¼å³°æ³•å†™ï¼Œä¸éœ€è¦å¯¼å…¥ï¼Œç›´æ¥æ˜¯åŸç”Ÿçš„JSXç»„ä»¶ã€‚å¦‚ **<code>&lt;mesh&gt;&lt;/mesh&gt;</code>, <code>&lt;boxGeometry /&gt;</code>, <code>&lt;meshStandardMaterial /&gt;</code>ã€‚ä½†ä»v8ä»¥åï¼Œä¸ä¼šè‡ªåŠ¨åŒ–å¯¼å…¥è¿™äº›ï¼Œå¯ä»¥å¯¼å…¥react-three-fiberï¼Œç„¶åå¯ä»¥ç›´æ¥å†™è¿™äº›ï¼›æˆ–è€…æ˜¯é€šè¿‡import â€˜threeâ€™</p><p><strong>ThreeJSé‡Œçš„ç±»çš„æ„é€ å™¨çš„å‚æ•°ä¼ å…¥ï¼Œ</strong><code>&lt;boxGeometry args=&#123;[w,h,d]&#125;/&gt;</code></p><h2 id="ä¸threejsçš„è½¬æ¢"><a href="#ä¸threejsçš„è½¬æ¢" class="headerlink" title="ä¸threejsçš„è½¬æ¢"></a>ä¸threejsçš„è½¬æ¢</h2><p><a href="https://docs.pmnd.rs/react-three-fiber/api/objects">å¯¹è±¡ï¼Œå±æ€§å’Œæ„é€ å™¨å‚æ•°è®¾ç½®</a>ï¼ˆè¯´æ˜äº†ä»ThreeJSè¿‡æ¸¡åˆ°react-three-fiberçš„ä¸€äº›æ³¨æ„ç‚¹ï¼‰</p><p><strong>æœ‰setæ–¹æ³•çš„å¯¹è±¡</strong></p><blockquote><p><strong>å¯ä»¥ç›´æ¥ç”¨&#x3D;ï¼Œå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥æ”¾å…¥array</strong></p><p><code>color=&quot;hotpink&quot;</code> not <code>color=&#123;new THREE.Color(&#39;hotpink&#39;)&#125;</code></p><p><code>position=&#123;[100,0,0]&#125;</code> not set</p></blockquote><p><strong>æœ‰setScalarè¿™ç§ç±»ä¼¼çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç”¨å±æ€§scale</strong></p><blockquote><p><code>&lt;mesh scale=&#123;1&#125; /&gt;</code> or <code>&lt;mesh scale=&#123;[1,1,1]&#125; /&gt;</code></p></blockquote><p><strong>æœ‰ç±»ä¼¼mesh.rotation.xè¿™ç§ä¸²æ¥çš„æ–¹æ³•ï¼Œä½¿ç”¨-æ¥è¿æ¥</strong></p><blockquote><p><code>&lt;mesh rotation-x =&#123;1&#125; /&gt;</code></p></blockquote><h2 id="attach"><a href="#attach" class="headerlink" title="attach"></a>attach</h2><p>**åœ¨ **<code>react-three-fiber</code>ï¼ˆR3Fï¼‰ä¸­ï¼Œ<code>attach</code>å±æ€§æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œç”¨äºå°†Reactç»„ä»¶çš„æŸäº›å±æ€§æˆ–å¯¹è±¡â€œé™„åŠ â€åˆ°Three.jsçš„çˆ¶å¯¹è±¡ä¸Šã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†åœ¨R3Fçš„Reactå…ƒç´ æ ‘ä¸­ä¿æŒThree.jsåœºæ™¯å›¾çš„ç»“æ„å’Œå±æ€§åŒæ­¥ã€‚</p><p><code>attach</code>å±æ€§é€šå¸¸ç”¨äº <code>&lt;primitive&gt;</code>ç»„ä»¶æˆ–ä»»ä½•è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨ï¼Œæ¥æŒ‡å®šå¦‚ä½•å°†å½“å‰ç»„ä»¶çš„Three.jså¯¹è±¡ï¼ˆå¦‚æè´¨ã€å‡ ä½•ä½“ã€ç›¸æœºç­‰ï¼‰é™„åŠ åˆ°å…¶çˆ¶Three.jså¯¹è±¡ä¸Šã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†ä¸€ä¸ªæè´¨é™„åŠ åˆ°ä¸€ä¸ªç½‘æ ¼ä¸Šï¼Œæˆ–è€…å°†ä¸€ä¸ªç›¸æœºé™„åŠ åˆ°åœºæ™¯ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;mesh&gt;</span><br><span class="line"> Â &lt;boxGeometry attach=&quot;geometry&quot; args=&#123;[1, 1, 1]&#125; /&gt;</span><br><span class="line"> Â &lt;meshStandardMaterial attach=&quot;material&quot; color=&quot;orange&quot; /&gt;</span><br><span class="line">&lt;/mesh&gt;</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</strong></p><ul><li><code>&lt;boxGeometry&gt;</code>çš„ <code>geometry</code>å¯¹è±¡è¢«é™„åŠ åˆ°çˆ¶ <code>&lt;mesh&gt;</code>çš„ <code>geometry</code>å±æ€§ä¸Šã€‚</li><li><code>&lt;meshStandardMaterial&gt;</code>çš„ <code>material</code>å¯¹è±¡è¢«é™„åŠ åˆ°ç›¸åŒ <code>&lt;mesh&gt;</code>çš„ <code>material</code>å±æ€§ä¸Šã€‚</li></ul><p><strong>åœ¨ä¼ ç»Ÿçš„Three.jsåº”ç”¨ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨ç®¡ç†åœºæ™¯å›¾çš„æ‰€æœ‰æ–¹é¢ï¼ŒåŒ…æ‹¬åˆ›å»ºå¯¹è±¡ã€è®¾ç½®å±æ€§ã€æ·»åŠ åˆ°åœºæ™¯ä¸­ç­‰ã€‚è€Œåœ¨R3Fä¸­ï¼Œ</strong><code>attach</code>å±æ€§ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ï¼Œå…è®¸ä½ ç›´æ¥åœ¨JSXä¸­ä»¥å£°æ˜å¼çš„æ–¹å¼ç»„ç»‡å’Œè¿æ¥Three.jsçš„å¯¹è±¡ã€‚</p><p><strong>ä¾‹å¦‚ï¼Œä¼ ç»ŸThree.jsä¸­åˆ›å»ºå’Œæ·»åŠ ä¸€ä¸ªå¸¦æè´¨çš„ç«‹æ–¹ä½“å¯èƒ½éœ€è¦è¿™æ ·ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const geometry = new THREE.BoxGeometry(1, 1, 1);</span><br><span class="line">const material = new THREE.MeshStandardMaterial(&#123;color: &#x27;orange&#x27;&#125;);</span><br><span class="line">const mesh = new THREE.Mesh(geometry, material);</span><br><span class="line">scene.add(mesh);</span><br></pre></td></tr></table></figure><p>**è€Œåœ¨R3Fä¸­ï¼Œç›¸åŒçš„æ“ä½œå¯ä»¥é€šè¿‡ä½¿ç”¨ **<code>attach</code>å±æ€§åœ¨JSXä¸­ç›´æ¥å£°æ˜ï¼Œå¦‚å‰é¢çš„ä¾‹å­æ‰€ç¤ºï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å¹¶ä¸”ä¿æŒäº†Reactçš„å£°æ˜å¼é£æ ¼ã€‚</p><p><strong>æ€»ä¹‹ï¼Œ</strong><code>attach</code>å±æ€§æ˜¯ <code>react-three-fiber</code>ä¸­è¿æ¥Reactç»„ä»¶å±æ€§å’ŒThree.jså¯¹è±¡çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒç®€åŒ–äº†åœ¨Reactä¸­æ„å»ºå’Œç®¡ç†å¤æ‚3Dåœºæ™¯çš„è¿‡ç¨‹ã€‚</p><h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><p><strong>åªèƒ½ä½¿ç”¨åœ¨Canvaså…ƒç´ é‡Œï¼Œå› ä¸ºHooksä¾èµ–äºcontext.</strong></p><h3 id="useThree"><a href="#useThree" class="headerlink" title="useThree"></a>useThree</h3><p><strong>const state &#x3D; useThree()</strong></p><p><strong>state.gl, .scene, .camera, .raycaster, .pointer(.mouse), .clock, .linear, .legacy, .frameloop, .performace, .size, .viewport, .set(), .get(), .invalidate(), .setSize(), .setDpr(), .setFrameloop(), .setEvents(), .onPointerMissed(), .events</strong></p><h3 id="useFrame"><a href="#useFrame" class="headerlink" title="useFrame"></a>useFrame</h3><p><strong>useFrame((state, clock_delta, xrFrame) &#x3D;&gt;{})</strong></p><h3 id="useLoader"><a href="#useLoader" class="headerlink" title="useLoader"></a>useLoader</h3><h3 id="useGraph"><a href="#useGraph" class="headerlink" title="useGraph"></a>useGraph</h3><p><a href="https://docs.pmnd.rs/react-three-fiber/getting-started/examples">å®˜æ–¹æ¡ˆä¾‹</a></p><h2 id="react-spring"><a href="#react-spring" class="headerlink" title="@react-spring"></a>@react-spring</h2><p><code>@react-spring</code>æ˜¯ä¸€ä¸ªåŸºäºSpringç‰©ç†åŸç†çš„ç°ä»£ReactåŠ¨ç”»åº“ï¼Œå®ƒå…è®¸å¼€å‘è€…ä»¥å£°æ˜å¼çš„æ–¹å¼åœ¨Reactåº”ç”¨ä¸­åˆ›å»ºæµç•…ã€è‡ªç„¶çš„åŠ¨ç”»æ•ˆæœã€‚<code>@react-spring</code>çš„è®¾è®¡æ—¨åœ¨ç®€åŒ–åŠ¨ç”»çš„åˆ›å»ºå’Œç®¡ç†ï¼Œæä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹æ³•æ¥å®ç°å¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Œæ— è®ºæ˜¯ç®€å•çš„å€¼å˜åŒ–ã€åˆ—è¡¨çš„åŠ¨æ€æ’åºï¼Œè¿˜æ˜¯å¤æ‚çš„äº¤äº’åŠ¨ç”»ã€‚</p><h3 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h3><ul><li><strong>ç®€æ´çš„API</strong>ï¼šé€šè¿‡ç®€å•çš„APIï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åˆ›å»ºå’Œæ§åˆ¶åŠ¨ç”»ã€‚</li><li><strong>ç‰©ç†åŸç†é©±åŠ¨</strong>ï¼šåŠ¨ç”»æ•ˆæœåŸºäºçœŸå®çš„ç‰©ç†åŸç†ï¼Œä½¿å¾—åŠ¨ç”»çœ‹èµ·æ¥æ›´è‡ªç„¶ã€‚</li><li><strong>é«˜æ€§èƒ½</strong>ï¼šä¼˜åŒ–çš„æ€§èƒ½ç¡®ä¿å³ä½¿åœ¨å¤æ‚åŠ¨ç”»ä¸­ä¹Ÿèƒ½ä¿æŒæµç•…ã€‚</li><li><strong>é€‚ç”¨èŒƒå›´å¹¿</strong>ï¼šæ”¯æŒWebï¼ˆReactï¼‰ã€React Nativeå’Œå…¶ä»–å¹³å°ï¼Œé€šè¿‡ç›¸åŒçš„APIåœ¨ä¸åŒå¹³å°ä¸Šåˆ›å»ºåŠ¨ç”»ã€‚</li></ul><h3 id="ä¸»è¦å­é¡¹ç›®"><a href="#ä¸»è¦å­é¡¹ç›®" class="headerlink" title="ä¸»è¦å­é¡¹ç›®"></a>ä¸»è¦å­é¡¹ç›®</h3><p><code>@react-spring</code>é¡¹ç›®åŒ…å«äº†å‡ ä¸ªå­é¡¹ç›®ï¼Œåˆ†åˆ«é’ˆå¯¹ä¸åŒçš„å¹³å°æˆ–æä¾›ç‰¹å®šçš„åŠŸèƒ½ï¼š</p><ol><li>**<code>@react-spring/web</code>**ï¼šä¸“ä¸ºWebå¹³å°è®¾è®¡ï¼Œç”¨äºåœ¨Webåº”ç”¨ä¸­åˆ›å»ºåŠ¨ç”»ã€‚å®ƒæä¾›äº†ä¸DOMå…ƒç´ äº¤äº’çš„èƒ½åŠ›ï¼Œæ˜¯æ„å»ºWebç•Œé¢åŠ¨ç”»çš„ç†æƒ³é€‰æ‹©ã€‚</li><li>**<code>@react-spring/native</code>**ï¼šä¸“ä¸ºReact Nativeè®¾è®¡ï¼Œå…è®¸åœ¨React Nativeåº”ç”¨ä¸­åˆ›å»ºæµç•…çš„åŸç”ŸåŠ¨ç”»æ•ˆæœã€‚å®ƒåˆ©ç”¨React Nativeçš„åŠ¨ç”»åº“æ¥å®ç°é«˜æ€§èƒ½çš„åŠ¨ç”»ã€‚</li><li>**<code>@react-spring/core</code>**ï¼šæ˜¯ <code>@react-spring</code>åº“çš„æ ¸å¿ƒï¼Œæä¾›äº†åŠ¨ç”»åŠŸèƒ½çš„åŸºæœ¬å®ç°ã€‚å…¶ä»–å­é¡¹ç›®å¦‚ <code>@react-spring/web</code>å’Œ <code>@react-spring/native</code>éƒ½æ˜¯åœ¨è¿™ä¸ªæ ¸å¿ƒåŸºç¡€ä¸Šæ‰©å±•è€Œæ¥ï¼Œä»¥æ”¯æŒç‰¹å®šå¹³å°çš„åŠ¨ç”»æ•ˆæœã€‚</li><li>**<code>@react-spring/three</code>**ï¼šä¸ºthree.jsæä¾›åŠ¨ç”»æ”¯æŒï¼Œå…è®¸åœ¨ä½¿ç”¨React Three Fiberå¼€å‘çš„3Dåœºæ™¯ä¸­åˆ›å»ºå’Œç®¡ç†åŠ¨ç”»ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨3Dåº”ç”¨ä¸­å®ç°å¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚</li><li>**<code>@react-spring/konva</code>**ï¼šç”¨äºåœ¨React Konvaï¼ˆä¸€ä¸ªç”¨äºåœ¨Reactä¸­ç»˜åˆ¶2D canvaså›¾å½¢çš„åº“ï¼‰é¡¹ç›®ä¸­åˆ›å»ºåŠ¨ç”»ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥ä¸º2Då›¾å½¢å’Œå›¾åƒæ·»åŠ åŠ¨ç”»æ•ˆæœã€‚</li></ol><h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul><li><strong>å¹³å°æ”¯æŒ</strong>ï¼šä¸»è¦åŒºåˆ«åœ¨äºå„ä¸ªå­é¡¹ç›®é’ˆå¯¹çš„å¹³å°æˆ–åº“ä¸åŒã€‚<code>@react-spring/web</code>ä¸“æ³¨äºWebå¹³å°ï¼Œ<code>@react-spring/native</code>ä¸“æ³¨äºReact Nativeï¼Œè€Œ <code>@react-spring/three</code>å’Œ <code>@react-spring/konva</code>åˆ™åˆ†åˆ«é’ˆå¯¹three.jså’ŒKonvaã€‚</li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè™½ç„¶è¿™äº›å­é¡¹ç›®åœ¨APIè®¾è®¡ä¸Šä¿æŒä¸€è‡´æ€§ï¼Œä½†å®ƒä»¬æä¾›çš„åŠ¨ç”»èƒ½åŠ›å’Œä½¿ç”¨åœºæ™¯å„æœ‰ä¾§é‡ï¼Œä¾‹å¦‚ <code>@react-spring/three</code>ä¸“é—¨å¤„ç†3DåŠ¨ç”»ï¼Œè€Œ <code>@react-spring/konva</code>å¤„ç†2D canvasåŠ¨ç”»ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>@react-spring</code>æä¾›äº†ä¸€ä¸ªè·¨å¹³å°çš„åŠ¨ç”»è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ä¸åŒçš„å­é¡¹ç›®æ»¡è¶³äº†åœ¨Webã€React Nativeã€3Dåœºæ™¯å’Œ2D canvaså›¾å½¢ä¸­åˆ›å»ºåŠ¨ç”»çš„éœ€æ±‚ã€‚</p><h2 id="React-router-dom"><a href="#React-router-dom" class="headerlink" title="React router dom"></a>React router dom</h2><p>**åœ¨Reactåº”ç”¨ä¸­ä½¿ç”¨ **<code>react-router-dom</code>åº“æ—¶ï¼Œ<code>Route</code>ã€<code>BrowserRouter</code>ï¼ˆåœ¨è¿™é‡Œä½¿ç”¨åˆ«å <code>Router</code>ï¼‰ï¼Œå’Œ <code>Routes</code>ç»„ä»¶æ˜¯æ„å»ºå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰è·¯ç”±ç³»ç»Ÿçš„æ ¸å¿ƒã€‚ä¸‹é¢æ˜¯æ¯ä¸ªç»„ä»¶çš„ä½œç”¨ä»¥åŠä¸ºä»€ä¹ˆå®ƒä»¬é€šå¸¸ä¼šä¸€èµ·è¢«å¯¼å…¥å’Œä½¿ç”¨ï¼š</p><p><strong>BrowserRouter (åˆ«å Router)</strong></p><ul><li><strong>ä½œç”¨</strong>ï¼š<code>BrowserRouter</code>æ˜¯ä¸€ä¸ªä½¿ç”¨HTML5å†å²APIï¼ˆ<code>pushState</code>ã€<code>replaceState</code>å’Œ <code>popstate</code>äº‹ä»¶ï¼‰æ¥ä¿æŒUIä¸URLåŒæ­¥çš„è·¯ç”±å™¨ã€‚å®ƒä¸ºReactåº”ç”¨æä¾›äº†ä¸€ä¸ªè·¯ç”±çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚ä½¿ç”¨ <code>BrowserRouter</code>æ—¶ï¼Œä½ çš„ç½‘å€çœ‹èµ·æ¥å¾ˆâ€œå¹²å‡€â€ï¼Œä¸ä¼šæœ‰ <code>#</code>ç¬¦å·ã€‚</li></ul><p><strong>Routes</strong></p><ul><li><strong>ä½œç”¨</strong>ï¼š<code>Routes</code>ç»„ä»¶åœ¨ <code>react-router-dom</code> v6ä¸­å¼•å…¥ï¼Œç”¨äºæ›¿ä»£v5ä¸­çš„ <code>Switch</code>ç»„ä»¶ã€‚å®ƒè´Ÿè´£æ ¹æ®å½“å‰çš„URLå†³å®šå“ªä¸€ä¸ªå­ <code>Route</code>ç»„ä»¶åº”è¯¥è¢«æ¸²æŸ“ã€‚<code>Routes</code>ç»„ä»¶ä¼šé€‰æ‹©ä¸å½“å‰URLåŒ¹é…çš„æœ€ä½³ <code>Route</code>æ¥æ¸²æŸ“ï¼Œå¹¶æä¾›äº†åµŒå¥—è·¯ç”±çš„æ”¯æŒã€‚</li></ul><p><strong>Route</strong></p><ul><li><strong>ä½œç”¨</strong>ï¼š<code>Route</code>ç»„ä»¶ç”¨äºåœ¨è·¯ç”±ç³»ç»Ÿä¸­å®šä¹‰å•ä¸ªè·¯ç”±è§„åˆ™ã€‚å®ƒæ¥å—ä¸€ä¸ª <code>path</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šè·¯ç”±çš„åŒ¹é…è·¯å¾„ï¼Œä»¥åŠä¸€ä¸ª <code>element</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šå½“è¯¥è·¯ç”±åŒ¹é…æ—¶åº”è¯¥æ¸²æŸ“çš„ç»„ä»¶ã€‚</li></ul><p><strong>è¿™ä¸‰ä¸ªç»„ä»¶é€šå¸¸ä¸€èµ·ä½¿ç”¨æ¥æ„å»ºReactåº”ç”¨çš„è·¯ç”±ç³»ç»Ÿã€‚</strong><code>BrowserRouter</code>æä¾›äº†ä¸€ä¸ªé«˜é˜¶çš„è·¯ç”±å®¹å™¨ï¼Œ<code>Routes</code>ç”¨äºç®¡ç†è·¯ç”±çš„é€‰æ‹©é€»è¾‘ï¼Œè€Œ <code>Route</code>ç”¨äºå®šä¹‰å…·ä½“çš„è·¯ç”±è§„åˆ™å’Œå¯¹åº”æ¸²æŸ“çš„ç»„ä»¶ã€‚æ²¡æœ‰ <code>BrowserRouter</code>ï¼Œè·¯ç”±ç³»ç»Ÿå°†æ— æ³•å·¥ä½œï¼Œå› ä¸ºå®ƒæä¾›äº†è·¯ç”±çš„ä¸Šä¸‹æ–‡ï¼›æ²¡æœ‰ <code>Routes</code>å’Œ <code>Route</code>ï¼Œä½ å°±æ— æ³•å®šä¹‰å’Œç®¡ç†ä½ çš„è·¯ç”±è§„åˆ™ã€‚è¿™ç§æ¨¡å¼å…è®¸Reactå¼€å‘è€…ä»¥ä¸€ç§å£°æ˜å¼çš„æ–¹å¼æ¥ç»„ç»‡å’Œç®¡ç†ç”¨æˆ·åœ¨åº”ç”¨ä¸­çš„å¯¼èˆªè·¯å¾„ï¼ŒåŒæ—¶ç¡®ä¿åº”ç”¨çš„UIä¸URLä¿æŒåŒæ­¥ï¼Œä»è€Œæé«˜ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨çš„å¯ç»´æŠ¤æ€§ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line"> Â &lt;Routes&gt;</span><br><span class="line"> Â   &#123;/* è·¯ç”±é…ç½® */&#125;</span><br><span class="line"> Â  Â &lt;Route path=&quot;/&quot; element=&#123;&lt;HomePage /&gt;&#125; /&gt;</span><br><span class="line"> Â  Â &lt;Route path=&quot;/about&quot; element=&#123;&lt;AboutPage /&gt;&#125; /&gt;</span><br><span class="line"> Â &lt;/Routes&gt;</span><br><span class="line">&lt;/Router&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/youxt-njnu/3d_portfolio_primary&quot;&gt;æ¨¡ä»¿é¡¹ç›®åœ°å€&lt;/a</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
</feed>
