<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pale Bule Dot</title>
  
  
  <link href="https://youxt-njnu.github.io/atom.xml" rel="self"/>
  
  <link href="https://youxt-njnu.github.io/"/>
  <updated>2025-04-12T08:42:50.446Z</updated>
  <id>https://youxt-njnu.github.io/</id>
  
  <author>
    <name>Shealin You</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AIåŠ©åŠ›| pythonå¸®å†™mdxæ–‡æ¡£</title>
    <link href="https://youxt-njnu.github.io/2025/04/12/AI%E5%8A%A9%E5%8A%9B%E5%86%99doc%E6%96%87%E6%A1%A3/"/>
    <id>https://youxt-njnu.github.io/2025/04/12/AI%E5%8A%A9%E5%8A%9B%E5%86%99doc%E6%96%87%E6%A1%A3/</id>
    <published>2025-04-12T08:44:05.000Z</published>
    <updated>2025-04-12T08:42:50.446Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å®ä¹ è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å®Œå–„æ–‡æ¡£ç«™ä¸­ç»„ä»¶åº“çš„ç»„ä»¶æ–‡æ¡£ï¼Œç»„ä»¶æ–‡æ¡£åŒ…æ‹¬äº†ç»„ä»¶ä»‹ç»ã€ç»„ä»¶APIè¡¨æ ¼ã€demoç¤ºä¾‹ç­‰å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">__dockit__</span><br><span class="line">  index.mdx - ç»„ä»¶æ–‡æ¡£</span><br><span class="line">  demo - ç»„ä»¶demoæ–‡ä»¶å¤¹ï¼ŒåŒ…å«å¤šä¸ªdemo</span><br><span class="line">  apis - ç»„ä»¶APIè¡¨æ ¼æ–‡ä»¶å¤¹ï¼ŒåŒ…å«index.ts</span><br></pre></td></tr></table></figure><p>æµç¨‹ä¸­é‡å¤çš„æ­¥éª¤æ¯”è¾ƒå¤šï¼Œä½†éƒ½æ˜¯åŸºäºå·²æœ‰ç»„ä»¶é‡Œçš„ä»£ç ï¼ŒæŠ½ç¦»å‡ºéœ€è¦çš„å†…å®¹ï¼ŒæŒ‰ç…§æ ¼å¼å’Œéœ€è¦å¡«å……åœ¨ä¸åŒçš„åœ°æ–¹ï¼›</p><p>å¡«å……è¿‡ç¨‹ä¸­ï¼Œæœ‰éƒ¨åˆ†éœ€è¦äººå·¥æ˜ç¡®ï¼š</p><ol><li>ç»„ä»¶ä»£ç ä¸­çš„propsæ ¼å¼å¤„ç†å’Œä¼ å…¥ï¼›</li><li>ç»„ä»¶çš„è·¯å¾„ï¼›</li><li>ç»„ä»¶demoæ˜¯å¦ä¼ å…¥æ•°æ®åï¼Œèƒ½æ­£å¸¸è¿è¡Œï¼ˆèƒ½ä¸‡äº‹å¤§å‰ï¼Œä¸èƒ½å¾—æ‰¾æºç ï¼‰</li><li>ç»„ä»¶çš„APIè¡¨æ ¼ï¼Œå¯¹æ¯ä¸ªå­—æ®µçš„è§£é‡Šï¼ˆå¸¸è§„é€šç”¨çš„å­—æ®µèƒ½è§£è¯»ï¼Œä½†æœ‰äº›å­—æ®µéœ€è¦ç»“åˆæºç æ¥ç†è§£ï¼‰</li></ol><p>åŸºäºä¸€å¥—æ•°æ®ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–ç”Ÿæˆçš„ï¼š</p><ol><li>mdxæ–‡æ¡£ä¸­ï¼Œç»„ä»¶çš„åç§°ã€gitlabè·¯å¾„ã€ç»„ä»¶çš„demoè·¯å¾„ã€ç»„ä»¶çš„propså’Œdefaultå†…å®¹ï¼›</li><li>demoæ–‡ä»¶å¤¹ä¸­ï¼Œå¸¸è§„demoçš„ä»£ç ï¼›</li><li>ç»„ä»¶APIè¡¨æ ¼çš„å†…å®¹</li></ol><p>æ‰€ä»¥é€šè¿‡deepseekçš„å¤šæ¬¡é—®ç­”ä¿®æ­£ï¼ŒåŠ ä¸Šgoogle colabæä¾›çš„pythonç¯å¢ƒï¼Œç¼–å†™äº†ä¸€å¥—åŠè‡ªåŠ¨åŒ–çš„ä»£ç ï¼›<br>ä¼ å…¥äººå·¥ä»ç»„ä»¶æºç ä¸­é˜…è¯»æ‹¿åˆ°çš„ä¿¡æ¯ï¼Œå¤šæ¬¡è¿è¡Œï¼Œæ‹¿åˆ°index.mdx demoå’Œapisçš„å†…å®¹;<br>äººå·¥é˜…è¯»æºç ï¼Œè¡¥å……apisé‡Œå¯¹propsçš„è§£é‡Šã€‚</p><p>ç°é˜¶æ®µçš„ä»£ç æœ‰æŒºå¤šæƒ…å†µæœªè€ƒè™‘å¹¶å…¼å®¹ï¼ˆæºç å¹¶ä¸æ˜¯è§„èŒƒåŒ–çš„ä¸€å¥—é£æ ¼ï¼›å¤šæ•°æ˜¯æˆ‘ä¼ å…¥æ•°æ®çš„æ—¶å€™å°å¿ƒç‚¹æ¥è§£å†³çš„ï¼›ï¼‰<br>ä»£ç ä¹Ÿæœ‰å†—ä½™çš„å†…å®¹ï¼Œæ­¤å¤–å¤šæ•°æ˜¯é€šè¿‡æ­£åˆ™å¤„ç†å­—ç¬¦ä¸²å®ç°çš„ã€‚<br>ä½†èƒ½ç”¨ï¼Œæ‰€æœ‰ç›®çš„è¾¾åˆ°äº†ï¼Œåˆæœ‰ä»€ä¹ˆå¤§é—®é¢˜å‘¢ï¼ˆå˜¿å“ˆğŸ¤­</p><h1 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_props_string</span>(<span class="params">input_str</span>):</span><br><span class="line">    <span class="comment"># é¢„å¤„ç†å­—ç¬¦ä¸²</span></span><br><span class="line">    cleaned = re.sub(<span class="string">r&#x27;[\n\t]&#x27;</span>, <span class="string">&#x27;&#x27;</span>, input_str.strip(<span class="string">&#x27;&#123;&#125; &#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¼˜åŒ–åçš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">    prop_pattern = re.<span class="built_in">compile</span>(</span><br><span class="line">        <span class="string">r&#x27;\s*(\w+)\s*:\s*&#x27;</span>                <span class="comment"># å±æ€§å</span></span><br><span class="line">        <span class="string">r&#x27;(&#x27;</span></span><br><span class="line">        <span class="string">r&#x27;&#123;.*?&#125;(?=\s*,|\s*$)|&#x27;</span>            <span class="comment"># åŒ¹é…å¯¹è±¡ç±»å‹</span></span><br><span class="line">        <span class="string">r&#x27;[^,]+(?=\s*,|\s*$)&#x27;</span>             <span class="comment"># åŒ¹é…ç›´æ¥ç±»å‹</span></span><br><span class="line">        <span class="string">r&#x27;)&#x27;</span>,</span><br><span class="line">        re.DOTALL</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    props_dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> re.finditer(prop_pattern, cleaned):</span><br><span class="line">        prop_name = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">        prop_value = <span class="keyword">match</span>.group(<span class="number">2</span>).strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¤„ç†å¯¹è±¡ç±»å‹å±æ€§</span></span><br><span class="line">        <span class="keyword">if</span> prop_value.startswith(<span class="string">&#x27;&#123;&#x27;</span>):</span><br><span class="line">            <span class="comment"># ä¼˜åŒ–å†…éƒ¨è§£æ</span></span><br><span class="line">            inner = prop_value[<span class="number">1</span>:-<span class="number">1</span>].strip()</span><br><span class="line">            type_match = re.search(<span class="string">r&#x27;type\s*:\s*([^,]+?)\s*(?:,|$)&#x27;</span>, inner)</span><br><span class="line">            default_match = re.search(<span class="string">r&#x27;default\s*:\s*([^,]+?)\s*(?:,|$)&#x27;</span>, inner)</span><br><span class="line"></span><br><span class="line">            prop_data = &#123;&#125;</span><br><span class="line">            <span class="keyword">if</span> type_match:</span><br><span class="line">                prop_data[<span class="string">&quot;type&quot;</span>] = type_match.group(<span class="number">1</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> default_match:</span><br><span class="line">                prop_data[<span class="string">&quot;default&quot;</span>] = default_match.group(<span class="number">1</span>).strip()</span><br><span class="line"></span><br><span class="line">            props_dict[prop_name] = prop_data</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># ç›´æ¥ç±»å‹å¤„ç†</span></span><br><span class="line">            props_dict[prop_name] = prop_value.strip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> props_dict</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="comment"># test_props = parse_props_string(props)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_props_definition</span>(<span class="params">title, props_data</span>):</span><br><span class="line">    <span class="comment"># æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… definePropType&lt;...&gt; æ¨¡å¼</span></span><br><span class="line">    pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;definePropType&lt;(.+?)&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    prop_lines = []</span><br><span class="line">    <span class="keyword">for</span> prop_name, prop_def <span class="keyword">in</span> props_data.items():</span><br><span class="line">        <span class="comment"># è·å–ç±»å‹è¡¨è¾¾å¼</span></span><br><span class="line">        type_expr = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(prop_def, <span class="built_in">dict</span>):</span><br><span class="line">            type_expr = prop_def.get(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;any&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            type_expr = prop_def  <span class="comment"># å¤„ç†ç›´æ¥å†™ç±»å‹çš„æ ¼å¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æå–æ³›å‹ç±»å‹</span></span><br><span class="line">        <span class="keyword">match</span> = pattern.search(<span class="built_in">str</span>(type_expr))</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">            ts_type = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># å¤„ç†æ™®é€šç±»å‹å£°æ˜ï¼ˆå–ç¬¬ä¸€ä¸ªå•è¯ï¼‰</span></span><br><span class="line">            ts_type = type_expr.split(<span class="string">&#x27;(&#x27;</span>)[<span class="number">0</span>].strip() <span class="keyword">if</span> <span class="string">&#x27;(&#x27;</span> <span class="keyword">in</span> type_expr <span class="keyword">else</span> type_expr</span><br><span class="line"></span><br><span class="line">        prop_lines.append(<span class="string">f&quot;  <span class="subst">&#123;prop_name&#125;</span>: <span class="subst">&#123;ts_type&#125;</span>;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;type <span class="subst">&#123;title&#125;</span>Props = &#123;&#123;\n&quot;</span> + <span class="string">&quot;\n&quot;</span>.join(prop_lines) + <span class="string">&quot;\n&#125;;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç»“æœ</span></span><br><span class="line"><span class="comment"># props_definition = generate_props_definition(params.get(&quot;title&quot;,&#x27;&#x27;), test_props)</span></span><br><span class="line"><span class="comment"># print(props_definition)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_types_docs</span>(<span class="params">ts_code</span>):</span><br><span class="line">    <span class="comment"># æ¸…é™¤å‰åç©ºç™½</span></span><br><span class="line">    ts_code = ts_code.strip()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ†å‰²ä¸åŒçš„exportå®šä¹‰</span></span><br><span class="line">    exports = re.split(<span class="string">r&#x27;\n\s*\n&#x27;</span>, ts_code)</span><br><span class="line"></span><br><span class="line">    sections = []</span><br><span class="line">    <span class="keyword">for</span> export <span class="keyword">in</span> exports:</span><br><span class="line">        <span class="comment"># åŒ¹é…interfaceæˆ–typeå®šä¹‰</span></span><br><span class="line">        <span class="keyword">match</span> = re.<span class="keyword">match</span>(</span><br><span class="line">            <span class="string">r&#x27;export (interface|type|enum) (\w+)(\s*=\s*)?([\s\S]*)&#x27;</span>,</span><br><span class="line">            export.strip()</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">match</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        type_kind = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">        type_name = <span class="keyword">match</span>.group(<span class="number">2</span>)</span><br><span class="line">        equals_sign = <span class="keyword">match</span>.group(<span class="number">3</span>) <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        type_body = <span class="keyword">match</span>.group(<span class="number">4</span>).strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºå®Œæ•´å®šä¹‰</span></span><br><span class="line">        <span class="keyword">if</span> type_kind == <span class="string">&#x27;type&#x27;</span>:</span><br><span class="line">            full_def = <span class="string">f&quot;export type <span class="subst">&#123;type_name&#125;</span> = <span class="subst">&#123;type_body&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> type_kind == <span class="string">&#x27;enum&#x27;</span>:</span><br><span class="line">            full_def = <span class="string">f&quot;export enum <span class="subst">&#123;type_name&#125;</span> <span class="subst">&#123;type_body&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            full_def = <span class="string">f&quot;export interface <span class="subst">&#123;type_name&#125;</span> <span class="subst">&#123;type_body&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”ŸæˆMarkdownæ®µè½</span></span><br><span class="line">        section = <span class="string">f&quot;### <span class="subst">&#123;type_name&#125;</span>\n\n```ts\n<span class="subst">&#123;full_def&#125;</span>\n```&quot;</span></span><br><span class="line">        sections.append(section)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;\n\n&quot;</span>.join(sections)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•éªŒè¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(generate_types_docs(params.get(&quot;types&quot;,&#x27;&#x27;)))</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_defaults_docs</span>(<span class="params">ts_code</span>):</span><br><span class="line">    <span class="comment"># åŒ¹é…æ‰€æœ‰exportçš„å¸¸é‡å®šä¹‰ï¼ˆå¸¦æˆ–ä¸å¸¦ç±»å‹æ³¨è§£ï¼‰</span></span><br><span class="line">    pattern = re.<span class="built_in">compile</span>(</span><br><span class="line">        <span class="string">r&#x27;export const (\w+)(?::\s*(\w+))?\s*=\s*(\&#123;.*?\&#125;);&#x27;</span>,</span><br><span class="line">        re.DOTALL</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    sections = []</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> re.finditer(pattern, ts_code):</span><br><span class="line">        const_name = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">        const_type = <span class="keyword">match</span>.group(<span class="number">2</span>)  <span class="comment"># å¯èƒ½ä¸ºNone</span></span><br><span class="line">        const_value = <span class="keyword">match</span>.group(<span class="number">3</span>).strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„é€ å®Œæ•´çš„å¯¼å‡ºè¯­å¥ï¼ˆæ ¹æ®æ˜¯å¦æœ‰ç±»å‹æ³¨è§£ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> const_type:</span><br><span class="line">            full_definition = <span class="string">f&quot;export const <span class="subst">&#123;const_name&#125;</span>: <span class="subst">&#123;const_type&#125;</span> = <span class="subst">&#123;const_value&#125;</span>;&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            full_definition = <span class="string">f&quot;export const <span class="subst">&#123;const_name&#125;</span> = <span class="subst">&#123;const_value&#125;</span>;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”ŸæˆMarkdownæ®µè½</span></span><br><span class="line">        section = <span class="string">f&quot;### <span class="subst">&#123;const_name&#125;</span>\n\n```ts\n<span class="subst">&#123;full_definition&#125;</span>\n```&quot;</span></span><br><span class="line">        sections.append(section)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;\n\n&quot;</span>.join(sections)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ–‡æ¡£</span></span><br><span class="line"><span class="comment"># generate_props_definition(params.get(&quot;title&quot;,&#x27;&#x27;), parse_props_string(props))</span></span><br><span class="line"><span class="comment"># type_definition = generate_types_docs(params.get(&quot;types&quot;,&#x27;&#x27;))</span></span><br><span class="line"><span class="comment"># default_definiton = (generate_defaults_docs(params.get(&quot;defaults&quot;,&#x27;&#x27;)))</span></span><br><span class="line"><span class="comment"># print(default_definiton)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_document</span>(<span class="params">params</span>):</span><br><span class="line">    <span class="comment"># ä»relative_pathæå–textéƒ¨åˆ†ï¼ˆæ–°å¢è·¯å¾„å¤„ç†é€»è¾‘ï¼‰</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">extract_gitlab_text</span>(<span class="params">path</span>):</span><br><span class="line">        <span class="comment"># æŸ¥æ‰¾components/åçš„è·¯å¾„éƒ¨åˆ†</span></span><br><span class="line">        components_index = path.find(<span class="string">&#x27;components/&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> components_index != -<span class="number">1</span>:</span><br><span class="line">            sub_path = path[components_index:]</span><br><span class="line">            <span class="comment"># å»é™¤æœ€åçš„æ–‡ä»¶å</span></span><br><span class="line">            last_slash = sub_path.rfind(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> last_slash != -<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> sub_path[:last_slash]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>  <span class="comment"># é»˜è®¤å€¼</span></span><br><span class="line"></span><br><span class="line">    gitlab_text = extract_gitlab_text(relative_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”ŸæˆGitLabé“¾æ¥</span></span><br><span class="line">    gitlab_base = <span class="string">&quot;æ‰“ç ---------blob/master/&quot;</span></span><br><span class="line">    gitlab_link = gitlab_base + relative_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”Ÿæˆæ–‡ä»¶åœ°å€éƒ¨åˆ†</span></span><br><span class="line">    file_address = <span class="string">f&quot;&quot;&quot;&lt;FileAddress</span></span><br><span class="line"><span class="string">  filePath=&#x27;<span class="subst">&#123;relative_path&#125;</span>&#x27;</span></span><br><span class="line"><span class="string">  gitlab=&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    file_address +=<span class="string">&quot;&#123;&#123;\ntext:&#x27; &quot;</span>+gitlab_text + <span class="string">&quot;&#x27;,\nlink: &#x27;&quot;</span> + gitlab_link + <span class="string">&quot;&#x27; \n&#125;&#125;/&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæ–‡æ¡£å†…å®¹</span></span><br><span class="line">    doc = <span class="string">f&quot;&quot;&quot;import &#123;&#123; APITable &#125;&#125; from &#x27;docSrc/components/table&#x27;;</span></span><br><span class="line"><span class="string">import &#123;&#123; FileAddress &#125;&#125; from &#x27;docSrc/components/file-address&#x27;;</span></span><br><span class="line"><span class="string">import &#123;&#123; data, config &#125;&#125; from &#x27;./apis/index.ts&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># <span class="subst">&#123;title&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ï¼ <span class="subst">&#123;component_name&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ï¼```tsx</span></span><br><span class="line"><span class="string">ï¼import &#123;&#123; <span class="subst">&#123;title&#125;</span> &#125;&#125; from &#x27;--æ‰“ç ---&#x27;;</span></span><br><span class="line"><span class="string">ï¼```</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼<span class="subst">&#123;file_address&#125;</span></span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼## ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼&lt;demo</span></span><br><span class="line"><span class="string">ï¼  title=&quot;å¸¸è§„&quot;</span></span><br><span class="line"><span class="string">ï¼  desc=&quot;<span class="subst">&#123;title&#125;</span>ä½¿ç”¨æ–¹æ³•å±•ç¤º&quot;</span></span><br><span class="line"><span class="string">ï¼  src=&quot;./packages/brand-biz/src/<span class="subst">&#123;gitlab_text&#125;</span>/__dockit__/demos/demo&quot;</span></span><br><span class="line"><span class="string">ï¼/&gt;</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼## API</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼### Props</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼&lt;APITable data=&#123;&#123;data&#125;&#125; /&gt;</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼### Config</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼&lt;APITable data=&#123;&#123;config&#125;&#125; /&gt;</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼## Types</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼### <span class="subst">&#123;title&#125;</span>Props</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼```tsx</span></span><br><span class="line"><span class="string">ï¼<span class="subst">&#123;props_definition&#125;</span></span></span><br><span class="line"><span class="string">ï¼```</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼<span class="subst">&#123; type_definition&#125;</span></span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼## Default</span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼<span class="subst">&#123;default_definiton&#125;</span></span></span><br><span class="line"><span class="string">ï¼</span></span><br><span class="line"><span class="string">ï¼&quot;&quot;&quot;</span></span><br><span class="line">ï¼    <span class="keyword">return</span> doc</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_component_code</span>(<span class="params">title</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;&quot;&quot;import &#123;&#123; <span class="subst">&#123;title&#125;</span> &#125;&#125; from &quot;æ‰“ç &quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const Demo = () =&gt; &#123;&#123;</span></span><br><span class="line"><span class="string">  return (</span></span><br><span class="line"><span class="string">    &lt;FormContainer&gt;</span></span><br><span class="line"><span class="string">      &lt;<span class="subst">&#123;title&#125;</span>.Component /&gt;</span></span><br><span class="line"><span class="string">    &lt;/FormContainer&gt;</span></span><br><span class="line"><span class="string">  );</span></span><br><span class="line"><span class="string">&#125;&#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default Demo;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span>, <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_params_to_data</span>(<span class="params">props_definition: <span class="built_in">str</span>, type_definition: <span class="built_in">str</span>, title: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="comment"># æå–æ‰€æœ‰descä¸ä¸ºundefinedçš„æ˜ å°„å…³ç³»</span></span><br><span class="line">    desc_map = &#123;</span><br><span class="line">        <span class="string">&#x27;configKeyId&#x27;</span>: <span class="string">&#x27;é…ç½®çš„KeyId&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fieldPathMap&#x27;</span>: <span class="string">&#x27;ç»„ä»¶å­—æ®µæ˜ å°„é…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;validator&#x27;</span>: <span class="string">&#x27;ç»„ä»¶æ ¡éªŒé…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;config&#x27;</span>: <span class="string">&#x27;ç»„ä»¶é…ç½®é¡¹&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;showErrorConfig&#x27;</span>: <span class="string">&#x27;é”™è¯¯ä¿¡æ¯é…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;showErrConfigMini&#x27;</span>: <span class="string">&#x27;é”™è¯¯ä¿¡æ¯AuditInfoBannerçš„miniSizeé…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;componentKey&#x27;</span>: <span class="string">&#x27;KeyFieldå±æ€§é…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;imagesOptions&#x27;</span>: <span class="string">&#x27;å›¾ç‰‡ç´ æé…ç½®&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;uploadImageService&#x27;</span>: <span class="string">&#x27;ä¸Šä¼ å›¾ç‰‡æœåŠ¡&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;uploadImage&#x27;</span>: <span class="string">&#x27;ä¸Šä¼ å›¾ç‰‡æœåŠ¡&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;æ ‡é¢˜&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;hasSearchWords&#x27;</span>: <span class="string">&#x27;æœ‰æœç´¢è¯&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;videoDuration&#x27;</span>: <span class="string">&#x27;è§†é¢‘æ—¶é•¿&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;disabled&#x27;</span>: <span class="string">&#x27;æ˜¯å¦ç¦ç”¨&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–å˜é‡</span></span><br><span class="line">    data = []</span><br><span class="line">    config = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æprops_definition (InteractCreativeProps)</span></span><br><span class="line">    <span class="keyword">if</span> props_definition:</span><br><span class="line">        <span class="comment"># æå–typeå®šä¹‰å†…å®¹</span></span><br><span class="line">        props_match = re.search(<span class="string">r&#x27;type \w+Props\s*=\s*(&#123;.*?&#125;);&#x27;</span>, props_definition, re.DOTALL)</span><br><span class="line">        <span class="keyword">if</span> props_match:</span><br><span class="line">            props_content = props_match.group(<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># æå–å±æ€§å®šä¹‰</span></span><br><span class="line">            prop_items = re.finditer(<span class="string">r&#x27;(\w+)\s*:\s*([^;\n]+);&#x27;</span>, props_content)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> prop_items:</span><br><span class="line">                name = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">                type_ = <span class="keyword">match</span>.group(<span class="number">2</span>).strip()</span><br><span class="line">                type_ = type_.replace(<span class="string">&quot;InteractCreative&quot;</span>, title)</span><br><span class="line">                desc = desc_map.get(name, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                data.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;name&#x27;</span>: name,</span><br><span class="line">                    <span class="string">&#x27;desc&#x27;</span>: desc,</span><br><span class="line">                    <span class="string">&#x27;default&#x27;</span>: <span class="string">&#x27;undefined&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: [type_]</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£ætype_definition (InteractCreativeConfigç­‰)</span></span><br><span class="line">    <span class="keyword">if</span> type_definition:</span><br><span class="line">        <span class="comment"># æå–InteractCreativeConfigéƒ¨åˆ†</span></span><br><span class="line">        config_match = re.search(<span class="string">r&#x27;### \w+Config.*?```ts.*?export (?:interface|type) \w+Config (.*?```)&#x27;</span>, type_definition, re.DOTALL)</span><br><span class="line">        <span class="keyword">if</span> config_match:</span><br><span class="line">            config_content = config_match.group(<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># æå–é…ç½®é¡¹å®šä¹‰</span></span><br><span class="line">            config_items = re.finditer(<span class="string">r&#x27;(\w+)\??\s*:\s*([^;\n]+);&#x27;</span>, config_content)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> config_items:</span><br><span class="line">                name = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">                type_ = <span class="keyword">match</span>.group(<span class="number">2</span>).strip()</span><br><span class="line">                type_ = type_.replace(<span class="string">&quot;InteractCreative&quot;</span>, title)</span><br><span class="line">                desc = desc_map.get(name, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                config.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;name&#x27;</span>: name,</span><br><span class="line">                    <span class="string">&#x27;desc&#x27;</span>: desc,</span><br><span class="line">                    <span class="string">&#x27;default&#x27;</span>: <span class="string">&#x27;undefined&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: [type_]</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”Ÿæˆè¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">    output = <span class="string">f&quot;export const data = <span class="subst">&#123;format_array(data)&#125;</span>;\n\nexport const config = <span class="subst">&#123;format_array(config)&#125;</span>;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">format_array</span>(<span class="params">arr: <span class="built_in">list</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ ¼å¼åŒ–æ•°ç»„ä¸ºJavaScriptæ•°ç»„å­—ç¬¦ä¸²&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> arr:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[]&quot;</span></span><br><span class="line"></span><br><span class="line">    items = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> arr:</span><br><span class="line">        props = []</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> item.items():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(v, <span class="built_in">list</span>):</span><br><span class="line">                props.append(<span class="string">f&quot;&#x27;<span class="subst">&#123;k&#125;</span>&#x27;: <span class="subst">&#123;v&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(v, <span class="built_in">str</span>):</span><br><span class="line">                props.append(<span class="string">f&quot;&#x27;<span class="subst">&#123;k&#125;</span>&#x27;: &#x27;<span class="subst">&#123;v&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                props.append(<span class="string">f&quot;&#x27;<span class="subst">&#123;k&#125;</span>&#x27;: <span class="subst">&#123;v&#125;</span>&quot;</span>)</span><br><span class="line">        items.append(<span class="string">&quot;&#123;\n    &quot;</span> + <span class="string">&quot;,\n    &quot;</span>.join(props) + <span class="string">&quot;\n  &#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;[\n  &quot;</span> + <span class="string">&quot;,\n  &quot;</span>.join(items) + <span class="string">&quot;\n]&quot;</span></span><br></pre></td></tr></table></figure><h1 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&#x27;SplashVideoFullScreen&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;è§†é¢‘å…¨å± ç»„ä»¶&quot;</span>,</span><br><span class="line">    <span class="string">&quot;relativePath&quot;</span>: <span class="string">&quot;(-------------æ‰“-----ç ----------------)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;props&quot;</span>:<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    fieldPathMap: definePropType&lt;FieldPathMap&gt;(Object),</span></span><br><span class="line"><span class="string">    config: definePropType&lt;SplashVideoFullScreenConfig&gt;(Object),</span></span><br><span class="line"><span class="string">    showErrorConfig: definePropType&lt;any&gt;(Object),</span></span><br><span class="line"><span class="string">    validator: definePropType&lt;any&gt;(Object)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;types&quot;</span>: <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">export type SplashVideoFullScreenConfig = &#123;</span></span><br><span class="line"><span class="string">      uploadService: UploadImageService;</span></span><br><span class="line"><span class="string">      videoServices: VideoUploadService;</span></span><br><span class="line"><span class="string">      imageTitle?: string;</span></span><br><span class="line"><span class="string">      imageHint?: string;</span></span><br><span class="line"><span class="string">      videoTitle?: string;</span></span><br><span class="line"><span class="string">      videoHint?: string;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;defaults&quot;</span>: <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">export const defaultFieldMap = &#123;</span></span><br><span class="line"><span class="string">  videoFullScreen: &#123;</span></span><br><span class="line"><span class="string">    path: &#x27;materialComponent.videoFullScreen&#x27;,</span></span><br><span class="line"><span class="string">    key: &#x27;VideoFullScreen&#x27;,</span></span><br><span class="line"><span class="string">    childPath: &#123;</span></span><br><span class="line"><span class="string">      imageInfoBkList: &#123;</span></span><br><span class="line"><span class="string">        path: &#x27;imageInfoBkList&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      videoList: &#123;</span></span><br><span class="line"><span class="string">        path: &#x27;videoList&#x27;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export const baseConfig = &#123;</span></span><br><span class="line"><span class="string">  imageTitle: &#x27;é™æ€åº•å›¾&#x27;,</span></span><br><span class="line"><span class="string">  imageHint: &#x27;è¦æ±‚ï¼šæ–‡ä»¶ï¼œ300Kï¼Œæ”¯æŒPNGã€JPGã€JPEGæ ¼å¼ï¼Œè¯·åˆ†åˆ«ä¸Šä¼ ä»¥ä¸Šåˆ†è¾¨ç‡å›¾&#x27;,</span></span><br><span class="line"><span class="string">  videoTitle: &#x27;è§†é¢‘å†…å®¹&#x27;,</span></span><br><span class="line"><span class="string">  videoHint: &#x27;è¦æ±‚ï¼šæ—¶é•¿=5sï¼Œæ–‡ä»¶â‰¤5Mï¼Œæ”¯æŒMP4æ ¼å¼ï¼Œè¯·åˆ†åˆ«ä¸Šä¼ ä»¥ä¸Šåˆ†è¾¨ç‡è§†é¢‘&#x27;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è§£æå‚æ•°</span></span><br><span class="line">title = params.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">component_name = params.get(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">relative_path = params.get(<span class="string">&#x27;relativePath&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">props = params.get(<span class="string">&#x27;props&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">types_config = params.get(<span class="string">&#x27;types&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">default_config = params.get(<span class="string">&#x27;defaults&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">props_definition = generate_props_definition(title, parse_props_string(props))</span><br><span class="line">type_definition = generate_types_docs(types_config)</span><br><span class="line">default_definiton = generate_defaults_docs(default_config)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(generate_document(params))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">title = params.get(<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;&#x27;</span>)  <span class="comment"># å¯ä»¥åŠ¨æ€ä¼ å…¥ä¸åŒçš„ç»„ä»¶å</span></span><br><span class="line"><span class="built_in">print</span>(generate_component_code(title))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="built_in">print</span>(parse_params_to_data(props_definition, type_definition,params.get(<span class="string">&quot;title&quot;</span>,<span class="string">&#x27;&#x27;</span>)))</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/04/12/RxG53rSQvIfNcZj.png" alt="image.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å®ä¹ è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å®Œå–„æ–‡æ¡£ç«™ä¸­ç»„ä»¶åº“çš„ç»„ä»¶æ–‡æ¡£ï¼Œç»„ä»¶æ–‡æ¡£åŒ…æ‹¬äº†ç»„ä»¶ä»‹ç»ã€ç»„ä»¶APIè¡¨æ ¼ã€demoç¤ºä¾‹ç­‰å†…å®¹ã€‚&lt;/p&gt;
&lt;figure clas</summary>
      
    
    
    
    <category term="AIææ•ˆ" scheme="https://youxt-njnu.github.io/categories/AI%E6%8F%90%E6%95%88/"/>
    
    
    <category term="AI" scheme="https://youxt-njnu.github.io/tags/AI/"/>
    
    <category term="python" scheme="https://youxt-njnu.github.io/tags/python/"/>
    
    <category term="å‰ç«¯æ–‡æ¡£å»ºè®¾" scheme="https://youxt-njnu.github.io/tags/%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3%E5%BB%BA%E8%AE%BE/"/>
    
  </entry>
  
  <entry>
    <title>threejsæºç å­¦ä¹ </title>
    <link href="https://youxt-njnu.github.io/2024/10/25/threejs%E6%BA%90%E7%A0%811/"/>
    <id>https://youxt-njnu.github.io/2024/10/25/threejs%E6%BA%90%E7%A0%811/</id>
    <published>2024-10-25T02:34:05.000Z</published>
    <updated>2024-10-25T14:24:10.324Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p>å¯¹å¾ˆå¤šçŸ¥è¯†ç‚¹åªæœ‰æ¨¡ç³Šçš„æ¦‚å¿µï¼Œé™¤äº†æ—¥å¸¸å†™å†™demoï¼Œå°±æ¥çœ‹çœ‹æºç åŸ¹å…»äº›æ„Ÿè§‰ï¼›</p><p>ä»BoxGeometryå…¥æ‰‹;</p><p>ç°é˜¶æ®µçš„å¤§çº²å›¾ï¼š</p><p><img src="https://s2.loli.net/2024/10/25/iQyVkM8svcFLNKG.png" alt="1729864326918.jpg"></p><h1 id="BoxGeometry"><a href="#BoxGeometry" class="headerlink" title="BoxGeometry"></a>BoxGeometry</h1><p>æ ‡äº†é˜…è¯»æ€è·¯ï¼Œä¸»è¦æ˜¯ç†è§£buildPlaneå‡½æ•°çš„å‚æ•°æ˜¯æ€ä¹ˆè®¾å®šçš„ã€é¡¶ç‚¹æ˜¯æ€ä¹ˆè®¡ç®—çš„ã€åæ ‡ç³»æ˜¯æ€ä¹ˆæ”¾çš„ã€UVæ˜¯æ€ä¹ˆç®—çš„ï¼Œè¿˜æœ‰å°±æ˜¯æ€ä¹ˆåˆ©ç”¨ç´¢å¼•æ¥å‡å°‘å­˜å‚¨ã€‚</p><p><img src="https://s2.loli.net/2024/10/25/Hj4Tq2ofp37be5a.jpg" alt="e081babf6c7c640380917d4eb24af47.jpg"></p><p>ä¸»è¦æ˜¯æ‡’ï¼Œè€Œä¸”å†™ä¸ªå®Œæ•´æ€è·¯å’Œç¬”è®°åšå®¢å¤ªè´¹æ—¶é—´äº†ã€‚ã€‚ã€‚ã€‚</p><p>é«˜æ¸…ç‰ˆåœ¨<a href="https://github.com/youxt-njnu/ProjectSnapshot/blob/master/threejs-BoxGeometry.pdf">GitHub</a>è‡ªå–</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;p&gt;å¯¹å¾ˆå¤šçŸ¥è¯†ç‚¹åªæœ‰æ¨¡ç³Šçš„æ¦‚å¿µï¼Œé™¤äº†æ—¥å¸¸å†™å†™demoï¼Œå°±æ¥çœ‹çœ‹æºç åŸ¹å…»äº›æ„Ÿè§‰ï¼›&lt;/p&gt;
&lt;p&gt;ä»BoxGeometryå…¥æ‰‹;&lt;/p&gt;
&lt;p&gt;ç°é˜¶</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
  </entry>
  
  <entry>
    <title>å¿«æ·é”®è®°å½•</title>
    <link href="https://youxt-njnu.github.io/2024/10/23/%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%B0%E5%BD%95/"/>
    <id>https://youxt-njnu.github.io/2024/10/23/%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%B0%E5%BD%95/</id>
    <published>2024-10-23T02:30:23.000Z</published>
    <updated>2024-10-23T02:11:43.349Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Adobe-Illustrator"><a href="#Adobe-Illustrator" class="headerlink" title="Adobe Illustrator"></a>Adobe Illustrator</h1><p>é‡å¤ä¸Šä¸€æ­¥ï¼šctrl+d<br>å°†é€‰ä¸­ç‰©ä½“éšè—ï¼šctrl+3<br>å°†é€‰ä¸­ç‰©ä½“é”å®šï¼šctrl+2</p><h1 id="Sticky-Notes"><a href="#Sticky-Notes" class="headerlink" title="Sticky Notes"></a>Sticky Notes</h1><p>æ–°å»ºç¬”è®°ï¼šalt+n<br>ä»å‰ªåˆ‡æ¿æ–°å»ºï¼šalt+v<br>å±•ç¤ºæ‰€æœ‰ç¬”è®°ï¼šalt+s<br>éšè—æ‰€æœ‰ç¬”è®°ï¼šalt+h<br>å»å¾€ä¸‹ä¸€ä¸ªç¬”è®°ï¼šalt+g<br>æ¢ç´¢ï¼šalt+x<br>é‡å‘½åï¼šf2<br>è®¾ç½®æé†’ï¼šalt+a</p><h1 id="Unity"><a href="#Unity" class="headerlink" title="Unity"></a>Unity</h1><p>copy+paste: ctrl+d<br>ç‰©ä½“æ“ä½œé¢æ¿ï¼šq,w,e,r</p><h1 id="Visual-Studio"><a href="#Visual-Studio" class="headerlink" title="Visual Studio"></a>Visual Studio</h1><p>ç±»ä¼¼vscode, è¯•è¯•çœ‹åº”è¯¥ä¹Ÿèƒ½é€šç”¨<br>æ–‡æœ¬å¯¹é½ï¼šctrl+k, ctrl+d<br>æ³¨é‡Šæ‰€é€‰ä»£ç ï¼šctrl &#x2F;<br>å–æ¶ˆæ³¨é‡Šï¼šctrl &#x2F;<br>ä»£ç æŠ˜å ï¼š<br><code># region</code><br><code># endregion</code><br>æ˜¾ç¤ºå‘½ä»¤é¢æ¿ï¼šctrl+shift+p, F1<br>æ˜¾ç¤º&#x2F;éšè—ä¾§è¾¹æ ï¼šctrl+b<br>åˆ›å»ºå¤šä¸ªç¼–è¾‘å™¨ï¼šctrl+\ï¼Œæ–¹ä¾¿æŠ„ä»£ç <br>ctrl+1,ctrl+2:å¿«é€Ÿèšç„¦åˆ°ç¬¬ï¼Ÿä¸ªç¼–è¾‘å™¨<br>æ”¾ç¼©å·¥ä½œåŒºï¼šctrl +&#x2F;-<br>é‡æ–°å¼€ä¸€ä¸ªè½¯ä»¶çš„çª—å£ï¼šctrl+shift+N<br>å…³é—­è½¯ä»¶çš„å½“å‰çª—å£ï¼šctrl+shift+W<br>æ–°å»ºæ–‡ä»¶ï¼šctrl+N<br>å…³é—­å½“å‰æ–‡ä»¶ï¼šctrl+W<br>ctrl+pagedown&#x2F;pageup: åœ¨å·²ç»æ‰“å¼€çš„å¤šä¸ªæ–‡ä»¶ä¹‹é—´è¿›è¡Œåˆ‡æ¢<br>ctrl+shift+O: åœ¨å½“å‰æ–‡ä»¶çš„å„ç§æ–¹æ³•ä¹‹é—´è¿›è¡Œè·³è½¬<br>ctrl+G: è·³è½¬åˆ°æŒ‡å®šè¡Œ</p><p><a href="https://zhuanlan.zhihu.com/p/62913725">https://zhuanlan.zhihu.com/p/62913725</a></p><h1 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h1><p>å¯¹äº è¡Œ çš„æ“ä½œï¼š<br>é‡å¼€ä¸€è¡Œï¼šå…‰æ ‡åœ¨è¡Œå°¾çš„è¯ï¼Œå›è½¦å³å¯ï¼›ä¸åœ¨è¡Œå°¾ï¼Œctrl + enter å‘ä¸‹é‡å¼€ä¸€è¡Œï¼›ctrl+shift + enter åˆ™æ˜¯åœ¨ä¸Šä¸€è¡Œé‡å¼€ä¸€è¡Œ<br>åˆ é™¤ä¸€è¡Œï¼šå…‰æ ‡æ²¡æœ‰é€‰æ‹©å†…å®¹æ—¶ï¼Œctrl + x å‰ªåˆ‡ä¸€è¡Œï¼›ctrl +shift + k ç›´æ¥åˆ é™¤ä¸€è¡Œ<br>ç§»åŠ¨ä¸€è¡Œï¼šalt + â†‘ å‘ä¸Šç§»åŠ¨ä¸€è¡Œï¼›alt + â†“ å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ<br>å¤åˆ¶ä¸€è¡Œï¼šshift + alt + â†“ å‘ä¸‹å¤åˆ¶ä¸€è¡Œï¼›shift + alt + â†‘ å‘ä¸Šå¤åˆ¶ä¸€è¡Œ<br>ctrl + z å›é€€</p><p>å¯¹äº è¯ çš„æ“ä½œï¼š<br>é€‰ä¸­ä¸€ä¸ªè¯ï¼šctrl + d<br>æœç´¢æˆ–è€…æ›¿æ¢ï¼š<br>ctrl + f ï¼šæœç´¢<br>ctrl + alt + fï¼š æ›¿æ¢<br>ctrl + shift + fï¼šåœ¨é¡¹ç›®å†…æœç´¢<br>é€šè¿‡Ctrl + &#96; å¯ä»¥æ‰“å¼€æˆ–å…³é—­ç»ˆç«¯<br>Ctrl+P å¿«é€Ÿæ‰“å¼€æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶<br>Ctrl+Shift+N æ‰“å¼€æ–°çš„ç¼–è¾‘å™¨çª—å£<br>Ctrl+Shift+W å…³é—­ç¼–è¾‘å™¨<br>Home å…‰æ ‡è·³è½¬åˆ°è¡Œå¤´<br>End å…‰æ ‡è·³è½¬åˆ°è¡Œå°¾<br>Ctrl + Home è·³è½¬åˆ°é¡µå¤´<br>Ctrl + End è·³è½¬åˆ°é¡µå°¾<br>Ctrl + Shift + [ æŠ˜å åŒºåŸŸä»£ç <br>Ctrl + Shift + ] å±•å¼€åŒºåŸŸä»£ç <br>Ctrl + &#x2F; æ·»åŠ å…³é—­è¡Œæ³¨é‡Š<br>Shift + Alt +A å—åŒºåŸŸæ³¨é‡Š</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Adobe-Illustrator&quot;&gt;&lt;a href=&quot;#Adobe-Illustrator&quot; class=&quot;headerlink&quot; title=&quot;Adobe Illustrator&quot;&gt;&lt;/a&gt;Adobe Illustrator&lt;/h1&gt;&lt;p&gt;é‡å¤ä¸Šä¸€æ­¥ï¼šctrl</summary>
      
    
    
    
    <category term="å‘¨è¾¹æ‰©å±•" scheme="https://youxt-njnu.github.io/categories/%E5%91%A8%E8%BE%B9%E6%89%A9%E5%B1%95/"/>
    
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±å‘â‘ </title>
    <link href="https://youxt-njnu.github.io/2024/09/21/three-%E8%B5%9B%E5%8D%9A%E5%A4%A7%E5%B1%8F%E5%A1%AB%E5%9D%911/"/>
    <id>https://youxt-njnu.github.io/2024/09/21/three-%E8%B5%9B%E5%8D%9A%E5%A4%A7%E5%B1%8F%E5%A1%AB%E5%9D%911/</id>
    <published>2024-09-21T06:02:05.000Z</published>
    <updated>2024-10-05T12:06:36.549Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜-ç¬¬ä¸€æ‰¹"><a href="#é—®é¢˜-ç¬¬ä¸€æ‰¹" class="headerlink" title="é—®é¢˜(ç¬¬ä¸€æ‰¹)"></a>é—®é¢˜(ç¬¬ä¸€æ‰¹)</h1><h2 id="çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥"><a href="#çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥" class="headerlink" title="çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥"></a>çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥</h2><p>å°è¯•1ï¼šçœ‹çœ‹textureæ˜¯å¦æ­£ç¡®åŠ è½½</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> earthTexture = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(earthImg, <span class="keyword">function</span> (<span class="params">texture</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;texture loaded successfully&#x27;</span>);</span><br><span class="line">    &#125;, <span class="literal">undefined</span>, <span class="keyword">function</span> (<span class="params">err</span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;texture load failed&#x27;</span>, err); &#125;);</span><br></pre></td></tr></table></figure><p>é—®é¢˜æ˜¯å¯¹UVçš„è®¡ç®—é”™äº†ï¼š<br>é”™å¤„1ï¼š<code> let uv = [(sph + Math.PI) / (2 * Math.PI), 1 - (sph.theta / Math.PI)];</code></p><p>éœ€è¦ä½¿ç”¨new Three.Vector2(),è€Œä¸æ˜¯ç›´æ¥æ„å»ºæ•°ç»„ï¼›å¦‚æœæ˜¯ç›´æ¥æ„å»ºæ•°ç»„ï¼Œé‚£ä¸‹é¢å°±è®¿é—®ä¸åˆ°.xå’Œ.yï¼Œéœ€è¦ä½¿ç”¨[0]å’Œ[1]æ¥è®¿é—®å¯¹åº”çš„å†…å®¹ã€‚</p><p>é”™å¤„2ï¼š<code>let uv = new Three.Vector2(sph + Math.PI) / (2 * Math.PI), 1 - (sph.theta / Math.PI));</code></p><p>è¿™é‡Œå¯¹UVçš„æ˜ å°„è®¡ç®—é”™äº†</p><blockquote><p>åœ¨ Three.js ä¸­ï¼Œ<code>Spherical</code> ç±»è¡¨ç¤ºçš„çƒåæ ‡ç³»ç»Ÿæ˜¯åŸºäºä¸‰ç»´å³æ‰‹ç¬›å¡å°”åæ ‡ç³»ï¼Œå…¶ä¸­ <code>phi</code>ï¼ˆä»°è§’ï¼‰å’Œ <code>theta</code>ï¼ˆæ–¹ä½è§’ï¼‰çš„å®šä¹‰å…·ä½“å¦‚ä¸‹ï¼š</p><ol><li><strong><code>phi</code>ï¼ˆä»°è§’ï¼‰</strong> - è¿™æ˜¯ä»æ­£Yè½´å‘ä¸‹è‡³ç‚¹Pçš„çº¿æ®µä¸Yè½´ä¹‹é—´çš„è§’åº¦ã€‚åœ¨ Three.js ä¸­ï¼Œ<code>phi</code> çš„èŒƒå›´é€šå¸¸æ˜¯ä»0åˆ°Ï€ï¼ˆå³ä»0åˆ°180åº¦ï¼‰ï¼Œå…¶ä¸­0å¯¹åº”äºæ­£Yè½´ï¼ˆå‘ä¸Šï¼‰çš„æ–¹å‘ï¼Œè€ŒÏ€å¯¹åº”äºè´ŸYè½´ï¼ˆå‘ä¸‹ï¼‰çš„æ–¹å‘ã€‚</li><li><strong><code>theta</code>ï¼ˆæ–¹ä½è§’ï¼‰</strong> - è¿™æ˜¯åœ¨XZå¹³é¢ä¸Šï¼Œä»æ­£Zè½´å‘æ­£Xè½´çš„è§’åº¦ã€‚<code>theta</code> çš„èŒƒå›´æ˜¯ä»0åˆ°2Ï€ï¼ˆå³ä»0åˆ°360åº¦ï¼‰ï¼Œå…¶ä¸­0å¼€å§‹äºæ­£Zè½´ï¼Œå¢åŠ æ–¹å‘æ˜¯é€†æ—¶é’ˆï¼ˆä»å±å¹•å‘é‡Œåˆ°å±å¹•å‘å¤–çœ‹ä¸ºæ­£Zæ–¹å‘ï¼‰ã€‚<br>å› æ­¤ï¼Œ<code>Spherical</code> çš„ <code>phi</code> å’Œ <code>theta</code> çš„ç›´è§‚ç†è§£å¦‚ä¸‹ï¼š</li></ol><ul><li><code>phi = 0</code>ï¼šç‚¹ä½äºYè½´çš„æ­£æ–¹å‘ï¼ˆå‘ä¸Šï¼‰ã€‚</li><li><code>phi = Ï€/2</code>ï¼šç‚¹ä½äºXZå¹³é¢ã€‚</li><li><code>phi = Ï€</code>ï¼šç‚¹ä½äºYè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘ä¸‹ï¼‰ã€‚</li><li><code>theta = 0</code>ï¼šç‚¹ä½äºZè½´çš„æ­£æ–¹å‘ï¼ˆå‘å±å¹•å¤–ï¼‰ã€‚</li><li><code>theta = Ï€/2</code>ï¼šç‚¹ä½äºXè½´çš„æ­£æ–¹å‘ï¼ˆå‘å³ï¼‰ã€‚</li><li><code>theta = Ï€</code>ï¼šç‚¹ä½äºZè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘å±å¹•é‡Œï¼‰ã€‚</li><li><code>theta = 3Ï€/2</code>ï¼šç‚¹ä½äºXè½´çš„è´Ÿæ–¹å‘ï¼ˆå‘å·¦ï¼‰ã€‚<br>è¿™ç§çƒåæ ‡ç³»ç»Ÿéå¸¸æœ‰ç”¨äºå¤„ç†ä¸çƒé¢æˆ–è€…ç¯ç»•è¿åŠ¨ç›¸å…³çš„åœºæ™¯ï¼Œå¦‚å¤©ä½“æ¨¡æ‹Ÿã€ç›¸æœºç¯ç»•ç›®æ ‡ç‰©ä½“çš„åŠ¨ä½œç­‰ã€‚</li></ul></blockquote><p>æ­£ç¡®å†™æ³•ï¼š<code>let uv = new Three.Vector2((sph.theta + Math.PI) / (2 * Math.PI), 1 - (sph.phi / Math.PI));</code> </p><p>ä¸ºäº†æ­£ç¡®ç†è§£è¿™æ®µä»£ç  <code>let uv = [(sph.theta + Math.PI) / (2 * Math.PI), 1 - (sph.phi / Math.PI)];</code> å¹¶å°†äºŒç»´è´´å›¾UVæ˜ å°„åˆ°çƒé¢ä¸Šï¼Œè®©æˆ‘ä»¬é€ä¸€åˆ†ææ¯ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p><strong><code>(sph.theta + Math.PI) / (2 * Math.PI)</code></strong>:</p><ul><li><code>sph.theta</code> è¡¨ç¤ºçƒåæ ‡ä¸­çš„æ–¹ä½è§’ï¼Œé€šå¸¸çš„å–å€¼èŒƒå›´æ˜¯ä» 0 åˆ° 2Ï€ï¼Œè¡¨ç¤ºä»æ­£Zè½´é¡ºæ—¶é’ˆåˆ°Xè½´å†å›åˆ°Zè½´çš„å…¨å‘¨è§’åº¦ã€‚</li><li><code>+ Math.PI</code> çš„ä½œç”¨æ˜¯å°†Î¸çš„èµ·å§‹ç‚¹ä»æ­£Zè½´ï¼ˆå‰é¢ï¼‰è°ƒæ•´åˆ°è´ŸZè½´ï¼ˆåé¢ï¼‰ã€‚é€šå¸¸ï¼Œè¿™ç§è°ƒæ•´æ˜¯ä¸ºäº†ä½¿UVæ˜ å°„çš„èµ·ç‚¹å¯¹åº”äºæ¨¡å‹çš„åæ–¹ï¼Œä»è€Œä½¿å¾—å½“æ¨¡å‹å‰å‘æœå‘è§‚å¯Ÿè€…æ—¶ï¼Œè´´å›¾çš„â€œå‰é¢â€èƒ½å¤Ÿæ­£å¯¹è§‚å¯Ÿè€…ã€‚</li><li>é™¤ä»¥ <code>(2 * Math.PI)</code> å°†è°ƒæ•´åçš„Î¸å€¼å½’ä¸€åŒ–åˆ° [0, 1] çš„èŒƒå›´å†…ï¼Œè¿™æ ·å¯ä»¥æ˜ å°„åˆ°è´´å›¾çš„æ°´å¹³åæ ‡Uã€‚</li></ul></li><li><p><strong><code>1 - (sph.phi / Math.PI)</code></strong>:</p><ul><li><code>sph.phi</code> æ˜¯ä»æ­£Yè½´å‘çƒé¢çš„ç‚¹çš„ä»°è§’ï¼Œå–å€¼èŒƒå›´æ˜¯ä» 0 åˆ° Ï€ã€‚</li><li><code>(sph.phi / Math.PI)</code> å°†Ï†å€¼å½’ä¸€åŒ–åˆ° [0, 1] èŒƒå›´å†…ï¼Œå…¶ä¸­0ä»£è¡¨åŒ—æï¼Œ1ä»£è¡¨å—æã€‚</li><li><code>1 -</code> çš„ä½œç”¨æ˜¯åè½¬Våæ ‡ï¼Œä½¿å¾—åœ¨UVè´´å›¾ä¸­ï¼ŒV &#x3D; 0 å¯¹åº”äºçƒä½“çš„åŒ—æï¼ŒV &#x3D; 1 å¯¹åº”äºçƒä½“çš„å—æã€‚è¿™æ ·çš„åè½¬æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°å›¾å½¢å¤„ç†ç³»ç»Ÿä¸­ï¼Œè´´å›¾çš„Våæ ‡ä»ä¸‹åˆ°ä¸Šå¢åŠ ï¼Œè€Œçƒåæ ‡ç³»ç»Ÿä¸­çš„Ï†æ˜¯ä»ä¸Šåˆ°ä¸‹å¢åŠ çš„ã€‚</li></ul></li></ol><p>(Three.jsåœ°ç†åæ ‡å’Œä¸‰ç»´ç©ºé—´åæ ‡çš„è½¬æ¢)[<a href="https://blog.csdn.net/qihoo_tech/article/details/101443066]">https://blog.csdn.net/qihoo_tech/article/details/101443066]</a></p><p><img src="https://s2.loli.net/2024/09/09/pbtr2HfNW7xTSkC.png" alt="image-20240908162225403.png"></p><h2 id="trailæ²¡æ˜¾ç¤ºå‡ºæ¥"><a href="#trailæ²¡æ˜¾ç¤ºå‡ºæ¥" class="headerlink" title="trailæ²¡æ˜¾ç¤ºå‡ºæ¥"></a>trailæ²¡æ˜¾ç¤ºå‡ºæ¥</h2><p>vLineDistance &#x2F;&#x2F; åœ¨ä½¿ç”¨ Three.js çš„ LineDashedMaterial æ—¶ï¼Œç¡®ä¿é¡¶ç‚¹ç€è‰²å™¨æ­£ç¡®åœ°è®¡ç®—å¹¶ä¼ é€’ vLineDistance å˜é‡åˆ°ç‰‡å…ƒç€è‰²å™¨æ˜¯éå¸¸å…³é”®çš„ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡å†³å®šäº†çº¿æ®µçš„è™šçº¿æ•ˆæœã€‚</p><p>åŸå…ˆæ˜¯å†setPathé‡Œä¿®æ”¹ç‚¹çš„ä½ç½®ï¼Œç„¶åè®¡ç®—lineDistanceï¼Œç”±äºlineDistanceè®¡ç®—æœ‰é—®é¢˜ï¼Œæ‰€ä»¥åœ¨fragment shaderé‡Œï¼ŒvLineDistanceå°±éƒ½æ˜¯0</p><p>åœ¨setPathçš„ä»£ç é‡Œï¼Œæ±‚divisionéœ€è¦ç”¨pos.countæ¥-1ï¼Œä¹‹å‰æ˜¯posç›´æ¥-1ï¼Œå¯¼è‡´äº†é”™è¯¯ï¼Œä½¿å¾—trailçš„poséƒ½æ²¡æœ‰æ­£ç¡®æ›´æ–°ï¼›</p><h2 id="æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥"><a href="#æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥" class="headerlink" title="æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥"></a>æŒ‰é’®åˆ‡æ¢æ•ˆæœä¸å‡ºæ¥</h2><p>å¦‚æœåœ¨ <code>useEffect</code> ä¸­çš„ä¾èµ–æ•°ç»„ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰è®¾ç½®ä¸ºç©ºæ•°ç»„ <code>[]</code>ï¼Œè¿™æ„å‘³ç€ <code>useEffect</code> åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šåœ¨ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§æ›´æ–°æ—¶å†æ¬¡è¿è¡Œã€‚è¿™å¸¸ç”¨äºæ‰§è¡Œé‚£äº›åªéœ€ä¸€æ¬¡çš„åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ API è°ƒç”¨æˆ–è®¾ç½®åˆå§‹é…ç½®ã€‚</p><p>åœ¨æ‚¨çš„æƒ…å†µä¸­ï¼Œå¦‚æœ <code>animate</code> å‡½æ•°åœ¨ <code>useEffect</code> å†…å®šä¹‰ï¼Œå¹¶ä¸”ä¾èµ–æ•°ç»„ä¸ºç©ºï¼Œè¿™ä¼šå¯¼è‡´ <code>animate</code> å‡½æ•°æ•è·åˆ°åˆå§‹æ¸²æŸ“æ—¶çš„çŠ¶æ€å€¼ï¼Œä¾‹å¦‚ <code>renderGlithPass</code> çš„åˆå§‹å€¼ï¼ˆ<code>false</code>ï¼‰ã€‚å³ä½¿åç»­ <code>renderGlithPass</code> çŠ¶æ€æ›´æ–°ï¼Œ<code>animate</code> å‡½æ•°ä¸­çš„å€¼ä¹Ÿä¸ä¼šæ›´æ–°ï¼Œå› ä¸º <code>useEffect</code> ä¸ä¼šé‡æ–°æ‰§è¡Œæ¥æ›´æ–°é—­åŒ…ä¸­çš„çŠ¶æ€å€¼ã€‚</p><p>è§£å†³æ–¹æ³•</p><p>è¦è®© <code>animate</code> å‡½æ•°èƒ½å¤Ÿè®¿é—®æœ€æ–°çš„ <code>renderGlithPass</code> çŠ¶æ€ï¼Œæ‚¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p><ol><li><strong>æ›´æ–° <code>useEffect</code> çš„ä¾èµ–æ•°ç»„</strong>ï¼šåœ¨ä¾èµ–æ•°ç»„ä¸­åŒ…å« <code>renderGlithPass</code>ï¼Œè¿™æ ·æ¯æ¬¡ <code>renderGlithPass</code> æ”¹å˜æ—¶ï¼Œ<code>useEffect</code> éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œ<code>animate</code> å‡½æ•°ä¹Ÿå°†é‡æ–°å®šä¹‰ï¼Œä»è€Œæ•è·åˆ°æœ€æ–°çš„çŠ¶æ€å€¼ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(renderGlithPass);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> animationId = <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">cancelAnimationFrame</span>(animationId);</span><br><span class="line">&#125;, [renderGlithPass]); <span class="comment">// ç°åœ¨åŒ…å« renderGlithPass ä½œä¸ºä¾èµ–</span></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ä½¿ç”¨ <code>useRef</code> è¿½è¸ªæœ€æ–°çš„çŠ¶æ€</strong>ï¼šå¦‚ä¹‹å‰æ‰€è¿°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>useRef</code> æ¥è¿½è¸ª <code>renderGlithPass</code> çš„æœ€æ–°å€¼ï¼Œè¿™æ · <code>animate</code> å‡½æ•°å¯ä»¥é€šè¿‡ ref è®¿é—®å½“å‰çš„çŠ¶æ€ï¼Œè€Œæ— éœ€é‡æ–°å®šä¹‰ <code>animate</code> å‡½æ•°ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> renderGlithPassRef = <span class="title function_">useRef</span>(renderGlithPass);</span><br><span class="line">renderGlithPassRef.<span class="property">current</span> = renderGlithPass;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(renderGlithPassRef.<span class="property">current</span>); <span class="comment">// ä½¿ç”¨ ref è®¿é—®æœ€æ–°çŠ¶æ€</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> animationId = <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">cancelAnimationFrame</span>(animationId);</span><br><span class="line">&#125;, []); <span class="comment">// ä¾èµ–æ•°ç»„ä»ç„¶ä¸ºç©º</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜åŠ¿ï¼Œé€‰æ‹©å“ªä¸€ç§å–å†³äºæ‚¨çš„å…·ä½“éœ€æ±‚å’Œç»„ä»¶çš„å…¶ä»–é€»è¾‘ã€‚å¦‚æœ <code>animate</code> å‡½æ•°å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜å¹¶ä¸”çŠ¶æ€æ›´æ–°é¢‘ç¹ï¼Œä½¿ç”¨ <code>useRef</code> å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœçŠ¶æ€æ›´æ–°å¯¹ <code>animate</code> çš„å½±å“æ¯”è¾ƒå¤§ï¼Œå¹¶ä¸”ç¡®ä¿æ¯æ¬¡éƒ½æ˜¯æœ€æ–°çš„çŠ¶æ€å¾ˆé‡è¦ï¼Œé‚£ä¹ˆæ›´æ–° <code>useEffect</code> çš„ä¾èµ–æ•°ç»„å¯èƒ½æ›´é€‚åˆã€‚</p><h2 id="animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°"><a href="#animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°" class="headerlink" title="animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°"></a>animateé‡Œçš„renderGlithPassæ€»æ˜¯falseï¼Œæœªæ›´æ–°</h2><p>åœ¨ä½ çš„Reactä»£ç ä¸­ï¼Œä½ é‡åˆ°çš„é—®é¢˜æ˜¯ç”±äºé—­åŒ…ï¼ˆclosureï¼‰å¼•èµ·çš„ã€‚åœ¨JavaScriptå’ŒReactä¸­ï¼Œé—­åŒ…ä¼šæ•è·å®ƒä»¬åˆ›å»ºæ—¶çš„ç¯å¢ƒçŠ¶æ€ã€‚å½“ä½ åœ¨ <code>useEffect</code> é’©å­é‡Œè°ƒç”¨ <code>animate()</code> å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå‡½æ•°è¢«â€œå›ºå®šâ€åœ¨äº†é‚£ä¸€åˆ»çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ <code>renderGlithPass</code> çš„å€¼ã€‚</p><p>å› ä¸º <code>useEffect</code> ä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆå› ä¸ºå®ƒçš„ä¾èµ–åˆ—è¡¨æ˜¯ç©ºçš„ <code>[]</code>ï¼‰ï¼Œæ‰€ä»¥ <code>animate</code> å‡½æ•°åªä¼šæ•è· <code>renderGlithPass</code> æœ€åˆçš„å€¼ï¼Œå³ <code>false</code>ã€‚ä¹‹åå³ä½¿çŠ¶æ€æ›´æ–°äº†ï¼Œ<code>animate</code> å‡½æ•°ä¸­æ•è·çš„ <code>renderGlithPass</code> çš„å€¼ä»ç„¶æ˜¯æœ€åˆçš„ <code>false</code>ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ <code>useRef</code> é’©å­æ¥æŒä¹…åŒ– <code>renderGlithPass</code> çš„å€¼ï¼Œè¿™æ · <code>animate</code> å‡½æ•°æ€»æ˜¯èƒ½è·å–åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚è¿™é‡Œæ˜¯å¦‚ä½•ä¿®æ”¹ä½ çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> [renderGlitchPass, setRenderGlitchPass] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> renderGlitchPassRef = <span class="title function_">useRef</span>(renderGlitchPass);  <span class="comment">// ä½¿ç”¨ useRef æ¥æŒä¹…åŒ–çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  renderGlitchPassRef.<span class="property">current</span> = renderGlitchPass;  <span class="comment">// æ›´æ–° ref çš„å€¼</span></span><br><span class="line">&#125;, [renderGlitchPass]);  <span class="comment">// æ¯å½“ renderGlitchPass æ›´æ–°æ—¶ï¼Œæ›´æ–° ref</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable constant_">TWEEN</span>.<span class="title function_">update</span>();</span><br><span class="line">    earth.<span class="property">rotation</span>.<span class="property">y</span> += <span class="number">0.001</span>;</span><br><span class="line">    renderer &amp;&amp; scene &amp;&amp; camera &amp;&amp; renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ ref çš„ current å€¼æ¥è·å–æœ€æ–°çŠ¶æ€</span></span><br><span class="line">    renderGlitchPassRef.<span class="property">current</span> &amp;&amp; composer.<span class="title function_">render</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">animate</span>();  <span class="comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯</span></span><br><span class="line">&#125;, []);  <span class="comment">// ç©ºä¾èµ–åˆ—è¡¨ï¼Œä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleStartButtonClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setRenderGlitchPass</span>(!renderGlitchPass);  <span class="comment">// åˆ‡æ¢çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜-ç¬¬ä¸€æ‰¹&quot;&gt;&lt;a href=&quot;#é—®é¢˜-ç¬¬ä¸€æ‰¹&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜(ç¬¬ä¸€æ‰¹)&quot;&gt;&lt;/a&gt;é—®é¢˜(ç¬¬ä¸€æ‰¹)&lt;/h1&gt;&lt;h2 id=&quot;çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥&quot;&gt;&lt;a href=&quot;#çƒä½“çš„é™†åœ°å’Œæµ·æ´‹å¹¶æ²¡æœ‰åŒºåˆ†å‡ºæ¥&quot; cla</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/09/17/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%953/"/>
    <id>https://youxt-njnu.github.io/2024/09/17/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%953/</id>
    <published>2024-09-17T10:02:05.000Z</published>
    <updated>2024-10-05T12:05:02.997Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="æœºç”²é£headå’Œcard"><a href="#æœºç”²é£headå’Œcard" class="headerlink" title="æœºç”²é£headå’Œcard"></a>æœºç”²é£headå’Œcard</h1><p>æ–°å»ºconstant.jsï¼Œå­˜æ”¾ä¸€äº›å›ºå®šçš„å†…å®¹æ–‡æœ¬æ•°ç»„ï¼›</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> weekMap =&#123;...&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> tips = [...];</span><br></pre></td></tr></table></figure><p>è®¾ç½®stateå­˜æ”¾æ˜¾ç¤ºçš„å†…å®¹ï¼›<br>åœ¨ React ä¸­ï¼Œç»„ä»¶å¯ä»¥æ˜¯ç±»ç»„ä»¶æˆ–å‡½æ•°å¼ç»„ä»¶ã€‚åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œä¼ ç»Ÿçš„ç±»ç»„ä»¶ä¸­çš„ state å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢« React Hooks æä¾›çš„åŠŸèƒ½æ‰€æ›¿ä»£ã€‚æœ€å¸¸ç”¨çš„ Hook æ˜¯ useStateï¼Œå®ƒç”¨äºåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [week, setWeek] = <span class="title function_">useState</span>(weekMap[<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDay</span>()]);</span><br><span class="line"><span class="keyword">const</span> [time, setTime] = <span class="title function_">useState</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>());</span><br><span class="line"><span class="keyword">const</span> [showModal, setShowModal] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> [modelText, setModelText] = <span class="title function_">useState</span>(tips[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">const</span> [renderGlithPass, setRenderGlithPass] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>headerç»“æ„</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&quot;hud-header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;`$&#123;week&#125;æ›œæ—¥`&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;time&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Kepler-90 +49Â°18â€²18.58â€³<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure><p>scssé‡Œå†™clip-path</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">  <span class="variable">$yellow-color</span>: <span class="number">#f9f002</span>;</span><br><span class="line">  <span class="variable">$border-color</span>: <span class="number">#8ae66e</span>;</span><br><span class="line">  <span class="variable">$blue-color</span>: <span class="number">#00e6f6</span>;</span><br><span class="line">  <span class="variable">$header-height</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="variable">$aside-width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="variable">$glitched-duration</span>: <span class="number">0.9s</span>;</span><br><span class="line">  <span class="variable">$clip-height</span>: <span class="number">18px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.earth-digital</span> &#123;</span><br><span class="line">  <span class="comment">// overflow: hidden; // è¿™æ ·å­å°±æ²¡æœ‰äº†å³ä¾§æ‹–åŠ¨æ¡ï¼Œå¤šå‡ºæ¥çš„ç›´æ¥æ¶ˆå¤±äº†</span></span><br><span class="line">  <span class="comment">// user-select: none; // ç¦æ­¢é€‰ä¸­æ–‡å­—</span></span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">0.85</span>); <span class="comment">// é¥±å’Œåº¦ ä½“ç°åœ¨å“ªå„¿ï¼Ÿï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hud</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  &amp;<span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="variable">$header-height</span>;</span><br><span class="line">    <span class="attribute">color</span>: black; <span class="comment">// é‡Œé¢çš„æ–‡å­—é¢œè‰²</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">$yellow-color</span>; <span class="comment">// header çš„èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;<span class="variable">$clip-height</span>&#125;),<span class="number">75%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;), <span class="number">72.5%</span> <span class="number">100%</span>, <span class="number">27.5%</span> <span class="number">100%</span>, <span class="number">25%</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;),<span class="number">0</span> <span class="built_in">calc</span>(<span class="number">100%</span> - #&#123;$clip-height&#125;),<span class="number">0</span> <span class="number">0</span>); <span class="comment">// ä½¿ç”¨calcçš„æ—¶å€™ï¼Œé‡Œé¢æ“ä½œç¬¦å‰åè¦æœ‰ç©ºæ ¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/09/11/ZL9FgtrxEBW2ame.jpg" alt="27e2baa8c3a79d08953b367291a0195.jpg"></p><p>logoå’Œasideéƒ¨åˆ†çš„ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div className=&quot;logo-pic&quot; title=&#x27;Cyberpunk 2077&#x27;&gt;&lt;/div&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside left&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse&quot;&gt;</span><br><span class="line">    &lt;div className=&quot;cover&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">      &lt;p&gt;&lt;b&gt;Cyberpunk&lt;/b&gt; is a subgenre of science fiction in a dystopian futuristic setting that tends to focus on a &quot;combination of lowlife and high tech&quot;, featuring futuristic technological and scientific achievements, such as artificial intelligence and cybernetics, juxtaposed with societal collapse or decay. &lt;/p&gt;</span><br><span class="line">      &lt;button&gt;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside right&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br></pre></td></tr></table></figure><h1 id="buttonç‚¹å‡»åå‡ºç°æ•…éšœé£"><a href="#buttonç‚¹å‡»åå‡ºç°æ•…éšœé£" class="headerlink" title="buttonç‚¹å‡»åå‡ºç°æ•…éšœé£"></a>buttonç‚¹å‡»åå‡ºç°æ•…éšœé£</h1><p>ç‚¹å‡»è§¦å‘å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const handleStartButtonClick = () =&gt; &#123;</span><br><span class="line">    setRenderGlithPass(!renderGlithPass);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>åŠ¨ç”»ä¸­æ›´æ–°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const animate = () =&gt; &#123;</span><br><span class="line"> ......</span><br><span class="line">  renderGlithPass &amp;&amp; composer.render();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åå¤„ç†æ•ˆæœ"><a href="#åå¤„ç†æ•ˆæœ" class="headerlink" title="åå¤„ç†æ•ˆæœ"></a>åå¤„ç†æ•ˆæœ</h2><p>å¯¼å…¥composerå’Œpass</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">EffectComposer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/EffectComposer.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RenderPass</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/RenderPass.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GlitchPass</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/postprocessing/GlitchPass.js&#x27;</span>;</span><br></pre></td></tr></table></figure><p>initThreeé‡Œåˆå§‹åŒ–</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">composer = <span class="keyword">new</span> <span class="title class_">EffectComposer</span>(renderer);</span><br><span class="line">composer.<span class="title function_">addPass</span>(<span class="keyword">new</span> <span class="title class_">RenderPass</span>(scene, camera));</span><br><span class="line">composer.<span class="title function_">addPass</span>(<span class="keyword">new</span> <span class="title class_">GlitchPass</span>());</span><br></pre></td></tr></table></figure><h2 id="btnçš„æ ·å¼"><a href="#btnçš„æ ·å¼" class="headerlink" title="btnçš„æ ·å¼"></a>btnçš„æ ·å¼</h2><p>åˆ©ç”¨linear-gradientï¼Œå®ç°äº†45åº¦æ–¹å‘ä¸Šï¼Œä»é€æ˜åˆ°çº¢è‰²çš„æŒ‰é’®çš„çªå˜ï¼ˆ5%ï¼Œ5%ï¼‰ï¼Œè¿™ä¸ªå’Œã€ŠCSSæ­ç§˜ã€‹é‡Œçš„å†…å®¹å‘¼åº”äº†ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.startBtn</span>,</span><br><span class="line"><span class="selector-class">.startBtn</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, transparent <span class="number">5%</span>, <span class="number">#FF013C</span> <span class="number">5%</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">0.2em</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span> $blue-color;</span><br><span class="line">  <span class="attribute">outline</span>: transparent;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="echarts"><a href="#echarts" class="headerlink" title="echarts"></a>echarts</h1><p><a href="https://echarts.apache.org/handbook/zh/basics/import/">https://echarts.apache.org/handbook/zh/basics/import/</a></p><p>æŒ‰éœ€å¼•å…¥ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ echarts æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—æä¾›äº† echarts ä½¿ç”¨å¿…é¡»è¦çš„æ¥å£ã€‚</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts/core&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æŸ±çŠ¶å›¾å›¾è¡¨ï¼Œå›¾è¡¨åç¼€éƒ½ä¸º Chart</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BarChart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/charts&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æ ‡é¢˜ï¼Œæç¤ºæ¡†ï¼Œç›´è§’åæ ‡ç³»ï¼Œæ•°æ®é›†ï¼Œå†…ç½®æ•°æ®è½¬æ¢å™¨ç»„ä»¶ï¼Œç»„ä»¶åç¼€éƒ½ä¸º Component</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/components&#x27;</span>;</span><br><span class="line"><span class="comment">// æ ‡ç­¾è‡ªåŠ¨å¸ƒå±€ã€å…¨å±€è¿‡æ¸¡åŠ¨ç”»ç­‰ç‰¹æ€§</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LabelLayout</span>, <span class="title class_">UniversalTransition</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/features&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥ Canvas æ¸²æŸ“å™¨ï¼Œæ³¨æ„å¼•å…¥ CanvasRenderer æˆ–è€… SVGRenderer æ˜¯å¿…é¡»çš„ä¸€æ­¥</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CanvasRenderer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/renderers&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œå¿…é¡»çš„ç»„ä»¶</span></span><br><span class="line">echarts.<span class="title function_">use</span>([</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span>,</span><br><span class="line">  <span class="title class_">BarChart</span>,</span><br><span class="line">  <span class="title class_">LabelLayout</span>,</span><br><span class="line">  <span class="title class_">UniversalTransition</span>,</span><br><span class="line">  <span class="title class_">CanvasRenderer</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>æ„å»ºæ•°æ® constant.js</p><p>å¯¼å…¥ï¼š<br><code>import &#123; chart_1_option, chart_2_option, chart_3_option, chart_4_option, chart_5_option, weekMap, tips &#125; from &#39;@/containers/EarthDigital/scripts/config&#39;;</code></p><p>åˆå§‹åŒ–chart</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const chart_1 = echarts.init(document.getElementsByClassName(&#x27;chart_1&#x27;)[0], &#x27;dark&#x27;);</span><br><span class="line">   chart_1 &amp;&amp; chart_1.setOption(chart_1_option);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨useRefè¿›è¡Œç®€åŒ–</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let chartsRef = Array.from(&#123; length: 5 &#125;).map(() =&gt; useRef(null));</span><br><span class="line">const initChart = () =&gt; &#123;</span><br><span class="line">  const chartsOption = [chart_1_option, chart_2_option, chart_3_option, chart_4_option, chart_5_option];</span><br><span class="line">  const charts = chartsRef.map(ref =&gt; ref.current &amp;&amp; echarts.init(ref.current, &#x27;dark&#x27;));</span><br><span class="line">  charts.forEach((chart, idx) =&gt; &#123;</span><br><span class="line">    chart &amp;&amp; chart.setOption(chartsOption[idx]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åçš„aside</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;aside className=&quot;hud aside left&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box box_0 inverse&quot;&gt;</span><br><span class="line">    &lt;div className=&quot;cover&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div className=&quot;info&quot;&gt;</span><br><span class="line">      &lt;p className=&#x27;text&#x27;&gt;&lt;b&gt;Cyberpunk&lt;/b&gt; is a subgenre of science fiction in a dystopian futuristic setting that tends to focus on a &quot;combination of lowlife and high tech&quot;, featuring futuristic technological and scientific achievements, such as artificial intelligence and cybernetics, juxtaposed with societal collapse or decay. &lt;/p&gt;</span><br><span class="line">      &lt;button className=&quot;startBtn&quot; onClick=&#123;handleStartButtonClick&#125;&gt;START&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[0]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[1]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br><span class="line">&lt;aside className=&quot;hud aside right&quot;&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[2]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[3]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div className=&quot;box inverse dotted&quot;&gt;&lt;div className=&quot;chart&quot; ref=&#123;chartsRef[4]&#125;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/aside&gt;</span><br></pre></td></tr></table></figure><p>echartsé‡Œçš„optioné…ç½®</p><p><img src="https://s2.loli.net/2024/09/26/29DpPhmGLj16kyb.jpg" alt="7d30adb4f9c8155b133b9b7b6a939fa.jpg"></p><p>æ³¨æ„ï¼šæ¯ä¸€ç§å›¾è¡¨å½¢å¼çš„ä½¿ç”¨ï¼Œéƒ½è¦æŒ‰éœ€å¯¼å…¥ï¼›</p><p>é’ˆå¯¹areaStyleé‡Œçš„é¢œè‰²ï¼Œå¯ä»¥ä¸å¯¼å…¥echartsï¼Œç›´æ¥colorStopsæ¥å®ç°ï¼›</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥ï¼š</span></span><br><span class="line"><span class="attr">areaStyle</span>: &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.8</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [&#123;</span><br><span class="line">      <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;rgb(128, 255, 165)&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">offset</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;rgb(1, 191, 236)&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ])</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹åï¼š</span></span><br><span class="line"><span class="attr">areaStyle</span>: &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.8</span>,</span><br><span class="line">  <span class="attr">color</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;linear&#x27;</span>, <span class="comment">// çº¿æ€§æ¸å˜</span></span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">x2</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y2</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">colorStops</span>: [</span><br><span class="line">      &#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgb(255, 191, 0)&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;rgb(224, 62, 76)&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="cssåŠ¨ç”»"><a href="#cssåŠ¨ç”»" class="headerlink" title="cssåŠ¨ç”»"></a>cssåŠ¨ç”»</h1><p>.ã€‚ã€‚ã€‚ã€‚ã€‚å¾…æ›´æ–°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><h2 id="è¡¥å……-clip-pathå±æ€§"><a href="#è¡¥å……-clip-pathå±æ€§" class="headerlink" title="è¡¥å…… | clip-pathå±æ€§"></a>è¡¥å…… | clip-pathå±æ€§</h2><p>CSS ä¸­çš„ <code>clip-path</code> å±æ€§å…è®¸ä½ å®šä¹‰ä¸€ä¸ªå…ƒç´ çš„å¯è§åŒºåŸŸã€‚é€šè¿‡è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œåœ¨è¿™ä¸ªè·¯å¾„å†…çš„å†…å®¹ä¼šè¢«æ˜¾ç¤ºï¼Œè€Œè·¯å¾„å¤–çš„å†…å®¹åˆ™ä¼šè¢«éšè—ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥åˆ›å»ºå„ç§å¤æ‚çš„å½¢çŠ¶å’ŒåŠ¨æ€æ•ˆæœã€‚</p><ol><li><p><strong>åˆ›å»ºå¤æ‚å½¢çŠ¶</strong>ï¼šä½¿ç”¨ <code>clip-path</code>ï¼Œä½ å¯ä»¥è½»æ¾åˆ›å»ºåœ†å½¢ã€æ¤­åœ†ã€å¤šè¾¹å½¢æˆ–è€…è‡ªå®šä¹‰è·¯å¾„ï¼ˆä½¿ç”¨ SVG è·¯å¾„è¯­æ³•ï¼‰ç­‰å½¢çŠ¶ã€‚è¿™å¯¹äºè®¾è®¡å…ˆè¿›çš„ç”¨æˆ·ç•Œé¢å’Œç‰¹æ®Šçš„å›¾å½¢æ•ˆæœéå¸¸æœ‰ç”¨ã€‚</p></li><li><p><strong>äº¤äº’æ•ˆæœ</strong>ï¼šä½ å¯ä»¥ç»“åˆåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœä½¿ç”¨ <code>clip-path</code>ï¼Œä»¥å®ç°è§†è§‰ä¸Šå¸å¼•äººçš„äº¤äº’åŠ¨ç”»ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æ‚¬åœæˆ–ç‚¹å‡»å…ƒç´ æ—¶æ”¹å˜ <code>clip-path</code> çš„å½¢çŠ¶ã€‚</p></li><li><p><strong>æ©ç›–å’Œæ˜¾ç¤ºå†…å®¹</strong>ï¼šå®ƒå¯ä»¥è¢«ç”¨æ¥æ©ç›–å…ƒç´ çš„æŸéƒ¨åˆ†æˆ–åªæ˜¾ç¤ºæŸéƒ¨åˆ†ï¼Œè¿™åœ¨åˆ›å»ºä»ªè¡¨æ¿ã€å¡ç‰‡æˆ–å…¶ä»–åŒ…å«éšè—è¯¦ç»†ä¿¡æ¯çš„ç•Œé¢å…ƒç´ æ—¶å°¤å…¶æœ‰ç”¨ã€‚</p></li></ol><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š<br>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: shape | none;</span><br></pre></td></tr></table></figure><br>  å…¶ä¸­ <code>shape</code> å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ul><li><p><strong>åœ†å½¢</strong>ï¼ˆ<code>circle()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">circle</span>(<span class="number">50%</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªåœ†å½¢å‰ªè£åŒºåŸŸï¼Œå…¶ä¸­ <code>50%</code> æ˜¯åœ†çš„åŠå¾„ã€‚</p></li><li><p><strong>æ¤­åœ†</strong>ï¼ˆ<code>ellipse()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">ellipse</span>(<span class="number">50%</span> <span class="number">25%</span>);</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªæ¤­åœ†å‰ªè£åŒºåŸŸï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå€¼æ˜¯æ°´å¹³åŠå¾„ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯å‚ç›´åŠå¾„ã€‚</p></li><li><p><strong>å¤šè¾¹å½¢</strong>ï¼ˆ<code>polygon()</code>ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">50%</span> <span class="number">0%</span>, <span class="number">100%</span> <span class="number">50%</span>, <span class="number">50%</span> <span class="number">100%</span>, <span class="number">0%</span> <span class="number">50%</span>);</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªè±å½¢å‰ªè£åŒºåŸŸï¼Œæ¯ä¸ªç™¾åˆ†æ¯”å¯¹æ˜¯å¤šè¾¹å½¢ä¸€ä¸ªé¡¶ç‚¹çš„åæ ‡ã€‚</p></li><li><p><strong>ä½¿ç”¨ URL</strong>ï¼ˆSVG å‰ªè£è·¯å¾„ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">url</span>(<span class="string">#clip-shape</span>);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ <code>#clip-shape</code> æ˜¯ SVG å†…çš„ <code>&lt;clipPath&gt;</code> å…ƒç´ çš„ IDï¼Œå…è®¸ä½ ä½¿ç”¨ SVG çš„å¤æ‚è·¯å¾„å®šä¹‰å‰ªè£å½¢çŠ¶ã€‚</p></li></ul><p>é€šè¿‡ä½¿ç”¨ <code>clip-path</code>ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä¸éœ€è¦é¢å¤–å›¾åƒæˆ– SVG æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨ CSS ä¸­åˆ›å»ºè§†è§‰ä¸Šå¸å¼•äººçš„å½¢çŠ¶å’Œæ•ˆæœã€‚è¿™ä½¿å¾—é¡µé¢åŠ è½½æ›´å¿«ï¼Œä¹Ÿä½¿å¾—åŠ¨æ€æ•ˆæœçš„å®ç°æ›´ä¸ºç®€ä¾¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/09/11/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%952/"/>
    <id>https://youxt-njnu.github.io/2024/09/11/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%952/</id>
    <published>2024-09-11T02:02:05.000Z</published>
    <updated>2024-10-05T12:02:34.246Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="è°ƒè¯•å·¥å…·"><a href="#è°ƒè¯•å·¥å…·" class="headerlink" title="è°ƒè¯•å·¥å…·"></a>è°ƒè¯•å·¥å…·</h1><p>ğŸ” åè¯2-callback ğŸµ</p><ul><li>unformsç»Ÿä¸€å­˜shaderé‡Œuniformçš„åˆå§‹å€¼</li></ul><p>ğŸ” åè¯1-callback ğŸµ</p><ul><li>æ„é€ ä½äºåŠå¾„ä¸º5çš„çƒé¢ä¸Šçš„å†²å‡»ç‚¹ã€å†²å‡»æœ€å¤§åŠå¾„ã€å†²å‡»æ¯”ä¾‹ã€ä¹‹å‰çš„ç‚¹ä½ç½®ã€é£çº¿çš„æ¯”ä¾‹å’Œé•¿åº¦</li></ul><p>å®‰è£…dat.guiçš„åº“ï¼š<code>npm i dat.gui @types/dat.gui</code></p><p>æ·»åŠ è¿›å…¥guiï¼›</p><p>guiè®¾ç½®éšè—ï¼Œé€šè¿‡é”®ç›˜Hé”®å”¤èµ·ï¼›</p><h1 id="é£çº¿"><a href="#é£çº¿" class="headerlink" title="é£çº¿"></a>é£çº¿</h1><p>ğŸ” åè¯1-callback ğŸµ</p><ul><li>å–æ¶ˆæ³¨é‡Š</li></ul><p><img src="C:\Users\Xiangting\AppData\Roaming\Typora\typora-user-images\image-20240913170816909.png" alt="image-20240913170816909"></p><h3 id="åˆ¶ä½œé£çº¿"><a href="#åˆ¶ä½œé£çº¿" class="headerlink" title="åˆ¶ä½œé£çº¿"></a>åˆ¶ä½œé£çº¿</h3><p>åˆå§‹åŒ–100ä¸ªç‚¹ï¼Œå¾—åˆ°ä¸€æ¡è·¯å¾„ï¼›æ·»åŠ indexå±æ€§ï¼Œå½¢æˆèµ·æ­¢æ­£ç¡®çš„è·¯å¾„ï¼ŒåŠ å…¥trails</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">makeTrail</span> (idx) &#123;</span><br><span class="line">  <span class="keyword">let</span> pts = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>*<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">0</span>); </span><br><span class="line">  <span class="keyword">let</span> g = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferGeometry</span>();</span><br><span class="line">  g.<span class="title function_">setAttribute</span>(<span class="string">&quot;position&quot;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Float32BufferAttribute</span>(pts,<span class="number">3</span>));</span><br><span class="line">  <span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">LineDashedMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: params.<span class="property">colors</span>.<span class="property">gradOuter</span>,</span><br><span class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">onBeforeCompile</span>: <span class="function"><span class="params">shader</span> =&gt;</span> &#123;</span><br><span class="line">      shader.<span class="property">uniforms</span>.<span class="property">actionRatio</span> = impacts[idx].<span class="property">trailRatio</span>;</span><br><span class="line">      shader.<span class="property">uniforms</span>.<span class="property">lineLength</span> = impacts[idx].<span class="property">trailLength</span>;</span><br><span class="line">      shader.<span class="property">fragmentShader</span> = lineFragmentShader;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Line</span>(g,m);</span><br><span class="line">  l.<span class="property">userData</span>.<span class="property">idx</span> = idx;</span><br><span class="line">  <span class="title function_">setPath</span>(l,impacts[idx].<span class="property">prevPosition</span>,impacts[idx].<span class="property">impactPosition</span>);</span><br><span class="line">  trails.<span class="title function_">push</span>(l);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®è·¯å¾„ä¸Šç‚¹çš„ä½ç½®å’Œé•¿åº¦ï¼šä¼ å…¥å½“å‰è·¯å¾„ã€èµ·ç‚¹ã€ç»ˆç‚¹ã€å³°é«˜ã€å‡ºç°åç»è¿‡å‡ æ¬¡å¼§åº¦å†è¿›å…¥åæ¶ˆå¤±</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setPath</span> = (<span class="params">l, startPoint, endPoint, peakHeight,cycles</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> pos = l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">position</span>; <span class="comment">//é¢„å­˜ç‚¹çš„æœ€æ–°ä½ç½®</span></span><br><span class="line">  <span class="keyword">let</span> division = pos - <span class="number">1</span>; <span class="comment">//lä¸Šçš„åˆ†æ®µæ•°ç›®</span></span><br><span class="line">  <span class="keyword">let</span> cycle = cycles || <span class="number">1</span>; <span class="comment">// cycle=4:â†·â†·â†·â†·</span></span><br><span class="line">  <span class="keyword">let</span> peak = peakHeight || <span class="number">1</span>; <span class="comment">//å³°é«˜</span></span><br><span class="line">  <span class="keyword">let</span> radius = startPoint.<span class="title function_">length</span>(); <span class="comment">// å¯¹åº”çƒçš„åŠå¾„</span></span><br><span class="line">  <span class="keyword">let</span> angle = startPoint.<span class="title function_">angleTo</span>(endPoint); <span class="comment">//èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„å¤¹è§’</span></span><br><span class="line">  <span class="keyword">let</span> arcLength = radius * angle; <span class="comment">//å¼§é•¿</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> diameterMinor = arcLength / <span class="title class_">Math</span>.<span class="property">PI</span>; <span class="comment">// æ–°åœ†çš„ç›´å¾„</span></span><br><span class="line">  <span class="keyword">let</span> radiusMinor = diameterMinor / <span class="number">2</span> / cycle; <span class="comment">// è€ƒè™‘cycleä¸‹æ–°åœ†çš„åŠå¾„</span></span><br><span class="line">  <span class="keyword">let</span> peakRatio = peak / diameterMinor; <span class="comment">// å³°é«˜æ¯”ä¾‹</span></span><br><span class="line">  <span class="keyword">let</span> radiusMajor = radius + radiusMinor; <span class="comment">// å¤§åœ†çš„åŠå¾„</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> basisMajor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">setLength</span>(radiusMajor); <span class="comment">// trailçš„ç‚¹åŸºå‡†1</span></span><br><span class="line">  <span class="keyword">let</span> basisMinor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">negate</span>().<span class="title function_">setLength</span>(radiusMinor); <span class="comment">// trailçš„ç‚¹åŸºå‡†2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tri = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Triangle</span>(startPoint, endPoint, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>()); <span class="comment">// ä¸‰è§’å½¢</span></span><br><span class="line">  <span class="keyword">let</span> nrm = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  tri.<span class="title function_">getNormal</span>(nrm); <span class="comment">// æ‹¿åˆ°æ³•çº¿</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> v3Major = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">//é‡Œé¢çš„v3è¡¨ç¤ºvec3 </span></span><br><span class="line">  <span class="keyword">let</span> v3Minor = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  <span class="keyword">let</span> v3Inter = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>();</span><br><span class="line">  <span class="keyword">let</span> vFinal = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">// é‡Œé¢vä¹Ÿå¯ç†è§£ä¸ºvarying</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;=division;i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> divisionRatio = i / division; <span class="comment">// åˆ†æ®µæ¯”ä¾‹</span></span><br><span class="line">    <span class="keyword">let</span> angleValue = divisionRatio * angle; <span class="comment">// åˆ†æ®µè§’åº¦</span></span><br><span class="line">    v3Major.<span class="title function_">copy</span>(basisMajor).<span class="title function_">applyAxisAngle</span>(nrm, angleValue); <span class="comment">// åœ¨basisMajorçš„åŸºç¡€ä¸Šç»•ç€æ³•çº¿æ—‹è½¬</span></span><br><span class="line">    v3Minor.<span class="title function_">copy</span>(basisMinor).<span class="title function_">applyAxisAngle</span>(nrm, angleValue+<span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>*divisionRatio*cycle); <span class="comment">// åœ¨basisMinorçš„åŸºç¡€ä¸Šç»•ç€æ³•çº¿æ—‹è½¬</span></span><br><span class="line">    v3Inter.<span class="title function_">addVectors</span>(v3Major, v3Minor); <span class="comment">// ä¸¤ä¸ªå‘é‡ç›¸åŠ </span></span><br><span class="line">    <span class="keyword">let</span> newLength = (v3Inter.<span class="title function_">length</span>() - radius) * peakRatio + radius; <span class="comment">// æ–°çš„é•¿åº¦</span></span><br><span class="line">    vFinal.<span class="title function_">copy</span>(v3Inter).<span class="title function_">setLength</span>(newLength); <span class="comment">// è®¾ç½®æ–°çš„é•¿åº¦</span></span><br><span class="line">    pos.<span class="title function_">setXYZ</span>(i,vFinal.<span class="property">x</span>,vFinal.<span class="property">y</span>,vFinal.<span class="property">z</span>); <span class="comment">// è®¾ç½®æ–°çš„ä½ç½®</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ›´æ–°å®Œäº†ç‚¹æ•°æ®åéœ€è¦åŠ ä¸Šè¿™å¥</span></span><br><span class="line">  pos.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  l.<span class="title function_">computeLineDistances</span>();  <span class="comment">// è®¡ç®—æ¯ä¸ªé¡¶ç‚¹åˆ°èµ·ç‚¹çš„ç´¯åŠ è·ç¦»</span></span><br><span class="line">  l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br><span class="line">  impacts[l.<span class="property">userData</span>.<span class="property">idx</span>].<span class="property">trailLength</span>.<span class="property">value</span> = l.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">array</span>[<span class="number">99</span>];</span><br><span class="line">  l.<span class="property">material</span>.<span class="property">dashSize</span> = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/28/GWszxuwCZIaV1EB.png" alt="202408281104602.png"></p><h4 id="é£çº¿shader"><a href="#é£çº¿shader" class="headerlink" title="é£çº¿shader"></a>é£çº¿shader</h4><p>ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ä½ çš„ Vite é…ç½®ä¸­æ·»åŠ å¯¹ <code>.glsl</code> æ–‡ä»¶çš„æ”¯æŒçš„æ­¥éª¤ï¼š</p><ol><li>å®‰è£… <code>vite-plugin-glsl</code>ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vite-plugin-glsl</span><br></pre></td></tr></table></figure></li><li>åœ¨ä½ çš„ Vite é…ç½®æ–‡ä»¶ä¸­ï¼ˆé€šå¸¸æ˜¯ <code>vite.config.js</code> æˆ– <code>vite.config.ts</code>ï¼‰æ·»åŠ æ’ä»¶ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">import glsl from &#x27;vite-plugin-glsl&#x27;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line"> Â plugins: [</span><br><span class="line"> Â  Â vue(),</span><br><span class="line"> Â  Â glsl()</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>è¿™æ ·é…ç½®åï¼Œå½“ä½ å¯¼å…¥ <code>.glsl</code> æ–‡ä»¶æ—¶ï¼Œ<code>vite-plugin-glsl</code> å°†è‡ªåŠ¨å¤„ç†å®ƒä»¬ï¼Œç¡®ä¿ GLSL ä»£ç è¢«ä½œä¸ºå­—ç¬¦ä¸²æ­£ç¡®å¯¼å…¥ï¼Œé¿å… JavaScript è§£æé”™è¯¯ã€‚</p><p>ç¡®ä¿åœ¨ä½ çš„ Vue ç»„ä»¶æˆ– JavaScript æ–‡ä»¶ä¸­æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼å¯¼å…¥ <code>.glsl</code> æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import textFragmentShader from &#x27;./Shader/text.frag.glsl&#x27;</span><br><span class="line">import textVertexShader from &#x27;./Shader/text.vert.glsl&#x27;</span><br></pre></td></tr></table></figure><p>è¿™äº›æ–‡ä»¶ç°åœ¨åº”è¯¥ä¼šè¢«æ­£ç¡®åœ°ä½œä¸ºå­—ç¬¦ä¸²å¯¼å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åœ¨ Three.js çš„ <code>ShaderMaterial</code> ä¸­ã€‚è¿™åº”è¯¥è§£å†³ä½ é‡åˆ°çš„å…³äº GLSL ä»£ç å¯¼å…¥çš„é—®é¢˜ã€‚</p><p>é¡µé¢ä¸­å¯¼å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import lineFragmentShader from &#x27;./line.frag.glsl&#x27;;</span><br></pre></td></tr></table></figure><p>shaderå†…å®¹ï¼š</p><p>actionRatio ä»£ç ä¸­æ˜¯0 _ åŠ¨ç”»ä¸­ä¿®æ”¹ </p><p>vLineDistance &#x2F;&#x2F; åœ¨ä½¿ç”¨ Three.js çš„ LineDashedMaterial æ—¶ï¼Œç¡®ä¿é¡¶ç‚¹ç€è‰²å™¨æ­£ç¡®åœ°è®¡ç®—å¹¶ä¼ é€’ vLineDistance å˜é‡åˆ°ç‰‡å…ƒç€è‰²å™¨æ˜¯éå¸¸å…³é”®çš„ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡å†³å®šäº†çº¿æ®µçš„è™šçº¿æ•ˆæœã€‚</p><p>totalSize ä¸€æ•´ä¸ªæ²¡ç”¨åˆ°</p><p>lineLength åˆ°èµ·ç‚¹çš„ç´¯ç§¯è·ç¦»</p><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåœ¨ Three.js ä¸­ä½¿ç”¨çš„ GLSL shaderï¼Œå…·ä½“æ˜¯ç”¨æ¥å¤„ç†å…·æœ‰è™šçº¿æ•ˆæœçš„çº¿æ¡ææ–™ï¼ˆ<code>LineDashedMaterial</code>ï¼‰ã€‚è¿™ä¸ª shader æ§åˆ¶ç€å¦‚ä½•æ ¹æ®è·ç¦»å’Œè™šçº¿æ¨¡å¼æ˜¾ç¤ºçº¿æ¡çš„ç‰‡æ®µã€‚</p><ul><li><strong>uniforms</strong> æ˜¯ä» Three.js çš„ JavaScript ä»£ç ä¼ é€’åˆ° shader çš„å˜é‡ã€‚<ul><li><code>mediump float</code>: ç²¾åº¦æŒ‡ç¤ºç¬¦ï¼Œè¡¨æ˜æµ®ç‚¹è¿ç®—ä½¿ç”¨ä¸­ç­‰ç²¾åº¦ã€‚</li><li><code>actionRatio</code>: æ§åˆ¶çº¿æ¡çš„åŠ¨ç”»æˆ–è¿›åº¦çš„å‚æ•°ã€‚</li><li><code>lineLength</code>: çº¿æ¡çš„æ€»é•¿åº¦ã€‚</li><li><code>diffuse</code>: çº¿æ¡çš„é¢œè‰²ã€‚</li><li><code>opacity</code>: çº¿æ¡çš„ä¸é€æ˜åº¦ã€‚</li><li><code>dashSize</code>: å•ä¸ªè™šçº¿çš„é•¿åº¦ã€‚</li><li><code>totalSize</code>: è™šçº¿å’Œé—´éš”çš„æ€»å’Œé•¿åº¦ã€‚</li></ul></li><li><strong>varying</strong><ul><li><code>vLineDistance</code>: è¡¨ç¤ºå½“å‰ç‰‡æ®µåœ¨æ•´ä¸ªçº¿æ¡ä¸­çš„ä½ç½®ã€‚</li></ul></li></ul><p><strong>è™šçº¿è®¡ç®—</strong>:</p><ul><li>é¦–å…ˆè®¡ç®—å‡ºå½“å‰åº”æ˜¾ç¤ºçš„è™šçº¿ä½ç½®ã€‚</li><li>æ ¹æ® <code>vLineDistance</code> å’Œè™šçº¿å‚æ•°è®¡ç®—å‡ºå½“å‰ç‰‡æ®µæ˜¯å¦åœ¨è™šçº¿ä¸­è¿˜æ˜¯åœ¨ç©ºç™½é—´éš”ä¸­ã€‚å¦‚æœåœ¨é—´éš”ä¸­ï¼Œä½¿ç”¨ <code>discard</code> æŠ›å¼ƒè¿™ä¸ªç‰‡æ®µï¼Œä¸è¿›è¡Œæ¸²æŸ“ã€‚</li><li>ä½¿ç”¨æ¸å˜ (<code>grad</code>) æ¥å¤„ç†è™šçº¿çš„è¾¹ç¼˜ï¼Œä½¿å¾—è™šçº¿è¾¹ç¼˜å¹³æ»‘è¿‡æ¸¡ã€‚</li></ul><ol><li>é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„è®¡ç®—:</li></ol><p>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œæ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®è¢«ç”¨æ¥è®¡ç®—å®ƒåœ¨æ•´æ¡çº¿ä¸­çš„ç›¸å¯¹ä½ç½®æˆ–è·ç¦»ï¼Œè¿™ä¸ªè·ç¦»ç´¯è®¡åˆ° vLineDistanceã€‚ä¾‹å¦‚ï¼Œå¦‚æœçº¿æ¡ç”±å¤šä¸ªæ®µç»„æˆï¼Œæ¯ä¸ªæ®µçš„é•¿åº¦ä¼šè¢«ç´¯åŠ åˆ°èµ·ç‚¹è·ç¦»ï¼Œç›´åˆ°å½“å‰é¡¶ç‚¹çš„ä½ç½®ã€‚</p><ol start="2"><li>ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨:</li></ol><p>è¿™ä¸ªè®¡ç®—å‡ºçš„è·ç¦» (vLineDistance) ä½œä¸ºä¸€ä¸ª varying å˜é‡ï¼Œè¢«ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ã€‚åœ¨å›¾å½¢ç®¡çº¿ä¸­ï¼Œé¡¶ç‚¹ç€è‰²å™¨å¤„ç†åçš„ç»“æœï¼ˆå¦‚ä½ç½®ã€é¢œè‰²ã€è·ç¦»ç­‰ï¼‰ä¼šé€šè¿‡æ’å€¼ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ã€‚</p><ol start="3"><li>åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ï¼ŒvLineDistance ç”¨æ¥ç¡®å®šæ¯ä¸ªç‰‡æ®µæ˜¯å¦åº”è¯¥è¢«æ¸²æŸ“ä¸ºè™šçº¿çš„ä¸€éƒ¨åˆ†ï¼š</li></ol><blockquote><p>float currPos &#x3D; (lineLength + dashSize) * actionRatio;<br>è¿™é‡Œ currPos è¡¨ç¤ºè™šçº¿å¼€å§‹çš„ä½ç½®ï¼Œæ˜¯é€šè¿‡çº¿æ¡æ€»é•¿åº¦ã€è™šçº¿å¤§å°å’ŒåŠ¨ç”»æ¯”ä¾‹ (actionRatio) è®¡ç®—çš„ã€‚actionRatio å¯èƒ½ç”¨äºåŠ¨æ€è°ƒæ•´è™šçº¿çš„æ˜¾ç¤ºï¼Œæ¯”å¦‚æ»šåŠ¨æ•ˆæœã€‚<br>ç¡®å®šç‰‡æ®µä½ç½®:</p></blockquote><blockquote><p>float d &#x3D; (vLineDistance + halfDash) - currPos;<br>è¿™ä¸ªè®¡ç®—æ£€æŸ¥å½“å‰ç‰‡æ®µçš„ä½ç½®ï¼ˆvLineDistance + halfDashï¼‰ç›¸å¯¹äºå½“å‰è™šçº¿å¼€å§‹ä½ç½®çš„åç§»é‡ã€‚halfDash ç”¨äºè°ƒæ•´è®¡ç®—åˆ°è™šçº¿ä¸­å¿ƒçš„è·ç¦»ã€‚<br>åˆ¤æ–­æ˜¯å¦åœ¨è™šçº¿å†…éƒ¨:</p></blockquote><blockquote><p>if (abs(d) &gt; halfDash ) discard;å¦‚æœåç§»é‡å¤§äº halfDashï¼Œåˆ™è¡¨ç¤ºå½“å‰ç‰‡æ®µä¸åœ¨è™šçº¿å†…éƒ¨ï¼Œåº”è¯¥è¢«ä¸¢å¼ƒï¼ˆä¸æ¸²æŸ“ï¼‰ã€‚è¿™æ ·ï¼Œåªæœ‰åœ¨è™šçº¿èŒƒå›´å†…çš„ç‰‡æ®µä¼šè¢«æ¸²æŸ“ï¼Œå½¢æˆæ–­ç»­çš„çº¿æ¡æ•ˆæœã€‚</p></blockquote><ol start="4"><li>æ¸å˜è¾¹ç¼˜çš„å¤„ç†:</li></ol><p>float grad &#x3D; ((vLineDistance + halfDash) - (currPos - halfDash)) &#x2F; halfDash; è¿™é‡Œ grad ç”¨äºè®¡ç®—å½“å‰ç‰‡æ®µåœ¨è™šçº¿è¾¹ç¼˜çš„ä½ç½®ï¼Œç”¨äºå®ç°è¾¹ç¼˜çš„æ¸å˜æ•ˆæœã€‚è¿™å¯ä»¥è®©è™šçº¿çš„å¼€å§‹å’Œç»“æŸæ›´åŠ å¹³æ»‘ï¼Œä¸ä¼šçªç„¶æˆªæ–­ã€‚</p><p><img src="https://s2.loli.net/2024/09/11/yfOMo2NWJZVekbq.jpg" alt="ac03418e3341f086f3b780056121b39.jpg"></p><h4 id="è¡¥å……-negate"><a href="#è¡¥å……-negate" class="headerlink" title="è¡¥å…… | negate"></a>è¡¥å…… | <code>negate</code></h4><p><code>negate()</code> æ˜¯ä¸€ä¸ª Three.js ä¸­çš„å‘é‡æ–¹æ³•ï¼Œå®ƒç”¨æ¥å°†å‘é‡ä¸­çš„æ¯ä¸ªåˆ†é‡å–åï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªåˆ†é‡ä¹˜ä»¥ -1ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å°†å‘é‡çš„æ–¹å‘åè½¬ã€‚å…·ä½“åˆ°è¿™æ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> basisMinor = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector3</span>().<span class="title function_">copy</span>(startPoint).<span class="title function_">negate</span>().<span class="title function_">setLength</span>(radiusMinor);</span><br></pre></td></tr></table></figure><ul><li><code>new THREE.Vector3()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸‰ç»´å‘é‡ï¼Œé»˜è®¤ä¸º (0, 0, 0)ã€‚</li><li><code>.copy(startPoint)</code> å°† <code>startPoint</code> çš„å€¼å¤åˆ¶åˆ°è¿™ä¸ªæ–°çš„å‘é‡ä¸­ã€‚</li><li><code>.negate()</code> å°†å¤åˆ¶åçš„å‘é‡ä¸­çš„æ¯ä¸ªåˆ†é‡ä¹˜ä»¥ -1ï¼Œå®ç°å‘é‡æ–¹å‘çš„åè½¬ã€‚</li><li><code>.setLength(radiusMinor)</code> å°†åè½¬åçš„å‘é‡çš„é•¿åº¦è®¾ç½®ä¸º <code>radiusMinor</code>ã€‚</li></ul><p>è¿™æ ·ï¼Œ<code>basisMinor</code> å°±å˜æˆäº†ä¸€ä¸ªæ–¹å‘ä¸ <code>startPoint</code> ç›¸åã€é•¿åº¦ä¸º <code>radiusMinor</code> çš„å‘é‡ã€‚</p><h4 id="è¡¥å……-applyAxisAngle"><a href="#è¡¥å……-applyAxisAngle" class="headerlink" title="è¡¥å…… | applyAxisAngle"></a>è¡¥å…… | <code>applyAxisAngle</code></h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>applyAxisAngle</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªæ—‹è½¬åº”ç”¨åˆ°ä¸€ä¸ªå‘é‡ä¸Šã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªè½´å‘é‡å’Œä¸€ä¸ªè§’åº¦ã€‚å®ƒçš„ä½œç”¨æ˜¯å›´ç»•ç»™å®šçš„è½´å‘é‡æ—‹è½¬åŸå‘é‡æŒ‡å®šçš„è§’åº¦ã€‚</p><ol><li><strong>è½´å‘é‡</strong> (<code>axis</code>): è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„ä¸‰ç»´å‘é‡ï¼ŒæŒ‡å®šäº†æ—‹è½¬çš„è½´ã€‚ä¾‹å¦‚ï¼Œè‹¥è½´å‘é‡ä¸º <code>(0, 1, 0)</code>ï¼Œåˆ™è¡¨ç¤ºå›´ç»• y è½´è¿›è¡Œæ—‹è½¬ã€‚</li><li><strong>è§’åº¦</strong> (<code>angle</code>): è¿™æ˜¯æ—‹è½¬çš„è§’åº¦ï¼Œå•ä½æ˜¯å¼§åº¦ã€‚æ­£å€¼è¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬ï¼Œè´Ÿå€¼è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬ï¼ˆæ ¹æ®å³æ‰‹è§„åˆ™ï¼‰ã€‚</li></ol><p>å½“ä½ è°ƒç”¨ <code>applyAxisAngle</code> æ–¹æ³•æ—¶ï¼Œå®ƒä¼šæ”¹å˜è°ƒç”¨å®ƒçš„å‘é‡çš„æ–¹å‘ï¼Œä½†ä¿æŒå‘é‡çš„é•¿åº¦ä¸å˜ã€‚è¿™ç§æ—‹è½¬æ˜¯é€šè¿‡å³æ‰‹è§„åˆ™æ¥å®šä¹‰çš„ï¼Œå³å¦‚æœä½ çš„å³æ‰‹æ‹‡æŒ‡æŒ‡å‘è½´å‘é‡çš„æ–¹å‘ï¼Œé‚£ä¹ˆå››æŒ‡çš„å·æ›²æ–¹å‘å®šä¹‰äº†æ­£æ—‹è½¬æ–¹å‘ã€‚</p><p>åœ¨ Three.js ä¸­ä½¿ç”¨ <code>applyAxisAngle</code> æ–¹æ³•è¿›è¡Œæ—‹è½¬æ—¶ï¼Œå‘é‡æ˜¯ç»•é€šè¿‡åŸç‚¹ (0, 0, 0) çš„è½´è¿›è¡Œæ—‹è½¬çš„ã€‚è½´å‘é‡åªå®šä¹‰äº†æ—‹è½¬çš„æ–¹å‘å’Œè½´çº¿ï¼Œè€Œä¸æ˜¯æ—‹è½¬çš„ä½ç½®ã€‚å› æ­¤ï¼Œè¿™ç§æ—‹è½¬æ€»æ˜¯è®¤ä¸ºè½´å‘é‡é€šè¿‡ä¸‰ç»´ç©ºé—´çš„åŸç‚¹ã€‚</p><p>æ—‹è½¬çš„ä¸­å¿ƒç‚¹æ˜¯åæ ‡ç³»ç»Ÿçš„åŸç‚¹ (0, 0, 0)ã€‚å‘é‡ä»å®ƒå½“å‰çš„ä½ç½®å¼€å§‹ï¼Œç»•é€šè¿‡åŸç‚¹çš„è½´æ—‹è½¬ã€‚è¿™æ„å‘³ç€ï¼š</p><ul><li>å¦‚æœå‘é‡çš„ä¸€ä¸ªç«¯ç‚¹ä½äºåŸç‚¹ï¼Œæ—‹è½¬å°†ç›´æ¥æ”¹å˜å‘é‡çš„æ–¹å‘ï¼Œè€Œé•¿åº¦ä¿æŒä¸å˜ã€‚</li><li>å¦‚æœå‘é‡çš„ä¸€ä¸ªç«¯ç‚¹ä¸åœ¨åŸç‚¹ï¼Œå‘é‡ä¼šåœ¨æƒ³è±¡ä¸­è¢«æ‹‰ç›´è‡³åŸç‚¹ï¼Œç„¶åç»•è½´æ—‹è½¬ï¼Œå†æ”¾å›åŸä½ç½®ã€‚</li></ul><p>å¦‚æœä½ éœ€è¦ç»•ä¸€ä¸ªä¸åœ¨åŸç‚¹çš„ç‚¹æ—‹è½¬å‘é‡ï¼Œä½ éœ€è¦å…ˆå°†ç³»ç»Ÿå¹³ç§»åˆ°é‚£ä¸ªç‚¹å˜æˆæ–°çš„åŸç‚¹ï¼Œæ‰§è¡Œæ—‹è½¬ï¼Œç„¶åå†å¹³ç§»å›å»ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œæˆï¼š</p><ol><li><strong>å¹³ç§»</strong> ï¼šå°†å‘é‡å’Œæ—‹è½¬ä¸­å¿ƒç‚¹ä¸€åŒå¹³ç§»åˆ°åŸç‚¹é™„è¿‘ã€‚</li><li><strong>æ—‹è½¬</strong> ï¼šåœ¨æ–°çš„ä½ç½®åº”ç”¨æ—‹è½¬ã€‚</li><li><strong>é€†å¹³ç§»</strong> ï¼šå°†æ—‹è½¬åçš„å‘é‡ç§»å›åŸå§‹ä½ç½®ã€‚</li></ol><h4 id="è¡¥å……-needsUpdate"><a href="#è¡¥å……-needsUpdate" class="headerlink" title="è¡¥å…… | needsUpdate"></a>è¡¥å…… | needsUpdate</h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>needsUpdate</code> å±æ€§ç”¨äºå‘Šè¯‰å¼•æ“æŸä¸ªå¯¹è±¡çš„æ•°æ®å·²ç»æ”¹å˜ï¼Œéœ€è¦é‡æ–°è®¡ç®—æˆ–é‡æ–°ä¸Šä¼ åˆ° GPUã€‚è¿™ä¸ªå±æ€§å¸¸è§äºä¸å‡ ä½•ä½“ï¼ˆ<code>Geometry</code> æˆ– <code>BufferGeometry</code>ï¼‰ã€ææ–™ï¼ˆ<code>Material</code>ï¼‰ã€çº¹ç†ï¼ˆ<code>Texture</code>ï¼‰ç­‰ç›¸å…³çš„å¯¹è±¡ã€‚</p><p>å½“ä½ ä¿®æ”¹äº†å‡ ä½•ä½“çš„é¡¶ç‚¹æ•°æ®ã€çº¹ç†çš„å†…å®¹ã€æˆ–è€…ææ–™çš„å‚æ•°ç­‰ï¼Œè¿™äº›æ”¹å˜ä¸ä¼šè‡ªåŠ¨åæ˜ åœ¨æ¸²æŸ“çš„å¯¹è±¡ä¸Šï¼Œé™¤éä½ æ˜ç¡®åœ°å‘Šè¯‰ Three.js è¿™äº›æ•°æ®å·²ç»æ›´æ–°ã€‚<code>needsUpdate</code> å±æ€§å°±æ˜¯ç”¨äºè¿™ç§é€šçŸ¥ã€‚</p><p>ç¤ºä¾‹ - å‡ ä½•ä½“é¡¶ç‚¹æ•°æ®æ›´æ–°</p><p>å‡è®¾ä½ æ›´æ”¹äº†ä¸€ä¸ªå‡ ä½•ä½“çš„é¡¶ç‚¹ä½ç½®æ•°æ®ï¼Œä½ éœ€è¦è®¾ç½®å¯¹åº”å±æ€§çš„ <code>needsUpdate</code> ä¸º <code>true</code>ï¼Œä»¥ç¡®ä¿è¿™äº›æ”¹å˜è¢«åº”ç”¨åˆ°ä¸‹ä¸€æ¬¡æ¸²æŸ“ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹å‡ ä½•ä½“é¡¶ç‚¹ä½ç½®</span></span><br><span class="line">geometry.<span class="property">attributes</span>.<span class="property">position</span>.<span class="title function_">setXYZ</span>(index, newX, newY, newZ);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ‡è®°é¡¶ç‚¹ä½ç½®æ•°æ®ä¸ºéœ€è¦æ›´æ–°</span></span><br><span class="line">geometry.<span class="property">attributes</span>.<span class="property">position</span>.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ - çº¹ç†å†…å®¹æ›´æ–°</p><p>å¦‚æœä½ ä¿®æ”¹äº†çº¹ç†çš„å›¾åƒæ•°æ®ï¼Œä½ åŒæ ·éœ€è¦è®¾ç½® <code>needsUpdate</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ è½½ä¸€ä¸ªæ–°çš„å›¾åƒåˆ°çº¹ç†</span></span><br><span class="line">texture.<span class="property">image</span> = newImage;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘Šè¯‰Three.jsçº¹ç†å·²æ›´æ–°</span></span><br><span class="line">texture.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ - ææ–™å±æ€§æ›´æ–°</p><p>å½“æ”¹å˜ææ–™çš„ä¸€äº›å±æ€§ï¼ˆå¦‚é¢œè‰²ã€é€æ˜åº¦ç­‰ï¼‰åï¼Œå¦‚æœè¦ç«‹å³åæ˜ è¿™äº›å˜åŒ–ï¼ŒåŒæ ·éœ€è¦æ›´æ–° <code>needsUpdate</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹ææ–™çš„é¢œè‰²</span></span><br><span class="line">material.<span class="property">color</span>.<span class="title function_">setHex</span>(<span class="number">0xff0000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ‡è®°ææ–™éœ€è¦æ›´æ–°</span></span><br><span class="line">material.<span class="property">needsUpdate</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h4 id="è¡¥å……-computeLineDistances"><a href="#è¡¥å……-computeLineDistances" class="headerlink" title="è¡¥å…… | computeLineDistances"></a>è¡¥å…… | <code>computeLineDistances</code></h4><p>åœ¨ Three.js ä¸­ï¼Œ<code>Mesh</code> å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰ <code>computeLineDistances()</code> æ–¹æ³•ï¼›è¿™ä¸ªæ–¹æ³•æ˜¯å±äº <code>Line</code> ç±»çš„ã€‚<code>Line</code> ç±»ç”¨äºåˆ›å»ºå’Œå¤„ç†çº¿æ®µå¯¹è±¡ï¼Œåœ¨ 3D åœºæ™¯ä¸­è¡¨ç¤ºç”±å¤šä¸ªç‚¹è¿æ¥è€Œæˆçš„ç›´çº¿æˆ–æŠ˜çº¿ã€‚</p><p>è¯¥æ–¹æ³•ç”¨äºè®¡ç®—çº¿æ®µå¯¹è±¡ä¸­æ¯ä¸ªé¡¶ç‚¹åˆ°çº¿èµ·ç‚¹çš„ç´¯è®¡è·ç¦»ï¼Œå¹¶å°†è¿™äº›è·ç¦»å­˜å‚¨åœ¨çº¿æ®µçš„ <code>lineDistances</code> å±æ€§ä¸­ã€‚è¿™ä¸ªåŠŸèƒ½é€šå¸¸ä¸çº¿æ€§ææ–™ï¼ˆ<code>LineDashedMaterial</code>ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥åˆ›å»ºè™šçº¿æ•ˆæœã€‚<code>LineDashedMaterial</code> éœ€è¦è¿™äº›è·ç¦»æ¥æ­£ç¡®åœ°æ¸²æŸ“æ¯æ®µè™šçº¿ã€‚</p><p>åœ¨ Three.js ä¸­ï¼Œå½“ä½ ä½¿ç”¨ <code>computeLineDistances()</code> æ–¹æ³•è®¡ç®—çº¿æ®µï¼ˆç”± <code>THREE.Line</code> æˆ– <code>THREE.LineSegments</code> ç±»åˆ›å»ºçš„å¯¹è±¡ï¼‰çš„æ¯ä¸ªé¡¶ç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»æ—¶ï¼Œè¿™äº›è·ç¦»ä¼šå­˜å‚¨åœ¨ <code>geometry.attributes.lineDistance</code> çš„ <code>array</code> å±æ€§ä¸­ã€‚è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä»èµ·ç‚¹åˆ°å¯¹åº”é¡¶ç‚¹çš„ç´¯ç§¯è·ç¦»ã€‚</p><p>æ•°ç»„ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ã€‚å› æ­¤ï¼Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 0ï¼‰å¯¹åº”ç¬¬ä¸€ä¸ªé¡¶ç‚¹ï¼ˆé€šå¸¸æ˜¯çº¿æ®µçš„èµ·ç‚¹ï¼‰ï¼Œç¬¬äºŒä¸ªå…ƒç´ ï¼ˆç´¢å¼• 1ï¼‰å¯¹åº”ç¬¬äºŒä¸ªé¡¶ç‚¹ï¼Œä¾æ­¤ç±»æ¨ã€‚ç´¢å¼• 99 çš„å…ƒç´ å°±æ˜¯æ•°ç»„ä¸­çš„ç¬¬ 100 ä¸ªå…ƒç´ ï¼Œå¯¹åº”äºä½ çš„çº¿æ®µçš„ç¬¬ 100 ä¸ªé¡¶ç‚¹ã€‚åœ¨ <code>array[99]</code> ä¸­è·å–çš„å€¼è¡¨ç¤ºä»çº¿æ®µçš„èµ·ç‚¹åˆ°ç¬¬ 100 ä¸ªé¡¶ç‚¹çš„ç´¯ç§¯è·ç¦»ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¦‚æœä½ æ›´æ”¹äº†çº¿æ®µçš„é¡¶ç‚¹ä½ç½®ï¼Œéœ€è¦é‡æ–°è°ƒç”¨ <code>computeLineDistances()</code> æ–¹æ³•æ¥æ›´æ–°è·ç¦»æ•°æ®ã€‚</li><li>è¿™ä¸ªæ–¹æ³•ä»…å¯¹ <code>THREE.Line</code> æˆ– <code>THREE.LineSegments</code> å¯¹è±¡æœ‰æ•ˆï¼Œå¯¹ <code>Mesh</code> å¯¹è±¡ä¸é€‚ç”¨ã€‚</li></ul><h4 id="è¡¥å……-é¢„åˆ¶shader"><a href="#è¡¥å……-é¢„åˆ¶shader" class="headerlink" title="è¡¥å…… | é¢„åˆ¶shader"></a>è¡¥å…… | é¢„åˆ¶shader</h4><p>åœ¨Three.jsçš„shaderç¼–ç¨‹ä¸­ï¼Œ<code>#include</code> è¯­å¥ç”¨äºæ’å…¥å…±ç”¨çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—é€šå¸¸å°è£…äº†ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å’Œå˜é‡å®šä¹‰ï¼Œä½¿å¾—shaderçš„ç¼–å†™æ›´åŠ æ¨¡å—åŒ–å’Œå¯å¤ç”¨ã€‚ä¸‹é¢æ˜¯ä½ æåˆ°çš„å‡ ä¸ªå¸¸è§çš„includeæ–‡ä»¶çš„ç”¨é€”ï¼š</p><ol><li><p><strong><code>&lt;common&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬äº†ä¸€äº›å¸¸ç”¨çš„æ•°å­¦å‡½æ•°å’Œå®å®šä¹‰ï¼Œæ¯”å¦‚è®¡ç®—çº¿æ€§æ’å€¼ã€é¥±å’Œåº¦è®¡ç®—ç­‰ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å¸¸é‡å®šä¹‰ï¼Œä¾‹å¦‚PIçš„å€¼ç­‰ã€‚</li></ul></li><li><p><strong><code>&lt;color_pars_fragment&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸é¢œè‰²å¤„ç†ç›¸å…³çš„å‚æ•°å’Œå‡½æ•°ï¼Œæ¯”å¦‚å¤„ç†é¡¶ç‚¹é¢œè‰²ã€æ¼«åå°„ç­‰ã€‚</li></ul></li><li><p><strong><code>&lt;fog_pars_fragment&gt;</code></strong>:</p><ul><li>ç”¨äºå®šä¹‰å’Œè®¡ç®—é›¾æ•ˆæœ(fog)çš„å‚æ•°ï¼Œä½¿å¾—ç‰©ä½“åœ¨é›¾ä¸­é€æ¸æ¶ˆå¤±çš„æ•ˆæœå¯ä»¥åœ¨shaderä¸­å®ç°ã€‚</li></ul></li><li><p><strong><code>&lt;logdepthbuf_pars_fragment&gt;</code></strong>:</p><ul><li>å¦‚æœå¯ç”¨äº†logarithmic depth bufferï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç›¸å…³çš„å®ç°ï¼Œç”¨æ¥æ”¹å–„è¿œè·ç¦»æ¸²æŸ“æ—¶çš„æ·±åº¦ç²¾åº¦é—®é¢˜ã€‚</li></ul></li><li><p><strong><code>&lt;clipping_planes_pars_fragment&gt;</code></strong>:</p><ul><li>è¿™ä¸ªæ–‡ä»¶æä¾›äº†å‰ªè£å¹³é¢çš„æ”¯æŒï¼Œä½¿å¾—å¯ä»¥åœ¨shaderä¸­å¤„ç†å‰ªè£é€»è¾‘ï¼Œä»…æ¸²æŸ“å‰ªè£å¹³é¢å…è®¸çš„éƒ¨åˆ†ã€‚</li></ul></li></ol><p>è¦æŸ¥æ‰¾Three.jsä¸­å¯ç”¨çš„æ‰€æœ‰shader chunksï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ç›´æ¥æŸ¥çœ‹Three.jsçš„æºä»£ç ã€‚åœ¨GitHubä¸Šçš„Three.jsåº“ä¸­ï¼Œè¿™äº›shader chunkæ–‡ä»¶ä½äº<code>src/renderers/shaders/ShaderChunk/</code>ç›®å½•ä¸‹ã€‚</p><h3 id="é£çº¿åŠ¨ç”»"><a href="#é£çº¿åŠ¨ç”»" class="headerlink" title="é£çº¿åŠ¨ç”»"></a>é£çº¿åŠ¨ç”»</h3><p>å†…å®¹ç»“æ„ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setTrailAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> tweens = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;maxImpactAmount;i++) &#123;</span><br><span class="line">      tweens.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">runTween</span>: <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    tweens.<span class="title function_">forEach</span>(<span class="function"><span class="params">t</span>=&gt;</span>t.<span class="title function_">runTween</span>());</span><br><span class="line">    <span class="title function_">createPoints</span>(); <span class="comment">// å› ä¸ºrunTweenä¼šå½±å“åˆ°pointsçš„æ•ˆæœ</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>forå¾ªç¯é‡Œçš„è®¾ç½®</p><p>æ›´æ–°äº†impactsï¼ŒåŒæ—¶ä¹Ÿå½±å“åˆ°äº†çƒä½“çš„æ•ˆæœï¼›</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxImpactAmount; i++) &#123;</span><br><span class="line">  tweens.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">runTween</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> path = trails[i]; <span class="comment">// å½“å‰è·¯å¾„</span></span><br><span class="line">      <span class="keyword">let</span> speed = <span class="number">3</span>;</span><br><span class="line">      <span class="keyword">let</span> len = path.<span class="property">geometry</span>.<span class="property">attributes</span>.<span class="property">lineDistance</span>.<span class="property">array</span>[<span class="number">99</span>];</span><br><span class="line">      <span class="keyword">let</span> dur = len / speed; <span class="comment">// æŒç»­æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> tweenTrail = <span class="keyword">new</span> <span class="variable constant_">TWEEN</span>.<span class="title class_">Tween</span>(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        .<span class="title function_">to</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, dur * <span class="number">1000</span>)</span><br><span class="line">        .<span class="title function_">onUpdate</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          impacts[i].<span class="property">trailRatio</span>.<span class="property">value</span> = val.<span class="property">value</span>; <span class="comment">// é€šè¿‡Tweenæ¥æ§åˆ¶trailRatio/actionRatio</span></span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="keyword">var</span> tweenImpact = <span class="keyword">new</span> <span class="variable constant_">TWEEN</span>.<span class="title class_">Tween</span>(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line">        .<span class="title function_">to</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randInt</span>(<span class="number">2500</span>, <span class="number">5000</span>))</span><br><span class="line">        .<span class="title function_">onUpdate</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          uniformsSettings.<span class="property">impacts</span>.<span class="property">value</span>[i].<span class="property">impactRatio</span> = val.<span class="property">value</span>; <span class="comment">// é€šè¿‡Tweenæ¥æ§åˆ¶impactRatio</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">onComplete</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          impacts[i].<span class="property">prevPosition</span>.<span class="title function_">copy</span>(impacts[i].<span class="property">impactPosition</span>);</span><br><span class="line">          impacts[i].<span class="property">impactPosition</span>.<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>);</span><br><span class="line">          <span class="title function_">setPath</span>(path, impacts[i].<span class="property">prevPosition</span>, impacts[i].<span class="property">impactPosition</span>, <span class="number">1</span>);</span><br><span class="line">          uniformsSettings.<span class="property">impacts</span>.<span class="property">value</span>[i].<span class="property">impactMaxRadius</span> = <span class="number">5</span> * <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloat</span>(<span class="number">0.5</span>, <span class="number">0.75</span>);</span><br><span class="line">          tweens[i].<span class="title function_">runTween</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">      tweenTrail.<span class="title function_">chain</span>(tweenImpact);</span><br><span class="line">      tweenTrail.<span class="title function_">start</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¤</title>
    <link href="https://youxt-njnu.github.io/2024/09/04/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%955/"/>
    <id>https://youxt-njnu.github.io/2024/09/04/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%955/</id>
    <published>2024-09-04T01:40:26.000Z</published>
    <updated>2024-09-04T14:03:37.092Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-patterns"><a href="#è®°å½•-patterns" class="headerlink" title="è®°å½•-patterns"></a>è®°å½•-patterns</h1><p>fract(),å–å°æ•°éƒ¨åˆ†ï¼›</p><p>å®ç°patternçš„ç»˜åˆ¶ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circle(<span class="keyword">in</span> <span class="type">vec2</span> _st, <span class="keyword">in</span> <span class="type">float</span> _radius)&#123;</span><br><span class="line">    <span class="type">vec2</span> l = _st-<span class="type">vec2</span>(<span class="number">0.5</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span>-<span class="built_in">smoothstep</span>(_radius-(_radius*<span class="number">0.01</span>),</span><br><span class="line">                        _radius+(_radius*<span class="number">0.01</span>),</span><br><span class="line">                         <span class="built_in">dot</span>(l,l)*<span class="number">4.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> pattern2d(<span class="keyword">in</span> <span class="type">float</span> x, <span class="keyword">in</span> <span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    st.x *= x;   </span><br><span class="line">    st.y *= y; <span class="comment">// Scale up the space by 3</span></span><br><span class="line">    st = <span class="built_in">fract</span>(st); <span class="comment">// Wrap around 1.0</span></span><br><span class="line">    </span><br><span class="line">    color = <span class="type">vec3</span>(st,<span class="number">0.0</span>);</span><br><span class="line">    color = <span class="type">vec3</span>(circle(st,<span class="number">0.5</span>));</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec3</span> color = pattern2d(<span class="number">2.1</span>,<span class="number">5.</span>);</span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨patternä¸Šï¼Œç»“åˆæ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ï¼Œæ¥ä¸°å¯Œpattern</p><p>åˆ¤æ–­å¥‡å¶è¡Œï¼Œå¯ä»¥é€šè¿‡modå–ä½™ï¼ŒåŠ ä¸Šä¸‰å…ƒè¿ç®—ç¬¦æˆ–stepï¼Œæ¥å½¢æˆ0å’Œ1çš„åˆ¤æ–­ï¼›</p><p>Truchet Tilesçš„ç»˜åˆ¶ï¼Œé€šè¿‡ç»™ä¸åŒçš„åŒºé—´è®¾ç½®indexï¼Œæ ¹æ®indexæ¥åˆ¤æ–­æ—‹è½¬å¤šå°‘åº¦ï¼›</p><h1 id="è®°å½•-random"><a href="#è®°å½•-random" class="headerlink" title="è®°å½•-random"></a>è®°å½•-random</h1><p>rand()å¾—åˆ°çš„ç±»ä¼¼äºfract(sin(â€¦))ï¼Œåœ¨ä¸€ç‰‡éšæœºå†…ï¼Œéƒ¨åˆ†åœ°æ–¹å­˜åœ¨ç€è¾ƒå¤§æ³¢åŠ¨ï¼›</p><p>åˆ©ç”¨fract, sin, dotæ¥å®ç°2Dä¸‹çš„éšæœºï¼›</p><p>å¯ä»¥æ„å»ºgridå½¢æ€ä¸‹çš„éšæœºç°åº¦å¡«å……ï¼›</p><h1 id="è®°å½•-noise"><a href="#è®°å½•-noise" class="headerlink" title="è®°å½•-noise"></a>è®°å½•-noise</h1><p>mix()è¿›è¡Œçº¿æ€§æ’å€¼ï¼›</p><p>åœ¨ä¸€äº› noise çš„åº”ç”¨ä¸­ä½ ä¼šå‘ç°ç¨‹åºå‘˜å–œæ¬¢ç”¨ä»–ä»¬è‡ªå·±çš„ä¸‰æ¬¡å¤šé¡¹å¼å‡½æ•°ï¼ˆfuncï¼‰ï¼Œè€Œä¸æ˜¯ç”¨ smoothstep()ã€‚</p><p>mix(rand(i),rand(i+1.0),func);</p><p>äºŒç»´æ’å€¼ï¼›</p><p>value noiseå’Œgradient noiseçš„åŒºåˆ«ï¼› simplex noise</p><p>ç»“åˆdistance fieldæ¥ç»˜åˆ¶ï¼›</p><p>ä¸‰ç»´æ’å€¼ï¼›</p><h1 id="è®°å½•-Cellular-Noise"><a href="#è®°å½•-Cellular-Noise" class="headerlink" title="è®°å½•-Cellular Noise"></a>è®°å½•-Cellular Noise</h1><p>æ±‚çº¹ç†ç©ºé—´ä¸‹çš„åæ ‡ï¼Œåˆ°æŒ‡å®šåæ ‡çš„æœ€å°è·ç¦»ï¼ŒåŠ åˆ°é¢œè‰²ä¸Šï¼Œè¿›è¡Œå‘ˆç°ï¼›</p><p>ç±»ä¼¼äºVoronoiå›¾ï¼›</p><p>é€šè¿‡éå†å‘¨è¾¹8ä¸ªæ ¼ç½‘ï¼Œè¿›è¡Œç»¼åˆï¼›</p><p>Voronoiç®—æ³•ï¼›</p><p>voro-nose;</p><h1 id="è®°å½•-Fractal-Brownian-Motion-x2F-Fractal-Noise"><a href="#è®°å½•-Fractal-Brownian-Motion-x2F-Fractal-Noise" class="headerlink" title="è®°å½•-Fractal Brownian Motion&#x2F;Fractal Noise"></a>è®°å½•-Fractal Brownian Motion&#x2F;Fractal Noise</h1><p>åˆ©ç”¨sinå‡½æ•°ï¼Œä¿®æ”¹frequencyå’Œamplitude</p><blockquote><p>é€šè¿‡åœ¨å¾ªç¯ï¼ˆå¾ªç¯æ¬¡æ•°ä¸º octavesï¼Œä¸€æ¬¡å¾ªç¯ä¸ºä¸€ä¸ªå…«åº¦ï¼‰ä¸­å åŠ å™ªå£°ï¼Œå¹¶ä»¥ä¸€å®šçš„å€æ•°ï¼ˆlacunarityï¼Œé—´éš™åº¦ï¼‰è¿ç»­å‡é«˜é¢‘ç‡ï¼ŒåŒæ—¶ä»¥ä¸€å®šçš„æ¯”ä¾‹ï¼ˆgainï¼Œå¢ç›Šï¼‰é™ä½ å™ªå£° çš„æŒ¯å¹…ï¼Œæœ€ç»ˆçš„ç»“æœä¼šæœ‰æ›´å¥½çš„ç»†èŠ‚ã€‚è¿™é¡¹æŠ€æœ¯å«â€œåˆ†å½¢å¸ƒæœ—è¿åŠ¨ï¼ˆfractal Brownian Motionï¼‰â€ï¼ˆfBMï¼‰ï¼Œæˆ–è€…â€œåˆ†å½¢å™ªå£°ï¼ˆfractal noiseï¼‰â€</p></blockquote><blockquote><p>è¿™é¡¹æŠ€æœ¯è¢«å¹¿æ³›åœ°åº”ç”¨äºæ„é€ ç¨‹åºåŒ–é£æ™¯ã€‚fBm çš„è‡ªç›¸ä¼¼æ€§èƒ½å¤Ÿå¾ˆå®Œç¾åœ°æ¨¡æ‹Ÿå±±è„‰ï¼Œå› ä¸ºå±±è„‰å½¢æˆè¿‡ç¨‹ä¸­çš„è…èš€å½¢æˆäº†è¿™ç§ä¸åŒå°ºåº¦ä¸Šçš„è‡ªç›¸ä¼¼æ€§</p></blockquote><p>fbmæ„é€ å±±è°·å’Œå±±è„Š â€”â€” turbulenceæ•ˆæœ</p><p>ä½¿ç”¨fbmæ¨¡æ‹Ÿfbm â€”â€” äº‘çš„æ•ˆæœ</p><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p>å›¾åƒå¤„ç†</p><ul><li>çº¹ç†</li><li>å›¾åƒå¤„ç†</li><li>å·ç§¯æ ¸</li><li>æ»¤é•œ</li><li>å…¶ä»–æ•ˆæœ</li></ul><p>æ¨¡æ‹Ÿ</p><ul><li>ä¹’ä¹“</li><li>Conwayç”Ÿå‘½æ¸¸æˆ</li><li>æ°´æ³¢</li><li>æ°´å½©</li><li>ååº”æ‰©æ•£</li></ul><p>3D å›¾å½¢</p><ul><li>ç¯å…‰</li><li>æ³•çº¿è´´å›¾</li><li>å‡¹å‡¸è´´å›¾</li><li>Ray marching</li><li>ç¯å¢ƒè´´å›¾ (spherical and cube)</li><li>æŠ˜å°„å’Œåå°„</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>three+react|åŠ è‡ªå·±æ¨¡å‹</title>
    <link href="https://youxt-njnu.github.io/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/"/>
    <id>https://youxt-njnu.github.io/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/</id>
    <published>2024-09-02T12:37:05.000Z</published>
    <updated>2024-09-03T01:21:02.527Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ·»åŠ è‡ªå·±çš„æ¨¡å‹"><a href="#æ·»åŠ è‡ªå·±çš„æ¨¡å‹" class="headerlink" title="æ·»åŠ è‡ªå·±çš„æ¨¡å‹"></a>æ·»åŠ è‡ªå·±çš„æ¨¡å‹</h1><p>å‰è¨€ï¼Œåœ¨<a href="https://youxt-njnu.github.io/2024/02/25/three%E5%AE%9E%E6%88%981/">è¯¥é¡¹ç›®</a>ä¸­åŠ è‡ªå·±çš„æ¨¡å‹ï¼ŒåŠé—®é¢˜è§£å†³ï¼›</p><p>å…ˆsketchfabä¸Šä¸‹è½½æ¨¡å‹ï¼Œåœ¨unityé‡Œè°ƒæ•´ä½ç½®ã€è´´å›¾ã€æè´¨ã€åŠ¨ç”»ï¼Œå½¢æˆprefabï¼›</p><p>åˆ©ç”¨<a href="https://github.com/Plattar/gltf-exporter?tab=readme-ov-file">æ’ä»¶</a>ï¼Œå¯¼å‡ºä¸ºgltfï¼›â€E:\PersonalCV\models\v1.142.0-unity.unitypackageâ€</p><p>åœ¨vite.config.tsé‡ŒåŠ å…¥<code>assetsInclude: [&#39;**/*.glb&#39;,&#39;**/*.gltf&#39;],</code></p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useGLTF &#125; <span class="keyword">from</span> <span class="string">&quot;@react-three/drei&quot;</span></span><br><span class="line"><span class="keyword">import</span> word2D <span class="keyword">from</span> <span class="string">&#x27;../assets/3d/world_2d/world_2d.gltf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Map2D</span> = (<span class="params">&#123; ...props &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> gltf = <span class="title function_">useGLTF</span>(word2D);</span><br><span class="line">  <span class="keyword">const</span> scene = gltf.<span class="property">scene</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">mesh</span> &#123;<span class="attr">...props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">primitive</span> <span class="attr">object</span>=<span class="string">&#123;scene&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">mesh</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Map2D</span></span><br></pre></td></tr></table></figure><p>æ³•çº¿æ¨¡å‹é‡Œçš„é¡¶ç‚¹ï¼Œxçš„åæ ‡éƒ½æ˜¯æ­£ç¡®æ•°å€¼çš„ç›¸åæ•°ï¼Œä¾‹å¦‚è¿™ä¸ª<a href="https://sketchfab.com/3d-models/cartoon-low-poly-world-map-e87fa1e143f84348a915b7fe1376d957">æ¨¡å‹</a>ä¸‹ä¸‹æ¥å°±è¿™æ ·é—®é¢˜ï¼š</p><ol><li>blenderé‡Œï¼Œå³ä¸Šè§’åˆ‡æ¢object Modeä¸ºEdit Mode</li><li>Aå…¨é€‰æ‰€æœ‰ç‰©ä½“</li><li>Mesh -&gt;Mirror-&gt;X Global</li><li>æŒ‰ <code>Ctrl + A</code> å¹¶é€‰æ‹© <code>All Transforms</code>ï¼Œåº”ç”¨å˜æ¢</li></ol><p><img src="https://s2.loli.net/2024/09/02/mZD8AeFVyHXajiz.png" alt="image.png"></p><p>è¡¥å……ï¼Œé’ˆå¯¹æ³•çº¿åäº†çš„ï¼Œ1.2.4ä¸å˜ï¼Œ3 mesh-&gt;Normals-&gt;Flip</p><p>é’ˆå¯¹è´´å›¾åäº†çš„ï¼Œä¾‹å¦‚è¿™ä¸ªä½œè€…çš„å¾ˆå¤š<a href="https://skfb.ly/orJVW">æ¨¡å‹</a>ï¼ŒPSé‡Œ å›¾åƒ-&gt;å›¾åƒæ—‹è½¬-&gt;å‚ç›´æ—‹è½¬ç”»å¸ƒ&#x2F;æ°´å¹³ç¿»è½¬ç”»å¸ƒ</p><p>æ­¤å¤–ï¼Œåœ¨é¡¹ç›®ä¸­æ‰“åŒ…çš„æ—¶å€™ï¼Œåªä¼šæ‰“åŒ…gltfè¿™ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶é™„å±çš„binå’Œpngæ–‡ä»¶ä¼šè½å•ï¼›<br>è¿™ä¸ªæ—¶å€™æˆ‘é‡‡ç”¨çš„æ˜¯æŠŠgltfç›¸å…³çš„éƒ½æ”¾åœ¨gltfModelsæ–‡ä»¶å¤¹ï¼Œå°†gltfModelsæ–‡ä»¶å¤¹æ”¾åˆ°äº†publicç›®å½•ä¸‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot;&gt;&lt;a href=&quot;#æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&quot;&gt;&lt;/a&gt;æ·»åŠ è‡ªå·±çš„æ¨¡å‹&lt;/h1&gt;&lt;p&gt;å‰è¨€ï¼Œåœ¨&lt;a href=&quot;https://youxt-njnu.github.io/2024/02/</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…£</title>
    <link href="https://youxt-njnu.github.io/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/"/>
    <id>https://youxt-njnu.github.io/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/</id>
    <published>2024-08-28T07:55:26.000Z</published>
    <updated>2024-09-04T01:40:33.591Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-2D-Matrics"><a href="#è®°å½•-2D-Matrics" class="headerlink" title="è®°å½•-2D Matrics"></a>è®°å½•-2D Matrics</h1><h2 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a>å¹³ç§»</h2><p>åˆ©ç”¨u_time, sin, cosæ„é€ ç§»åŠ¨ï¼ŒåŠ åˆ°stï¼›é€šè¿‡crossæŠŠè¿™ç§ç§»åŠ¨çªå‡ºå‡ºæ¥ï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">// _size=vec2(width,height)</span><br><span class="line">float box(in vec2 _st, in vec2 _size)&#123;</span><br><span class="line">    _size = vec2(0.5) - _size*0.5;</span><br><span class="line">    vec2 uv = smoothstep(_size,</span><br><span class="line">                        _size+vec2(0.01),</span><br><span class="line">                        _st);</span><br><span class="line">    uv *= smoothstep(_size,</span><br><span class="line">                    _size+vec2(0.001),</span><br><span class="line">                    vec2(1.0)-_st);</span><br><span class="line">    return uv.x*uv.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// input: st, crossSize</span><br><span class="line">float cross(in vec2 _st, float _size)&#123;</span><br><span class="line">    return  box(_st, vec2(_size,_size/4.)) +</span><br><span class="line">            box(_st, vec2(_size/4.,_size));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // To move the cross we move the space</span><br><span class="line">    vec2 translate = vec2(cos(u_time),sin(u_time));</span><br><span class="line">    st += translate*0.3;</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.154)); // çªå‡ºtranslateä¸­å¿ƒç‚¹çš„ç§»åŠ¨</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*GfW3IgV8F9bvbg7OijESlA.gif" alt="img"></p><h2 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#define PI 3.14159265359</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">mat2 rotate2d(float _angle)&#123;</span><br><span class="line">    return mat2(cos(_angle),-sin(_angle),</span><br><span class="line">                sin(_angle),cos(_angle));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float box(in vec2 _st, in vec2 _size)&#123;</span><br><span class="line">    _size = vec2(0.5) - _size*0.5;</span><br><span class="line">    vec2 uv = smoothstep(_size,</span><br><span class="line">                        _size+vec2(0.001),</span><br><span class="line">                        _st);</span><br><span class="line">    uv *= smoothstep(_size,</span><br><span class="line">                    _size+vec2(0.001),</span><br><span class="line">                    vec2(1.0)-_st);</span><br><span class="line">    return uv.x*uv.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float cross(in vec2 _st, float _size)&#123;</span><br><span class="line">    return  box(_st, vec2(_size,_size/4.)) +</span><br><span class="line">            box(_st, vec2(_size/4.,_size));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // move space from the center to the vec2(0.0)</span><br><span class="line">    // stä»0~1å˜æˆ-0.5~0.5</span><br><span class="line">    st -= vec2(0.5);</span><br><span class="line">    // rotate the space,å·¦ä¹˜ï¼Œä¼ å…¥è§’åº¦</span><br><span class="line">    st = rotate2d( sin(u_time)*1.*PI ) * st;</span><br><span class="line">    // move it back to the original place</span><br><span class="line">    st += vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.4));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*JaawntaOxPEcTdTQAVGs7A.gif" alt="img"></p><p>ç»„åˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // To move the cross we move the space</span><br><span class="line">    vec2 translate = vec2(cos(u_time),sin(u_time));</span><br><span class="line">    st += translate*0.35;</span><br><span class="line">  </span><br><span class="line">    st-=vec2(0.5);</span><br><span class="line">    st = rotate2d(u_time*PI)* st;</span><br><span class="line">    st+=vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.25));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*oGGqsWHMYC5C5PXEk6NUcg.gif" alt="img"></p><p>ç¼©æ”¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    st -= vec2(0.5);</span><br><span class="line">    st = scale( vec2(sin(u_time)+1.704) ) * st;</span><br><span class="line">    st += vec2(0.5);</span><br><span class="line"></span><br><span class="line">    // Show the coordinates of the space on the background</span><br><span class="line">    color = vec3(st.x,st.y,0.0);</span><br><span class="line"></span><br><span class="line">    // Add the shape on the foreground</span><br><span class="line">    color += vec3(cross(st,0.2));</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºæ•°å­— <code>1.704</code> çš„å½±å“ï¼š</p><ol><li><strong>ç¼©æ”¾è°ƒæ•´</strong> ï¼š</li></ol><ul><li><code>sin(u_time) + 1.704</code>ï¼šè¿™ä¸ªè¡¨è¾¾å¼é€šè¿‡æ·»åŠ  <code>1.704</code> æ¥ç¡®ä¿ <code>sin</code> å‡½æ•°çš„ç»“æœï¼ˆèŒƒå›´åœ¨ [-1, 1]ï¼‰æ°¸è¿œæ˜¯æ­£çš„ï¼Œå› æ­¤ <code>sin(u_time) + 1.704</code> çš„ç»“æœèŒƒå›´å¤§çº¦åœ¨ [0.704, 2.704]ã€‚</li><li>è¿™ä¸ªèŒƒå›´å†³å®šäº† <code>scale</code> å‡½æ•°çš„ç¼©æ”¾ç³»æ•°ï¼Œå½±å“äº† <code>st</code> åæ ‡çš„ä¼¸ç¼©ã€‚å½“ä½ å¢å¤§ <code>1.704</code>ï¼Œå®é™…ä¸Šæ˜¯åœ¨å¢åŠ æœ€å°ç¼©æ”¾ç³»æ•°çš„åŸºçº¿ï¼Œä½¿åŠ¨ç”»å˜å¾—ä¸é‚£ä¹ˆå‰§çƒˆã€‚</li></ul><ol><li><strong>è§†è§‰æ•ˆæœ</strong> ï¼š</li></ol><ul><li>å½“ <code>1.704</code> å¢å¤§æ—¶ï¼Œç¼©æ”¾å˜åŒ–çš„å¹…åº¦å‡å°‘ï¼Œ<strong>å› ä¸º <code>sin(u_time)</code> çš„å˜åŠ¨è¢«ä¸€ä¸ªè¾ƒå¤§çš„å¸¸æ•°ç¨³å®šäº†ã€‚è¿™å¯¼è‡´è§†è§‰æ•ˆæœçš„åŠ¨æ€å˜åŒ–è¾ƒå°‘ï¼Œä»è€Œæ•ˆæœä¸é‚£ä¹ˆæ˜æ˜¾</strong>ã€‚</li></ul><ol><li><strong>å‘¨æœŸæ€§å˜åŒ–</strong> ï¼š</li></ol><ul><li><code>sin</code> å‡½æ•°æ˜¯å‘¨æœŸæ€§çš„ï¼Œå…¶å˜åŒ–å¯¹æ•´ä¸ªåœºæ™¯çš„åŠ¨æ€å˜åŒ–è‡³å…³é‡è¦ã€‚å¢å¤§ <code>1.704</code> çš„å€¼é™ä½äº† <code>sin</code> å‡½æ•°å˜åŒ–å¯¹æ•´ä½“ç¼©æ”¾çš„å½±å“ï¼Œä»è€Œä½¿å¾—æ•ˆæœå˜åŒ–ä¸é‚£ä¹ˆæ˜¾è‘—ã€‚</li></ul><p>st &#x3D; scale( vec2(-0.1) ) * st;å’Œst &#x3D; scale( vec2(0.1) ) * st;çš„åå­—æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒèƒŒæ™¯æ•ˆæœç¿»è½¬äº†(å·¦æ­£å³è´Ÿ)ï¼›st &#x3D; scale( vec2(0.) ) * st; è¿™ä¸ªæ—¶å€™é¡µé¢å…¨ç™½ï¼›</p><p>æ‰€ä»¥ç¼©æ”¾è°ƒæ•´æ•°å­—å¤§äº1æˆ–å°äº-1ä¹‹ä¸‹ï¼Œéƒ½æ˜¯å°å¹…åº¦çš„ç¼©æ”¾ï¼›</p></blockquote><p><img src="https://s2.loli.net/2024/08/28/dw31YJQyHomFI8A.png" alt="image.png"></p><p>é¢œè‰²ç©ºé—´RGBå’ŒYUV</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">// YUV to RGB matrix</span><br><span class="line">mat3 yuv2rgb = mat3(1.0, 0.0, 1.13983,</span><br><span class="line">                    1.0, -0.39465, -0.58060,</span><br><span class="line">                    1.0, 2.03211, 0.0);</span><br><span class="line"></span><br><span class="line">// RGB to YUV matrix</span><br><span class="line">mat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722,</span><br><span class="line">                    -0.09991, -0.33609, 0.43600,</span><br><span class="line">                    0.615, -0.5586, -0.05639);</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // UV values goes from -1 to 1</span><br><span class="line">    // So we need to remap st (0.0 to 1.0)</span><br><span class="line">    st -= 0.5;  // becomes -0.5 to 0.5</span><br><span class="line">    st *= 2.0;  // becomes -1.0 to 1.0</span><br><span class="line"></span><br><span class="line">    // we pass st as the y &amp; z values of</span><br><span class="line">    // a three dimensional vector to be</span><br><span class="line">    // properly multiply by a 3x3 matrix</span><br><span class="line">    color = yuv2rgb * vec3(0., st.x, st.y);</span><br><span class="line">    //color = rgb2yuv * vec3(0., st.x, st.y);</span><br><span class="line">  </span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/28/gLFMGhyQDfzAo2k.png" alt="image.png"></p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p><a href="https://www.pinterest.com/patriciogonzv/hud-fui/">790 HUD &amp; FUI ideas | head up display, user interface, interface design (pinterest.com)</a></p><p><a href="https://www.shadertoy.com/view/4s2SRt">Oblivion radar (shadertoy.com)</a></p><p><a href="https://lygia.xyz/space">LYGIA Shader Library</a></p><p><a href="https://patriciogonzalezvivo.com/">Patricio Gonzalez Vivo</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>threeæ¡ˆä¾‹å®æ“|èµ›åšé£å¤§å±â… </title>
    <link href="https://youxt-njnu.github.io/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/"/>
    <id>https://youxt-njnu.github.io/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/</id>
    <published>2024-08-28T03:12:05.000Z</published>
    <updated>2024-10-05T12:02:36.629Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‚è€ƒæ¡ˆä¾‹ï¼š<a href="https://dragonir.github.io/3d/#/earthDigital">https://dragonir.github.io/3d/#/earthDigital</a></p><h1 id="åŸºç¡€ç¯å¢ƒ"><a href="#åŸºç¡€ç¯å¢ƒ" class="headerlink" title="åŸºç¡€ç¯å¢ƒ"></a>åŸºç¡€ç¯å¢ƒ</h1><p>react+vite+three.js+scss</p><p>ç›®å½•ï¼š</p><p>EarthDigital</p><p>â€“images</p><p>â€”-earth.jpg</p><p>â€“index.jsx</p><p>â€“index.scss</p><h1 id="ä»£ç æ¡†æ¶"><a href="#ä»£ç æ¡†æ¶" class="headerlink" title="ä»£ç æ¡†æ¶"></a>ä»£ç æ¡†æ¶</h1><p>å…ˆå¯¼å…¥äº›åŸºæœ¬çš„ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Three</span> <span class="keyword">from</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">OrbitControls</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/controls/OrbitControls&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mergeGeometries &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/utils/BufferGeometryUtils&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> earthImg <span class="keyword">from</span> <span class="string">&#x27;/src/assets/3d/EarthDigital/images/earth.jpg&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æŠŠé¡¹ç›®æ¶å­æ­èµ·æ¥ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">index</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123; &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;earth-digital&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span> <span class="attr">className</span>=<span class="string">&quot;webgl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&quot;hud-header&quot;</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">aside</span> <span class="attr">className</span>=<span class="string">&quot;hud-aside-left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">aside</span> <span class="attr">className</span>=<span class="string">&quot;hud-aside-right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&quot;hud-footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;background&quot;</span>&gt;</span>section<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> index</span><br></pre></td></tr></table></figure><p>ä¸€äº›å‰ç½®å˜é‡å’Œå¸¸è§„å‡½æ•°ï¼šâ€”â€” initThree(), animate(), handleResize()</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> scene = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> camera = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> renderer = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> orbitControls = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> earth = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> canvasRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">initThree</span>();</span><br><span class="line">  <span class="title function_">animate</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p>åœºæ™¯åˆå§‹åŒ–ï¼šâ€”â€” scene, camera, renderer, orbitControls</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initThree</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  scene = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Scene</span>();</span><br><span class="line">  camera = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">45</span>, <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="number">0.1</span>, <span class="number">50</span>);</span><br><span class="line">  camera.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15.5</span>);</span><br><span class="line">  scene.<span class="title function_">add</span>(camera);</span><br><span class="line"></span><br><span class="line">  renderer = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">WebGLRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">canvas</span>: canvasRef.<span class="property">current</span>,</span><br><span class="line">    <span class="attr">antialias</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">alpha</span>: <span class="literal">true</span> <span class="comment">// transparent background</span></span><br><span class="line">  &#125;);</span><br><span class="line">  renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">  renderer.<span class="title function_">setPixelRatio</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>, <span class="number">2</span>));</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line"></span><br><span class="line">  orbitControls = <span class="keyword">new</span> <span class="title class_">OrbitControls</span>(camera, renderer.<span class="property">domElement</span>);</span><br><span class="line">  orbitControls.<span class="property">enableDamping</span> = <span class="literal">true</span>;</span><br><span class="line">  orbitControls.<span class="property">enablePan</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸ŠåŠ¨ç”»ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// æ›´æ–°tween</span></span><br><span class="line">  <span class="comment">// TWEEN.update();</span></span><br><span class="line">  <span class="comment">// æ¨¡å‹åŠ¨ç”»</span></span><br><span class="line">  <span class="comment">// earth.rotation.y += 0.001;</span></span><br><span class="line">  renderer &amp;&amp; scene &amp;&amp; camera &amp;&amp; renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸Šçª—ä½“é€‚åº”ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleResize</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  camera.<span class="property">aspect</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">  camera.<span class="title function_">updateProjectionMatrix</span>();</span><br><span class="line">  renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤§åœ°çƒæ¨¡å‹"><a href="#å¤§åœ°çƒæ¨¡å‹" class="headerlink" title="å¤§åœ°çƒæ¨¡å‹"></a>å¤§åœ°çƒæ¨¡å‹</h1><p>åŠ å…¥ä¸ªå‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">initThree</span>();</span><br><span class="line">  <span class="title function_">createPoints</span>();</span><br><span class="line">  <span class="title function_">animate</span>();</span><br><span class="line"> ......</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h2 id="çƒä½“ä¸Šçš„ç‚¹"><a href="#çƒä½“ä¸Šçš„ç‚¹" class="headerlink" title="çƒä½“ä¸Šçš„ç‚¹"></a>çƒä½“ä¸Šçš„ç‚¹</h2><p>æ·»åŠ å‰ç½®å˜é‡ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">const</span> <span class="title function_">createPoints</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> rad = <span class="number">5</span>; <span class="comment">// çƒä½“åŠå¾„</span></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">75000</span>; <span class="comment">// çƒä½“ä¸Šçš„ç‚¹æ•°é‡</span></span><br><span class="line">    <span class="keyword">let</span> dlong = <span class="title class_">Math</span>.<span class="property">PI</span> * (<span class="number">3</span> - <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">5</span>)); <span class="comment">// ç»åº¦çš„å¢é‡</span></span><br><span class="line">    <span class="keyword">let</span> dz = <span class="number">2</span> / counter; <span class="comment">// çº¬åº¦çš„å¢é‡ï¼Œä¹Ÿå°±æ˜¯zè½´çš„å¢é‡</span></span><br><span class="line">    <span class="keyword">let</span> z = <span class="number">1</span>- dz / <span class="number">2</span>; <span class="comment">// åˆå§‹zå€¼</span></span><br><span class="line">    <span class="keyword">let</span> long = <span class="number">0</span>; <span class="comment">// åˆå§‹ç»åº¦</span></span><br><span class="line">    <span class="keyword">let</span> r = <span class="number">0</span>; <span class="comment">// xyå¹³é¢ä¸Šçš„å¾„å‘åŠå¾„ï¼Œç±»ä¼¼äºx^2+y^2=r^2(å‹¾è‚¡ä¸‰è§’),r^2+z^2=1(çƒåŠå¾„ï¼Œå…ˆ1ï¼Œåç¼©æ”¾è‡³rad)</span></span><br><span class="line">    <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>(); <span class="comment">// ç”¨äºå­˜xyzçš„åæ ‡</span></span><br><span class="line">    <span class="keyword">let</span> sph = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Spherical</span>(); <span class="comment">// æ„å»ºæŠŠä¸Šé¢çš„è½¬æ¢æˆçƒä½“åæ ‡</span></span><br><span class="line">    <span class="keyword">let</span> dummyObj = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Object3D</span>(); <span class="comment">// ç”¨äºè°ƒæ•´åç»­çƒé¢ä¸Šplaneçš„ä½ç½®å’Œæœå‘</span></span><br><span class="line">    <span class="keyword">let</span> geoms = []; <span class="comment">// å­˜å‚¨æ‰€æœ‰çš„plane</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> earthTexture = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(earthImg);</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>ä¸ºå•¥è®¾ç½®ç»åº¦å¢é‡ä¸ºä¸Šå¼å­ï¼Ÿ</p><blockquote><p>ç»åº¦å¢é‡è®¾ç½®ä¸º <code>Math.PI * (3 - Math.sqrt(5))</code> å®é™…ä¸Šæ˜¯åŸºäºé»„é‡‘è§’ï¼Œè¿™ç§æ–¹æ³•å¸¸ç”¨äºåœ¨çƒé¢ä¸Šåˆ†å¸ƒç‚¹ä»¥è¾¾åˆ°å°½å¯èƒ½å‡åŒ€çš„è¦†ç›–ã€‚è¿™ä¸ªå€¼ä¸é»„é‡‘åˆ†å‰²æœ‰å…³ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><strong>é»„é‡‘åˆ†å‰²æ•°</strong> (Ï†) çº¦ä¸º 1.618033988749895ã€‚</li><li>ä½†åœ¨è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>3 - Math.sqrt(5)</code>ï¼Œè®¡ç®—ç»“æœå¤§çº¦ä¸º 0.7639320225002102ï¼Œå®ƒæ˜¯é»„é‡‘åˆ†å‰²æ•°çš„ä¸€ç§æ•°å­¦è½¬æ¢ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œè¿™ä¸ªå€¼å®é™…ä¸Šç­‰äº ( 2 - \phi )ã€‚</li><li>å½“ä½ å°†è¿™ä¸ªå€¼ä¹˜ä»¥ (\pi) ï¼ˆåœ†å‘¨ç‡ï¼‰ï¼Œå¾—åˆ°çš„è§’åº¦æ˜¯é€šè¿‡é»„é‡‘åˆ†å‰²åŸç†è®¡ç®—å¾—æ¥çš„ã€‚è¿™ä¸ªè§’åº¦æœ‰åŠ©äºåœ¨çƒé¢ä¸Šå‡åŒ€åœ°åˆ†å¸ƒç‚¹ï¼Œå› ä¸ºå®ƒé¿å…äº†ç»çº¬çº¿çš„å¯¹é½ï¼Œä»è€Œåœ¨è§†è§‰ä¸Šçœ‹èµ·æ¥æ›´ä¸ºå‡åŒ€ã€‚</li></ul><p>é»„é‡‘è§’æ˜¯é»„é‡‘åˆ†å‰²æ•°åœ¨åœ†ä¸Šçš„åº”ç”¨ã€‚åœ¨è‡ªç„¶ç•Œä¸­ï¼Œä¾‹å¦‚å‘æ—¥è‘µçš„ç§å­æ’åˆ—ã€æ¾æœçš„é³ç‰‡å¸ƒå±€ç­‰ï¼Œéƒ½å¯ä»¥è§åˆ°é»„é‡‘è§’çš„åº”ç”¨ã€‚å®ƒèƒ½å¤Ÿä¼˜åŒ–ç©ºé—´åˆ©ç”¨ç‡å¹¶å‡å°‘é‡å ï¼Œå› æ­¤åœ¨ç®—æ³•ç”Ÿæˆå‡åŒ€åˆ†å¸ƒçš„ç‚¹æ—¶ä¹Ÿç»å¸¸ä½¿ç”¨è¿™ä¸€è§’åº¦ã€‚</p><p>åœ¨çƒé¢åˆ†å¸ƒç‚¹æ—¶ä½¿ç”¨é»„é‡‘è§’å¯ä»¥é¿å…èšç±»å¹¶å°½å¯èƒ½è¦†ç›–æ•´ä¸ªçƒé¢ã€‚è¿™æ ·çš„æ’åˆ—å‡å°‘äº†ä»»ä½•ç»™å®šåŒºåŸŸå†…ç‚¹è¿‡å¤šèšé›†çš„æƒ…å†µï¼Œä»è€Œä½¿ç‚¹çš„åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œè¿™å¯¹äºå¾ˆå¤šæ¶‰åŠåˆ°ç©ºé—´åˆ†å¸ƒä¼˜åŒ–çš„é¢†åŸŸï¼Œå¦‚è®¡ç®—æœºå›¾å½¢å­¦ã€åœ°ç†ä¿¡æ¯ç³»ç»Ÿç­‰æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆzçš„åˆå§‹å€¼è®¾ç½®ä¸ºè¿™ä¸ªlet z &#x3D; 1 - dz &#x2F; 2;ï¼Œè€Œä¸æ˜¯ä»0å¼€å§‹</p><blockquote><p>åœ¨æ„å»ºçƒé¢åˆ†å¸ƒæ—¶ï¼Œå°† <code>z</code> çš„åˆå§‹å€¼è®¾ç½®ä¸º <code>1 - dz / 2</code> è€Œä¸æ˜¯ä» 0 å¼€å§‹çš„åŸå› æ˜¯ä¸ºäº†ç¡®ä¿ç‚¹å‡åŒ€è¦†ç›–æ•´ä¸ªçƒä½“ï¼ŒåŒ…æ‹¬é¡¶éƒ¨å’Œåº•éƒ¨ã€‚å…·ä½“åŸå› åŒ…æ‹¬ï¼š</p><p>é¿å…æç‚¹çš„èšé›†</p><ul><li>çƒä½“çš„é¡¶éƒ¨å’Œåº•éƒ¨ï¼ˆå³æç‚¹ï¼‰æ˜¯ç‰¹æ®Šçš„ä½ç½®ï¼Œå¦‚æœä» z &#x3D; 0 æˆ– z &#x3D; 1 å¼€å§‹ï¼Œå¯èƒ½ä¼šåœ¨è¿™äº›æç‚¹å¤„å¯¼è‡´ç‚¹è¿‡åº¦èšé›†æˆ–åˆ†å¸ƒä¸å‡ã€‚</li><li>é€šè¿‡å°† <code>z</code> çš„åˆå§‹å€¼è®¾ç½®ä¸º <code>1 - dz / 2</code>ï¼Œç›¸å½“äºåœ¨ z è½´ä¸Šå¯¹ç‚¹çš„ä½ç½®è¿›è¡Œäº†å¾®å°çš„åç§»ï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªç‚¹å’Œæœ€åä¸€ä¸ªç‚¹éƒ½ä¸ä¼šç²¾ç¡®åœ°ä½äºçƒä½“çš„æç‚¹ä¸Šï¼Œè€Œæ˜¯ç¨å¾®åç¦»ä¸­å¿ƒã€‚è¿™æœ‰åŠ©äºæ”¹å–„çƒé¢ä¸Šç‚¹çš„åˆ†å¸ƒå‡åŒ€æ€§ã€‚</li></ul><p>ç¡®ä¿è¦†ç›–å…¨çƒ</p><ul><li>ç”±äº <code>dz = 2 / counter</code>ï¼Œè¿™æ„å‘³ç€ z å€¼å°†ä» 1 å¼€å§‹ï¼Œé€æ¸é€’å‡è‡³ -1ï¼Œè¦†ç›–æ•´ä¸ªçƒä½“ã€‚</li><li>åˆå§‹å€¼ <code>1 - dz / 2</code> å®é™…ä¸Šå°†ç¬¬ä¸€ä¸ªç‚¹çš„ z å€¼è®¾ç½®ä¸ºæ¥è¿‘ 1ï¼Œä½†ç•¥ä½äº 1ï¼Œç¡®ä¿ç‚¹ä»çƒä½“çš„é¡¶éƒ¨å¼€å§‹ï¼ŒåŒæ—¶ä¸ä¼šä¸çƒé¡¶é‡åˆã€‚</li></ul><p>å‡åŒ€åˆ†å¸ƒ</p><ul><li>æ­¤æ–¹æ³•ç¡®ä¿äº†ç‚¹åœ¨å‚ç›´æ–¹å‘ä¸Šä¹Ÿæ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚é€šè¿‡ä» <code>1 - dz / 2</code> å¼€å§‹ï¼Œæ¯ä¸ªç‚¹çš„ z å€¼éƒ½æ˜¯å‡åŒ€åœ°åœ¨ z è½´ä¸Šåç§»çš„ï¼Œä»è€Œé¿å…äº†åœ¨æ¥è¿‘æç‚¹åŒºåŸŸçš„ä¸å‡åŒ€å¯†åº¦ã€‚</li></ul></blockquote><p>â¡ï¸ åè¯1 â˜•ï¸</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> maxImpactAmount = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> impacts = [];</span><br><span class="line"><span class="comment">// let trails = [];</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxImpactAmount; i++) &#123;</span><br><span class="line">  impacts.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">impactPosition</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>),</span><br><span class="line">    <span class="attr">impactMaxRadius</span>: <span class="number">5</span> * <span class="title class_">Three</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloat</span>(<span class="number">0.5</span>, <span class="number">0.75</span>), <span class="comment">// Three.Math.randFloatä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="attr">impactRatio</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">prevPosition</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>().<span class="title function_">random</span>().<span class="title function_">subScalar</span>(<span class="number">0.5</span>).<span class="title function_">setLength</span>(<span class="number">5</span>),</span><br><span class="line">    <span class="attr">trailRatio</span>: &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">trailLength</span>: &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// makeTrail(i);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â¡ï¸ åè¯2 â˜•ï¸</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> params = &#123;</span><br><span class="line">  <span class="attr">colors</span>: &#123;<span class="attr">base</span>: <span class="string">&#x27;#f9f002&#x27;</span>, <span class="attr">gradInner</span>: <span class="string">&#x27;#8ae66e&#x27;</span>, <span class="attr">gradOuter</span>: <span class="string">&#x27;#03c03c&#x27;</span>&#125;,</span><br><span class="line">  <span class="attr">reset</span>: <span class="function">()=&gt;</span> &#123; orbitControls.<span class="title function_">reset</span>() &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> uniforms = &#123;</span><br><span class="line">  <span class="attr">impacts</span>: &#123;<span class="attr">value</span>: impacts&#125;,</span><br><span class="line">  <span class="attr">maxSize</span>: &#123;<span class="attr">value</span>: <span class="number">.04</span>&#125;, <span class="comment">// é™†åœ°è‰²å—å¤§å°</span></span><br><span class="line">  <span class="attr">minSize</span>: &#123; <span class="attr">value</span>: <span class="number">.025</span>&#125;, <span class="comment">// æµ·æ´‹è‰²å—å¤§å°</span></span><br><span class="line">  <span class="attr">waveHeight</span>: &#123;<span class="attr">value</span>: <span class="number">.1</span>&#125;, <span class="comment">// å†²å‡»æ³¢é«˜åº¦</span></span><br><span class="line">  <span class="attr">scaling</span>: &#123;<span class="attr">value</span>: <span class="number">1</span>&#125;, <span class="comment">// å†²å‡»æ³¢èŒƒå›´</span></span><br><span class="line">  <span class="attr">gradInner</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">gradInner</span>)&#125;, <span class="comment">// å†²å‡»æ³¢å¾„å‘æ¸å˜å†…ä¾§é¢œè‰²</span></span><br><span class="line">  <span class="attr">gradOuter</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">gradOuter</span>)&#125;, <span class="comment">// å†²å‡»æ³¢å¾„å‘æ¸å˜å¤–ä¾§é¢œè‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ ç‚¹ï¼š</p><ol><li>æ ¹æ®zçš„ä¸åŒï¼Œå¾—åˆ°rï¼Œå†æ±‚å¾—threeåæ ‡ç³»ä¸‹ï¼ˆï¼‰çš„ä¸‰ç»´åæ ‡pï¼Œè½¬æˆçƒä½“phiå’Œthetaçš„åæ ‡sph;</li><li>ä¿®æ”¹longå’Œzï¼Œä¿å­˜pçš„æœå‘å’Œæ¨¡å‹çŸ©é˜µï¼›</li><li>åˆ©ç”¨planeæ„é€ çƒé¢ä¸Šçš„ç‚¹ï¼Œé€šè¿‡æ–°å»ºã€å˜æ¢ã€è®¾ç½®ä¸­å¿ƒç‚¹å’Œuvåæ ‡å®ç°</li><li>planeé‡Œä¼ å…¥äº†ä¸¤ä¸ªå±æ€§ï¼šcenter(æ¯ä¸ªç‚¹å¯¹åº”çš„ä½ç½®), uv(è¿™ä¸ªç‚¹çš„çƒé¢åæ ‡ï¼Œç¼©æ”¾åˆ°0-1èŒƒå›´å†…)</li></ol><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;counter;i++) &#123;</span><br><span class="line">  r = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">1</span> - z * z);</span><br><span class="line">  p.<span class="title function_">set</span>(r * <span class="title class_">Math</span>.<span class="title function_">cos</span>(long), z, -r * <span class="title class_">Math</span>.<span class="title function_">sin</span>(long)).<span class="title function_">multiplyScalar</span>(rad);</span><br><span class="line">  sph.<span class="title function_">setFromVector3</span>(p);</span><br><span class="line">  long = long + dlong;</span><br><span class="line">  z = z - dz;</span><br><span class="line">  dummyObj.<span class="title function_">lookAt</span>(p);</span><br><span class="line">  dummyObj.<span class="title function_">updateMatrix</span>();</span><br><span class="line">  <span class="comment">// æ„å»ºçƒé¢ä¸Šçš„planeï¼ŒåŒæ—¶è®¾ç½®uvåæ ‡</span></span><br><span class="line">  <span class="keyword">let</span> plane = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">PlaneGeometry</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">  plane.<span class="title function_">applyMatrix4</span>(dummyObj.<span class="property">matrix</span>);</span><br><span class="line">  plane.<span class="title function_">translate</span>(p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>);</span><br><span class="line">  <span class="keyword">let</span> centers = [p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>,p.<span class="property">x</span>,p.<span class="property">y</span>,p.<span class="property">z</span>];</span><br><span class="line">  plane.<span class="title function_">setAttribute</span>(<span class="string">&#x27;center&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferAttribute</span>(<span class="keyword">new</span> <span class="title class_">Float32Array</span>(centers), <span class="number">3</span>));</span><br><span class="line">  <span class="keyword">let</span> uv = [(sph+<span class="title class_">Math</span>.<span class="property">PI</span>)/(<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>),<span class="number">1</span>-(sph.<span class="property">theta</span>/<span class="title class_">Math</span>.<span class="property">PI</span>)];</span><br><span class="line">  <span class="keyword">let</span> uvs = [uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>,uv.<span class="property">x</span>,uv.<span class="property">y</span>];</span><br><span class="line">  plane.<span class="title function_">setAttribute</span>(<span class="string">&#x27;baseUv&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">BufferAttribute</span>(<span class="keyword">new</span> <span class="title class_">Float32Array</span>(uvs), <span class="number">2</span>));</span><br><span class="line">  geoms.<span class="title function_">push</span>(plane);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çƒæè´¨å’Œæ„é€ "><a href="#çƒæè´¨å’Œæ„é€ " class="headerlink" title="çƒæè´¨å’Œæ„é€ "></a>çƒæè´¨å’Œæ„é€ </h2><p>æ„é€ Mesh</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">let</span> g = <span class="title function_">mergeGeometries</span>(geoms);</span><br><span class="line">  <span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Color</span>(params.<span class="property">colors</span>.<span class="property">base</span>),</span><br><span class="line">    <span class="attr">onBeforeCompile</span>: <span class="function"><span class="params">shader</span> =&gt;</span> &#123;</span><br><span class="line">      ......</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  m.<span class="property">defines</span> = &#123;<span class="string">&#x27;USE_UV&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;;</span><br><span class="line">  earth = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Mesh</span>(g, m);</span><br><span class="line">  earth.<span class="property">rotation</span>.<span class="property">y</span> = <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">  <span class="comment">// trails.forEach( t =&gt; earth.add(t));</span></span><br><span class="line">  earth.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, -<span class="number">0.4</span>, <span class="number">0</span>);</span><br><span class="line">  scene.<span class="title function_">add</span>(earth);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çƒä½“æè´¨</p><p>åŸºæœ¬é‡</p><ul><li><strong><code>struct impact</code></strong>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«å†²å‡»ç‚¹æ•°æ®çš„ç»“æ„ï¼ŒåŒ…æ‹¬å†²å‡»çš„ä½ç½®(<code>impactPosition</code>)ã€å†²å‡»çš„æœ€å¤§åŠå¾„(<code>impactMaxRadius</code>)å’Œå†²å‡»æ¯”ä¾‹(<code>impactRatio</code>)ã€‚</li><li><strong><code>uniform impact impacts[]</code></strong>: ä¸€ä¸ªåŒ…å«å¤šä¸ªå†²å‡»ç‚¹çš„æ•°ç»„ã€‚</li><li><strong><code>uniform sampler2D tex</code></strong>: ä¸€ä¸ªäºŒç»´çº¹ç†ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼ˆæ¯”å¦‚å›¾åƒæˆ–è€…æ ¹æ®çº¹ç†ç”Ÿæˆçš„æ•°æ®ï¼‰ã€‚</li><li><strong><code>uniform float maxSize, minSize</code></strong>: æœ€å¤§å’Œæœ€å°å°ºå¯¸ã€‚</li><li><strong><code>uniform float waveHeight</code></strong>: æ³¢é«˜ã€‚</li><li><strong><code>uniform float scaling</code></strong>: ç¼©æ”¾ç³»æ•°ã€‚</li><li><strong><code>attribute vec3 center</code></strong>: é¡¶ç‚¹çš„ä¸­å¿ƒä½ç½®ã€‚</li><li><strong><code>attribute vec2 baseUv</code></strong>: é¡¶ç‚¹çš„åŸºæœ¬UVåæ ‡ã€‚</li><li><strong><code>varying float vFinalStep</code></strong> å’Œ <strong><code>varying float vMap</code></strong>: è¿™äº›æ˜¯ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨çš„å˜é‡ï¼Œç”¨äºè¿›ä¸€æ­¥çš„æ¸²æŸ“è®¡ç®—ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">uniforms</span>.<span class="property">impacts</span> = uniforms.<span class="property">impacts</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">maxSize</span> = uniforms.<span class="property">maxSize</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">minSize</span> = uniforms.<span class="property">minSize</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">waveHeight</span> = uniforms.<span class="property">waveHeight</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">scaling</span> = uniforms.<span class="property">scaling</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">gradInner</span> = uniforms.<span class="property">gradInner</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">gradOuter</span> = uniforms.<span class="property">gradOuter</span>;</span><br><span class="line">       shader.<span class="property">uniforms</span>.<span class="property">tex</span> = &#123; <span class="attr">value</span>: earthTexture &#125;;</span><br></pre></td></tr></table></figure><p>é¡¶ç‚¹ç€è‰²å™¨é€»è¾‘</p><ul><li><strong>å¾ªç¯éå†æ¯ä¸ªå†²å‡»ç‚¹</strong>ï¼šè®¡ç®—æ¯ä¸ªé¡¶ç‚¹ä¸æ¯ä¸ªå†²å‡»ç‚¹çš„è·ç¦»ï¼Œæ ¹æ®è·ç¦»å’Œå†²å‡»ç‚¹çš„å½±å“èŒƒå›´è®¡ç®—ä¸€ä¸ªå¹³æ»‘çš„æ­¥è¿›(<code>sstep</code>)ã€‚è¿™ä¸ªæ­¥è¿›æ˜¯åŸºäº <code>smoothstep</code> å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå†²å‡»æ³¢çš„è¾¹ç•Œæ›´åŠ å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœã€‚</li><li><strong><code>finalStep</code>çš„è®¡ç®—</strong>ï¼šç´¯åŠ æ‰€æœ‰å†²å‡»ç‚¹å¯¹å½“å‰é¡¶ç‚¹çš„å½±å“ï¼Œä½¿ç”¨ <code>clamp</code> å‡½æ•°ç¡®ä¿å€¼åœ¨0åˆ°1ä¹‹é—´ã€‚</li><li><strong><code>map</code>å˜é‡çš„è®¡ç®—</strong>ï¼šä»çº¹ç†ä¸­è·å–å½“å‰é¡¶ç‚¹çš„greenå€¼ï¼Œç”¨äºå†³å®šé¡¶ç‚¹çš„å°ºå¯¸æ˜¯ <code>maxSize</code> è¿˜æ˜¯ <code>minSize</code>ï¼ŒåŒºåˆ†äº†é™†åœ°å’Œæµ·æ´‹ã€‚</li><li><strong>é¡¶ç‚¹ä½ç½®(<code>transformed</code>)çš„æ›´æ–°</strong>ï¼šæ ¹æ® <code>map</code> çš„ç»“æœå’Œè®¡ç®—å‡ºçš„ <code>finalStep</code> è°ƒæ•´é¡¶ç‚¹ä½ç½®ï¼Œä»¥å®ç°ä½ç½®çš„ç¼©æ”¾å’Œæ³¢çº¹æ•ˆæœã€‚ä½¿ç”¨ <code>mix</code> å‡½æ•°æ ¹æ®å†²å‡»æ³¢å½±å“ç¨‹åº¦åœ¨åŸå§‹å°ºå¯¸å’Œæ”¾å¤§åçš„å°ºå¯¸ä¹‹é—´è¿›è¡Œæ’å€¼ã€‚æ³¢é«˜(<code>waveHeight</code>)å’Œ <code>finalStep</code> çš„ä¹˜ç§¯å†³å®šäº†é¡¶ç‚¹æ²¿æ³•çº¿æ–¹å‘çš„ä½ç§»é‡ã€‚</li><li>è¿™æ®µä»£ç é€šè¿‡è®¡ç®—æ¯ä¸ªé¡¶ç‚¹ä¸ä¸€ç»„å†²å‡»æ³¢çš„ç›¸å¯¹ä½ç½®å’Œå½±å“ï¼ŒåŠ¨æ€è°ƒæ•´é¡¶ç‚¹ä½ç½®å’Œå¤§å°ï¼Œä»è€Œåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºå‡ºåŠ¨æ€çš„æ³¢çº¹æ•ˆæœã€‚è¿™ç§ç±»å‹çš„ç€è‰²å™¨ç¼–ç¨‹å…è®¸å¼€å‘è€…åˆ›å»ºå¤æ‚å’ŒåŠ¨æ€çš„è§†è§‰æ•ˆæœï¼Œç”¨äºæ¸¸æˆå¼€å‘ã€è§†è§‰è‰ºæœ¯å’Œæ¨¡æ‹Ÿç­‰é¢†åŸŸã€‚</li><li>è¡¥å……ï¼š<code>baseUv</code> åœ¨ Three.js ä¸­æ˜¯ä½œä¸ºæ¯ä¸ªé¡¶ç‚¹çš„äºŒç»´çº¹ç†åæ ‡ï¼ˆ<code>vec2</code>ï¼‰è¢«å¤„ç†çš„ã€‚è¿™äº›åæ ‡æ˜¯ä½œä¸ºé¡¶ç‚¹å±æ€§ä¸Šä¼ åˆ° GPU çš„ï¼Œåç»­åœ¨ GLSL ç€è‰²å™¨ä¸­å¯ä»¥ç›´æ¥è®¿é—®ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">vertexShader</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    struct impact &#123;</span></span><br><span class="line"><span class="string">      vec3 impactPosition;</span></span><br><span class="line"><span class="string">      float impactMaxRadius;</span></span><br><span class="line"><span class="string">      float impactRatio;</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    uniform impact impacts[<span class="subst">$&#123;maxImpactAmount&#125;</span>];</span></span><br><span class="line"><span class="string">    uniform sampler2D tex;</span></span><br><span class="line"><span class="string">    uniform float maxSize;</span></span><br><span class="line"><span class="string">    uniform float minSize;</span></span><br><span class="line"><span class="string">    uniform float waveHeight;</span></span><br><span class="line"><span class="string">    uniform float scaling;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    attribute vec3 center;</span></span><br><span class="line"><span class="string">    attribute vec2 baseUv;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    varying float vFinalStep;</span></span><br><span class="line"><span class="string">    varying float vMap;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;shader.vertexShader&#125;</span></span></span><br><span class="line"><span class="string">  `</span>.<span class="title function_">replace</span>(</span><br><span class="line">    <span class="string">`#include &lt;begin_vertex&gt;`</span>,</span><br><span class="line">    <span class="string">`#include &lt;begin_vertex&gt;</span></span><br><span class="line"><span class="string">    float finalStep = 0.0;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; <span class="subst">$&#123;maxImpactAmount&#125;</span>;i++)&#123;</span></span><br><span class="line"><span class="string">      float dist = distance(center, impacts[i].impactPosition);</span></span><br><span class="line"><span class="string">      float curRadius = impacts[i].impactMaxRadius * impacts[i].impactRatio;</span></span><br><span class="line"><span class="string">      float sstep = smoothstep(0., curRadius, dist) - smoothstep(curRadius - ( 0.25 * impacts[i].impactRatio ), curRadius, dist);</span></span><br><span class="line"><span class="string">      sstep *= 1. - impacts[i].impactRatio;</span></span><br><span class="line"><span class="string">      finalStep += sstep;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    finalStep = clamp(finalStep, 0., 1.);</span></span><br><span class="line"><span class="string">    vFinalStep = finalStep;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    float map = texture(tex, baseUv).g;</span></span><br><span class="line"><span class="string">    vMap = map;</span></span><br><span class="line"><span class="string">    float pSize = map &lt; 0.5 ? maxSize : minSize;</span></span><br><span class="line"><span class="string">    float scale = scaling;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    transformed = (position - center) * pSize * mix(1., scale * 1.25, finalStep) + center; // scale on wave</span></span><br><span class="line"><span class="string">    transformed += normal * finalStep * waveHeight; // lift on wave</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure><p>ç‰‡å…ƒç€è‰²å™¨é€»è¾‘</p><ul><li>ä¼ å…¥å¯¹é€ä¸ªç‚¹èµ·ä½œç”¨çš„å†²å‡»å¼ºåº¦å’Œé¡¶ç‚¹çº¹ç†çš„gå€¼ï¼›</li><li><strong>å½¢çŠ¶å¤„ç†</strong> :</li><li>è®¡ç®—ä»¥å±å¹•ä¸­å¿ƒä¸ºåŸç‚¹çš„ UV åæ ‡ <code>hUv</code>ã€‚ï¼ˆvUvæ˜¯ä¸€ä¸ªä»0åˆ°1çš„äºŒç»´å‘é‡ï¼Œè¡¨ç¤ºçº¹ç†åæ ‡æˆ–é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’ç»™ç‰‡æ®µç€è‰²å™¨çš„é¡¶ç‚¹ä½ç½®ï¼‰</li><li>N&#x3D;8å¸¸ç”¨äºè¡¨ç¤ºæŸç§å›¾å½¢æˆ–æ¨¡å¼ä¸­é‡å¤å…ƒç´ çš„æ•°é‡</li><li><code>a</code> æ˜¯è®¡ç®—å¾—åˆ°çš„å‘é‡ <code>hUv</code>çš„è§’åº¦ï¼ˆç›¸å¯¹äºåŸç‚¹ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯åæ­£åˆ‡å‡½æ•° <code>atan</code>ï¼Œå®ƒè¿”å›ä»xè½´åˆ°å‘é‡çš„è§’åº¦ã€‚</li><li><code>r</code> æ˜¯æ¯ä¸ªæ‰‡åŒºçš„è§’åº¦èŒƒå›´ï¼Œè®¡ç®—ä¸º <code>2Ï€</code> é™¤ä»¥æ‰‡åŒºæ•°é‡ <code>N</code>ã€‚</li><li><code>d</code> æ˜¯å½“å‰ç‚¹åˆ°æœ€è¿‘æ‰‡åŒºè¾¹ç•Œçš„è·ç¦»ã€‚</li><li><code>f</code> æ˜¯æ‰‡åŒºä¸­å¿ƒåˆ°è¾¹ç•Œçš„è·ç¦»ã€‚</li><li>å¦‚æœ <code>d</code> å¤§äº <code>f</code>ï¼Œåˆ™ä¸¢å¼ƒè¯¥ç‰‡å…ƒï¼ˆ<code>discard</code>ï¼‰ï¼Œåªæœ‰è·ç¦»æ‰‡åŒºä¸­å¿ƒéå¸¸è¿‘çš„åƒç´ æ‰èƒ½é€šè¿‡æµ‹è¯•ï¼Œè¿™æ ·å¯ä»¥åˆ›å»ºæ›´åŠ é”åˆ©å’Œæ˜æ˜¾çš„è¾¹ç•Œï¼›</li><li>è¿™æœ‰åŠ©äºåˆ›å»ºå…·æœ‰ N è¾¹å½¢å½¢çŠ¶çš„æ•ˆæœã€‚</li><li><strong>é¢œè‰²å’Œæ¸å˜å¤„ç†</strong>:</li><li><code>grad</code> æ˜¯å†…å¤–æ¸å˜é¢œè‰²çš„æ··åˆï¼ŒåŸºäº <code>d / f</code> çš„å€¼è¿›è¡Œæ’å€¼ã€‚</li><li><code>diffuseMap</code> æ˜¯æ ¹æ® <code>vMap</code> è°ƒæ•´çš„æ¼«åå°„é¢œè‰²ã€‚ åŒºåˆ†äº†é™†åœ°å’Œæµ·æ´‹</li><li><code>col</code> æ˜¯æ¼«åå°„é¢œè‰²å’Œæ¸å˜é¢œè‰²çš„æœ€ç»ˆæ··åˆï¼Œå…¶ä¸­ä½¿ç”¨äº† <code>vFinalStep</code> è¿›è¡Œæ’å€¼ã€‚</li><li>ä½¿ç”¨æœ€ç»ˆè®¡ç®—å‡ºçš„é¢œè‰² <code>col</code> å’ŒåŸå§‹çš„ä¸é€æ˜åº¦ <code>opacity</code> åˆ›å»ºæ–°çš„ <code>vec4 diffuseColor</code>ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">shader.<span class="property">fragmentShader</span> = <span class="string">`</span></span><br><span class="line"><span class="string">            uniform vec3 gradInner;</span></span><br><span class="line"><span class="string">            uniform vec3 gradOuter;</span></span><br><span class="line"><span class="string">            varying float vFinalStep;</span></span><br><span class="line"><span class="string">            varying float vMap;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;shader.fragmentShader&#125;</span></span></span><br><span class="line"><span class="string">            `</span>.<span class="title function_">replace</span>(</span><br><span class="line">            <span class="string">`vec4 diffuseColor = vec4( diffuse, opacity );`</span>,</span><br><span class="line">            <span class="string">`</span></span><br><span class="line"><span class="string">            // shaping the point, pretty much from The Book of Shaders</span></span><br><span class="line"><span class="string">            vec2 hUv = (vUv - 0.5);</span></span><br><span class="line"><span class="string">            int N = 8;</span></span><br><span class="line"><span class="string">            float a = atan(hUv.x,hUv.y);</span></span><br><span class="line"><span class="string">            float r = PI2/float(N);</span></span><br><span class="line"><span class="string">            float d = cos(floor(.5+a/r)*r-a)*length(hUv);</span></span><br><span class="line"><span class="string">            float f = cos(PI / float(N)) * 0.5;</span></span><br><span class="line"><span class="string">            if (d &gt; f) discard;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            vec3 grad = mix(gradInner, gradOuter, clamp( d / f, 0., 1.)); // gradient</span></span><br><span class="line"><span class="string">            vec3 diffuseMap = diffuse * ((vMap &gt; 0.5) ? 0.5 : 1.);</span></span><br><span class="line"><span class="string">            vec3 col = mix(diffuseMap, grad, vFinalStep); // color on wave</span></span><br><span class="line"><span class="string">            //if (!gl_FrontFacing) col *= 0.25; // moderate the color on backside</span></span><br><span class="line"><span class="string">            vec4 diffuseColor = vec4( col , opacity );</span></span><br><span class="line"><span class="string">            `</span>);</span><br></pre></td></tr></table></figure><h3 id="è¡¥å……-replaceæ–¹æ³•"><a href="#è¡¥å……-replaceæ–¹æ³•" class="headerlink" title="è¡¥å…… | replaceæ–¹æ³•"></a>è¡¥å…… | replaceæ–¹æ³•</h3><p>ä¸Šè¿°vertex shaderä»£ç replaceå‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shader.vertexShader:  #include &lt;common&gt;</span><br><span class="line">#include &lt;batching_pars_vertex&gt;</span><br><span class="line">#include &lt;uv_pars_vertex&gt;</span><br><span class="line">#include &lt;envmap_pars_vertex&gt;</span><br><span class="line">#include &lt;color_pars_vertex&gt;</span><br><span class="line">#include &lt;fog_pars_vertex&gt;</span><br><span class="line">#include &lt;morphtarget_pars_vertex&gt;</span><br><span class="line">#include &lt;skinning_pars_vertex&gt;</span><br><span class="line">#include &lt;logdepthbuf_pars_vertex&gt;</span><br><span class="line">#include &lt;clipping_planes_pars_vertex&gt;</span><br><span class="line">void main() &#123;</span><br><span class="line">#include &lt;uv_vertex&gt;</span><br><span class="line">#include &lt;color_vertex&gt;</span><br><span class="line">#include &lt;morphinstance_vertex&gt;</span><br><span class="line">#include &lt;morphcolor_vertex&gt;</span><br><span class="line">#include &lt;batching_vertex&gt;</span><br><span class="line">#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )</span><br><span class="line">#include &lt;beginnormal_vertex&gt;</span><br><span class="line">#include &lt;morphnormal_vertex&gt;</span><br><span class="line">#include &lt;skinbase_vertex&gt;</span><br><span class="line">#include &lt;skinnormal_vertex&gt;</span><br><span class="line">#include &lt;defaultnormal_vertex&gt;</span><br><span class="line">#endif</span><br><span class="line">#include &lt;begin_vertex&gt;</span><br><span class="line">#include &lt;morphtarget_vertex&gt;</span><br><span class="line">#include &lt;skinning_vertex&gt;</span><br><span class="line">#include &lt;project_vertex&gt;</span><br><span class="line">#include &lt;logdepthbuf_vertex&gt;</span><br><span class="line">#include &lt;clipping_planes_vertex&gt;</span><br><span class="line">#include &lt;worldpos_vertex&gt;</span><br><span class="line">#include &lt;envmap_vertex&gt;</span><br><span class="line">#include &lt;fog_vertex&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°fragment shaderä»£ç replaceå‰ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">shader.fragmentShader:  <span class="keyword">uniform</span> <span class="type">vec3</span> diffuse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> opacity;</span><br><span class="line"><span class="meta">#ifndef FLAT_SHADED</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec3</span> vNormal;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"><span class="meta">#include &lt;common&gt;</span></span><br><span class="line"><span class="meta">#include &lt;dithering_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;color_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;uv_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;map_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphamap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphatest_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphahash_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;aomap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;lightmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;envmap_common_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;envmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;fog_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;specularmap_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;logdepthbuf_pars_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;clipping_planes_pars_fragment&gt;</span></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec4</span> diffuseColor = <span class="type">vec4</span>( diffuse, opacity );</span><br><span class="line"><span class="meta">#include &lt;clipping_planes_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;logdepthbuf_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;map_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;color_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphamap_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphatest_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;alphahash_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;specularmap_fragment&gt;</span></span><br><span class="line">ReflectedLight reflectedLight = ReflectedLight( <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ), <span class="type">vec3</span>( <span class="number">0.0</span> ) );</span><br><span class="line"><span class="meta">#ifdef USE_LIGHTMAP</span></span><br><span class="line"><span class="type">vec4</span> lightMapTexel = <span class="built_in">texture2D</span>( lightMap, vLightMapUv );</span><br><span class="line">reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;</span><br><span class="line"><span class="meta">#else</span></span><br><span class="line">reflectedLight.indirectDiffuse += <span class="type">vec3</span>( <span class="number">1.0</span> );</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"><span class="meta">#include &lt;aomap_fragment&gt;</span></span><br><span class="line">reflectedLight.indirectDiffuse *= diffuseColor.rgb;</span><br><span class="line"><span class="type">vec3</span> outgoingLight = reflectedLight.indirectDiffuse;</span><br><span class="line"><span class="meta">#include &lt;envmap_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;opaque_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;tonemapping_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;colorspace_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;fog_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;premultiplied_alpha_fragment&gt;</span></span><br><span class="line"><span class="meta">#include &lt;dithering_fragment&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ WebGL æˆ– OpenGL çš„ç€è‰²å™¨ç¼–ç¨‹ä¸­ï¼Œä½¿ç”¨ <code>.replace</code> æ–¹æ³•æ¥ä¿®æ”¹ç€è‰²å™¨ä»£ç æ˜¯ä¸€ç§å¸¸è§çš„æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚çš„ã€å¯é…ç½®çš„ç€è‰²å™¨ç³»ç»Ÿæ—¶ã€‚è¿™ç§æ–¹æ³•æä¾›äº†çµæ´»æ€§å’ŒåŠ¨æ€ç”Ÿæˆæˆ–è°ƒæ•´ç€è‰²å™¨ä»£ç çš„èƒ½åŠ›ã€‚è¿™é‡Œçš„ <code>.replace</code> æ–¹æ³•çš„ä½¿ç”¨å…·ä½“æœ‰ä»¥ä¸‹å‡ ä¸ªç›®çš„å’Œä¼˜ç‚¹ï¼š</p><ol><li><strong>åŠ¨æ€å†…å®¹æ³¨å…¥</strong></li></ol><p>é€šè¿‡ <code>.replace</code>ï¼Œå¯ä»¥æ ¹æ®ç¨‹åºçš„éœ€æ±‚æˆ–é…ç½®åŠ¨æ€åœ°æ’å…¥ç‰¹å®šçš„ä»£ç ç‰‡æ®µã€‚åœ¨ç€è‰²å™¨ä¸­ï¼Œè¿™ç§èƒ½åŠ›ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ä¸æ”¹å˜åŸå§‹ç€è‰²å™¨ä»£ç æ–‡ä»¶çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®ä¸åŒçš„æ¸²æŸ“éœ€æ±‚ä¿®æ”¹ç€è‰²å™¨è¡Œä¸ºã€‚</p><ol start="2"><li><strong>æ¡ä»¶ç¼–è¯‘</strong></li></ol><p>åœ¨å¤šä¸ªä¸åŒçš„æ¸²æŸ“åœºæ™¯ä¸‹ï¼Œå¯èƒ½éœ€è¦ç€è‰²å™¨è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚ä½¿ç”¨ <code>.replace</code> å¯ä»¥æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶é€‰æ‹©æ€§åœ°æ·»åŠ æˆ–ä¿®æ”¹ç€è‰²å™¨ä»£ç ï¼Œä»è€Œå®ç°æ¡ä»¶ç¼–è¯‘çš„æ•ˆæœã€‚æ¯”å¦‚ï¼Œæ ¹æ®å¯¹è±¡æ˜¯å¦å—åˆ°ç‰¹å®šå½±å“ï¼Œå†³å®šæ˜¯å¦å¯ç”¨æŸäº›è®¡ç®—ã€‚</p><ol start="3"><li><strong>é¿å…ç¡¬ç¼–ç </strong></li></ol><p>ç¡¬ç¼–ç åœ¨ç€è‰²å™¨ä¸­æ˜¯ä¸çµæ´»çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠåˆ°å¾ªç¯æ¬¡æ•°æˆ–æ•°ç»„å¤§å°ç­‰å‚æ•°æ—¶ã€‚é€šè¿‡ <code>.replace</code> æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ç€è‰²å™¨ä»£ç è¿è¡Œå‰æ’å…¥è¿™äº›å€¼ï¼Œä½¿ç€è‰²å™¨ä»£ç æ›´åŠ é€šç”¨å’Œå¯é…ç½®ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡æ’å…¥ <code>$&#123;maxImpactAmount&#125;</code> æ¥ç¡®å®šå¾ªç¯çš„æ¬¡æ•°ï¼Œè¿™ä½¿å¾—åŒä¸€ä»½ç€è‰²å™¨ä»£ç å¯ä»¥é€‚åº”ä¸åŒæ•°é‡çš„å†²å‡»ç‚¹ã€‚</p><ol start="4"><li><strong>æ¨¡å—åŒ–å’Œä»£ç å¤ç”¨</strong></li></ol><p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½éœ€è¦åœ¨å¤šä¸ªç€è‰²å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨ä»£ç ç‰‡æ®µã€‚é€šè¿‡ä½¿ç”¨ <code>.replace</code> æ–¹æ³•ï¼Œå¯ä»¥ä»å¤–éƒ¨æ’å…¥å…±äº«çš„ä»£ç ç‰‡æ®µæˆ–åœ¨å¤šä¸ªç€è‰²å™¨ä¹‹é—´å¤ç”¨ä»£ç ï¼Œæé«˜ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>åœ¨ä½ çš„ç¤ºä¾‹ä¸­ï¼Œ<code>.replace</code> æ–¹æ³•è¢«ç”¨æ¥æ³¨å…¥è®¡ç®—é¡¶ç‚¹æœ€ç»ˆä½ç½®çš„é€»è¾‘åˆ°ä¸€ä¸ªåŸºæœ¬çš„é¡¶ç‚¹ç€è‰²å™¨æ¨¡æ¿ä¸­ã€‚è¿™ç§æ–¹å¼å¯ä»¥ä½¿ä¸»ç€è‰²å™¨ä»£ç ä¿æŒç›¸å¯¹ä¸å˜ï¼Œè€Œç‰¹å®šçš„è®¡ç®—å’Œè¡Œä¸ºå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°æ³¨å…¥ï¼Œå¦‚å¤„ç†ä¸åŒæ•°é‡çš„å†²å‡»ç‚¹æˆ–åº”ç”¨ä¸åŒçš„åŠ¨æ€æ•ˆæœã€‚</p><h3 id="è¡¥å……-defineçš„ä½œç”¨"><a href="#è¡¥å……-defineçš„ä½œç”¨" class="headerlink" title="è¡¥å…… | defineçš„ä½œç”¨"></a>è¡¥å…… | defineçš„ä½œç”¨</h3><p>åœ¨ Three.js ä¸­ï¼Œ<code>defines</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ç€è‰²å™¨çš„é¢„å¤„ç†å®ã€‚è¿™äº›å®æ˜¯ç€è‰²å™¨ä»£ç ä¸­çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œå¯ä»¥åœ¨ç¼–è¯‘ç€è‰²å™¨ä¹‹å‰è¿›è¡Œè®¾ç½®ã€‚é€šè¿‡è®¾ç½®è¿™äº›å®ï¼Œä½ å¯ä»¥å¯ç”¨æˆ–ä¿®æ”¹ç€è‰²å™¨çš„æŸäº›éƒ¨åˆ†ï¼Œä»è€Œè°ƒæ•´å…¶è¡Œä¸ºæˆ–æ€§èƒ½ï¼Œè€Œæ— éœ€æ”¹åŠ¨ç€è‰²å™¨çš„ä¸»ä½“ä»£ç ã€‚è¿™ä¸ºçµæ´»æ€§å’Œé‡ç”¨æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p><p>ä½¿ç”¨åœºæ™¯</p><ol><li><strong>æ¡ä»¶ç¼–è¯‘</strong>ï¼š<code>defines</code> å…è®¸ä½ æ ¹æ®éœ€æ±‚å¯ç”¨æˆ–ç¦ç”¨ç€è‰²å™¨ä»£ç ä¸­çš„ç‰¹å®šéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªç‰¹æ€§ï¼ˆå¦‚çº¹ç†æ˜ å°„ï¼‰åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code>defines</code> æ¥æ§åˆ¶è¿™ä¸€éƒ¨åˆ†ä»£ç çš„ç¼–è¯‘ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡ç¦ç”¨ä¸éœ€è¦çš„ç‰¹æ€§ï¼Œå¯ä»¥å‡å°‘ç€è‰²å™¨çš„å¤æ‚æ€§ï¼Œä»è€Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä½ çš„æè´¨ä¸éœ€è¦å¤„ç†UVåæ ‡ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç›¸åº”çš„å®æ¥é˜»æ­¢ç¼–è¯‘è¿™éƒ¨åˆ†ä»£ç ã€‚</li></ol><p>åœ¨ä»£ç ä¸­ï¼Œ<code>m.defines = &#123;&#39;USE_UV&#39;: &#39;&#39;&#125;;</code>  è¿™è¡Œä»£ç è®¾ç½®äº†ä¸€ä¸ªåä¸º <code>USE_UV</code> çš„å®ï¼Œè™½ç„¶åé¢ç´§è·Ÿç€çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œä½†å®ƒçš„å­˜åœ¨è¶³ä»¥è®©ç€è‰²å™¨ç¼–è¯‘å™¨åœ¨é¢„å¤„ç†æ—¶è®¤ä¸º <code>USE_UV</code> è¢«å®šä¹‰äº†ã€‚åœ¨ç€è‰²å™¨ä»£ç ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é¢„å¤„ç†æŒ‡ä»¤æ¥æ£€æŸ¥è¿™ä¸ªå®ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef USE_UV</span></span><br><span class="line">  <span class="comment">// æ‰§è¡Œä½¿ç”¨ UV åæ ‡çš„ä»£ç </span></span><br><span class="line"><span class="meta">#else</span></span><br><span class="line">  <span class="comment">// æ‰§è¡Œä¸ä½¿ç”¨ UV åæ ‡çš„ä»£ç </span></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¦‚æœ <code>m.defines</code> åŒ…å« <code>USE_UV</code>ï¼Œåˆ™ç€è‰²å™¨ä¸­ä¾èµ– UV åæ ‡çš„éƒ¨åˆ†ä¼šè¢«ç¼–è¯‘å’Œæ‰§è¡Œï¼›å¦‚æœæ²¡æœ‰å®šä¹‰ <code>USE_UV</code>ï¼Œåˆ™ç›¸å…³ä»£ç å—ä¸ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œå¯èƒ½å‡å°‘è®¡ç®—è´Ÿæ‹…ã€‚è¿™ç§æŠ€æœ¯éå¸¸é€‚åˆåœ¨è¿è¡Œæ—¶æ ¹æ®ä¸åŒçš„æè´¨å±æ€§æˆ–å›¾å½¢è®¾ç½®è°ƒæ•´ç€è‰²å™¨è¡Œä¸ºï¼Œæ˜¯å›¾å½¢ç¼–ç¨‹ä¸­ä¸€ç§å¸¸è§ä¸”å¼ºå¤§çš„ä¼˜åŒ–æ‰‹æ®µã€‚</p><h3 id="è¡¥å……-å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡"><a href="#è¡¥å……-å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡" class="headerlink" title="è¡¥å…… | å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡"></a>è¡¥å…… | å†…éƒ¨ä»£ç å®šä¹‰çš„å˜é‡</h3><p>åœ¨ä¸Šè¿°æä¾›çš„ Three.js çš„é»˜è®¤ç€è‰²å™¨ä»£ç ä¸­ï¼Œ<code>vUv</code> å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨ç¡®å®å­˜åœ¨ï¼Œä½†å®ƒæ˜¯é€šè¿‡ Three.js çš„æ ‡å‡†ç€è‰²å™¨ç³»ç»Ÿå†…éƒ¨çš„ä»£ç ç‰‡æ®µè¿›è¡Œçš„ã€‚è¿™é‡Œæ˜¯å…·ä½“çš„åˆ†æï¼š</p><p>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä»£ç ä¸­ï¼Œæœ‰å¦‚ä¸‹å‡ è¡Œä»£ç æ˜¯å…³é”®ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#include &lt;uv_pars_vertex&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">#include &lt;uv_vertex&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong><code>&lt;uv_pars_vertex&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µé€šå¸¸åŒ…å«äº†ä¸ UV ç›¸å…³çš„å‚æ•°å®šä¹‰ï¼ŒåŒ…æ‹¬å¯¹ <code>vUv</code> çš„å£°æ˜ã€‚è¿™ä¸ªç‰‡æ®µçš„ä½œç”¨æ˜¯å‡†å¤‡æ‰€æœ‰å¿…è¦çš„ UV ç›¸å…³æ•°æ®ï¼Œä»¥ä¾¿åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ã€‚</li><li><strong><code>&lt;uv_vertex&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µè´Ÿè´£å°† UV æ•°æ®ä»é¡¶ç‚¹å±æ€§ä¼ é€’åˆ° <code>vUv</code> å˜é‡ä¸­ã€‚è¿™é€šå¸¸åŒ…æ‹¬ä»é¡¶ç‚¹æ•°æ®ä¸­è¯»å– UV åæ ‡ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ <code>vUv</code>ã€‚</li></ul><p>åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œç›¸å…³çš„ä»£ç ç‰‡æ®µåŒ…æ‹¬ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#include &lt;uv_pars_fragment&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li><strong><code>&lt;uv_pars_fragment&gt;</code></strong>: è¿™ä¸ªä»£ç ç‰‡æ®µåŒ…æ‹¬å¯¹ <code>vUv</code> çš„ä½¿ç”¨ï¼Œå®ƒä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’çš„æ•°æ®ä¸­æ¥æ”¶ UV åæ ‡ã€‚è¿™åœ¨å¤„ç†çº¹ç†æ˜ å°„å’Œå…¶ä»–åŸºäº UV çš„æ“ä½œæ—¶éå¸¸å…³é”®ã€‚</li></ul><p>åœ¨ä½ çš„ä»£ç ä¸­ï¼Œ<code>vUv</code> çš„å¤„ç†æ˜¯é€šè¿‡æ ‡å‡†çš„ Three.js ç€è‰²å™¨ä»£ç ç‰‡æ®µé—´æ¥å®ç°çš„ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ä½ æ— éœ€ç›´æ¥åœ¨ä½ çš„ç€è‰²å™¨ä»£ç ä¸­å£°æ˜å’Œå®šä¹‰ <code>vUv</code>ï¼ŒThree.js å·²ç»åœ¨å…¶ç€è‰²å™¨åº“ä¸­å¤„ç†äº†æ‰€æœ‰è¿™äº›æ“ä½œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ¡ˆä¾‹ï¼š&lt;a href=&quot;https://dragonir.github.io/3d/#/earthDigital&quot;&gt;https://dr</summary>
      
    
    
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/WebGL/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/"/>
    <id>https://youxt-njnu.github.io/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/</id>
    <published>2024-08-23T06:33:26.000Z</published>
    <updated>2024-08-27T06:07:37.456Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-shapes"><a href="#è®°å½•-shapes" class="headerlink" title="è®°å½•-shapes"></a>è®°å½•-shapes</h1><p>step(float edge, float x)ç±»ä¼¼äºif</p><p>vec3(float * float) ç›¸å½“äºæŠŠä¸¤ä¸ªè¿›è¡Œand</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uniform vec2 u_resolution;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // Each result will return 1.0 (white) or 0.0 (black).</span><br><span class="line">    float left = step(0.1,st.x);   // Similar to ( X greater than 0.1 )</span><br><span class="line">    float bottom = step(0.1,st.y); // Similar to ( Y greater than 0.1 )</span><br><span class="line"></span><br><span class="line">    // The multiplication of left*bottom will be similar to the logical AND.</span><br><span class="line">    color = vec3( left * bottom );</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŠŠä½¿ç”¨è¿™ä¸¤ä¸ªleft, bottomï¼Œç®€åŒ–ä¸ºä½¿ç”¨1ä¸ª</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec2 bl = step(vec2(0.1),st)</span><br></pre></td></tr></table></figure><p>åº”ç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // bottom-left</span><br><span class="line">    vec2 bl = step(vec2(0.1),st);</span><br><span class="line">    float pct = bl.x * bl.y;</span><br><span class="line"></span><br><span class="line">    // top-right</span><br><span class="line">    // vec2 tr = step(vec2(0.1),1.0-st);</span><br><span class="line">    // pct *= tr.x * tr.y;</span><br><span class="line"></span><br><span class="line">    color = vec3(pct);</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/23/1IsKBDcLtamyz4v.png" alt="image.png"></p><p>smoothstep()çš„å½¢çŠ¶æ•ˆæœï¼šè¾¹ç¼˜æ›´å¹³ç¼“</p><p>floor()çš„å½¢çŠ¶æ•ˆæœï¼šé˜¶æ¢¯å¼</p><p><img src="https://s2.loli.net/2024/08/23/lWRELpChy643jBM.png" alt="image.png"></p><p>ç»˜åˆ¶åœ†ï¼š</p><ul><li>å‚è€ƒåœ†è§„çš„æ€è·¯ï¼Œä»¥stä¸­å¿ƒç‚¹ä¸ºåœ†å¿ƒï¼Œåˆ¤æ–­stèŒƒå›´å†…çš„æ¯ä¸ªç‚¹ï¼Œæ˜¯å¦åœ¨åœ†çš„èŒƒå›´å†…ï¼›â€”â€” distance(), sqrt(), length()</li><li>é€šè¿‡stepåˆ‡å‡ºæ¥</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line"> <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">float</span> pct = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a. The DISTANCE from the pixel to the center</span></span><br><span class="line">    pct = <span class="built_in">distance</span>(st,<span class="type">vec2</span>(<span class="number">0.5</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// b. The LENGTH of the vector</span></span><br><span class="line">    <span class="comment">//    from the pixel to the center</span></span><br><span class="line">    <span class="comment">// vec2 toCenter = vec2(0.5)-st;</span></span><br><span class="line">    <span class="comment">// pct = length(toCenter);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// c. The SQUARE ROOT of the vector</span></span><br><span class="line">    <span class="comment">//    from the pixel to the center</span></span><br><span class="line">    <span class="comment">// vec2 tC = vec2(0.5)-st;</span></span><br><span class="line">    <span class="comment">// pct = sqrt(tC.x*tC.x+tC.y*tC.y);</span></span><br><span class="line">  </span><br><span class="line">    <span class="type">float</span> clipRes = <span class="number">1.</span>-<span class="built_in">step</span>(<span class="number">0.5</span>,pct);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(pct);</span><br><span class="line">    <span class="comment">// color = vec3(1.-clipRes*pct);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>( color, <span class="number">1.0</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¦è¾¹æ˜¯ä¸‰ç§æ–¹æ³•æ±‚è·ç¦»åçš„colorï¼Œå³è¾¹æ˜¯åŠ å…¥äº†stepå’Œ1.-çš„ä½¿ç”¨ï¼›</p><p><img src="https://s2.loli.net/2024/08/26/jvztG13xlTeMI7W.png" alt="image.png"></p><p>â€œdistance fieldâ€ï¼Œç±»ä¼¼ç¼“å†²åŒºï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">  vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">  // st.x *= u_resolution.x/u_resolution.y;</span><br><span class="line">  vec3 color = vec3(0.0);</span><br><span class="line">  float d = 0.0;</span><br><span class="line"></span><br><span class="line">  // Remap the space to -1. to 1.</span><br><span class="line">  st = st *2.-1.;</span><br><span class="line"></span><br><span class="line">  // Make the distance field</span><br><span class="line">  d = length( abs(st)-.3 );</span><br><span class="line">  //d = length( min(abs(st)-.3,0.) );</span><br><span class="line">  //d = length( max(abs(st)-.3,0.) );</span><br><span class="line"></span><br><span class="line">  // Visualize the distance field</span><br><span class="line">  gl_FragColor = vec4(vec3(d),1.0);</span><br><span class="line">  // gl_FragColor = vec4(vec3(fract(d*12.216)),1.0); // *çš„æ•°å€¼è¶Šå¤§ï¼Œdç•¥å¾®å˜åŒ–ä¸‹å‘ˆç°çš„å°æ•°éƒ¨åˆ†å°±æ›´å¤šæ ·</span><br><span class="line"></span><br><span class="line">  // Drawing with the distance field</span><br><span class="line">  gl_FragColor = vec4(vec3( step(.3,d) ),1.0);</span><br><span class="line">  gl_FragColor = vec4(vec3( step(.3,d) * step(d,.4)),1.0);</span><br><span class="line">  gl_FragColor = vec4(vec3( smoothstep(.3,.4,d)* smoothstep(.6,.5,d)) ,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/27/CZM4AR9LVQlF3e2.png" alt="img"></p><p>ä¸åŒæ›²çº¿è®¾ç½®ä¸‹çš„å½¢çŠ¶è¡¨ç°ï¼Œå¯ä»¥ç”¨æ¥åšèŠ±æœµã€é›ªèŠ±ã€é½¿è½®è¿™äº›ã€‚ã€‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform vec2 u_mouse;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution.xy;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    vec2 pos = vec2(0.5)-st; // -0.5~0.5</span><br><span class="line"></span><br><span class="line">    float r = length(pos)*2.0;</span><br><span class="line">    float a = atan(pos.y,pos.x);</span><br><span class="line"></span><br><span class="line">    float f = cos(a*3.);</span><br><span class="line">    f = abs(cos(a*3.));</span><br><span class="line">   f = abs(cos(a*2.5))*0.236+0.116;</span><br><span class="line">   f = abs(cos(a*12.)*sin(a*3.))*.8+.1;</span><br><span class="line">    f = smoothstep(-.5,1., cos(a*10.))*0.2+0.5;</span><br><span class="line"></span><br><span class="line">    //color = vec3(smoothstep(f,f+.01,r));</span><br><span class="line">    color = vec3(1.-smoothstep(f,f+0.01,r) );</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/27/LoCVqmx6WvzeMKh.png" alt="image.png"></p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p>å®ç°ä¸‹é¢çš„æ•ˆæœï¼š</p><p><img src="https://thebookofshaders.com/07/mondrian.jpg" alt="img"></p><p><a href="https://thndl.com/square-shaped-shaders.html">Square shaped shaders | thndl</a></p><p><a href="https://mstdn.thndl.com/@baldand">https://mstdn.thndl.com/@baldand</a></p><p><a href="https://www.mattdesl.com/">https://www.mattdesl.com/</a></p><p>lygia: <a href="https://lygia.xyz/draw">LYGIA Shader Library</a>, <a href="https://lygia.xyz/draw">LYGIA Shader Library sdfå‡½æ•°</a></p><p><a href="https://pixelspiritdeck.com/">åƒç´ ç²¾ç¥ (pixelspiritdeck.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/"/>
    <id>https://youxt-njnu.github.io/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/</id>
    <published>2024-08-19T03:55:26.000Z</published>
    <updated>2024-08-21T06:18:49.678Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><h1 id="è®°å½•-coloréƒ¨åˆ†"><a href="#è®°å½•-coloréƒ¨åˆ†" class="headerlink" title="è®°å½•-coloréƒ¨åˆ†"></a>è®°å½•-coloréƒ¨åˆ†</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec4 vector;</span><br><span class="line">vector[0] = vector.r = vector.x = vector.s;</span><br><span class="line">vector[1] = vector.g = vector.y = vector.t;</span><br><span class="line">vector[2] = vector.b = vector.z = vector.p;</span><br><span class="line">vector[3] = vector.a = vector.w = vector.q;</span><br></pre></td></tr></table></figure><p>æ”¯æŒswizzle(æ…åŠ¨)ï¼švec3 yellow&#x3D;vec3(1.,1.,0.); yellow.rgb, yellow.rgr, yellow.bgr â€¦â€¦</p><p>åˆ©ç”¨mix()è¿›è¡Œcoloræ··åˆï¼šmix(color1,color2,value) ï¼Œvalueä»0åˆ°1ï¼Œvalueè¶Šå°color1å€¼è¶Šå¤š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>); <span class="comment">// blue</span></span><br><span class="line"><span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>); <span class="comment">// yellow</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> pct = <span class="built_in">abs</span>(<span class="built_in">sin</span>(u_time)); <span class="comment">// ä»0åˆ°1ï¼Œsin(x)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Mix uses pct (a value from 0-1) to</span></span><br><span class="line">    <span class="comment">// mix the two colors</span></span><br><span class="line">    color = <span class="built_in">mix</span>(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="easing-function"><a href="#easing-function" class="headerlink" title="easing function"></a>easing function</h2><p>ç”¨äºè®¡ç®—åŠ¨ç”»çš„ç¼“åŠ¨å‡½æ•°<a href="https://easings.net/">easing function</a></p><ul><li>ä¸‹é¢çš„å¼å­æœ‰äº›ä½œè€…è¿›è¡Œäº†sin&#x2F;cosä¹‹é—´çš„å˜æ¢ï¼Œä»¥åŠå‘½åçš„é£æ ¼æ˜¯sineInå°±æ˜¯ä¸Šé¢é“¾æ¥é‡Œçš„easeInSine</li><li>ä¸Šé¢ç½‘é¡µé‡Œï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰å¯¹åº”çš„cssç”¨æ³•ï¼Œpostcssç”¨æ³•ï¼Œåœ¨å…ƒç´ å˜æ¢åŠ¨ç”»é‡Œçš„æ•ˆæœï¼Œåœ¨é¢œè‰²æ¸å˜æ··åˆé‡Œçš„æ•ˆæœï¼Œä½¿ç”¨è¯¥å‡½æ•°è¿›è¡Œå˜æ¢çš„æ ·ä¾‹ï¼ˆç¼©æ”¾ã€ç§»åŠ¨ã€é€æ˜åº¦å˜åŒ–ï¼‰,ä¹Ÿå¯ä»¥è°ƒæ•´å‚æ•°ç‚¹å‡»goè¿›è¡Œå¯¹æ¯”</li><li>æœ€åä¸€æ’ï¼šcssçš„å®ç°æ˜¯é€šè¿‡@keyframesï¼Œè®¾ç½®ä¸åŒçš„æ¡ä»¶ï¼›å‡½æ•°é‡Œé¢æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„åˆ¤æ–­æ¥èµ‹å€¼ï¼›</li><li>å‰å››æ’çš„éƒ½æ˜¯<a href="https://cubic-bezier.com/#.25,.1,.25,1">cube-bezier</a>å‡½æ•°è®¾ç½®ä¸åŒçš„å‚æ•°å¾—åˆ°çš„æ•ˆæœ</li></ul><blockquote><p>åœ¨ CSS ä¸­ï¼Œ<code>cubic-bezier</code> å‡½æ•°ç”¨äºå®šä¹‰ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼Œå¹¿æ³›åº”ç”¨äºåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœçš„æ—¶é—´å‡½æ•°ï¼ˆtiming functionï¼‰ã€‚è¿™ä¸ªå‡½æ•°çš„å››ä¸ªå‚æ•°æ§åˆ¶æ›²çº¿çš„å½¢çŠ¶ï¼Œä»è€Œå½±å“åŠ¨ç”»çš„é€Ÿåº¦å˜åŒ–ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>cubic-bezier(.12, 0, .33, 0)</code> ä¸­çš„å››ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ä¸º (0.12, 0)</li><li>ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ä¸º (0.33, 0)</li></ul><p>è¿™å››ä¸ªå‚æ•°å¯ä»¥è¿™æ ·è§£é‡Šï¼š</p><ol><li>**ç¬¬ä¸€ä¸ªå‚æ•° (0.12)**ï¼šè¿™æ˜¯ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„æ¨ªåæ ‡ï¼Œå®ƒå½±å“åŠ¨ç”»å¼€å§‹é˜¶æ®µçš„åŠ é€Ÿåº¦ã€‚å€¼ä¸º 0.12 è¡¨ç¤ºåœ¨åŠ¨ç”»å¼€å§‹é˜¶æ®µï¼Œé€Ÿåº¦ä»é›¶å¼€å§‹ç¼“æ…¢å¢åŠ ã€‚</li><li>**ç¬¬äºŒä¸ªå‚æ•° (0)**ï¼šè¿™æ˜¯ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡ï¼Œå®ƒåœ¨è¿™é‡Œè®¾ä¸º 0ï¼Œæ„å‘³ç€æ§åˆ¶ç‚¹ä½äºèµ·å§‹çº¿ä¸Šï¼Œå› æ­¤åŠ¨ç”»èµ·å§‹æ—¶ä¼šæ¯”è¾ƒå¹³ç¼“ï¼Œæ²¡æœ‰ç«‹å³åŠ é€Ÿã€‚</li><li>**ç¬¬ä¸‰ä¸ªå‚æ•° (0.33)**ï¼šè¿™æ˜¯ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„æ¨ªåæ ‡ï¼Œå½±å“åŠ¨ç”»ç»“æŸå‰çš„å‡é€Ÿè¿‡ç¨‹ã€‚å€¼è¾ƒå°ï¼ˆ0.33ï¼‰è¡¨æ˜åŠ¨ç”»åœ¨ç»“æŸå‰ä¸ä¹…å¼€å§‹å‡é€Ÿã€‚</li><li>**ç¬¬å››ä¸ªå‚æ•° (0)**ï¼šè¿™æ˜¯ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡ï¼ŒåŒæ ·ä¸º 0ï¼Œæ„å‘³ç€ç»“æŸæ—¶é€Ÿåº¦å‡åˆ° 0ï¼ŒåŠ¨ç”»ç»“æŸçš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒå¹³ç¼“çš„ã€‚</li></ol><p>é€šè¿‡è°ƒæ•´è¿™äº›å‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®æ§åˆ¶åŠ¨ç”»çš„é€Ÿåº¦æ›²çº¿ï¼Œä»è€Œåˆ›é€ å‡ºå„ç§åŠ¨ç”»æ•ˆæœã€‚åœ¨è¿™ä¸ªå…·ä½“ä¾‹å­ä¸­ï¼Œç”±äºä¸¤ä¸ªæ§åˆ¶ç‚¹çš„çºµåæ ‡éƒ½æ˜¯ 0ï¼Œè¿™ç§æ›²çº¿é€šå¸¸ç”¨äºåˆ›å»ºæŸäº›å…·æœ‰æ˜æ˜¾èµ·å§‹å’Œç»“æŸé˜¶æ®µçš„åŠ¨ç”»æ•ˆæœã€‚</p></blockquote><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define PI 3.141592653589793</span></span><br><span class="line"><span class="meta">#define HALF_PI 1.5707963267948966</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Robert Penner&#x27;s easing functions in GLSL</span></span><br><span class="line"><span class="comment">// https://github.com/stackgl/glsl-easings</span></span><br><span class="line"><span class="type">float</span> linear(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">0.0</span> ? t : <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (t - <span class="number">1.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">1.0</span> ? t : <span class="number">1.0</span> - <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> exponentialInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t == <span class="number">0.0</span> || t == <span class="number">1.0</span></span><br><span class="line">    ? t</span><br><span class="line">    : t &lt; <span class="number">0.5</span></span><br><span class="line">      ? +<span class="number">0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span>, (<span class="number">20.0</span> * t) - <span class="number">10.0</span>)</span><br><span class="line">      : <span class="number">-0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> - (t * <span class="number">20.0</span>)) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>((t - <span class="number">1.0</span>) * HALF_PI) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(t * HALF_PI);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> sineInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-0.5</span> * (<span class="built_in">cos</span>(PI * t) - <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">5.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - (<span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">5.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> qinticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? +<span class="number">16.0</span> * <span class="built_in">pow</span>(t, <span class="number">5.0</span>)</span><br><span class="line">    : <span class="number">-0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span> * t - <span class="number">2.0</span>, <span class="number">5.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">4.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">3.0</span>) * (<span class="number">1.0</span> - t) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quarticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? +<span class="number">8.0</span> * <span class="built_in">pow</span>(t, <span class="number">4.0</span>)</span><br><span class="line">    : <span class="number">-8.0</span> * <span class="built_in">pow</span>(t - <span class="number">1.0</span>, <span class="number">4.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> p = <span class="number">2.0</span> * t * t;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span> ? p : -p + (<span class="number">4.0</span> * t) - <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> quadraticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> -t * (t - <span class="number">2.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t * t * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = t - <span class="number">1.0</span>;</span><br><span class="line">  <span class="keyword">return</span> f * f * f + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> cubicInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">4.0</span> * t * t * t</span><br><span class="line">    : <span class="number">0.5</span> * <span class="built_in">pow</span>(<span class="number">2.0</span> * t - <span class="number">2.0</span>, <span class="number">3.0</span>) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(<span class="number">13.0</span> * t * HALF_PI) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (t - <span class="number">1.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sin</span>(<span class="number">-13.0</span> * (t + <span class="number">1.0</span>) * HALF_PI) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * t) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> elasticInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * <span class="built_in">sin</span>(+<span class="number">13.0</span> * HALF_PI * <span class="number">2.0</span> * t) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">10.0</span> * (<span class="number">2.0</span> * t - <span class="number">1.0</span>))</span><br><span class="line">    : <span class="number">0.5</span> * <span class="built_in">sin</span>(<span class="number">-13.0</span> * HALF_PI * ((<span class="number">2.0</span> * t - <span class="number">1.0</span>) + <span class="number">1.0</span>)) * <span class="built_in">pow</span>(<span class="number">2.0</span>, <span class="number">-10.0</span> * (<span class="number">2.0</span> * t - <span class="number">1.0</span>)) + <span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - <span class="built_in">sqrt</span>(<span class="number">1.0</span> - t * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sqrt</span>((<span class="number">2.0</span> - t) * t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> circularInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * (<span class="number">1.0</span> - <span class="built_in">sqrt</span>(<span class="number">1.0</span> - <span class="number">4.0</span> * t * t))</span><br><span class="line">    : <span class="number">0.5</span> * (<span class="built_in">sqrt</span>((<span class="number">3.0</span> - <span class="number">2.0</span> * t) * (<span class="number">2.0</span> * t - <span class="number">1.0</span>)) + <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> a = <span class="number">4.0</span> / <span class="number">11.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> b = <span class="number">8.0</span> / <span class="number">11.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> c = <span class="number">9.0</span> / <span class="number">10.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> ca = <span class="number">4356.0</span> / <span class="number">361.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> cb = <span class="number">35442.0</span> / <span class="number">1805.0</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="type">float</span> cc = <span class="number">16061.0</span> / <span class="number">1805.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">float</span> t2 = t * t;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> t &lt; a</span><br><span class="line">    ? <span class="number">7.5625</span> * t2</span><br><span class="line">    : t &lt; b</span><br><span class="line">      ? <span class="number">9.075</span> * t2 - <span class="number">9.9</span> * t + <span class="number">3.4</span></span><br><span class="line">      : t &lt; c</span><br><span class="line">        ? ca * t2 - cb * t + cc</span><br><span class="line">        : <span class="number">10.8</span> * t * t - <span class="number">20.52</span> * t + <span class="number">10.72</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - bounceOut(<span class="number">1.0</span> - t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> bounceInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * (<span class="number">1.0</span> - bounceOut(<span class="number">1.0</span> - t * <span class="number">2.0</span>))</span><br><span class="line">    : <span class="number">0.5</span> * bounceOut(t * <span class="number">2.0</span> - <span class="number">1.0</span>) + <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backIn(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">pow</span>(t, <span class="number">3.0</span>) - t * <span class="built_in">sin</span>(t * PI);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = <span class="number">1.0</span> - t;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1.0</span> - (<span class="built_in">pow</span>(f, <span class="number">3.0</span>) - f * <span class="built_in">sin</span>(f * PI));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> backInOut(<span class="type">float</span> t) &#123;</span><br><span class="line">  <span class="type">float</span> f = t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">2.0</span> * t</span><br><span class="line">    : <span class="number">1.0</span> - (<span class="number">2.0</span> * t - <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="type">float</span> g = <span class="built_in">pow</span>(f, <span class="number">3.0</span>) - f * <span class="built_in">sin</span>(f * PI);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> t &lt; <span class="number">0.5</span></span><br><span class="line">    ? <span class="number">0.5</span> * g</span><br><span class="line">    : <span class="number">0.5</span> * (<span class="number">1.0</span> - g) + <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line">    <span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> t = u_time*<span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> pct = cubicInOut( <span class="built_in">abs</span>(<span class="built_in">fract</span>(t)*<span class="number">2.0</span><span class="number">-1.</span>) );</span><br><span class="line">   <span class="comment">// t = u_time;</span></span><br><span class="line">   <span class="comment">// pct = cubicInOut( abs(fract(t)-1.) );</span></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(<span class="type">vec3</span>(<span class="built_in">mix</span>(colorA, colorB, pct)),<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¡¥å……è¯´æ˜ï¼š</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> t = u_time * <span class="number">0.5</span>;</span><br><span class="line"><span class="type">float</span> pct = cubicInOut(<span class="built_in">abs</span>(<span class="built_in">fract</span>(t) * <span class="number">2.0</span> - <span class="number">1.0</span>));</span><br></pre></td></tr></table></figure><ol><li>**æ—¶é—´ç¼©æ”¾ (<code>t = u_time * 0.5</code>)**ï¼šè¿™é‡Œ <code>u_time</code> è¢«ä¹˜ä»¥ 0.5ï¼Œæ„å‘³ç€ <code>t</code> çš„å˜åŒ–é€Ÿåº¦æ˜¯ <code>u_time</code> çš„ä¸€åŠã€‚å¦‚æœ <code>u_time</code> æ˜¯ä¸€ä¸ªéšæ—¶é—´å¢åŠ çš„å˜é‡ï¼Œé‚£ä¹ˆ <code>t</code> çš„å¢é•¿é€Ÿåº¦æ›´æ…¢ã€‚</li><li>**è®¡ç®— <code>pct</code>**ï¼š<code>fract(t)</code> è·å– <code>t</code> çš„å°æ•°éƒ¨åˆ†ï¼Œè¿™æ ·å³ä½¿ <code>t</code> å¢é•¿åˆ° 1 ä»¥ä¸Šï¼Œ<code>fract(t)</code> ä¹Ÿä¼šé‡æ–°ä» 0 å¼€å§‹ï¼Œå®ç°å‘¨æœŸæ€§é‡ç½®ã€‚ä¹˜ä»¥ 2.0 ç„¶åå‡ 1.0 æ˜¯ä¸ºäº†å°†å‘¨æœŸå˜åŒ–ä» <code>[0,1]</code> è°ƒæ•´åˆ° <code>[-1,1]</code>ï¼Œè¿™æ · <code>abs(...)</code> åçš„å€¼å°†åœ¨ <code>[0,1]</code> ä¹‹é—´æŒ¯è¡ï¼Œå®ç°äº†å…ˆå¢åŠ åˆ° 1 ç„¶åå‡å°‘åˆ° 0 çš„å‘¨æœŸæ€§å˜åŒ–ã€‚</li><li><strong><code>cubicInOut</code> åŠ¨ç”»æ›²çº¿</strong>ï¼šè¿™ä¸ªå‡½æ•°é€šå¸¸å®šä¹‰äº†ä¸€ä¸ªç¼“å…¥ç¼“å‡ºçš„ä¸‰æ¬¡æ›²çº¿ï¼Œæ„å‘³ç€åŠ¨ç”»å¼€å§‹å’Œç»“æŸæ—¶é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸­é—´é€Ÿåº¦è¾ƒå¿«ã€‚</li></ol><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">t = u_time;</span><br><span class="line">pct = cubicInOut(<span class="built_in">abs</span>(<span class="built_in">fract</span>(t) - <span class="number">1.0</span>));</span><br></pre></td></tr></table></figure><ol><li>**æ—¶é—´è®¾ç½® (<code>t = u_time</code>)**ï¼šè¿™é‡Œæ²¡æœ‰å¯¹ <code>u_time</code> è¿›è¡Œç¼©æ”¾ï¼Œå› æ­¤ <code>t</code> ä»¥åŸå§‹é€Ÿåº¦å¢åŠ ã€‚</li><li>**è®¡ç®— <code>pct</code>**ï¼šè¿™é‡Œä»…ä½¿ç”¨äº† <code>fract(t)</code> å‡å» 1.0ï¼Œä¸ä¸Šé¢çš„ä»£ç ç›¸æ¯”ï¼Œè¿™æ ·å¤„ç†ä¼šäº§ç”Ÿä» <code>-1</code> åˆ° 0 çš„å‘¨æœŸæ€§å˜åŒ–ï¼ˆå› ä¸º <code>fract(t)</code> äº§ç”Ÿ <code>[0,1)</code>ï¼Œå‡ 1 åå˜ä¸º <code>[-1,0)</code>ï¼‰ã€‚åº”ç”¨ <code>abs(...)</code> åï¼Œå˜åŒ–å°†åœ¨ <code>[0,1)</code> é—´å‘ç”Ÿï¼Œå®ç°äº†å‘¨æœŸæ€§çš„ä» 0 å¢åŠ åˆ° 1ã€‚</li></ol><p>æ•ˆæœå·®å¼‚ï¼š</p><ul><li><strong>å˜åŒ–é€Ÿç‡</strong>ï¼šä¸Šé¢çš„ä»£ç ä¸­ <code>t</code> çš„å˜åŒ–é€Ÿåº¦ä¸ºåŸå§‹æ—¶é—´çš„ä¸€åŠï¼Œè¿™å¯¼è‡´æ•´ä½“åŠ¨ç”»é€Ÿåº¦æ›´æ…¢ã€‚</li><li><strong>æŒ¯è¡æ–¹å¼</strong>ï¼šä¸Šé¢çš„ä»£ç ä½¿å¾—æŒ¯è¡ä» 0 å¢åŠ åˆ° 1 ç„¶åå‡å°‘åˆ° 0ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å¾ªç¯ï¼Œè€Œä¸‹é¢çš„ä»£ç åªä» 0 å¢åŠ åˆ° 1ã€‚</li></ul><p>ç»“åˆè¿™äº›åˆ†æï¼Œä¸Šé¢çš„ä»£ç æä¾›äº†ä¸€ä¸ªæ›´å¹³æ»‘å’Œå¯¹ç§°çš„æŒ¯è¡æ¨¡å¼ï¼Œé€‚ç”¨äºéœ€è¦å¾ªç¯åŠ¨ç”»æ•ˆæœçš„åœºæ™¯ï¼Œå¦‚å‘¼å¸ç¯æ•ˆæœã€‚ä¸‹é¢çš„ä»£ç åˆ™æ›´é€‚åˆäºå•å‘çš„æ¸è¿›æˆ–æ¸å‡ºæ•ˆæœï¼Œå¦‚æ—¥å‡ºæ•ˆæœã€‚</p><h2 id="é¢œè‰²çš„æ¸å˜"><a href="#é¢œè‰²çš„æ¸å˜" class="headerlink" title="é¢œè‰²çš„æ¸å˜"></a>é¢œè‰²çš„æ¸å˜</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">void main() &#123;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"> vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    float pct = cubicInOut(st.y); </span><br><span class="line">    pct = circularInOut(st.y); // å› ä¸ºInOuté‚£è¾¹çš„æ›²çº¿æ˜¯åœ¨å¾ˆå°èŒƒå›´å†…çš„è‡ªå˜é‡ä¸‹å‘ç”Ÿäº†è¾ƒå¤§çš„å› å˜é‡å˜åŒ–ï¼Œæ‰€ä»¥åˆ†ç•Œçº¿ä¼šæ˜æ˜¾ï¼Œç›¸å¯¹ä¸Šé¢çš„æ¥è¯´</span><br><span class="line">    // Mix uses pct (a value from 0-1) to</span><br><span class="line">    // mix the two colors</span><br><span class="line">    color = mix(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/19/OmhPTZGRKIo1rfN.png"></p><h2 id="mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶"><a href="#mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶" class="headerlink" title="mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶"></a>mixå¯¹RGBä¸‰ä¸ªé€šé“çš„æ§åˆ¶</h2><p>å¯ä»¥åˆ†åˆ«è®¾ç½®RGBä¸‰é€šé“çš„æ··åˆæ–¹å¼</p><p><img src="https://thebookofshaders.com/06/mix-vec.jpg" alt="img"></p><p>ç¤ºä¾‹</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define PI 3.14159265359</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> colorA = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line"><span class="type">vec3</span> colorB = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> plot (<span class="type">vec2</span> st, <span class="type">float</span> pct)&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="built_in">smoothstep</span>( pct<span class="number">-0.01</span>, pct, st.y) -</span><br><span class="line">          <span class="built_in">smoothstep</span>( pct, pct+<span class="number">0.01</span>, st.y); <span class="comment">// smoothstep(a-æå°å€¼,a,çº¹ç†åæ ‡)-smoothstep(a,a+æå°å€¼,çº¹ç†åæ ‡)ï¼Œå¯ä»¥ç”»å‡ºaçš„æ›²çº¿ï¼ˆä¹Ÿå°±æ˜¯ä»£ç é‡Œçš„pctï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution.xy;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> pct = <span class="type">vec3</span>(st.x);</span><br><span class="line"></span><br><span class="line">    pct.r = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>,<span class="number">1.0</span>, st.x);</span><br><span class="line">    pct.g = <span class="built_in">sin</span>(st.x*PI);</span><br><span class="line">    pct.b = <span class="built_in">pow</span>(st.x,<span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">    color = <span class="built_in">mix</span>(colorA, colorB, pct);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Plot transition lines for each channel</span></span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.r));</span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.g));</span><br><span class="line">    color = <span class="built_in">mix</span>(color,<span class="type">vec3</span>(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>),plot(st,pct.b));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/19/NtLrd5aD4mFjuSX.png"></p><p>æ··åˆåŠ å˜æ¢çš„ç»„åˆ</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line">    <span class="type">vec3</span> color1 = <span class="type">vec3</span>(<span class="number">0.149</span>,<span class="number">0.141</span>,<span class="number">0.912</span>);</span><br><span class="line">    <span class="type">vec3</span> color2 = <span class="type">vec3</span>(<span class="number">1.000</span>,<span class="number">0.833</span>,<span class="number">0.224</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">  </span><br><span class="line">    <span class="type">vec3</span> colorA = <span class="built_in">mix</span>(color1,color2,st.y);</span><br><span class="line">    <span class="type">vec3</span> colorB = <span class="built_in">mix</span>(color1,color2,<span class="number">1.</span>-st.y*st.x);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> t = u_time*<span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> pct = cubicInOut( <span class="built_in">abs</span>(<span class="built_in">fract</span>(t)*<span class="number">2.0</span><span class="number">-1.</span>) );</span><br><span class="line">   <span class="comment">// t = u_time;</span></span><br><span class="line">   <span class="comment">// pct = cubicInOut( abs(fract(t)-1.) );</span></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(<span class="type">vec3</span>(<span class="built_in">mix</span>(colorA, colorB, pct)),<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*2WK3NdpR_Oxt0QKN8r6Rgg.gif" alt="img"></p><h2 id="HSV"><a href="#HSV" class="headerlink" title="HSV"></a>HSV</h2><blockquote><p>shadertoyä»£ç ï¼š</p><p><a href="https://www.shadertoy.com/view/MsS3Wc">Smooth HSV (shadertoy.com)</a></p><p><a href="https://blog.csdn.net/ColdWindHA/article/details/82080176">OpenCVå­¦ä¹ ç¬”è®°â€”â€”HSVé¢œè‰²ç©ºé—´è¶…æè¯¦è§£&amp;inRangeå‡½æ•°ç”¨æ³•åŠå®æˆ˜_hsvå€¼æ˜¯ä»€ä¹ˆ-CSDNåšå®¢</a></p><p><a href="https://www.cnblogs.com/dablyo/p/6854947.html">HSVè‰²å½©ç©ºé—´å’Œé¢œè‰²åˆ†é‡èŒƒå›´ - å‹å–„çš„ç‹—W - åšå®¢å›­ (cnblogs.com)</a></p></blockquote><p><img src="https://s2.loli.net/2024/08/21/AleHoLjbR9I67Su.png" alt="image.png"></p><p>RGBå’ŒHSVçš„äº’è½¬</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> rgb2hsb( <span class="keyword">in</span> <span class="type">vec3</span> c )&#123;</span><br><span class="line">    <span class="type">vec4</span> K = <span class="type">vec4</span>(<span class="number">0.0</span>, <span class="number">-1.0</span> / <span class="number">3.0</span>, <span class="number">2.0</span> / <span class="number">3.0</span>, <span class="number">-1.0</span>);</span><br><span class="line">    <span class="type">vec4</span> p = <span class="built_in">mix</span>(<span class="type">vec4</span>(c.bg, K.wz),</span><br><span class="line">                 <span class="type">vec4</span>(c.gb, K.xy),</span><br><span class="line">                 <span class="built_in">step</span>(c.b, c.g));</span><br><span class="line">    <span class="type">vec4</span> q = <span class="built_in">mix</span>(<span class="type">vec4</span>(p.xyw, c.r),</span><br><span class="line">                 <span class="type">vec4</span>(c.r, p.yzx),</span><br><span class="line">                 <span class="built_in">step</span>(p.x, c.r));</span><br><span class="line">    <span class="type">float</span> d = q.x - <span class="built_in">min</span>(q.w, q.y);</span><br><span class="line">    <span class="type">float</span> e = <span class="number">1.0e-10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">vec3</span>(<span class="built_in">abs</span>(q.z + (q.w - q.y) / (<span class="number">6.0</span> * d + e)),</span><br><span class="line">                d / (q.x + e),</span><br><span class="line">                q.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Function from IÃ±igo Quiles</span></span><br><span class="line"><span class="comment">//  https://www.shadertoy.com/view/MsS3Wc</span></span><br><span class="line"><span class="type">vec3</span> hsb2rgb( <span class="keyword">in</span> <span class="type">vec3</span> c )&#123;</span><br><span class="line">    <span class="type">vec3</span> rgb = <span class="built_in">clamp</span>(<span class="built_in">abs</span>(<span class="built_in">mod</span>(c.x*<span class="number">6.0</span>+<span class="type">vec3</span>(<span class="number">0.0</span>,<span class="number">4.0</span>,<span class="number">2.0</span>),</span><br><span class="line">                             <span class="number">6.0</span>)<span class="number">-3.0</span>)<span class="number">-1.0</span>,</span><br><span class="line">                     <span class="number">0.0</span>,</span><br><span class="line">                     <span class="number">1.0</span> );</span><br><span class="line">    rgb = rgb*rgb*(<span class="number">3.0</span><span class="number">-2.0</span>*rgb);</span><br><span class="line">    <span class="keyword">return</span> c.z * <span class="built_in">mix</span>(<span class="type">vec3</span>(<span class="number">1.0</span>), rgb, c.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We map x (0.0 - 1.0) to the hue (0.0 - 1.0)</span></span><br><span class="line">    <span class="comment">// And the y (0.0 - 1.0) to the brightness</span></span><br><span class="line">    color = hsb2rgb(<span class="type">vec3</span>(st.x,<span class="number">1.0</span>,st.y)); <span class="comment">// ä¼ å…¥çš„ä½“ç°äº†h,s,b</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/21/8ZdlghIPOemGJwt.png" alt="image.png"></p><p>HSBä»ç¬›å¡å°”åæ ‡æ˜ å°„åˆ°æåæ ‡ï¼š</p><ul><li>è·å–è§’åº¦å’Œåˆ°å±å¹•ä¸­å¿ƒç‚¹çš„è·ç¦»</li><li>ä½¿ç”¨length()å’Œatan(y,x)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef GL_ES</span><br><span class="line">precision mediump float;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#define TWO_PI 6.28318530718</span><br><span class="line"></span><br><span class="line">uniform vec2 u_resolution;</span><br><span class="line">uniform float u_time;</span><br><span class="line"></span><br><span class="line">//  Function from IÃ±igo Quiles</span><br><span class="line">//  https://www.shadertoy.com/view/MsS3Wc</span><br><span class="line">vec3 hsb2rgb( in vec3 c )&#123;</span><br><span class="line">    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),</span><br><span class="line">                             6.0)-3.0)-1.0,</span><br><span class="line">                     0.0,</span><br><span class="line">                     1.0 );</span><br><span class="line">    rgb = rgb*rgb*(3.0-2.0*rgb);</span><br><span class="line">    return c.z * mix( vec3(1.0), rgb, c.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main()&#123;</span><br><span class="line">    vec2 st = gl_FragCoord.xy/u_resolution;</span><br><span class="line">    vec3 color = vec3(0.0);</span><br><span class="line"></span><br><span class="line">    // Use polar coordinates instead of cartesian</span><br><span class="line">    vec2 toCenter = vec2(0.5)-st; // æŠŠçº¹ç†åæ ‡ç©ºé—´ç§»åˆ°-.5åˆ°.5</span><br><span class="line">    float angle = atan(toCenter.y,toCenter.x); // æ±‚æ¯ä¸ªç‚¹ç›¸å¯¹äºä¸­å¿ƒç‚¹çš„è§’åº¦</span><br><span class="line">    float radius = length(toCenter)*2.0; // é•¿åº¦çš„èŒƒå›´æ˜¯0~1</span><br><span class="line"></span><br><span class="line">    // Map the angle (-PI to PI) to the Hue (from 0 to 1)</span><br><span class="line">    // and the Saturation to the radius</span><br><span class="line">    color = hsb2rgb(vec3((angle/TWO_PI)+0.5,radius,1.0)); // ç¬¬ä¸€ä¸ªè¡¨ç¤ºhï¼Œæ ¹æ®ç›¸å¯¹äºä¸­å¿ƒç‚¹çš„è§’åº¦æ¥èµ‹äºˆé¢œè‰²ï¼ŒåŒæ—¶ç¼©æ”¾åˆ°äº†0-1ï¼Œç„¶åä¼ å…¥ï¼›radius: ç¦»ä¸­å¿ƒç‚¹è¶Šè¿œï¼Œradiusè¶Šå¤§ï¼Œså€¼è¶Šå¤§;</span><br><span class="line"></span><br><span class="line">    gl_FragColor = vec4(color,1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/21/fTMw6RpQmVY3JWH.png" alt="image.png"></p><p><code>var toCenter = st - vec2(0.5);</code></p><p>è¿™æ ·å­ï¼ŒæŠŠä¸Šè¿°çš„å›¾æ—‹è½¬180åº¦çš„æ•ˆæœï¼›</p><h1 id="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"><a href="#æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚" class="headerlink" title="æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚"></a>æ¨èå¾…æ›´æ–°ã€‚ã€‚ã€‚</h1><p>ç»“åˆshaping functionï¼Œå‘ˆç°ä¸åŒçš„é¢œè‰²è¿‡æ¸¡ï¼›</p><p><img src="https://thebookofshaders.com/06/spectrums.jpg" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>shader-å­¦ä¹ è®°å½•â… </title>
    <link href="https://youxt-njnu.github.io/2024/08/16/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%951/"/>
    <id>https://youxt-njnu.github.io/2024/08/16/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%951/</id>
    <published>2024-08-16T07:52:26.000Z</published>
    <updated>2024-08-19T05:51:27.668Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¹ èµ„æ–™ï¼š<a href="https://thebookofshaders.com/05/">The Book of Shaders: Shaping functions</a></p><p><a href="https://thebookofshaders.com/edit.php">GLSL Editor (thebookofshaders.com)</a> åœ¨çº¿çš„shaderç¼–è¾‘è°ƒè¯•</p><p><a href="https://github.com/patriciogonzalezvivo/glslGallery">patriciogonzalezvivo&#x2F;glslGallery (github.com)</a> çœ‹ç€ä¸é”™ï¼Œä½†æ˜¯æäº¤è‡ªå·±çš„ä¸Šå»åï¼Œæäº¤ä¸åˆ°å¯¹åº”çš„æœåŠ¡å™¨ï¼ˆç›´ç™½äº›å°±æ˜¯ä¿ºè¯•å®Œäº†ç”¨ä¸äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p><p><a href="https://patriciogonzalezvivo.github.io/glslGallery/">GLSL Gallery (patriciogonzalezvivo.github.io)</a> ä½œè€…çš„ä¸€äº›shaderï¼Œå¯ä»¥å€Ÿé‰´å­¦ä¹ </p><h1 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h1><h2 id="shader"><a href="#shader" class="headerlink" title="shader"></a>shader</h2><p>GPUç‰¹ç‚¹ï¼šblindï¼ˆä¸çŸ¥é“å…¶ä»–çš„pipe&#x2F;threadåœ¨å¹²å•¥ï¼‰ï¼Œmemorylessï¼ˆä¸çŸ¥é“ä»¥å‰å¹²äº†å•¥ï¼‰</p><p>ç‰‡å…ƒç€è‰²å™¨ï¼š</p><ul><li>void main() {} ä¸»å‡½æ•°</li><li>å†…ç½®å…¨å±€å˜é‡ï¼Œå¦‚gl_FragColor</li><li>é»˜è®¤è¾“å‡ºï¼šgl_fragColor</li><li>é»˜è®¤è¾“å…¥ï¼šgl_fragCoord  (æ˜¯varing)     &#x2F;&#x2F;    x,yéƒ½ä»0åˆ°1</li><li>æ•°æ®ç±»å‹ï¼Œvec4ï¼Œç²¾åº¦å¦‚float</li><li>æ ‡å‡†åŒ–normalized, æ˜ å°„map</li><li>å®ï¼Œ#defines, #ifdef, #endif, #ifndef</li><li>æ³¨æ„ï¼Œå¯¹äºæµ®ç‚¹çš„æ•°å­—æœ€å¥½å…»æˆåŠ ä¸Š.çš„ä¹ æƒ¯</li></ul><p>uniform:</p><ul><li>cpuç»™gpuçš„</li><li>ä¸€äº›æ‰€æœ‰threadéƒ½ä¸€æ ·çš„ï¼Œä¸ä¼šå˜çš„å€¼</li></ul><p>æ”¯æŒå†…ç½®æ•°å­¦å‡½æ•°ï¼Œå¦‚sin()</p><h2 id="shaping-functions"><a href="#shaping-functions" class="headerlink" title="shaping functions"></a>shaping functions</h2><h3 id="step"><a href="#step" class="headerlink" title="step"></a>step</h3><p>The <a href="https://thebookofshaders.com/glossary/?search=step"><code>step()</code></a> interpolation receives two parameters.</p><p>The first one is the limit or threshold, while the second one is the value we want to check or pass.</p><p>Any value under the limit will return <code>0.0</code> while everything above the limit will return <code>1.0</code>.</p><h3 id="smoothstep"><a href="#smoothstep" class="headerlink" title="smoothstep"></a>smoothstep</h3><p><a href="https://blog.csdn.net/weixin_61427881/article/details/127839417">ã€Shader Graphã€‘SmoothStepèŠ‚ç‚¹è¯¦è§£åŠå…¶åº”ç”¨-CSDNåšå®¢</a></p><h3 id="sin-x2F-cos"><a href="#sin-x2F-cos" class="headerlink" title="sin&#x2F;cos"></a>sin&#x2F;cos</h3><p>åŠ ä¸Šu_time: å®ç°æ²¿xè½´çš„ç§»åŠ¨</p><p>ä¹˜ä¸ŠPIç±»ä¼¼çš„ï¼šå®ç°æ›²çº¿çš„æ”¶ç¼©</p><p>åŠ ä¸Šå€¼ï¼šå®ç°æ›²çº¿ä¸Šä¸‹ç§»åŠ¨</p><p>å¤–é¢ä¹˜ä¸Šå€¼ï¼šå®ç°æ›²çº¿æ‹‰ä¼¸</p><p>å–ç»å¯¹å€¼abs()ï¼šå¼¹è·³çƒè½¨è¿¹</p><p>å–å°æ•°éƒ¨åˆ†fract()</p><p>å–ä¸Šä¸‹æ•´æ•°ceil(), floor()</p><p>y &#x3D; mod(x,0.5); &#x2F;&#x2F; return x modulo of 0.5<br>y &#x3D; fract(x); &#x2F;&#x2F; return only the fraction part of a number<br>y &#x3D; ceil(x);  &#x2F;&#x2F; nearest integer that is greater than or equal to x<br>y &#x3D; floor(x); &#x2F;&#x2F; nearest integer less than or equal to x<br>y &#x3D; sign(x);  &#x2F;&#x2F; extract the sign of x<br>y &#x3D; abs(x);   &#x2F;&#x2F; return the absolute value of x<br>y &#x3D; clamp(x,0.0,1.0); &#x2F;&#x2F; constrain x to lie between 0.0 and 1.0<br>y &#x3D; min(0.0,x);   &#x2F;&#x2F; return the lesser of x and 0.0<br>y &#x3D; max(0.0,x);   &#x2F;&#x2F; return the greater of x and 0.0</p><p>æœç´¢å…³é”®è¯ï¼šgenerative art</p><blockquote><p><a href="https://aiartists.org/generative-art-design">Generative Art: 50 Best Examples, Tools &amp; Artists (2021 GUIDE) â€” AIArtists.org</a></p></blockquote><h1 id="å‡ ä¸ªshader"><a href="#å‡ ä¸ªshader" class="headerlink" title="å‡ ä¸ªshader"></a>å‡ ä¸ªshader</h1><h2 id="é¼ æ ‡åæ ‡"><a href="#é¼ æ ‡åæ ‡" class="headerlink" title="é¼ æ ‡åæ ‡"></a><strong>é¼ æ ‡åæ ‡</strong></h2><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 03 code2</span></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution; <span class="comment">// å±å¹• å®½ï¼Œé«˜</span></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"> Â  <span class="type">vec2</span> mousePos;</span><br><span class="line"><span class="comment">// vec2 st = gl_FragCoord.xy/u_resolution; // æŠŠè¾“å…¥çº¹ç†åæ ‡ç¼©æ”¾åˆ°0~1</span></span><br><span class="line"><span class="comment">// gl_FragColor = vec4(st.x,st.y,0.0,1.0);</span></span><br><span class="line"><span class="type">vec2</span> center = u_resolution/<span class="number">2.</span>; <span class="comment">// è·å–ä¸­å¿ƒç‚¹çš„å±å¹•åæ ‡</span></span><br><span class="line"> Â  mousePos = (u_mouse.xy-center)/center; <span class="comment">// æŠŠé¼ æ ‡ä½ç½®ç¼©æ”¾åˆ°-1~1</span></span><br><span class="line"> Â  mousePos = mousePos*<span class="number">0.5</span> + <span class="number">0.5</span>; <span class="comment">// æŠŠé¼ æ ‡ä½ç½®ç¼©æ”¾åˆ°0~1</span></span><br><span class="line"> Â  <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(mousePos.x,mousePos.y,<span class="number">0.0</span>,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ·æ²¹æ¼†"><a href="#åˆ·æ²¹æ¼†" class="headerlink" title="åˆ·æ²¹æ¼†"></a><strong>åˆ·æ²¹æ¼†</strong></h2><ul><li>è·å–ä»0åˆ°1ç©ºé—´åæ ‡</li><li>åšå‡º0åˆ°1æ¸å˜ç°</li><li>åˆ¶é€ å‡½æ•°å’Œå¯¹åº”åŒºé—´</li><li>æŠŠå‡½æ•°æ¶‚ä¸Šé¢œè‰²</li></ul><p><img src="https://s2.loli.net/2024/08/16/p9GByiLT3MqlPCS.png" alt="image.png"></p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 05 code1</span></span><br><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å€¼åŒºé—´ï¼š</span></span><br><span class="line"><span class="comment">// abs(y-x)===0, return 1</span></span><br><span class="line"><span class="comment">// abs(y-x) 0~0.02, return abs(y-x)</span></span><br><span class="line"><span class="comment">// abs(y-x) &gt;0.02, return 0</span></span><br><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st) &#123;</span><br><span class="line"> Â  <span class="keyword">return</span> <span class="built_in">smoothstep</span>(<span class="number">0.02</span>,<span class="number">0.0</span>,<span class="built_in">abs</span>(st.y-st.x));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"> <span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line"> Â  Â <span class="type">float</span> y = st.x;</span><br><span class="line"> Â  Â <span class="type">vec3</span> color = <span class="type">vec3</span>(y);</span><br><span class="line"> Â  Â <span class="comment">// æ¯ä¸ªç‚¹åªæœ‰xèµ·ä½œç”¨ï¼Œæ‰€ä»¥xä¸€æ ·çš„ï¼Œæ˜¾ç¤ºçš„é¢œè‰²æ˜¯ä¸€æ ·çš„ï¼›</span></span><br><span class="line"> Â  Â <span class="comment">// colorç”±ä¸‰ä¸ªxç»„æˆï¼Œæ‰€ä»¥æ˜¯ç°åº¦ï¼Œè€Œä¸”æ¸å˜å¤§</span></span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="type">float</span> line = plot(st);</span><br><span class="line"> Â  Â <span class="comment">// color = line*vec3(.0,1.,.0); // ç»˜åˆ¶å‡ºäº†ç»¿è‰²çš„çº¿</span></span><br><span class="line"> Â  Â <span class="comment">// color = (1.-line)*color; // æŠŠçº¿çš„åœ°æ–¹æ‰£æˆé»‘è‰²ï¼Œæ–¹ä¾¿åç»­åŠ è‰²</span></span><br><span class="line"> Â  Â <span class="comment">// åˆ†å‰²å‡ºçº¿ï¼ŒåŠ ä¸ŠèƒŒæ™¯</span></span><br><span class="line"> Â  Â color = (<span class="number">1.</span>-line)*color + line*<span class="type">vec3</span>(<span class="number">.0</span>,<span class="number">1.</span>,<span class="number">.0</span>);</span><br><span class="line"> <span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å˜ç§"><a href="#å˜ç§" class="headerlink" title="å˜ç§"></a>å˜ç§</h2><p>st: åŸºäºå±å¹•çš„çº¹ç†åæ ‡</p><p>y: å’Œstæœ‰å…³ç³»çš„å‡½æ•°</p><p>color: å±•ç¤ºyçš„ç°åº¦é¢œè‰²</p><p>line: é€šè¿‡stå’Œyç»˜åˆ¶çš„æ ·æ¡å‡½æ•°ã€‚ã€‚</p><p>color: ç»™lineå‡½æ•°è¿›è¡Œå åŠ æ˜¾ç¤º</p><p><img src="https://s2.loli.net/2024/08/16/Qoudz1HApWlqJUK.png" alt="image.png"></p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#ifdef GL_ES</span></span><br><span class="line"><span class="keyword">precision</span> <span class="keyword">mediump</span> <span class="type">float</span>;</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_resolution;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">vec2</span> u_mouse;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">float</span> u_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒstçš„x^5, 0, yçš„å…³ç³»</span></span><br><span class="line"><span class="comment">// y&lt;x^5çš„ï¼Œéƒ½0</span></span><br><span class="line"><span class="comment">// yåœ¨0~x^5ï¼Œéƒ½åŸå€¼</span></span><br><span class="line"><span class="comment">// y=0çš„ï¼Œéƒ½1</span></span><br><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y,<span class="number">0.0</span>,st.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> main() &#123;</span><br><span class="line"><span class="type">vec2</span> st = <span class="built_in">gl_FragCoord</span>.xy/u_resolution;</span><br><span class="line"><span class="type">float</span> y = <span class="built_in">pow</span>(st.x,<span class="number">5.</span>);</span><br><span class="line"><span class="type">vec3</span> color = <span class="type">vec3</span>(y);</span><br><span class="line"><span class="type">float</span> line = plot(st,y);</span><br><span class="line">color = (<span class="number">1.</span>-line)*color + line*<span class="type">vec3</span>(<span class="number">.0</span>,<span class="number">1.</span>,<span class="number">.0</span>);</span><br><span class="line"><span class="built_in">gl_FragColor</span> = <span class="type">vec4</span>(color,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–ä¸ªåå†é”åŒ–ä¸‹</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y<span class="number">-0.02</span>,y,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/z6xAHaYDJFeQ7ct.png" alt="image.png"></p><p>æ±‚ä¸ªäº¤é›†</p><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> plot(<span class="type">vec2</span> st,<span class="type">float</span> y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">smoothstep</span>(y<span class="number">-0.03</span>,y,st.y)-<span class="built_in">smoothstep</span>(y<span class="number">-0.01</span>,y,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/O4LcxMDmrB2toTP.png" alt="image.png"></p><p>æ›´è‡ªç„¶äº›çš„äº¤é›†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">float plot(vec2 st,float y) &#123;</span><br><span class="line">    return smoothstep(y-0.03,y,st.y)-smoothstep(y,y+0.03,st.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/08/16/Ze68o1mKhicjrbW.png" alt="image.png"></p><p>stepéœ€è¦åˆ†ç‰‡æ¥çœ‹ï¼š</p><ul><li>step(): å·¦ç‰‡(&lt;0.5), å³ç‰‡(&gt;0.5) -&gt;y,ä¹Ÿå°±æ˜¯ä¼ è¿›poltçš„pct</li><li>smoothstep: å·¦ç‰‡ï¼Œæ‰€æœ‰çº¹ç†ç‚¹éƒ½æ˜¯1</li><li>smoothstep: å³ç‰‡ï¼Œçº¹ç†ç‚¹çš„åˆ†å‰²æŒ‰ç…§(1-0.02, 1, st.y)è¿›è¡Œï¼Œä¸‹0ï¼Œä¸­åŸå€¼ï¼Œä¸Š1</li></ul><p><img src="https://s2.loli.net/2024/08/17/sel5gGTcNRP2iJq.png" alt="image.png"></p><h1 id="å¯èƒ½çš„bug"><a href="#å¯èƒ½çš„bug" class="headerlink" title="å¯èƒ½çš„bug"></a>å¯èƒ½çš„bug</h1><p><strong>æ²¡å®šä¹‰ç²¾åº¦</strong> <code>No precision specified for (float)</code></p><blockquote><p>presion mediump floa<strong>t;</strong></p></blockquote><p><strong>fragment shaderåšå®Œäº†ä¸æ˜¾ç¤ºé¢œè‰²ï¼š</strong></p><blockquote><p>æ²¡ç»™gl_FragColorèµ‹å€¼</p></blockquote><p><strong>æ²¡æ‰¾åˆ°å‡½æ•°</strong> <code>&#39;setColor&#39; : no matching overloaded function found</code></p><blockquote><p>Cé‡Œé¢æŠŠå‡½æ•°å†™åœ¨void main()å‰é¢ï¼Œæˆ–è€…éœ€æå‰å£°æ˜</p></blockquote><h1 id="æ¨èå¾…æ›´æ–°"><a href="#æ¨èå¾…æ›´æ–°" class="headerlink" title="æ¨èå¾…æ›´æ–°"></a>æ¨èå¾…æ›´æ–°</h1><blockquote><p>å‡†å¤‡å…ˆè¿‡ä¸€éæ•™ç¨‹å†è¯´â€¦.</p></blockquote><p><a href="https://www.flong.com/">Flong.com â€¢ Golan Levin &amp; Collaborators çš„ä½œå“</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_poly/">Polynomial Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_exp/">Exponential Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_circ/index.html">Circular &amp; Elliptical Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><p><a href="https://www.flong.com/archive/texts/code/shapers_bez/">Bezier and Other Parametric Shaping Functions - Golan Levin and Collaborators (flong.com)</a></p><hr><p><a href="https://iquilezles.org/">Inigo Quilez :: computer graphics, mathematics, shaders, fractals, demoscene and more (iquilezles.org)</a></p><p><a href="https://iquilezles.org/articles/functions/">Inigo Quilez :: computer graphics, mathematics, shaders, fractals, demoscene and more (iquilezles.org)</a></p><hr><p><img src="https://thebookofshaders.com/05/kynd.png" alt="img"></p><hr><p><a href="https://www.shadertoy.com/view/XsXXDn">Creation by Silexars (shadertoy.com)</a></p><hr><p><a href="https://lygia.xyz/">LYGIA Shader Library</a></p><p><a href="https://graphtoy.com/">Graphtoy</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å­¦ä¹ èµ„æ–™ï¼š&lt;a href=&quot;https://thebookofshaders.com/05/&quot;&gt;The Book of Shaders: S</summary>
      
    
    
    
    <category term="å›¾å½¢å­¦" scheme="https://youxt-njnu.github.io/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
    <category term="shader" scheme="https://youxt-njnu.github.io/tags/shader/"/>
    
    <category term="webgl" scheme="https://youxt-njnu.github.io/tags/webgl/"/>
    
  </entry>
  
  <entry>
    <title>Cesium APIå­¦ä¹  â… </title>
    <link href="https://youxt-njnu.github.io/2024/06/13/Cesium%E4%B8%8A/"/>
    <id>https://youxt-njnu.github.io/2024/06/13/Cesium%E4%B8%8A/</id>
    <published>2024-06-13T03:06:05.000Z</published>
    <updated>2024-06-13T02:41:45.033Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆæ­¥äº†è§£"><a href="#åˆæ­¥äº†è§£" class="headerlink" title="åˆæ­¥äº†è§£"></a>åˆæ­¥äº†è§£</h1><p><strong>Cesiumå®˜ç½‘</strong> <a href="https://cesium.com/">Cesium: The Platform for 3D Geospatial</a></p><p><strong>CesiumJS:</strong><a href="https://cesium.com/learn/cesiumjs-learn/cesiumjs-quickstart/">CesiumJS Quickstart â€“ Cesium</a></p><p><strong>Cesium for Unity:</strong><a href="https://cesium.com/learn/unity/">Cesium for Unity â€“ Cesium</a></p><p><a href="https://zhuanlan.zhihu.com/p/452345666">Hello React Cesium - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://cuifeng.blog.csdn.net/article/details/122828984?spm=1001.2014.3001.5502">Reacté›†æˆCesium+ThreeJsæµç¨‹æ±‡æ€»_react cesium-CSDNåšå®¢</a></p><h1 id="åŸºç¡€æ•™ç¨‹"><a href="#åŸºç¡€æ•™ç¨‹" class="headerlink" title="åŸºç¡€æ•™ç¨‹"></a>åŸºç¡€æ•™ç¨‹</h1><p><a href="https://www.cnblogs.com/tiandi/p/16580238.html">Cesiumå­¦ä¹ èµ„æºæ±‡æ€»</a></p><p><a href="https://sandcastle.cesium.com/">cesiumå®˜æ–¹æ¡ˆä¾‹</a></p><p><a href="https://github.com/vtxf/Cesium-Tutorials-Index">Cesiumç›¸å…³èµ„æ–™æ±‡æ€»</a>ã€<a href="https://zhuanlan.zhihu.com/p/557296232">æ±‡æ€»2</a></p><p><a href="https://pasu.github.io/ExamplesforCesium/examples/examples.html#Primer">cesiumé¡¹ç›®</a></p><p><a href="https://github.com/hujiulin/CesiumJS-tutorial/tree/master?tab=readme-ov-file">Cesiumä¸­æ–‡æ•™ç¨‹-github</a>, <a href="http://cesium.xin/wordpress/archives/16.html">cesiumä¸­æ–‡ç½‘</a></p><hr><p><strong>Cesiumæºç æ–‡ä»¶å¤¹</strong><a href="https://sandcastle.cesium.com/">cesiumå®˜æ–¹æ¡ˆä¾‹</a>ï¼Œ<a href="https://cesium.com/learn/cesiumjs/ref-doc/">å®˜æ–¹APIæ–‡æ¡£</a></p><h1 id="CesiumåŸºç¡€çŸ¥è¯†"><a href="#CesiumåŸºç¡€çŸ¥è¯†" class="headerlink" title="CesiumåŸºç¡€çŸ¥è¯†"></a>CesiumåŸºç¡€çŸ¥è¯†</h1><p><a href="https://www.zhihu.com/column/c_1317874447190585344">å­¦ä¹ é“¾æ¥</a></p><p><strong>Cesiumçš„é¡¹ç›®å®šä½ï¼šB&#x2F;Sæ¶æ„ä¸‹çš„å®¢æˆ·ç«¯åº”ç”¨å±‚é¢çš„ä¸‰ç»´å¼€å‘æ¡†æ¶</strong></p><p><img src="https://pic1.zhimg.com/v2-d566ed3f3b0bb0f8be5d099fb2393b10_r.jpg" alt="img"></p><p><strong>Cesiumçš„å­¦ä¹ è·¯çº¿ï¼š</strong></p><p><img src="https://pic4.zhimg.com/v2-7a32e7833314deff496ff31b5f48809f_r.jpg" alt="img"></p><p><strong>Cesiumè¿›é˜¶ä¹‹è·¯ï¼š</strong></p><ul><li><strong>Webå‰ç«¯æ–¹å‘ï¼š</strong> Cesiumä¸webpackï¼ˆè£å‰ªä»¥åŠå‹ç¼©ï¼‰ï¼ŒCesium ä¸vueï¼ˆæ¡†æ¶è®¾è®¡ï¼Œ åµŒå…¥å¤æ‚ä¸šåŠ¡ç³»ç»Ÿï¼‰ï¼ŒCesiumçš„UIï¼ˆUI è®¾è®¡ï¼Œå®šåˆ¶å¯å¤ç”¨çš„Cesiumäº¤äº’ç•Œé¢ï¼‰</li><li><strong>è®¡ç®—æœºå›¾å½¢å­¦æ–¹å‘ï¼š</strong> WebGLæ·±å…¥ï¼ŒåŸºäºCesium çš„å¯è§†åŒ–å®šåˆ¶ï¼ˆè§†é˜ˆã€æ°´æ·¹ã€æ°´é¢ã€çƒ­åŠ›å›¾ï¼Œæµåœºå›¾ã€é£çº¿å›¾ã€æ‰«æå›¾ï¼‰</li><li><strong>æ•°æ®é¢„å¤„ç†æ–¹å‘ï¼š</strong> æŠ•å½±å˜æ¢ï¼Œç©ºé—´ç´¢å¼•ï¼ŒLOD ï¼Œ3dtile ç”Ÿæˆï¼Œæ•°æ®å­˜å‚¨ï¼Œæ•°æ®åˆ†å‘æœåŠ¡ï¼Œè§£å†³è¶…å¤§ç©ºé—´æ•°æ®å¦‚ä½•åœ¨ Cesiumä¸Šæµç•…å¯è§†åŒ–çš„é—®é¢˜ã€‚</li></ul><h2 id="Viewer"><a href="#Viewer" class="headerlink" title="Viewer"></a>Viewer</h2><p><img src="https://i.loli.net/2018/08/13/5b70f7cbf3693.jpg" alt="img"></p><p><strong>Cesium ionæ˜¯ä¸€ä¸ªæä¾›ç“¦ç‰‡å›¾å’Œ3Dåœ°ç†ç©ºé—´æ•°æ®çš„å¹³å°ï¼ŒCesium ionæ”¯æŒæŠŠæ•°æ®æ·»åŠ åˆ°ç”¨æˆ·è‡ªå·±çš„CesiumJSåº”ç”¨ä¸­ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä½¿ç”¨Sentinal-2äºŒç»´è´´å›¾å’ŒCesiumä¸–ç•Œåœ°å½¢ï¼ŒäºŒè€…éƒ½éœ€è¦ionçš„æ”¯æŒã€‚</strong></p><p><strong>å¤‡æ³¨</strong> åœ¨æˆ‘ä»¬ä½¿ç”¨Cesiumçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç”³è¯·ionï¼ŒåŒæ—¶æ²¡æœ‰è‡ªå·±çš„æ•°æ®æºç”¨çš„cesiumæä¾›çš„æ•°æ®æºï¼Œviewerçš„åº•éƒ¨å¸¸å¸¸ä¼šæç¤ºä¸€è¡Œå°çš„è‹±æ–‡å­—æ¯ã€‚å¤§æ„å°±æ˜¯éœ€è¦ç”³è¯·access token.</p><ol><li><strong>æ‰“å¼€</strong><a href="https://cesium.com/ion/">https://cesium.com/ion/</a> ç„¶åæ³¨å†Œä¸€ä¸ªæ–°çš„è´¦æˆ·ã€‚</li><li><strong>ç‚¹å‡»â€Access Tokenâ€,</strong> é€‰æ‹©<em>Default</em>é»˜è®¤çš„access tokenæ‹·è´åˆ°contentsä¸­ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cesium.Ion.defaultAccessToken =</span><br><span class="line"> Â  Â  Â  Â &#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2NDk3OTUzYy01N2RjLTQyNDMtYTE1Zi0yYjgwNTJlZmYwOTAiLCJpZCI6MTk3MzM4LCJpYXQiOjE3MDg2NTc1NTh9.b8_XHsKZtIQVkUyk95dNvHHB4OE5nmebm5e_JFEIIbM&#x27;</span><br><span class="line">const viewer = new Cesium.Viewer(&#x27;cesiumContainer&#x27;)</span><br></pre></td></tr></table></figure><p><strong>Viewerçš„ç±»ç»„ç»‡</strong></p><p><img src="https://img2022.cnblogs.com/blog/237138/202208/237138-20220812154924431-1555328076.png" alt="img"></p><h3 id="å‚æ•°è§£é‡Š"><a href="#å‚æ•°è§£é‡Š" class="headerlink" title="å‚æ•°è§£é‡Š"></a>å‚æ•°è§£é‡Š</h3><ul><li><strong>infoBox, ç‚¹å‡»åå¼¹å‡ºçš„å³ä¸Šæ–¹ä¿¡æ¯</strong></li><li><strong>selectionIndicator: ç‚¹å‡»ååœ¨åŸåœ°å‡ºç°çš„ç»¿è‰²æŒ‡ç¤ºæ¡†</strong></li><li><strong>trackedEntity: Gets or sets the Entity instance currently being tracked by the camera.</strong></li><li><strong>orderIndependentTranslucency:</strong></li></ul><h2 id="åæ ‡ç³»"><a href="#åæ ‡ç³»" class="headerlink" title="åæ ‡ç³»"></a>åæ ‡ç³»</h2><ul><li><strong>å±å¹•åæ ‡ï¼Œå³äºŒç»´ç¬›å¡å°”å¹³é¢åæ ‡ç³»</strong></li><li><strong>ç¬›å¡å°”ç©ºé—´ç›´è§’åæ ‡&#x2F;ä¸–ç•Œåæ ‡</strong>ï¼ˆçº¢Xï¼Œç»¿Zï¼Œè“Yï¼›Xå‘å‰ï¼ŒYå‘å³ï¼ŒZå‘ä¸Šï¼›</li><li><strong>åœ°ç†åæ ‡ï¼ˆå¼§åº¦åˆ¶ï¼‰ï¼ŒCesium.Cartographic(lon, lat, height)ï¼Œå…¶ä¸­ç»çº¬åº¦éƒ½æ˜¯ç”¨å¼§åº¦è¡¨ç¤ºçš„</strong></li><li><strong>ç»çº¬åº¦åæ ‡ï¼Œé»˜è®¤WGS84åæ ‡ç³»ï¼Œ</strong></li></ul><p><strong>åæ ‡å˜æ¢ï¼š</strong></p><ul><li>ç»çº¬åº¦åæ ‡è½¬ä¸–ç•Œåæ ‡ï¼šCesium.Cartesian3.fromDegrees(lng, lat, height)</li><li>ä¸–ç•Œåæ ‡è½¬ç»çº¬åº¦åæ ‡ï¼šCesium.Cartographic.fromCartesian(cartesian3)</li><li>åœ°ç†åæ ‡ï¼ˆå¼§åº¦åˆ¶ï¼‰è½¬ç»çº¬åº¦åæ ‡ï¼šlng&#x3D;Cesium.Math.toDegrees(cartographic.longitude), lat&#x3D;Cesium.Math.toDegrees(cartographic.latitude), height&#x3D;cartographic.height;</li><li>å¼§åº¦è½¬ç»çº¬åº¦ï¼šCesium.Math.toDegrees(radians)</li><li>ç»çº¬åº¦è½¬å¼§åº¦ï¼šCesium.Math.toRadians(degrees)</li><li>å±å¹•åæ ‡è½¬ä¸–ç•Œåæ ‡ï¼šscene.globe.pick(viewer.camera.getPickRay(windowPosition), scene) â€”â€” ä¸€å®šè¦ä¿è¯å±å¹•åæ ‡åœ¨çƒä¸Šï¼Œä¸ç„¶å¾—åˆ°çš„å°±æ˜¯undefined</li><li>ä¸–ç•Œåæ ‡è½¬å±å¹•åæ ‡ï¼šCesium.SceneTransforms.wgs84ToWindowCoordinates(scene,cartesian3)</li></ul><p><img src="https://s2.loli.net/2024/04/07/QRdUelrvqxNkWHO.png"><img src="https://s2.loli.net/2024/04/07/QRdUelrvqxNkWHO.png"></p><p><strong>ç©ºé—´å˜æ¢ï¼š</strong></p><p><code>åªæœ‰è½¬æ¢åˆ°ç¬›å¡å°”åæ ‡ç³»åæ‰èƒ½è¿ç”¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„ä»¿å°„å˜æ¢çŸ¥è¯†è¿›è¡Œç©ºé—´ä½ç½®å˜æ¢å¦‚å¹³ç§»æ—‹è½¬ç¼©æ”¾ã€‚Cesiumä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹å‡ ç§å¾ˆæœ‰ç”¨çš„å˜æ¢å·¥å…·ç±»ï¼š</code></p><ul><li>Cesium.Cartesian3ï¼ˆç›¸å½“äºPoint3Dï¼‰</li><li>Cesium.Matrix3ï¼ˆ3x3çŸ©é˜µï¼Œç”¨äºæè¿°æ—‹è½¬å˜æ¢ï¼‰</li><li>Cesium.Matrix4ï¼ˆ4x4çŸ©é˜µï¼Œç”¨äºæè¿°æ—‹è½¬åŠ å¹³ç§»å˜æ¢ï¼‰</li><li>Cesium.Quaternionï¼ˆå››å…ƒæ•°ï¼Œç”¨äºæè¿°å›´ç»•æŸä¸ªå‘é‡*æ—‹è½¬ä¸€å®šè§’åº¦çš„å˜æ¢ï¼‰</li><li>Cesium.Transforms(åŒ…å«å°†ä½ç½®è½¬æ¢ä¸ºå„ç§å‚è€ƒç³»çš„åŠŸèƒ½)</li></ul><p><strong>Cesiumç›®å‰æ”¯æŒçš„åæ ‡ç³»ï¼š</strong></p><ul><li><strong>WGS1984ï¼Œ Terrainçš„TileScemeé»˜è®¤æ˜¯è¿™ä¸ª</strong></li><li><strong>å¢¨å¡æ‰˜æŠ•å½±ï¼ŒImageryçš„TileScemeé»˜è®¤æ˜¯è¿™ä¸ª</strong></li></ul><p><code>viewer.canvas.clientHeight - movement.endPosition.y</code> :</p><p><strong>åœ¨ Cesium å’Œå…¶ä»– WebGL åº”ç”¨ä¸­ï¼Œ</strong><code>viewer.canvas</code> å…ƒç´ çš„åæ ‡ç³»é€šå¸¸éµå¾ª HTML Canvas å…ƒç´ çš„å¸¸è§å¸ƒå±€ï¼š</p><ol><li><strong>åæ ‡ç³»èµ·ç‚¹</strong> ï¼šCanvas åæ ‡ç³»çš„åŸç‚¹ (0, 0) ä½äº Canvas çš„å·¦ä¸Šè§’ã€‚</li><li><strong>Xè½´æ–¹å‘</strong> ï¼šXè½´ä»å·¦å‘å³å¢é•¿ï¼Œå³åæ ‡å€¼ä» 0 å¢åŠ åˆ° <code>canvas.width</code>ã€‚</li><li><strong>Yè½´æ–¹å‘</strong> ï¼šYè½´ä»ä¸Šå‘ä¸‹å¢é•¿ï¼Œå³åæ ‡å€¼ä» 0 å¢åŠ åˆ° <code>canvas.clientHeight</code>ã€‚</li></ol><p>é’ˆå¯¹ä»£ç è¡Œ <code>viewer.canvas.clientHeight - movement.endPosition.y</code>ï¼Œè¿™é‡Œæ‰€è¡¨è¾¾çš„å«ä¹‰å’Œåæ ‡å‚è€ƒå¦‚ä¸‹ï¼š</p><ul><li><strong><code>viewer.canvas.clientHeight</code></strong> ï¼šè¿™æ˜¯ Canvas å…ƒç´ çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯ Y è½´çš„æœ€å¤§å€¼ã€‚</li><li><strong><code>movement.endPosition.y</code></strong> ï¼šè¿™é€šå¸¸æ˜¯é¼ æ ‡äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»æˆ–æ‹–åŠ¨äº‹ä»¶ï¼‰ç»“æŸæ—¶çš„ Y åæ ‡ä½ç½®ã€‚åœ¨ Cesium ä¸­ï¼Œè¿™ä¸ªåæ ‡ä¹Ÿéµå¾ª Canvas çš„åæ ‡ç³»ï¼Œå³ Y åæ ‡ä»ä¸Šåˆ°ä¸‹å¢å¤§ã€‚</li></ul><h2 id="ImageryProvider"><a href="#ImageryProvider" class="headerlink" title="ImageryProvider"></a>ImageryProvider</h2><p>åŠ è½½å½±åƒåº•å›¾API: <code>CesiumImagery.vue, ImageryLoading.vue</code></p><blockquote><p><strong>Cesium.: ImageryLayer, IonWorldImageryStyle, SingleTileImageryProvider, GridImageryProvider, TileCoordinateImagery</strong></p><p><strong>viewer:</strong></p><ul><li><strong>.scene.imageryLayers: sceneé‡Œçš„ï¼Œæ›´æ˜ç¡®</strong></li><li><strong>.imageryLayers: Gets the collection of image layers that will be rendered on the globe. æ›´ç®€æ´ï¼Œä¸¤è€…åŠŸèƒ½ä¸€æ ·</strong></li></ul></blockquote><p><strong>ä¸¤è€…å¯¹æ¯”</strong></p><p><strong>Imagery Providerä½¿ç”¨ç‰¹å®šçš„æœåŠ¡è¯·æ±‚Tilesï¼Œè€ŒLayerè¡¨ç¤ºæ¥è‡ªImagery Providerçš„displayed tilesã€‚æ¯”å¦‚è¯´,</strong></p><p><code>const layer = layers.addImageryProvider(imageryProvider);</code></p><p><strong>æ˜¯</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const layer = new Cesium.ImageryLayer(imageryProvider);</span><br><span class="line">layers.add(layer);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šå¸¸æ„å»ºä¸€ä¸ªimagery provideråªæ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªlayer; ç„¶åæˆ‘ä»¬ä½¿ç”¨layerçš„å±æ€§(å¦‚showã€ alphaã€brightnesså’Œcontrast)æ“ä½œè¯¥å›¾å±‚ä»¥æ”¹å˜å…¶è§†è§‰å¤–è§‚ã€‚è§£è€¦decoupling imagery providerå’Œlayerä½¿å¾—ç¼–å†™æ–°çš„imagery providerå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p>ä¸ä¸Šé¢ç¤ºä¾‹ä¸­çš„Layerä¸€æ ·ï¼Œimagery layer collectionå†³å®šäº†å›¾å±‚ç»˜åˆ¶çš„é¡ºåºã€‚layeræ˜¯æ ¹æ®æ·»åŠ çš„é¡ºåºä»åº•éƒ¨åˆ°é¡¶éƒ¨ç»˜åˆ¶çš„ã€‚åƒCesiumä¸­çš„ä»»ä½•å…¶ä»–é›†åˆä¸€æ ·ï¼Œä½¿ç”¨add, remove and getç­‰å‡½æ•°æ“ä½œimagery layer collectionã€‚æ­¤å¤–ï¼Œlayerå¯ä»¥ä½¿ç”¨ raiseã€ raiseToTopã€ lower å’Œ lowerTobottom æ¥é‡æ–°æ’åºã€‚</p><p>Mapboxå½±åƒåŠ è½½ï¼š</p><p>mapbox:&#x2F;&#x2F;styles&#x2F;foxziluliu1121&#x2F;clrzymvix009g01r67bowdcez</p><p><a href="https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg">https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token&#x3D;pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</a></p><ul><li><strong>ImageryLayer, ImageryProvider,</strong></li><li>**Vector Tiles API:  **<a href="https://c.tiles.mapbox.com/v4/foxziluliu1121.66qkqrxn/2/3/0.png?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg">https://c.tiles.mapbox.com/v4/foxziluliu1121.66qkqrxn/2/3/0.png?access_token&#x3D;pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</a></li><li>**static tiles API:  **<code>https://api.mapbox.com/styles/v1/foxziluliu1121/clrzymvix009g01r67bowdcez/wmts?access_token=pk.eyJ1IjoiZm94emlsdWxpdTExMjEiLCJhIjoiY2xyYnJ5MXQ3MHN5ZjJrcHFxcXdwemN3bSJ9.zc_BQ5U2vldx1wROrYM4tg</code></li><li><strong>Mapboxçš„æ•°æ®æ ¼å¼ï¼š</strong><ul><li><strong>mapbox.mapbox-streets-v8</strong></li><li><code>foxziluliu1121.9mqo2ps2</code></li></ul></li></ul><h2 id="terrainProvider"><a href="#terrainProvider" class="headerlink" title="terrainProvider"></a>terrainProvider</h2><p>åœ°å½¢å›¾å±‚åªèƒ½æœ‰ä¸€ä¸ªï¼›</p><p>åœ°å½¢ç±»å‹ï¼š</p><ul><li>STK World Terrain</li><li>Small Terrain</li></ul><p>terrainProvider:</p><ul><li>EllipsoidTerrainProvider</li><li>CustomHeightmapTerrainProvider</li></ul><p>Ceisumæ¡ˆä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cesium.Terrain.fromWorldTerrain(&#123;</span><br><span class="line"> Â   requestWaterMask: true,</span><br><span class="line"> Â   requestVertexNormals: true,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="åŠ è½½çŸ¢é‡æ•°æ®"><a href="#åŠ è½½çŸ¢é‡æ•°æ®" class="headerlink" title="åŠ è½½çŸ¢é‡æ•°æ®"></a>åŠ è½½çŸ¢é‡æ•°æ®</h2><ul><li>CustomDataSource</li><li>CzmlDataSource</li><li>GeoJsonDataSource, GeoJson, TopoJson</li><li>KmlDataSource</li><li></li></ul><h2 id="ç©ºé—´æ•°æ®å¯è§†åŒ–"><a href="#ç©ºé—´æ•°æ®å¯è§†åŒ–" class="headerlink" title="ç©ºé—´æ•°æ®å¯è§†åŒ–"></a>ç©ºé—´æ•°æ®å¯è§†åŒ–</h2><h3 id="Entity-API"><a href="#Entity-API" class="headerlink" title="Entity API"></a>Entity API</h3><p>ä»¥Graphicsç»“å°¾ï¼š</p><ul><li>billboard, box, corridor, cylinder, ellipse, ellipsoid, label</li><li>model, tileset, path, plane,</li><li>point, polygon, polyline, polylineVolume, rectangle, wall,</li></ul><p><strong>ä½¿ç”¨æ³¨æ„ç‚¹ï¼š</strong></p><p>åœ¨Cesiumä¸­ï¼Œ<code>Cesium.BoxGraphics</code>æ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªå®ä½“ï¼ˆEntityï¼‰çš„ç›’çŠ¶å‡ ä½•ä½“çš„å¯è§†åŒ–å±æ€§çš„ç±»ã€‚è¿™ä¸ªç±»æœ¬èº«å¹¶ä¸è´Ÿè´£å°†å‡ ä½•ä½“æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼›ç›¸åï¼Œå®ƒè¢«ç”¨ä½œæè¿°å®ä½“çš„è§†è§‰å¤–è§‚çš„ä¸€éƒ¨åˆ†ã€‚ä¸ºäº†åœ¨Cesiumçš„3Dåœºæ™¯ä¸­æ˜¾ç¤ºä¸€ä¸ªç›’çŠ¶å‡ ä½•ä½“ï¼Œä½ éœ€è¦å°†è¿™ä¸ªå‡ ä½•ä½“ä¸ä¸€ä¸ªå®ä½“ï¼ˆEntityï¼‰å…³è”ï¼Œå¹¶å°†è¯¥å®ä½“æ·»åŠ åˆ°Cesiumçš„å®ä½“é›†åˆä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å®è·µä¸­ï¼Œä½ çœ‹åˆ°çš„ç¤ºä¾‹ä»£ç é€šå¸¸ä¼šä½¿ç”¨ <code>viewer.entities.add()</code>æ¥åˆ›å»ºå’Œæ·»åŠ å¸¦æœ‰ç›’çŠ¶å‡ ä½•ä½“çš„å®ä½“ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨ **<code>Cesium.BoxGraphics</code>é€šè¿‡ <code>viewer.entities.add()</code>æ·»åŠ ä¸€ä¸ªç›’çŠ¶å‡ ä½•ä½“åˆ°åœºæ™¯ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var viewer = new Cesium.Viewer(&#x27;cesiumContainer&#x27;);</span><br><span class="line"></span><br><span class="line">var box = viewer.entities.add(&#123;</span><br><span class="line"> Â  Â position: Cesium.Cartesian3.fromDegrees(-100.0, 40.0, 200000.0),</span><br><span class="line"> Â  Â box: &#123;</span><br><span class="line"> Â  Â  Â  Â dimensions: new Cesium.Cartesian3(400000.0, 300000.0, 500000.0),</span><br><span class="line"> Â  Â  Â  Â material: Cesium.Color.BLUE.withAlpha(0.5),</span><br><span class="line"> Â  Â  Â  Â outline: true,</span><br><span class="line"> Â  Â  Â  Â outlineColor: Cesium.Color.BLACK</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">viewer.zoomTo(viewer.entities);</span><br></pre></td></tr></table></figure><p><strong>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š</strong></p><ul><li><code>viewer</code>æ˜¯ <code>Cesium.Viewer</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¯Cesiumåº”ç”¨çš„ä¸»è¦ç•Œé¢ã€‚</li><li><code>viewer.entities.add(&#123;...&#125;)</code>æ˜¯æ·»åŠ æ–°å®ä½“åˆ°åœºæ™¯çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæè¿°äº†å®ä½“çš„å„ç§å±æ€§ï¼ŒåŒ…æ‹¬ä½ç½®ï¼ˆ<code>position</code>ï¼‰ã€å½¢çŠ¶ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ä¸€ä¸ªç›’å­ï¼Œé€šè¿‡ <code>box</code>å±æ€§å®šä¹‰ï¼‰ç­‰ã€‚</li><li><code>box</code>å±æ€§ä½¿ç”¨ <code>Cesium.BoxGraphics</code>çš„ä¸€ä¸ªå®ä¾‹æ¥å®šä¹‰ç›’çŠ¶å‡ ä½•ä½“çš„å¤–è§‚ï¼ŒåŒ…æ‹¬å°ºå¯¸ï¼ˆ<code>dimensions</code>ï¼‰ã€æè´¨ï¼ˆ<code>material</code>ï¼‰ã€è½®å»“çº¿æ˜¯å¦å¯è§ï¼ˆ<code>outline</code>ï¼‰ä»¥åŠè½®å»“çº¿çš„é¢œè‰²ï¼ˆ<code>outlineColor</code>ï¼‰ã€‚</li></ul><p><strong>æ€»ä¹‹ï¼Œ</strong><code>Cesium.BoxGraphics</code>æä¾›äº†å®šä¹‰ç›’çŠ¶å‡ ä½•ä½“è§†è§‰å¤–è§‚çš„æ–¹å¼ï¼Œè€Œ <code>viewer.entities.add()</code>åˆ™æ˜¯å°†è¿™æ ·å®šä¹‰çš„ç›’çŠ¶å‡ ä½•ä½“å®ä½“æ·»åŠ åˆ°Cesiumåœºæ™¯ä¸­çš„æ–¹æ³•ã€‚è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…ä»¥çµæ´»çš„æ–¹å¼åˆ›å»ºå’Œç®¡ç†åœºæ™¯ä¸­çš„å¯¹è±¡ï¼ŒåŒæ—¶æä¾›äº†ä¸°å¯Œçš„APIæ¥å®šä¹‰è¿™äº›å¯¹è±¡çš„è§†è§‰å¤–è§‚ã€‚</p><p>EntityClusterç±»+PinBuilderç±»ï¼šå®ç°billboards, points, labelsçš„èšåˆ</p><p>Entityç®¡ç†ï¼šviewer.entitiesçš„ç±»å‹æ˜¯EntityCollectionï¼ŒåŒ…æ‹¬äº†EntityCollectionç±»é‡Œé¢çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚.add(), .contains(), .getById(), .remove(), .removeAll(), .removeById()</p><p>Entityæ‹¾å–ï¼šviewer.scene.pick(), viewer.scene.drillPick()</p><p>Entityå›ºå®šï¼šheightReferenceå±æ€§å€¼ï¼Œ</p><h3 id="Primitive-API"><a href="#Primitive-API" class="headerlink" title="Primitive API"></a>Primitive API</h3><p>åŠ è½½æ•°æ®çš„æ€§èƒ½æ›´å¥½ï¼Œå¯ä»¥æ›´å¥½çš„åŠ è½½3D Tilesæ•°æ®ã€‚</p><p>Cesium.GeometryInstance()</p><p>Cesium.EllipsoidSurfaceAppearance</p><p>Cesium.Primitive()</p><p>scene.primitives.add()</p><h3 id="æè´¨"><a href="#æè´¨" class="headerlink" title="æè´¨"></a>æè´¨</h3><p><img src="https://s2.loli.net/2024/04/04/9bVKQRSEtL6Dnw4.png"></p><p><strong>MaterialProperty:</strong></p><ul><li>Cesium.ColorMaterialProperty</li><li>Cesium.ImageMaterialProperty</li><li></li></ul><h2 id="GLTFæ ¼å¼"><a href="#GLTFæ ¼å¼" class="headerlink" title="GLTFæ ¼å¼"></a>GLTFæ ¼å¼</h2><p><img src="https://pic2.zhimg.com/80/v2-a26039ef8457742c7121e9532289da51_1440w.webp" alt="img"></p><p><strong>CesiumåŠ è½½gltf:</strong></p><ul><li>viewer.entities.add()</li><li>viewer.scene.primitives.add(), Cesium.Model.fromGltf()</li></ul><h2 id="3D-Tilesæ ¼å¼"><a href="#3D-Tilesæ ¼å¼" class="headerlink" title="3D Tilesæ ¼å¼"></a>3D Tilesæ ¼å¼</h2><p>3D Tileså¯ä»¥ç†è§£ä¸ºå¸¦æœ‰LODçš„glTF,ä¸ºæµå¼ä¼ è¾“å’Œæ¸²æŸ“æµ·é‡3Dæ•°æ®è€Œè®¾è®¡ï¼Œä¾‹å¦‚å€¾æ–œæ‘„å½±ã€3Då»ºç­‘ã€BIM&#x2F;CADï¼Œå®ä¾‹åŒ–è¦ç´ é›†å’Œç‚¹äº‘ã€‚3D Tileså®šä¹‰äº†ä¸€ç§æ•°æ®åˆ†å±‚ç»“æ„å’Œä¸€ç»„åˆ‡ç‰‡æ–¹å¼ã€‚</p><p><strong>ç»„æˆï¼š</strong></p><ul><li>æè¿°ç“¦ç‰‡é›†Tilesetçš„JSONæ–‡ä»¶ â€”â€” tileset.json</li><li>ä¸€ç»„ç“¦ç‰‡Tile<ul><li>ç“¦ç‰‡å¯¹è±¡çš„æ ¼å¼å¯ä»¥ï¼šb3dm, i3dm, pnts, cmpt</li></ul></li></ul><p><strong>å¸¸ç”¨ç±»ï¼š</strong></p><ul><li>Cesium3Dtilesetï¼šç”¨äºæµå¼ä¼ è¾“å¤§é‡çš„å¼‚æ„3Dåœ°ç†ç©ºé—´æ•°æ®é›†ï¼›</li><li>Cesium3DTileStyleï¼šç“¦ç‰‡é›†æ ·å¼ï¼›</li><li>Cesium3DTileï¼šæ•°æ®é›†ä¸­çš„ä¸€ä¸ªç“¦ç‰‡;</li><li>Cesium3DTileContentï¼šç“¦ç‰‡å†…å®¹ï¼›</li><li>Cesium3DTileFeatureï¼šç“¦ç‰‡é›†è¦ç´ ï¼Œç”¨äºè®¿é—®Tileä¸­æ‰¹é‡è¡¨ä¸­çš„å±æ€§æ•°æ®ï¼Œå¯é€šè¿‡scene.pickæ–¹æ³•æ¥è·å–ä¸€ä¸ª BATCHï¼Œå³ä¸‰ç»´è¦ç´ ã€‚Cesium3DTileFeature.getPropertyNames() æ–¹æ³•è·å–æ‰¹é‡è¡¨ä¸­æ‰€æœ‰å±æ€§åï¼ŒCesium3DTileFeature.getProperty(string Name) æ¥è·å–å¯¹åº”å±æ€§åçš„å±æ€§å€¼ã€‚</li></ul><p><strong>æ“ä½œï¼š</strong></p><ol><li>åŠ è½½ï¼šviewer.scene.primitives.add(new Cesium.Cesium3DTileset())</li></ol><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><h4 id="Cesium3DTileset"><a href="#Cesium3DTileset" class="headerlink" title="Cesium3DTileset"></a>Cesium3DTileset</h4><p><a href="https://cesium.com/learn/cesiumjs/ref-doc/Cesium3DTileset.html?classFilter=Cesium3DTileset">å®˜ç½‘é“¾æ¥</a></p><p><code>featureIdLabel</code> å±æ€§åœ¨ Cesium çš„ <code>Cesium3DTileset</code> å¯¹è±¡ä¸­ç”¨äºæŒ‡å®šç”¨äºæ‹¾å–ï¼ˆpickingï¼‰å’Œæ ·å¼åŒ–ï¼ˆstylingï¼‰çš„ç‰¹å¾ ID é›†åˆã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™æ®µæ–‡æ¡£çš„è¯¦ç»†è§£é‡Šå’Œå®ƒçš„ä½œç”¨ï¼š</p><ol><li><strong>é€‰æ‹©ç‰¹å¾ ID é›†åˆ</strong>ï¼š<ul><li>åœ¨ <code>Cesium3DTileset</code> ä¸­ï¼Œ<code>featureIdLabel</code> ç”¨æ¥æ ‡è¯†å’Œé€‰æ‹©ç‰¹å®šçš„ç‰¹å¾ ID é›†åˆã€‚è¿™å¯¹äºæ‰§è¡Œæ‹¾å–æ“ä½œå’Œåº”ç”¨æ ·å¼è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯å½“æ¨¡å‹åŒ…å«å¤šä¸ªç‰¹å¾ ID é›†åˆæ—¶ã€‚</li></ul></li><li><strong>EXT_mesh_features å’Œ EXT_feature_metadata</strong>ï¼š<ul><li>å¯¹äºéµå¾ª <code>EXT_mesh_features</code> æ‰©å±•çš„æ•°æ®ï¼Œ<code>featureIdLabel</code> å¯ä»¥æ˜¯ç‰¹å¾ ID çš„ <code>label</code> å±æ€§ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º <code>&quot;featureId_N&quot;</code>ï¼ˆN æ˜¯ featureIds æ•°ç»„ä¸­çš„ç´¢å¼•ï¼‰ã€‚</li><li>å¯¹äºæ—§çš„ <code>EXT_feature_metadata</code> æ‰©å±•ï¼Œæ²¡æœ‰ <code>label</code> å­—æ®µï¼Œæ‰€ä»¥ç‰¹å¾ ID é›†æ€»æ˜¯ä»¥ <code>&quot;featureId_N&quot;</code> æ ‡è¯†ï¼Œå…¶ä¸­ N æ˜¯æ‰€æœ‰ç‰¹å¾ ID åˆ—è¡¨ä¸­çš„ç´¢å¼•ï¼Œç‰¹å¾ ID å±æ€§åœ¨ç‰¹å¾ ID çº¹ç†ä¹‹å‰åˆ—å‡ºã€‚</li></ul></li><li><strong>ç‰¹å¾ ID æ ‡ç­¾çš„è‡ªåŠ¨è½¬æ¢</strong>ï¼š<ul><li>å¦‚æœ <code>featureIdLabel</code> è¢«è®¾ç½®ä¸ºä¸€ä¸ªæ•´æ•° Nï¼Œå®ƒå°†è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸² <code>&quot;featureId_N&quot;</code>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç®€å•åœ°æŒ‡å®šä¸€ä¸ªç´¢å¼•ï¼ŒCesium ä¼šè‡ªåŠ¨è§£æä¸ºæ­£ç¡®çš„ç‰¹å¾ ID æ ‡ç­¾ã€‚</li></ul></li><li><strong>ä¼˜å…ˆçº§</strong>ï¼š<ul><li>å¦‚æœåŒæ—¶å­˜åœ¨æ¯ä¸ªåŸºå…ƒï¼ˆper-primitiveï¼‰å’Œæ¯ä¸ªå®ä¾‹ï¼ˆper-instanceï¼‰çš„ç‰¹å¾ IDsï¼Œå®ä¾‹ç‰¹å¾ IDs æœ‰ä¼˜å…ˆæƒã€‚è¿™å¯¹äºå†³å®šåœ¨å†²çªæ—¶å“ªç»„ç‰¹å¾ ID åº”è¯¥è¢«ä½¿ç”¨æ˜¯é‡è¦çš„ã€‚</li></ul></li></ol><p><strong>ä½œç”¨</strong></p><ul><li><strong>æ‹¾å–å’Œæ ·å¼åŒ–</strong>ï¼š<ul><li>é€šè¿‡æŒ‡å®š <code>featureIdLabel</code>ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®æ§åˆ¶å“ªä¸€ç»„ç‰¹å¾ ID è¢«ç”¨äºäº¤äº’ï¼ˆå¦‚é¼ æ ‡æ‹¾å–ï¼‰å’Œè§†è§‰æ ·å¼åŒ–ã€‚è¿™åœ¨å¤„ç†åŒ…å«å¤æ‚æ•°æ®é›†çš„å¤§å‹ 3D Tiles æ¨¡å‹æ—¶å°¤å…¶æœ‰ç”¨ã€‚</li></ul></li><li><strong>çµæ´»æ€§å’Œæ§åˆ¶</strong>ï¼š<ul><li>æä¾›äº†å¯¹æ¨¡å‹ç‰¹å¾çš„æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå…è®¸å¼€å‘è€…åŸºäºå…·ä½“çš„ç‰¹å¾ ID é›†æ¥åº”ç”¨æ ·å¼å’Œæ‰§è¡Œæ‹¾å–ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¨¡å‹ä¸­åµŒå…¥äº†å¤šç§æ•°æ®å±‚ï¼ˆå¦‚ä¸åŒçš„ç‰©ç†éƒ¨åˆ†æˆ–ä¸åŒç±»å‹çš„æ•°æ®æ ‡æ³¨ï¼‰æ—¶ã€‚</li></ul></li><li><strong>å®éªŒæ€§ç‰¹æ€§</strong>ï¼š<ul><li><strong>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œ</strong><code>featureIdLabel</code> æ˜¯ä¸€ä¸ªå®éªŒæ€§ç‰¹æ€§ï¼Œå±äº 3D Tiles è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œè¯¥è§„èŒƒå°šæœªæœ€ç»ˆç¡®å®šã€‚å› æ­¤ï¼Œä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ—¶éœ€è¦è°¨æ…ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šåœ¨æ²¡æœ‰æ ‡å‡†å¼ƒç”¨æ”¿ç­–çš„æƒ…å†µä¸‹æ”¹å˜ã€‚</li></ul></li></ul><p><code>featureIdLabel</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºåœ¨å¤æ‚çš„ 3D Tiles æ•°æ®é›†ä¸­è¿›è¡Œç²¾ç¡®çš„äº¤äº’å’Œè§†è§‰è¡¨ç¤ºã€‚å®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®ç‰¹å®šçš„ç‰¹å¾ ID é›†æ¥å®šåˆ¶æ¨¡å‹çš„è¡¨ç°å’Œè¡Œä¸ºï¼Œå¢å¼ºäº†æ¨¡å‹ä¸ç”¨æˆ·äº¤äº’çš„èƒ½åŠ›å’Œçµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒçš„å®éªŒæ€§è´¨ï¼Œä½¿ç”¨æ—¶éœ€è¦å…³æ³¨ Cesium æ›´æ–°å’Œå˜æ›´ã€‚</p><h2 id="Cesiumçš„Property"><a href="#Cesiumçš„Property" class="headerlink" title="Cesiumçš„Property"></a>Cesiumçš„Property</h2><p><strong>åŸºæœ¬property</strong></p><ul><li>CompositeProperty</li><li>ConstantProperty</li><li>SampledProperty</li><li>TimeIntervalCollectionProperty</li></ul><p><strong>Materialçš„property</strong></p><p><strong>PositionProperty</strong></p><p><strong>å…¶ä»–</strong></p><p><img src="https://pic4.zhimg.com/80/v2-9cb0b7aa0c14747709a9dc455c7dccf7_720w.webp" alt="img"></p><h2 id="ç»„ä»¶é‡å†™"><a href="#ç»„ä»¶é‡å†™" class="headerlink" title="ç»„ä»¶é‡å†™"></a>ç»„ä»¶é‡å†™</h2><p>homeButtonå›åˆ°ä¸»è¦é¡µé¢ï¼›</p><p>Geocoderç»„ä»¶é€šè¿‡OSMæœåŠ¡å®ç°ï¼›</p><p>è‡ªå®šä¹‰BaseLayerPicker:</p><ul><li>viewer.baseLayerPicker.viewModel.imageryProviderViewModels</li><li>viewer.baseLayerPicker.viewModel.terrainProviderViewModels</li></ul><h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><p>let handler &#x3D; new Cesium.ScreenSpaceEventHandler(viewer.canvas)</p><p>let eventType &#x3D; Cesium.ScreenSpaceEventType.LEFT_CLICK</p><p>handler.setInputAction((event) &#x3D;&gt; {}, eventType)</p><p>Keyboard: camera.moveForward, .moveBackward, .moveUp, .moveDown, .moveLeft, .moveRight</p><p>åœºæ™¯æ¸²æŸ“: scene.preUpdate, .postUpdate, .preRender, .postRender</p><h2 id="ç›¸æœºæ§åˆ¶"><a href="#ç›¸æœºæ§åˆ¶" class="headerlink" title="ç›¸æœºæ§åˆ¶"></a>ç›¸æœºæ§åˆ¶</h2><p>viewer.flyTo(target, options)</p><p>viewer.zoomTo(target, offset)</p><p>viewer.camera.flyTo(options)</p><p>viewer.camera.flyToBoundingSphere(boundingSphere, options)</p><p>viewer.camera.lookAt(target, offset)</p><p>viewer.camera.lookAtTransform(transform, offset)</p><p>viewer.camera.setView(options)</p><h2 id="æµ‹é‡"><a href="#æµ‹é‡" class="headerlink" title="æµ‹é‡"></a>æµ‹é‡</h2><p>è·ç¦»</p><p>é¢ç§¯</p><p>handler.setInputAction(func(), Cesium.ScreenSpacEventType.RIGHT_CLICK)</p><h2 id="è°ƒè¯•é¢æ¿"><a href="#è°ƒè¯•é¢æ¿" class="headerlink" title="è°ƒè¯•é¢æ¿"></a>è°ƒè¯•é¢æ¿</h2><p>CesiumInspector</p><blockquote><p>äº†è§£Cesiumæ¸²æŸ“æ•ˆæœä»¥åŠæ€§èƒ½è°ƒä¼˜</p><p>viewer.extend(Cesium.viewerCesiumInspectorMixin)</p></blockquote><p>Cesium3DTilesInspector</p><blockquote><p>ç”¨äºç›‘è§†3D Tilesæ•°æ®çš„ç›‘è§†å™¨</p><p>viewer.extend(Cesium.viewerCesium3DTilesInspector)</p></blockquote><h2 id="ç²’å­ç³»ç»Ÿ"><a href="#ç²’å­ç³»ç»Ÿ" class="headerlink" title="ç²’å­ç³»ç»Ÿ"></a>ç²’å­ç³»ç»Ÿ</h2><p>new Cesium.ParticleSystem()</p><h2 id="åœºæ™¯åå¤„ç†"><a href="#åœºæ™¯åå¤„ç†" class="headerlink" title="åœºæ™¯åå¤„ç†"></a>åœºæ™¯åå¤„ç†</h2><p>postProgressç±»</p><p>postProgressStage</p><p>postProgressStageLibrary</p><p>postProgressStageCollection</p><h2 id="ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ"><a href="#ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ" class="headerlink" title="ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ"></a>ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ</h2><p>ThreeJS</p><ol><li>åˆå§‹åŒ–ä¸¤ä¸ªå®¹å™¨ï¼Œå’Œå„è‡ªçš„æ¸²æŸ“å™¨</li><li>è°ƒæ•´å„è‡ªçš„æ¸²æŸ“é¢‘ç‡å’Œç›¸æœºä¸€è‡´</li><li>åŠ å…¥è¦å±•ç¤ºçš„å†…å®¹</li></ol><p>ECharts</p><p>Heatmap</p><p>Turf</p><h2 id="æºç æ‰“åŒ…"><a href="#æºç æ‰“åŒ…" class="headerlink" title="æºç æ‰“åŒ…"></a>æºç æ‰“åŒ…</h2><p>gulp, webpack</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆæ­¥äº†è§£&quot;&gt;&lt;a href=&quot;#åˆæ­¥äº†è§£&quot; class=&quot;headerlink&quot; title=&quot;åˆæ­¥äº†è§£&quot;&gt;&lt;/a&gt;åˆæ­¥äº†è§£&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Cesiumå®˜ç½‘&lt;/strong&gt; &lt;a href=&quot;https://cesium.com/&quot;&gt;Cesium</summary>
      
    
    
    
    <category term="3DGIS" scheme="https://youxt-njnu.github.io/categories/3DGIS/"/>
    
    <category term="WebGL" scheme="https://youxt-njnu.github.io/categories/3DGIS/WebGL/"/>
    
    
    <category term="Cesium" scheme="https://youxt-njnu.github.io/tags/Cesium/"/>
    
  </entry>
  
  <entry>
    <title>WebAPIs çŸ¥è¯†ç‚¹æ¢³ç†</title>
    <link href="https://youxt-njnu.github.io/2024/06/13/WebAPIs/"/>
    <id>https://youxt-njnu.github.io/2024/06/13/WebAPIs/</id>
    <published>2024-06-13T01:33:26.000Z</published>
    <updated>2024-06-13T02:42:39.009Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h1 id="Web-APIs"><a href="#Web-APIs" class="headerlink" title="Web APIs"></a>Web APIs</h1><ol><li><strong>API æ˜¯ä¸ºæˆ‘ä»¬ç¨‹åºå‘˜æä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°æŸç§åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å°±å¯ä»¥äº†ï¼Œä¸å¿…çº ç»“å†…éƒ¨å¦‚ä½•å®ç°</strong></li><li><strong>Web API ä¸»è¦æ˜¯é’ˆå¯¹äºæµè§ˆå™¨æä¾›çš„æ¥å£ï¼Œä¸»è¦é’ˆå¯¹äºæµè§ˆå™¨åšäº¤äº’æ•ˆæœã€‚</strong></li><li><strong>Web API ä¸€èˆ¬éƒ½æœ‰è¾“å…¥å’Œè¾“å‡ºï¼ˆ å‡½æ•°çš„ä¼ å‚å’Œè¿”å›å€¼ï¼‰ï¼ŒWeb API å¾ˆå¤šéƒ½æ˜¯æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰</strong></li><li><strong>å­¦ä¹  Web API å¯ä»¥ç»“åˆå‰é¢å­¦ä¹ å†…ç½®å¯¹è±¡æ–¹æ³•çš„æ€è·¯å­¦ä¹ </strong></li></ol><h2 id="1-2-DOM-ä»‹ç»"><a href="#1-2-DOM-ä»‹ç»" class="headerlink" title="1.2. DOM ä»‹ç»"></a>1.2. DOM ä»‹ç»</h2><h3 id="1-2-1-ä»€ä¹ˆæ˜¯DOM"><a href="#1-2-1-ä»€ä¹ˆæ˜¯DOM" class="headerlink" title="1.2.1 ä»€ä¹ˆæ˜¯DOM"></a>1.2.1 ä»€ä¹ˆæ˜¯DOM</h3><p>**æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼Œç®€ç§°DOMï¼‰ï¼Œæ˜¯ **<a href="https://baike.baidu.com/item/W3C">W3C</a> ç»„ç»‡æ¨èçš„å¤„ç†<a href="https://baike.baidu.com/item/%E5%8F%AF%E6%89%A9%E5%B1%95%E7%BD%AE%E6%A0%87%E8%AF%AD%E8%A8%80">å¯æ‰©å±•æ ‡è®°è¯­è¨€</a>ï¼ˆhtmlæˆ–è€…xhtmlï¼‰çš„æ ‡å‡†<a href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3">ç¼–ç¨‹æ¥å£</a>ã€‚</p><p><strong>W3C å·²ç»å®šä¹‰äº†ä¸€ç³»åˆ—çš„ DOM æ¥å£ï¼Œé€šè¿‡è¿™äº› DOM æ¥å£å¯ä»¥æ”¹å˜ç½‘é¡µçš„å†…å®¹ã€ç»“æ„å’Œæ ·å¼ã€‚</strong></p><blockquote><p><strong>DOMæ˜¯W3Cç»„ç»‡åˆ¶å®šçš„ä¸€å¥—å¤„ç† htmlå’Œxmlæ–‡æ¡£çš„è§„èŒƒï¼Œæ‰€æœ‰çš„æµè§ˆå™¨éƒ½éµå¾ªäº†è¿™å¥—æ ‡å‡†ã€‚</strong></p></blockquote><h3 id="1-2-2-DOMæ ‘"><a href="#1-2-2-DOMæ ‘" class="headerlink" title="1.2.2. DOMæ ‘"></a>1.2.2. DOMæ ‘</h3><p><img src="https://s2.loli.net/2024/06/13/bIQ3ek6qtW9CFBm.png"></p><p><strong>DOMæ ‘åˆç§°ä¸ºæ–‡æ¡£æ ‘æ¨¡å‹ï¼ŒæŠŠæ–‡æ¡£æ˜ å°„æˆæ ‘å½¢ç»“æ„ï¼Œé€šè¿‡èŠ‚ç‚¹å¯¹è±¡å¯¹å…¶å¤„ç†ï¼Œå¤„ç†çš„ç»“æœå¯ä»¥åŠ å…¥åˆ°å½“å‰çš„é¡µé¢ã€‚</strong></p><ul><li><strong>æ–‡æ¡£ï¼šä¸€ä¸ªé¡µé¢å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼ŒDOMä¸­ä½¿ç”¨documentè¡¨ç¤º</strong></li><li><strong>èŠ‚ç‚¹ï¼šç½‘é¡µä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œåœ¨æ–‡æ¡£æ ‘ä¸­éƒ½æ˜¯èŠ‚ç‚¹ï¼ˆæ ‡ç­¾ã€å±æ€§ã€æ–‡æœ¬ã€æ³¨é‡Šç­‰ï¼‰ï¼Œä½¿ç”¨nodeè¡¨ç¤º</strong></li><li><strong>æ ‡ç­¾èŠ‚ç‚¹ï¼šç½‘é¡µä¸­çš„æ‰€æœ‰æ ‡ç­¾ï¼Œé€šå¸¸ç§°ä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œåˆç®€ç§°ä¸ºâ€œå…ƒç´ â€ï¼Œä½¿ç”¨elementè¡¨ç¤º</strong></li></ul><p><strong>DOMæŠŠä»¥ä¸Šå†…å®¹éƒ½çœ‹æˆå¯¹è±¡ï¼›</strong></p><h2 id="1-3-è·å–å…ƒç´ "><a href="#1-3-è·å–å…ƒç´ " class="headerlink" title="1.3. è·å–å…ƒç´ "></a>1.3. è·å–å…ƒç´ </h2><p><strong>ä¸ºä»€ä¹ˆè¦è·å–é¡µé¢å…ƒç´ ï¼Ÿ</strong></p><p><strong>ä¾‹å¦‚ï¼šæˆ‘ä»¬æƒ³è¦æ“ä½œé¡µé¢ä¸Šçš„æŸéƒ¨åˆ†(æ˜¾ç¤º&#x2F;éšè—ï¼ŒåŠ¨ç”»)ï¼Œéœ€è¦å…ˆè·å–åˆ°è¯¥éƒ¨åˆ†å¯¹åº”çš„å…ƒç´ ï¼Œå†å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</strong></p><h3 id="1-3-1-æ ¹æ®IDè·å–"><a href="#1-3-1-æ ¹æ®IDè·å–" class="headerlink" title="1.3.1. æ ¹æ®IDè·å–"></a>1.3.1. æ ¹æ®IDè·å–</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šdocument.getElementById(id)</span><br><span class="line">ä½œç”¨ï¼šæ ¹æ®IDè·å–å…ƒç´ å¯¹è±¡</span><br><span class="line">å‚æ•°ï¼šidå€¼ï¼ŒåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²</span><br><span class="line">è¿”å›å€¼ï¼šå…ƒç´ å¯¹è±¡ æˆ– null</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div id=&quot;time&quot;&gt;2019-9-9&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // å› ä¸ºæˆ‘ä»¬æ–‡æ¡£é¡µé¢ä»ä¸Šå¾€ä¸‹åŠ è½½ï¼Œæ‰€ä»¥å…ˆå¾—æœ‰æ ‡ç­¾ æ‰€ä»¥æˆ‘ä»¬scriptå†™åˆ°æ ‡ç­¾çš„ä¸‹é¢</span><br><span class="line"> Â  Â  Â  Â var timer = document.getElementById(&#x27;time&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(timer);</span><br><span class="line"> Â  Â  Â  Â console.log(typeof timer);</span><br><span class="line"> Â  Â  Â  Â // console.dir æ‰“å°æˆ‘ä»¬è¿”å›çš„å…ƒç´ å¯¹è±¡ æ›´å¥½çš„æŸ¥çœ‹é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="line"> Â  Â  Â  Â console.dir(timer);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/06/13/srPCptxVckEZMWQ.png"></p><h3 id="1-3-2-æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ "><a href="#1-3-2-æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ " class="headerlink" title="1.3.2. æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ "></a>1.3.2. æ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ </h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šdocument.getElementsByTagName(&#x27;æ ‡ç­¾å&#x27;) æˆ–è€… element.getElementsByTagName(&#x27;æ ‡ç­¾å&#x27;) </span><br><span class="line">ä½œç”¨ï¼šæ ¹æ®æ ‡ç­¾åè·å–å…ƒç´ å¯¹è±¡</span><br><span class="line">å‚æ•°ï¼šæ ‡ç­¾å</span><br><span class="line">è¿”å›å€¼ï¼šå…ƒç´ å¯¹è±¡é›†åˆï¼ˆä¼ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯å…ƒç´ å¯¹è±¡ï¼‰</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;ul&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…11&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…22&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…33&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…44&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;çŸ¥å¦çŸ¥å¦ï¼Œåº”æ˜¯ç­‰ä½ å¥½ä¹…55&lt;/li&gt;</span><br><span class="line"> Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;ul id=&quot;nav&quot;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;li&gt;ç”Ÿåƒ»å­—&lt;/li&gt;</span><br><span class="line"> Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1.è¿”å›çš„æ˜¯ è·å–è¿‡æ¥å…ƒç´ å¯¹è±¡çš„é›†åˆ ä»¥ä¼ªæ•°ç»„çš„å½¢å¼å­˜å‚¨çš„</span><br><span class="line"> Â  Â  Â  Â var lis = document.getElementsByTagName(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(lis);</span><br><span class="line"> Â  Â  Â  Â console.log(lis[0]);</span><br><span class="line"> Â  Â  Â  Â // 2. æˆ‘ä»¬æƒ³è¦ä¾æ¬¡æ‰“å°é‡Œé¢çš„å…ƒç´ å¯¹è±¡æˆ‘ä»¬å¯ä»¥é‡‡å–éå†çš„æ–¹å¼</span><br><span class="line"> Â  Â  Â  Â for (var i = 0; i &lt; lis.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(lis[i]);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â // 3. element.getElementsByTagName()  å¯ä»¥å¾—åˆ°è¿™ä¸ªå…ƒç´ é‡Œé¢çš„æŸäº›æ ‡ç­¾</span><br><span class="line"> Â  Â  Â  Â var nav = document.getElementById(&#x27;nav&#x27;); // è¿™ä¸ªè·å¾—nav å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var navLis = nav.getElementsByTagName(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(navLis);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong><br><strong>1.å› ä¸ºå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„é›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¦æ“ä½œé‡Œé¢çš„å…ƒç´ å°±éœ€è¦éå†</strong><br><strong>2.å¾—åˆ°å…ƒç´ å¯¹è±¡æ˜¯åŠ¨æ€çš„</strong></p><p><strong>æ³¨æ„ï¼šgetElementsByTagName()è·å–åˆ°æ˜¯åŠ¨æ€é›†åˆï¼Œå³ï¼šå½“é¡µé¢å¢åŠ äº†æ ‡ç­¾ï¼Œè¿™ä¸ªé›†åˆä¸­ä¹Ÿå°±å¢åŠ äº†å…ƒç´ ã€‚</strong></p><h3 id="1-3-3-H5æ–°å¢è·å–å…ƒç´ æ–¹å¼"><a href="#1-3-3-H5æ–°å¢è·å–å…ƒç´ æ–¹å¼" class="headerlink" title="1.3.3. H5æ–°å¢è·å–å…ƒç´ æ–¹å¼"></a>1.3.3. H5æ–°å¢è·å–å…ƒç´ æ–¹å¼</h3><p><strong>1.document.getElementsByclassName(â€˜ç±»åâ€™);&#x2F;&#x2F;æ ¹æ®ç±»åè¿”å›å…ƒç´ å¯¹è±¡é›†åˆ</strong><br><strong>2.document.uerySelector(â€˜é€‰æ‹©å™¨)ï¼›&#x2F;&#x2F;æ ¹æ®æŒ‡å®šé€‰æ‹©å™¨è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡</strong><br><strong>3.document.querySelectorAll(â€˜é€‰æ‹©å™¨â€™); &#x2F;&#x2F;æ ¹æ®æŒ‡å®šé€‰æ‹©å™¨è¿”å›</strong><br><strong>æ³¨æ„ï¼š</strong><br><strong>querySelectorå’ŒquerySelectorAllé‡Œé¢çš„é€‰æ‹©å™¨éœ€è¦åŠ ç¬¦å·ï¼Œæ¯”å¦‚ï¼šdocument.querySelector(â€˜#navâ€™);</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;box&quot;&gt;ç›’å­1&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;box&quot;&gt;ç›’å­2&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;div id=&quot;nav&quot;&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;ul&gt;</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;li&gt;é¦–é¡µ&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â  Â  Â &lt;li&gt;äº§å“&lt;/li&gt;</span><br><span class="line"> Â  Â  Â  Â &lt;/ul&gt;</span><br><span class="line"> Â  Â &lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. getElementsByClassName æ ¹æ®ç±»åè·å¾—æŸäº›å…ƒç´ é›†åˆ</span><br><span class="line"> Â  Â  Â  Â var boxs = document.getElementsByClassName(&#x27;box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(boxs);</span><br><span class="line"> Â  Â  Â  Â // 2. querySelector è¿”å›æŒ‡å®šé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡  åˆ‡è®° é‡Œé¢çš„é€‰æ‹©å™¨éœ€è¦åŠ ç¬¦å· .box  #nav</span><br><span class="line"> Â  Â  Â  Â var firstBox = document.querySelector(&#x27;.box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(firstBox);</span><br><span class="line"> Â  Â  Â  Â var nav = document.querySelector(&#x27;#nav&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(nav);</span><br><span class="line"> Â  Â  Â  Â var li = document.querySelector(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(li);</span><br><span class="line"> Â  Â  Â  Â // 3. querySelectorAll()è¿”å›æŒ‡å®šé€‰æ‹©å™¨çš„æ‰€æœ‰å…ƒç´ å¯¹è±¡é›†åˆ</span><br><span class="line"> Â  Â  Â  Â var allBox = document.querySelectorAll(&#x27;.box&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(allBox);</span><br><span class="line"> Â  Â  Â  Â var lis = document.querySelectorAll(&#x27;li&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(lis);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-3-4-è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰"><a href="#1-3-4-è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰" class="headerlink" title="1.3.4 è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰"></a>1.3.4 è·å–ç‰¹æ®Šå…ƒç´ ï¼ˆbodyï¼Œhtmlï¼‰</h3><p><strong>è·å–bodyå…ƒç´  1.doucumnet.body&#x2F;&#x2F;è¿”å›bodyå…ƒç´ å¯¹è±¡</strong><br><strong>è·å–htmlå…ƒç´  1.document.documentElement&#x2F;&#x2F;è¿”å›htmlå…ƒç´ å¯¹è±¡</strong></p><h2 id="1-4-äº‹ä»¶åŸºç¡€"><a href="#1-4-äº‹ä»¶åŸºç¡€" class="headerlink" title="1.4. äº‹ä»¶åŸºç¡€"></a>1.4. äº‹ä»¶åŸºç¡€</h2><h3 id="1-4-1-äº‹ä»¶æ¦‚è¿°"><a href="#1-4-1-äº‹ä»¶æ¦‚è¿°" class="headerlink" title="1.4.1. äº‹ä»¶æ¦‚è¿°"></a>1.4.1. äº‹ä»¶æ¦‚è¿°</h3><p><strong>JavaScript ä½¿æˆ‘ä»¬æœ‰èƒ½åŠ›åˆ›å»ºåŠ¨æ€é¡µé¢ï¼Œè€Œäº‹ä»¶æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚</strong></p><p>**ç®€å•ç†è§£ï¼š **<strong>è§¦å‘ â€” å“åº”æœºåˆ¶</strong>ã€‚</p><p><strong>ç½‘é¡µä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥äº§ç”ŸæŸäº›å¯ä»¥è§¦å‘ JavaScript çš„äº‹ä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·ç‚¹å‡»æŸæŒ‰é’®æ—¶äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åå»æ‰§è¡ŒæŸäº›æ“ä½œã€‚</strong></p><h3 id="1-4-2-äº‹ä»¶ä¸‰è¦ç´ "><a href="#1-4-2-äº‹ä»¶ä¸‰è¦ç´ " class="headerlink" title="1.4.2. äº‹ä»¶ä¸‰è¦ç´ "></a>1.4.2. äº‹ä»¶ä¸‰è¦ç´ </h3><ul><li><strong>äº‹ä»¶æºï¼ˆè°ï¼‰ï¼šè§¦å‘äº‹ä»¶çš„å…ƒç´ </strong></li><li><strong>äº‹ä»¶ç±»å‹ï¼ˆä»€ä¹ˆäº‹ä»¶ï¼‰ï¼š ä¾‹å¦‚ click ç‚¹å‡»äº‹ä»¶</strong></li><li><strong>äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆåšå•¥ï¼‰ï¼šäº‹ä»¶è§¦å‘åè¦æ‰§è¡Œçš„ä»£ç (å‡½æ•°å½¢å¼)ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°</strong></li></ul><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;btn&quot;&gt;å”ä¼¯è™&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå¼¹å‡ºå¯¹è¯æ¡†</span><br><span class="line"> Â  Â  Â  Â // 1. äº‹ä»¶æ˜¯æœ‰ä¸‰éƒ¨åˆ†ç»„æˆ  äº‹ä»¶æº  äº‹ä»¶ç±»å‹  äº‹ä»¶å¤„ç†ç¨‹åº Â  æˆ‘ä»¬ä¹Ÿç§°ä¸ºäº‹ä»¶ä¸‰è¦ç´ </span><br><span class="line"> Â  Â  Â  Â //(1) äº‹ä»¶æº äº‹ä»¶è¢«è§¦å‘çš„å¯¹è±¡ Â  è°  æŒ‰é’®</span><br><span class="line"> Â  Â  Â  Â var btn = document.getElementById(&#x27;btn&#x27;);</span><br><span class="line"> Â  Â  Â  Â //(2) äº‹ä»¶ç±»å‹  å¦‚ä½•è§¦å‘ ä»€ä¹ˆäº‹ä»¶ æ¯”å¦‚é¼ æ ‡ç‚¹å‡»(onclick) è¿˜æ˜¯é¼ æ ‡ç»è¿‡ è¿˜æ˜¯é”®ç›˜æŒ‰ä¸‹</span><br><span class="line"> Â  Â  Â  Â //(3) äº‹ä»¶å¤„ç†ç¨‹åº  é€šè¿‡ä¸€ä¸ªå‡½æ•°èµ‹å€¼çš„æ–¹å¼ å®Œæˆ</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â alert(&#x27;ç‚¹ç§‹é¦™&#x27;);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-4-3-æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤"><a href="#1-4-3-æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤" class="headerlink" title="1.4.3. æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤"></a>1.4.3. æ‰§è¡Œäº‹ä»¶çš„æ­¥éª¤</h3><p><strong>1.è·å–äº‹ä»¶æº</strong><br><strong>2.æ³¨å†Œäº‹ä»¶ï¼ˆç»‘å®šäº‹ä»¶ï¼‰</strong><br><strong>3.æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆé‡‡å–å‡½æ•°èµ‹å€¼å½¢å¼ï¼‰</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;123&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // æ‰§è¡Œäº‹ä»¶æ­¥éª¤</span><br><span class="line"> Â  Â  Â  Â // ç‚¹å‡»div æ§åˆ¶å°è¾“å‡º æˆ‘è¢«é€‰ä¸­äº†</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–äº‹ä»¶æº</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2.ç»‘å®šäº‹ä»¶ æ³¨å†Œäº‹ä»¶</span><br><span class="line"> Â  Â  Â  Â // div.onclick </span><br><span class="line"> Â  Â  Â  Â // 3.æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº </span><br><span class="line"> Â  Â  Â  Â div.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(&#x27;æˆ‘è¢«é€‰ä¸­äº†&#x27;);</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-4-4-å¸¸è§çš„é¼ æ ‡äº‹ä»¶"><a href="#1-4-4-å¸¸è§çš„é¼ æ ‡äº‹ä»¶" class="headerlink" title="1.4.4. å¸¸è§çš„é¼ æ ‡äº‹ä»¶"></a>1.4.4. å¸¸è§çš„é¼ æ ‡äº‹ä»¶</h3><p><img src="https://s2.loli.net/2024/06/13/DPX2E1hGYSAmIjo.png"></p><h3 id="1-4-5-åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰"><a href="#1-4-5-åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰" class="headerlink" title="1.4.5. åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰"></a>1.4.5. åˆ†æäº‹ä»¶ä¸‰è¦ç´ ï¼ˆè§å®æ“æ¡ˆä¾‹ï¼‰</h3><ul><li><strong>ä¸‹æ‹‰èœå•ä¸‰è¦ç´ </strong></li><li><strong>å…³é—­å¹¿å‘Šä¸‰è¦ç´ </strong></li></ul><h2 id="1-5-æ“ä½œå…ƒç´ "><a href="#1-5-æ“ä½œå…ƒç´ " class="headerlink" title="1.5. æ“ä½œå…ƒç´ "></a>1.5. æ“ä½œå…ƒç´ </h2><p>**    JavaScriptçš„ DOM æ“ä½œå¯ä»¥æ”¹å˜ç½‘é¡µå†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ DOM æ“ä½œå…ƒç´ æ¥æ”¹å˜å…ƒç´ é‡Œé¢çš„å†…å®¹ã€å±æ€§ç­‰ã€‚ï¼ˆæ³¨æ„ï¼šè¿™äº›æ“ä½œéƒ½æ˜¯é€šè¿‡å…ƒç´ å¯¹è±¡çš„å±æ€§å®ç°çš„ï¼‰**</p><h3 id="1-5-1-æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰"><a href="#1-5-1-æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰" class="headerlink" title="1.5.1. æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰"></a>1.5.1. æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆè·å–æˆ–è®¾ç½®ï¼‰</h3><p><strong>element.innerText</strong><br><strong>ä»èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å†…å®¹ï¼Œä½†å®ƒå»é™¤htmlæ ‡ç­¾ï¼ŒåŒæ—¶ç©ºæ ¼å’Œæ¢è¡Œä¹Ÿä¼šå»æ‰</strong><br><strong>element.innerHTML</strong><br><strong>èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å…¨éƒ¨å†…å®¹ï¼ŒåŒ…æ‹¬htmlæ ‡ç­¾ï¼ŒåŒæ—¶ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ</strong></p><p><strong>innerTextæ”¹å˜å…ƒç´ å†…å®¹</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button&gt;æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;div&gt;æŸä¸ªæ—¶é—´&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;p&gt;1123&lt;/p&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // å½“æˆ‘ä»¬ç‚¹å‡»äº†æŒ‰é’®ï¼Œ  divé‡Œé¢çš„æ–‡å­—ä¼šå‘ç”Ÿå˜åŒ–</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´  </span><br><span class="line"> Â  Â  Â  Â var btn = document.querySelector(&#x27;button&#x27;);</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2.æ³¨å†Œäº‹ä»¶</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // div.innerText = &#x27;2019-6-6&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â div.innerHTML = getDate();</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â function getDate() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var date = new Date();</span><br><span class="line"> Â  Â  Â  Â  Â  Â // æˆ‘ä»¬å†™ä¸€ä¸ª 2019å¹´ 5æœˆ 1æ—¥ æ˜ŸæœŸä¸‰</span><br><span class="line"> Â  Â  Â  Â  Â  Â var year = date.getFullYear();</span><br><span class="line"> Â  Â  Â  Â  Â  Â var month = date.getMonth() + 1;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var dates = date.getDate();</span><br><span class="line"> Â  Â  Â  Â  Â  Â var arr = [&#x27;æ˜ŸæœŸæ—¥&#x27;, &#x27;æ˜ŸæœŸä¸€&#x27;, &#x27;æ˜ŸæœŸäºŒ&#x27;, &#x27;æ˜ŸæœŸä¸‰&#x27;, &#x27;æ˜ŸæœŸå››&#x27;, &#x27;æ˜ŸæœŸäº”&#x27;, &#x27;æ˜ŸæœŸå…­&#x27;];</span><br><span class="line"> Â  Â  Â  Â  Â  Â var day = date.getDay();</span><br><span class="line"> Â  Â  Â  Â  Â  Â return &#x27;ä»Šå¤©æ˜¯ï¼š&#x27; + year + &#x27;å¹´&#x27; + month + &#x27;æœˆ&#x27; + dates + &#x27;æ—¥ &#x27; + arr[day];</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><strong>innerTextå’ŒinnerHTMLçš„åŒºåˆ«</strong></p><ul><li><strong>è·å–å†…å®¹æ—¶çš„åŒºåˆ«ï¼š</strong></li></ul><p>**    innerTextä¼šå»é™¤ç©ºæ ¼å’Œæ¢è¡Œï¼Œè€ŒinnerHTMLä¼šä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ    **</p><ul><li><strong>è®¾ç½®å†…å®¹æ—¶çš„åŒºåˆ«ï¼š</strong></li></ul><p>**    innerTextä¸ä¼šè¯†åˆ«htmlï¼Œè€ŒinnerHTMLä¼šè¯†åˆ«**</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;p&gt;</span><br><span class="line"> Â  Â  Â  Â æˆ‘æ˜¯æ–‡å­—</span><br><span class="line"> Â  Â  Â  Â &lt;span&gt;123&lt;/span&gt;</span><br><span class="line"> Â  Â &lt;/p&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // innerText å’Œ innerHTMLçš„åŒºåˆ« </span><br><span class="line"> Â  Â  Â  Â // 1. innerText ä¸è¯†åˆ«htmlæ ‡ç­¾ éæ ‡å‡†  å»é™¤ç©ºæ ¼å’Œæ¢è¡Œ</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // div.innerText = &#x27;&lt;strong&gt;ä»Šå¤©æ˜¯ï¼š&lt;/strong&gt; 2019&#x27;;</span><br><span class="line"> Â  Â  Â  Â // 2. innerHTML è¯†åˆ«htmlæ ‡ç­¾ W3Cæ ‡å‡† ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œçš„</span><br><span class="line"> Â  Â  Â  Â div.innerHTML = &#x27;&lt;strong&gt;ä»Šå¤©æ˜¯ï¼š&lt;/strong&gt; 2019&#x27;;</span><br><span class="line"> Â  Â  Â  Â // è¿™ä¸¤ä¸ªå±æ€§æ˜¯å¯è¯»å†™çš„  å¯ä»¥è·å–å…ƒç´ é‡Œé¢çš„å†…å®¹</span><br><span class="line"> Â  Â  Â  Â var p = document.querySelector(&#x27;p&#x27;);</span><br><span class="line"> Â  Â  Â  Â console.log(p.innerText);</span><br><span class="line"> Â  Â  Â  Â console.log(p.innerHTML);</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-2-å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ"><a href="#1-5-2-å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ" class="headerlink" title="1.5.2. å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ"></a>1.5.2. å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ</h3><p><strong>1.innerText,innerHTML æ”¹å˜å…ƒç´ å†…å®¹</strong><br><strong>2.srcã€href</strong><br><strong>3.idã€altã€title</strong></p><p><strong>è·å–å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å</strong></p></blockquote><p><strong>è®¾ç½®å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å &#x3D; å€¼</strong></p></blockquote><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;ldh&quot;&gt;åˆ˜å¾·å&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;button id=&quot;zxy&quot;&gt;å¼ å­¦å‹&lt;/button&gt; &lt;br&gt;</span><br><span class="line"> Â  Â &lt;img src=&quot;images/ldh.jpg&quot; alt=&quot;&quot; title=&quot;åˆ˜å¾·å&quot;&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // ä¿®æ”¹å…ƒç´ å±æ€§  src</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var ldh = document.getElementById(&#x27;ldh&#x27;);</span><br><span class="line"> Â  Â  Â  Â var zxy = document.getElementById(&#x27;zxy&#x27;);</span><br><span class="line"> Â  Â  Â  Â var img = document.querySelector(&#x27;img&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶  å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â zxy.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.src = &#x27;images/zxy.jpg&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.title = &#x27;å¼ å­¦å‹æ€å¯†è¾¾&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â ldh.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.src = &#x27;images/ldh.jpg&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â img.title = &#x27;åˆ˜å¾·å&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-3-æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™"><a href="#1-5-3-æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™" class="headerlink" title="1.5.3. æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™"></a>1.5.3. æ¡ˆä¾‹ï¼šåˆ†æ—¶é—®å€™</h3><p><img src="https://s2.loli.net/2024/06/13/ki3jF4NTnWQKRpL.png"></p><h3 id="1-5-4-è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ"><a href="#1-5-4-è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ" class="headerlink" title="1.5.4. è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ"></a>1.5.4. è¡¨å•å…ƒç´ çš„å±æ€§æ“ä½œ</h3><p><strong>åˆ©ç”¨DOMå¯ä»¥æ“ä½œå¦‚ä¸‹è¡¨å•å…ƒç´ çš„å±æ€§ï¼š</strong><br><strong>typeã€valueã€checkedã€selectedã€disabled</strong></p><p><strong>è·å–å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å</strong></p></blockquote><p><strong>è®¾ç½®å±æ€§çš„å€¼</strong></p><blockquote><p><strong>å…ƒç´ å¯¹è±¡.å±æ€§å &#x3D; å€¼</strong></p><p><strong>è¡¨å•å…ƒç´ ä¸­æœ‰ä¸€äº›å±æ€§å¦‚ï¼šdisabledã€checkedã€selectedï¼Œå…ƒç´ å¯¹è±¡çš„è¿™äº›å±æ€§çš„å€¼æ˜¯å¸ƒå°”å‹ã€‚</strong></p></blockquote><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;button&gt;æŒ‰é’®&lt;/button&gt;</span><br><span class="line"> Â  Â &lt;input type=&quot;text&quot; value=&quot;è¾“å…¥å†…å®¹&quot;&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var btn = document.querySelector(&#x27;button&#x27;);</span><br><span class="line"> Â  Â  Â  Â var input = document.querySelector(&#x27;input&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶ å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â btn.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // è¡¨å•é‡Œé¢çš„å€¼ æ–‡å­—å†…å®¹æ˜¯é€šè¿‡ value æ¥ä¿®æ”¹çš„</span><br><span class="line"> Â  Â  Â  Â  Â  Â input.value = &#x27;è¢«ç‚¹å‡»äº†&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // å¦‚æœæƒ³è¦æŸä¸ªè¡¨å•è¢«ç¦ç”¨ ä¸èƒ½å†ç‚¹å‡» disabled  æˆ‘ä»¬æƒ³è¦è¿™ä¸ªæŒ‰é’® buttonç¦ç”¨</span><br><span class="line"> Â  Â  Â  Â  Â  Â // btn.disabled = true;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.disabled = true;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this æŒ‡å‘çš„æ˜¯äº‹ä»¶å‡½æ•°çš„è°ƒç”¨è€… btn</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="1-5-5-æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç "><a href="#1-5-5-æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç " class="headerlink" title="1.5.5. æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç "></a>1.5.5. æ¡ˆä¾‹ï¼šä»¿äº¬ä¸œæ˜¾ç¤ºå¯†ç </h3><p><img src="https://s2.loli.net/2024/06/13/G9BXQyrReOTxI65.png"></p><h3 id="1-5-6-æ ·å¼å±æ€§æ“ä½œ"><a href="#1-5-6-æ ·å¼å±æ€§æ“ä½œ" class="headerlink" title="1.5.6. æ ·å¼å±æ€§æ“ä½œ"></a>1.5.6. æ ·å¼å±æ€§æ“ä½œ</h3><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡ JS ä¿®æ”¹å…ƒç´ çš„å¤§å°ã€é¢œè‰²ã€ä½ç½®ç­‰æ ·å¼ã€‚</strong></p><p><strong>å¸¸ç”¨æ–¹å¼</strong></p><p><strong>1.element.style  è¡Œå†…æ ·å¼æ“ä½œ</strong><br><strong>2.element.className  ç±»åæ ·å¼æ“ä½œ</strong></p><h4 id="æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§"><a href="#æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§" class="headerlink" title="æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§"></a>æ–¹å¼1ï¼šé€šè¿‡æ“ä½œstyleå±æ€§</h4><blockquote><p><strong>å…ƒç´ å¯¹è±¡çš„styleå±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼</strong></p><p><strong>å…ƒç´ å¯¹è±¡.style.æ ·å¼å±æ€§ &#x3D; å€¼;</strong></p></blockquote><p><strong>æ³¨æ„ï¼š</strong><br><strong>1.JS é‡Œé¢çš„æ ·å¼é‡‡å–å°é©¼å³°å‘½åæ³•æ¯”å¦‚fontsizeã€backgroundColor</strong><br><strong>2.JSä¿®æ”¹styleæ ·å¼æ“ä½œï¼Œäº§ç”Ÿçš„æ˜¯è¡Œå†…æ ·å¼ï¼Œcssæƒé‡æ¯”è¾ƒé«˜</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. è·å–å…ƒç´ </span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // 2. æ³¨å†Œäº‹ä»¶ å¤„ç†ç¨‹åº</span><br><span class="line"> Â  Â  Â  Â div.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // div.styleé‡Œé¢çš„å±æ€§ é‡‡å–é©¼å³°å‘½åæ³• </span><br><span class="line"> Â  Â  Â  Â  Â  Â this.style.backgroundColor = &#x27;purple&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.style.width = &#x27;250px&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç "><a href="#æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç " class="headerlink" title="æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç "></a>æ¡ˆä¾‹ï¼šæ·˜å®ç‚¹å‡»å…³é—­äºŒç»´ç </h4><p><img src="https://s2.loli.net/2024/06/13/M17o26KwY4Tx9yR.png"></p><h4 id="æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯"><a href="#æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯" class="headerlink" title="æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯"></a>æ¡ˆä¾‹ï¼šå¾ªç¯ç²¾çµå›¾èƒŒæ™¯</h4><p><img src="https://s2.loli.net/2024/06/13/RHjG1g8Dzhw4kuB.png"></p><h4 id="æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹"><a href="#æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹" class="headerlink" title="æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹"></a>æ¡ˆä¾‹ï¼šæ˜¾ç¤ºéšè—æ–‡æœ¬æ¡†å†…å®¹</h4><p><img src="https://s2.loli.net/2024/06/13/yQxe7VT3YXpkrU5.png"></p><h4 id="æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§"><a href="#æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§" class="headerlink" title="æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§"></a>æ–¹å¼2ï¼šé€šè¿‡æ“ä½œclassNameå±æ€§</h4><blockquote><p><strong>å…ƒç´ å¯¹è±¡.className &#x3D; å€¼;</strong></p><p><strong>å› ä¸ºclassæ˜¯å…³é”®å­—ï¼Œæ‰€æœ‰ä½¿ç”¨classNameã€‚</strong></p></blockquote><p><strong>æ³¨æ„ï¼š</strong><br><strong>1,å¦‚æœæ ·å¼ä¿®æ”¹è¾ƒå¤šï¼Œå¯ä»¥é‡‡å–æ“ä½œç±»åæ–¹å¼æ›´æ”¹å…ƒç´ æ ·å¼ã€‚</strong><br><strong>2.classå› ä¸ºæ˜¯ä¸ªä¿ç•™å­—ï¼Œå› æ­¤ä½¿ç”¨classNameæ¥æ“ä½œå…ƒç´ ç±»åå±æ€§</strong><br><strong>3.className ä¼šç›´æ¥æ›´æ”¹å…ƒç´ çš„ç±»åï¼Œä¼šè¦†ç›–åŸå…ˆçš„ç±»åã€‚</strong></p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"> Â  Â &lt;div class=&quot;first&quot;&gt;æ–‡æœ¬&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â // 1. ä½¿ç”¨ element.style è·å¾—ä¿®æ”¹å…ƒç´ æ ·å¼  å¦‚æœæ ·å¼æ¯”è¾ƒå°‘ æˆ–è€… åŠŸèƒ½ç®€å•çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="line"> Â  Â  Â  Â var test = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â test.onclick = function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.backgroundColor = &#x27;purple&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.color = &#x27;#fff&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.fontSize = &#x27;25px&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.style.marginTop = &#x27;100px&#x27;;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â  Â  Â // 2. æˆ‘ä»¬å¯ä»¥é€šè¿‡ ä¿®æ”¹å…ƒç´ çš„classNameæ›´æ”¹å…ƒç´ çš„æ ·å¼ é€‚åˆäºæ ·å¼è¾ƒå¤šæˆ–è€…åŠŸèƒ½å¤æ‚çš„æƒ…å†µ</span><br><span class="line"> Â  Â  Â  Â  Â  Â // 3. å¦‚æœæƒ³è¦ä¿ç•™åŸå…ˆçš„ç±»åï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš å¤šç±»åé€‰æ‹©å™¨</span><br><span class="line"> Â  Â  Â  Â  Â  Â // this.className = &#x27;change&#x27;;</span><br><span class="line"> Â  Â  Â  Â  Â  Â this.className = &#x27;first change&#x27;;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯"><a href="#æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯" class="headerlink" title="æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯"></a>æ¡ˆä¾‹ï¼šå¯†ç æ¡†æ ¼å¼æç¤ºé”™è¯¯ä¿¡æ¯</h4><p><img src="https://s2.loli.net/2024/06/13/6OkmXxy9sSY3bv7.png"></p><p><strong>æ€»ç»“ï¼š</strong></p><p><img src="https://s2.loli.net/2024/06/13/5KReAgoXG1VIpdZ.png"></p><h2 id="1-6-H5è‡ªå®šä¹‰å±æ€§"><a href="#1-6-H5è‡ªå®šä¹‰å±æ€§" class="headerlink" title="1.6. H5è‡ªå®šä¹‰å±æ€§"></a>1.6. H5è‡ªå®šä¹‰å±æ€§</h2><p><strong>è‡ªå®šä¹‰å±æ€§ç›®çš„ï¼šæ˜¯ä¸ºäº†ä¿å­˜å¹¶ä½¿ç”¨æ•°æ®ã€‚æœ‰äº›æ•°æ®å¯ä»¥ä¿å­˜åˆ°é¡µé¢ä¸­è€Œä¸ç”¨ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</strong></p><p><strong>è‡ªå®šä¹‰å±æ€§è·å–æ˜¯é€šè¿‡getAttribute(â€˜å±æ€§â€™) è·å–ã€‚</strong></p><p><strong>ä½†æ˜¯æœ‰äº›è‡ªå®šä¹‰å±æ€§å¾ˆå®¹æ˜“å¼•èµ·æ­§ä¹‰ï¼Œä¸å®¹æ˜“åˆ¤æ–­æ˜¯å…ƒç´ çš„å†…ç½®å±æ€§è¿˜æ˜¯è‡ªå®šä¹‰å±æ€§ã€‚</strong></p><p><strong>H5ç»™æˆ‘ä»¬æ–°å¢äº†è‡ªå®šä¹‰å±æ€§ï¼š</strong></p><p><strong>1.è®¾ç½®H5è‡ªå®šä¹‰å±æ€§</strong><br><strong>H5è§„å®šè‡ªå®šä¹‰å±æ€§data-å¼€å¤´åšä¸ºå±æ€§åå¹¶ç›®èµ‹å€¼ã€‚</strong><br><strong>æ¯”å¦‚</strong> <code>&lt;div data-index=&quot;1&quot;&gt;</code><strong><code>&lt;/div&gt;</code></strong><br><strong>æˆ–è€…ä½¿ç”¨JSè®¾ç½®</strong><br><strong>element.setAttribute(â€˜data-indexâ€™,2)</strong></p><p><strong>2.è·å–H5è‡ªå®šä¹‰å±æ€§</strong><br><strong>1.å…¼å®¹æ€§è·å–element.getAttribute(â€˜data-indexâ€™):</strong><br><strong>2.H5æ–°å¢element.dataset.indexæˆ–è€…element.dataset[â€˜indexâ€™]   ie11æ‰å¼€å§‹æ”¯æŒ</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  Â &lt;div getTime=&quot;20&quot; data-index=&quot;2&quot; data-list-name=&quot;andy&quot;&gt;&lt;/div&gt;</span><br><span class="line"> Â  Â &lt;script&gt;</span><br><span class="line"> Â  Â  Â  Â var div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line"> Â  Â  Â  Â // console.log(div.getTime);</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;getTime&#x27;));</span><br><span class="line"> Â  Â  Â  Â div.setAttribute(&#x27;data-time&#x27;, 20);</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;data-index&#x27;));</span><br><span class="line"> Â  Â  Â  Â console.log(div.getAttribute(&#x27;data-list-name&#x27;));</span><br><span class="line"> Â  Â  Â  Â // h5æ–°å¢çš„è·å–è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³• å®ƒåªèƒ½è·å–data-å¼€å¤´çš„</span><br><span class="line"> Â  Â  Â  Â // dataset æ˜¯ä¸€ä¸ªé›†åˆé‡Œé¢å­˜æ”¾äº†æ‰€æœ‰ä»¥dataå¼€å¤´çš„è‡ªå®šä¹‰å±æ€§</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset.index);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset[&#x27;index&#x27;]);</span><br><span class="line"> Â  Â  Â  Â // å¦‚æœè‡ªå®šä¹‰å±æ€§é‡Œé¢æœ‰å¤šä¸ª-é“¾æ¥çš„å•è¯ï¼Œæˆ‘ä»¬è·å–çš„æ—¶å€™é‡‡å– é©¼å³°å‘½åæ³•</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset.listName);</span><br><span class="line"> Â  Â  Â  Â console.log(div.dataset[&#x27;listName&#x27;]);//data-list-name</span><br><span class="line"> Â  Â &lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="1-7-èŠ‚ç‚¹æ“ä½œ"><a href="#1-7-èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="1.7. èŠ‚ç‚¹æ“ä½œ"></a>1.7. èŠ‚ç‚¹æ“ä½œ</h2><p><strong>ä¸€èˆ¬åœ°ï¼ŒèŠ‚ç‚¹è‡³å°‘æ‹¥æœ‰nodeTypeï¼ˆèŠ‚ç‚¹ç±»å‹ï¼‰ã€nodeNameï¼ˆèŠ‚ç‚¹åç§°ï¼‰å’ŒnodeValueï¼ˆèŠ‚ç‚¹å€¼ï¼‰è¿™ä¸‰ä¸ªåŸºæœ¬å±æ€§ã€‚</strong></p><ul><li><strong>å…ƒç´ èŠ‚ç‚¹nodeTypeä¸º1</strong></li><li><strong>å±æ€§èŠ‚ç‚¹nodeTypeä¸º2</strong></li><li><strong>æ–‡æœ¬èŠ‚ç‚¹nodeTypeä¸º3(æ–‡æœ¬èŠ‚ç‚¹åŒ…å«æ–‡å­—ã€ç©ºæ ¼ã€æ¢è¡Œç­‰)</strong></li></ul><p><strong>æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼ŒèŠ‚ç‚¹æ“ä½œä¸»è¦æ“ä½œçš„æ˜¯å…ƒç´ èŠ‚ç‚¹</strong></p><h3 id="1-7-1-èŠ‚ç‚¹å±‚çº§"><a href="#1-7-1-èŠ‚ç‚¹å±‚çº§" class="headerlink" title="1.7.1. èŠ‚ç‚¹å±‚çº§"></a>1.7.1. èŠ‚ç‚¹å±‚çº§</h3><p>**    åˆ©ç”¨ DOM æ ‘å¯ä»¥æŠŠèŠ‚ç‚¹åˆ’åˆ†ä¸ºä¸åŒçš„å±‚çº§å…³ç³»ï¼Œå¸¸è§çš„æ˜¯**<strong>çˆ¶å­å…„å±‚çº§å…³ç³»</strong>ã€‚</p><p><img src="https://s2.loli.net/2024/06/13/Ogtv9nHuEMZqyhA.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node.parentNode</span><br><span class="line">parentNode.childNodes</span><br><span class="line">parentNode.children</span><br><span class="line">parentNode.firstChild</span><br><span class="line">parentNode.lastChild</span><br><span class="line">parentNode.firstElementChild</span><br><span class="line">parentNode.lastElementChild</span><br><span class="line">parentNode.children[0]</span><br><span class="line">parentNode.children[parentNode.children.length-1]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node.nextSibling</span><br><span class="line">node.previousSibling</span><br><span class="line">node.nextElementSibling</span><br><span class="line">node.previousElementSibling</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  function getNextElementSibling(element) &#123;</span><br><span class="line"> Â  Â  Â var el = element;</span><br><span class="line"> Â  Â  Â while (el = el.nextSibling) &#123;</span><br><span class="line"> Â  Â  Â  Â if (el.nodeType === 1) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â return el;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;//æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œå°±è¿”å›</span><br><span class="line"> Â  Â  Â return null;//ä¸æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œè¿”å›null</span><br><span class="line"> Â   &#125; Â </span><br></pre></td></tr></table></figure><h3 id="1-7-2-èŠ‚ç‚¹æ“ä½œ"><a href="#1-7-2-èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="1.7.2. èŠ‚ç‚¹æ“ä½œ"></a>1.7.2. èŠ‚ç‚¹æ“ä½œ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.createElement(&#x27;tagName&#x27;)</span><br><span class="line">node.appendChild(child)</span><br><span class="line">node.insertBefore(child,æŒ‡å®šå…ƒç´ )</span><br><span class="line">node.removeChild(child)</span><br><span class="line">node.cloneNode()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>GISé›†æˆæ¡ˆä¾‹æ±‡æŠ¥</title>
    <link href="https://youxt-njnu.github.io/2024/05/31/%E8%AF%BE%E7%A8%8B%E6%B1%87%E6%8A%A5-GIS/"/>
    <id>https://youxt-njnu.github.io/2024/05/31/%E8%AF%BE%E7%A8%8B%E6%B1%87%E6%8A%A5-GIS/</id>
    <published>2024-05-31T01:33:26.000Z</published>
    <updated>2024-06-13T01:51:08.928Z</updated>
    
    <content type="html"><![CDATA[<p>åœ°ç†ä¿¡æ¯é›†æˆè¯¾ç¨‹æ±‡æŠ¥ï¼ˆä¸TLQåˆä½œï¼Œæ„Ÿè°¢ï¼ï¼‰</p><p><img src="https://s2.loli.net/2024/05/31/3d8OD9FK1LaHZYx.png" alt="1.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/ogFZUMn2bLBsxHP.png" alt="2.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/2FgX7cUQiRzIfJd.png" alt="3.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/dLPKfYwCpylSWih.png" alt="4.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/8fx5bjDVnpERuOd.png" alt="5.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=341481481&bvid=BV1CR4y1A78S&cid=717991642&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/M4D6bAowy8iZ7Yv.png" alt="7.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/imL2PkUsGajWxbF.png" alt="8.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/ColDRx4TSG5Amh6.png" alt="9.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/8cQWF73tgzKTjCn.png" alt="10.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/5JTNYdMo6naiU3O.png" alt="11.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/rdKkcylwaPmAG8i.png" alt="å¹»ç¯ç‰‡12.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/kgHosDmy3AGECqT.png" alt="å¹»ç¯ç‰‡13.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/GWtdX9sfi8VUIx1.png" alt="å¹»ç¯ç‰‡14.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=1555426770&bvid=BV1h1421y7nD&cid=1566027972&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/1KMZYlqzh2Wy5s4.png" alt="å¹»ç¯ç‰‡15.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/1KJnBzQ7edx4SYV.png" alt="å¹»ç¯ç‰‡16.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/jo2gOWszI619Y7v.png" alt="å¹»ç¯ç‰‡17.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/hnAwgIOZo3TtSs6.png" alt="å¹»ç¯ç‰‡18.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/o76d5WrFwU4b8Gf.png" alt="å¹»ç¯ç‰‡19.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/O9aCgdNFh4GmoyL.png" alt="å¹»ç¯ç‰‡20.PNG"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=1555426770&bvid=BV1h1421y7nD&cid=1566027972&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><img src="https://s2.loli.net/2024/05/31/4SUDLPcJXMGzops.png" alt="å¹»ç¯ç‰‡21.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/eVAFpTj6o1LwKv3.png" alt="å¹»ç¯ç‰‡22.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/cfq8XexUyz16S5k.png" alt="å¹»ç¯ç‰‡23.PNG"></p><p><img src="https://s2.loli.net/2024/05/31/oN3VCuPRYZwMB8z.png" alt="å¹»ç¯ç‰‡24.PNG"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ°ç†ä¿¡æ¯é›†æˆè¯¾ç¨‹æ±‡æŠ¥ï¼ˆä¸TLQåˆä½œï¼Œæ„Ÿè°¢ï¼ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/05/31/3d8OD9FK1LaHZYx.png&quot; alt=&quot;1.PNG&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli</summary>
      
    
    
    
    <category term="AR" scheme="https://youxt-njnu.github.io/categories/AR/"/>
    
    
    <category term="AR" scheme="https://youxt-njnu.github.io/tags/AR/"/>
    
    <category term="æ±‡æŠ¥PPT" scheme="https://youxt-njnu.github.io/tags/%E6%B1%87%E6%8A%A5PPT/"/>
    
  </entry>
  
  <entry>
    <title>demo| å…‰å½±äººç‰©</title>
    <link href="https://youxt-njnu.github.io/2024/04/02/three-demo-%E5%85%89%E5%BD%B1%E4%BA%BA%E7%89%A9/"/>
    <id>https://youxt-njnu.github.io/2024/04/02/three-demo-%E5%85%89%E5%BD%B1%E4%BA%BA%E7%89%A9/</id>
    <published>2024-04-02T02:02:05.000Z</published>
    <updated>2024-10-06T02:39:21.744Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å…‰å½±äººç‰©"><a href="#å…‰å½±äººç‰©" class="headerlink" title="å…‰å½±äººç‰©"></a>å…‰å½±äººç‰©</h1><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://juejin.cn/post/7145064095178293285">https://juejin.cn/post/7145064095178293285</a></p><ol><li>ä¸¤ä¸ªæ¸²æŸ“å™¨ã€ç›¸æœºï¼Œä¸€ä¸ªåœºæ™¯ï¼Œæ·»åŠ å…‰ç…§ï¼›</li><li>å¤„ç†çª—å£ç¼©æ”¾</li><li>æ„å»ºé¡µé¢ç»“æ„</li><li>csså†™åœ¨å¤–éƒ¨æ–‡ä»¶é‡Œ</li><li>æ„å»ºåŠ è½½ç®¡ç†å™¨ï¼Œå®ç°åŠ è½½é¡µé¢çš„ä¸‹ç§»ã€æ¶ˆå¤±ã€ç§»é™¤</li><li>åŠ è½½glbæ¨¡å‹ï¼Œå¹¶ä½¿ç”¨dracoè¿›è¡Œå¤„ç†</li><li>ä½¿ç”¨intersection observerè¿›è¡Œå¼‚æ­¥è§‚å¯Ÿ</li><li>å¤„ç†é¼ æ ‡ç§»åŠ¨ä¸‹çš„spanæ•ˆæœ</li><li>è°ƒæ•´ç›¸æœº</li><li>æ·»åŠ äº‹ä»¶ç›‘å¬</li></ol><p>æ³¨æ„ç‚¹ï¼š</p><ul><li><p>renderer1.outputColorSpace &#x3D; Three.SRGBColorSpace &#x2F;&#x2F; APIå·²ç»æ”¹æˆäº†ColorSpace</p></li><li><p>why lds-roller has 8 divs? ,ç”¨äºå½¢æˆloadingæ—‹è½¬çš„æ—¶å€™çš„å…«ä¸ªç‚¹</p></li></ul><h2 id="IntersectionObserver"><a href="#IntersectionObserver" class="headerlink" title="IntersectionObserver"></a>IntersectionObserver</h2><p><code>IntersectionObserver</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Web APIï¼Œç”¨äºå¼‚æ­¥è§‚å¯Ÿä¸€ä¸ªå…ƒç´ ä¸å…¶ç¥–å…ˆå…ƒç´ æˆ–é¡¶çº§æ–‡æ¡£è§†çª—ï¼ˆviewportï¼‰çš„äº¤å‰çŠ¶æ€ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå…è®¸ä½ é…ç½®ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“è¢«è§‚å¯Ÿçš„å…ƒç´ ä»¥æŸç§æ–¹å¼è¿›å…¥æˆ–ç¦»å¼€å¦ä¸€ä¸ªå…ƒç´ çš„è§†åŸŸæ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆäºå®ç°åƒæ‡’åŠ è½½å›¾ç‰‡ã€æ— é™æ»šåŠ¨ã€åŠ¨ç”»è§¦å‘ç­‰åŠŸèƒ½ï¼Œè€Œæ— éœ€ä¾èµ–ç¹é‡çš„æ»šåŠ¨äº‹ä»¶ç›‘å¬ï¼Œä»è€Œæé«˜é¡µé¢æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p><p>åœ¨ä½ çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œ<code>IntersectionObserver</code> è¢«ç”¨äºç›‘æµ‹ä¸€ä¸ªåä¸º <code>.second</code> çš„å…ƒç´ ä½•æ—¶æˆä¸ºå¯è§çš„ï¼Œä»¥åŠå®ƒçš„å¯è§ç¨‹åº¦ï¼ˆå³äº¤å‰æ¯”ç‡ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> secondContainer = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> ob = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function"><span class="params">payload</span> =&gt;</span> &#123;</span><br><span class="line">  secondContainer = payload[<span class="number">0</span>].<span class="property">intersectionRatio</span> &gt; <span class="number">0.05</span>;</span><br><span class="line">&#125;, &#123; <span class="attr">threshold</span>: <span class="number">0.05</span> &#125;);</span><br><span class="line">ob.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.second&#x27;</span>));</span><br></pre></td></tr></table></figure><ul><li><strong>å›è°ƒå‡½æ•°</strong>ï¼šå½“è§‚å¯Ÿçš„å…ƒç´ è¿›å…¥æˆ–é€€å‡ºäº¤å‰åŒºåŸŸæ—¶ï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚<code>payload</code> å‚æ•°ï¼ˆé€šå¸¸å‘½åä¸º <code>entries</code>ï¼‰æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†è¢«è§‚å¯Ÿå…ƒç´ çš„äº¤å‰çŠ¶æ€ä¿¡æ¯ã€‚è¿™ä¸ªç¤ºä¾‹ä¸­åªè§‚å¯Ÿäº†ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤é€šè¿‡ <code>payload[0]</code> è®¿é—®äº†è¿™ä¸ªå…ƒç´ çš„ä¿¡æ¯ã€‚</li><li>**<code>intersectionRatio</code>**ï¼šè¿™æ˜¯ä¸€ä¸ª 0 åˆ° 1 ä¹‹é—´çš„å€¼ï¼Œè¡¨ç¤ºè§‚å¯Ÿçš„å…ƒç´ å½“å‰å¯è§éƒ¨åˆ†çš„æ¯”ä¾‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœè¿™ä¸ªæ¯”ä¾‹å¤§äº 0.05ï¼Œ<code>secondContainer</code> å°†è¢«è®¾ç½®ä¸º <code>true</code>ï¼Œè¡¨ç¤ºå…ƒç´ è‡³å°‘æœ‰ 5% æ˜¯å¯è§çš„ã€‚</li><li><strong>é€‰é¡¹å¯¹è±¡</strong>ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€‰é¡¹å¯¹è±¡ <code>&#123; threshold: 0.05 &#125;</code> æŒ‡å®šäº†è§¦å‘å›è°ƒçš„äº¤å‰æ¯”ç‡é˜ˆå€¼ã€‚å½“å…ƒç´ çš„å¯è§éƒ¨åˆ†è¶…è¿‡ 5% æ—¶ï¼Œå›è°ƒå‡½æ•°å°†è¢«æ‰§è¡Œã€‚<code>threshold</code> å¯ä»¥æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼æˆ–ä¸€ä¸ªå€¼çš„æ•°ç»„ï¼Œå…è®¸ä½ åœ¨å…ƒç´ å¯è§æ€§è¾¾åˆ°å¤šä¸ªä¸åŒçº§åˆ«æ—¶è§¦å‘å›è°ƒã€‚</li><li><strong><code>.observe()</code> æ–¹æ³•</strong>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨äºå¼€å§‹è§‚å¯Ÿä¸€ä¸ªå…ƒç´ ã€‚åœ¨è¿™é‡Œï¼Œå®ƒè§‚å¯Ÿä¸€ä¸ªç±»åä¸º <code>.second</code> çš„å…ƒç´ ã€‚å½“è¿™ä¸ªå…ƒç´ çš„å¯è§†çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œä¸”æ»¡è¶³è®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œå°†è§¦å‘ä¸Šé¢å®šä¹‰çš„å›è°ƒå‡½æ•°ã€‚</li></ul><p>ä½¿ç”¨ <code>IntersectionObserver</code> ç›¸æ¯”ä¼ ç»Ÿçš„æ»šåŠ¨äº‹ä»¶ç›‘å¬ï¼Œå¯ä»¥å¤§å¤§å‡å°‘å¯¹æ€§èƒ½çš„å½±å“ï¼Œå› ä¸ºæµè§ˆå™¨å¯ä»¥ä¼˜åŒ–å¯¹äº¤å‰çŠ¶æ€çš„æ£€æµ‹ï¼Œæ— éœ€åœ¨æ¯æ¬¡æ»šåŠ¨äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œå¤æ‚çš„è®¡ç®—ã€‚</p><h2 id="window-scroll"><a href="#window-scroll" class="headerlink" title="window.scroll"></a><code>window.scroll</code></h2><p><code>window.scroll(0, 0)</code> æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œç”¨äºå°†æµè§ˆå™¨çª—å£æˆ–æ ‡ç­¾é¡µçš„æ»šåŠ¨ä½ç½®è®¾ç½®åˆ°é¡µé¢çš„æœ€é¡¶éƒ¨ã€‚è¿™é‡Œçš„ä¸¤ä¸ªå‚æ•° <code>(0, 0)</code> åˆ†åˆ«è¡¨ç¤ºæ°´å¹³å’Œå‚ç›´æ–¹å‘çš„æ»šåŠ¨ä½ç½®ã€‚</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° <code>0</code> è¡¨ç¤ºåœ¨æ°´å¹³æ–¹å‘ä¸Šçš„æ»šåŠ¨è·ç¦»ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>0</code> æ„å‘³ç€é¡µé¢å°†æ»šåŠ¨åˆ°æœ€å·¦è¾¹ã€‚</li><li>ç¬¬äºŒä¸ªå‚æ•° <code>0</code> è¡¨ç¤ºåœ¨å‚ç›´æ–¹å‘ä¸Šçš„æ»šåŠ¨è·ç¦»ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>0</code> æ„å‘³ç€é¡µé¢å°†æ»šåŠ¨åˆ°æœ€é¡¶éƒ¨ã€‚</li></ul><p>å› æ­¤ï¼Œè°ƒç”¨ <code>window.scroll(0, 0)</code> ä¼šä½¿å¾—é¡µé¢æ»šåŠ¨åˆ°å·¦ä¸Šè§’ï¼Œå³é¡µé¢çš„èµ·å§‹ä½ç½®ã€‚è¿™ä¸ªæ–¹æ³•ç»å¸¸åœ¨éœ€è¦å°†ç”¨æˆ·çš„è§†å›¾é‡ç½®åˆ°é¡µé¢é¡¶éƒ¨çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·ç‚¹å‡»â€œè¿”å›é¡¶éƒ¨â€æŒ‰é’®æ—¶ã€‚</p><h2 id="åŠ¨ç”»ä½ç§»"><a href="#åŠ¨ç”»ä½ç§»" class="headerlink" title="åŠ¨ç”»ä½ç§»"></a>åŠ¨ç”»ä½ç§»</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ›´æ–°ç‚¹å…‰æºçš„ä½ç½®</span><br><span class="line">      fillLight.position.y -=</span><br><span class="line">        (parallaxY * 9 + fillLight.position.y - 2) * deltaTime</span><br><span class="line">      fillLight.position.x +=</span><br><span class="line">        (parallaxX * 8 - fillLight.position.x) * 2 * deltaTime</span><br><span class="line">      // æ›´æ–°ç¬¬ä¸€ä¸ªç›¸æœºæ‰€åœ¨ç›¸æœºç»„çš„ä½ç½®</span><br><span class="line">      cameraGroup.position.z -=</span><br><span class="line">        (parallaxY / 3 + cameraGroup.position.z) * 2 * deltaTime</span><br><span class="line">      cameraGroup.position.x +=</span><br><span class="line">        (parallaxX / 3 - cameraGroup.position.x) * 2 * deltaTime</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç é€šè¿‡ç»“åˆç”¨æˆ·è¾“å…¥ï¼ˆä¾‹å¦‚é¼ æ ‡ç§»åŠ¨äº§ç”Ÿçš„è§†å·®æ•ˆæœï¼Œå³ <code>parallaxX</code> å’Œ <code>parallaxY</code>ï¼‰å’Œæ—¶é—´å˜åŒ–é‡ï¼ˆ<code>deltaTime</code>ï¼‰æ¥åŠ¨æ€æ›´æ–°ç‚¹å…‰æºå’Œç›¸æœºç»„çš„ä½ç½®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥åˆ›å»ºå¹³æ»‘å’Œå“åº”å¼çš„åŠ¨ç”»æ•ˆæœï¼Œä½¿å¾—åœºæ™¯å…ƒç´ ï¼ˆå¦‚å…‰æºå’Œç›¸æœºï¼‰èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„äº¤äº’æˆ–æ—¶é—´çš„æ¨ç§»è¿›è¡Œç§»åŠ¨ã€‚</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ç§å¸¸è§çš„åŠ¨ç”»å’Œæ¨¡æ‹ŸæŠ€æœ¯ï¼Œå³åœ¨æ¯ä¸€å¸§æ ¹æ®æ—¶é—´å·®ï¼ˆ<code>deltaTime</code>ï¼‰è°ƒæ•´ä½ç½®ï¼Œä»¥å®ç°å¹³æ»‘çš„è¿åŠ¨æ•ˆæœã€‚<code>deltaTime</code> é€šå¸¸è¡¨ç¤ºè‡ªä¸Šä¸€å¸§ä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼Œç”¨äºç¡®ä¿åŠ¨ç”»çš„é€Ÿåº¦ä¸å—å¸§ç‡å˜åŒ–çš„å½±å“ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fillLight.<span class="property">position</span>.<span class="property">y</span> -= (parallaxY * <span class="number">9</span> + fillLight.<span class="property">position</span>.<span class="property">y</span> - <span class="number">2</span>) * deltaTime;</span><br><span class="line">fillLight.<span class="property">position</span>.<span class="property">x</span> += (parallaxX * <span class="number">8</span> - fillLight.<span class="property">position</span>.<span class="property">x</span>) * <span class="number">2</span> * deltaTime;</span><br></pre></td></tr></table></figure><ul><li>å¯¹äº <code>y</code> è½´ä½ç½®ï¼Œä»£ç è®¡ç®—äº†ä¸€ä¸ªç›®æ ‡å€¼ï¼Œè¿™ä¸ªç›®æ ‡å€¼ç”± <code>parallaxY</code> çš„9å€ä¸å…‰æºå½“å‰ <code>y</code> å€¼ä¸2çš„å·®å€¼å…±åŒå†³å®šï¼Œç„¶åé€šè¿‡ <code>deltaTime</code> è°ƒæ•´é€Ÿåº¦å’Œå¹³æ»‘åº¦ã€‚è¿™æ ·åšçš„æ•ˆæœæ˜¯è®©å…‰æºåœ¨å‚ç›´æ–¹å‘ä¸Šæ ¹æ®è§†å·®å€¼å¹³æ»‘ç§»åŠ¨ï¼Œå¹¶ä¸”è¯•å›¾ç»´æŒåœ¨ä¸€ä¸ª<strong>ç›¸å¯¹äºåŸç‚¹åç§»2</strong>çš„ä½ç½®ã€‚</li><li>å¯¹äº <code>x</code> è½´ä½ç½®ï¼Œç±»ä¼¼åœ°ï¼Œç›®æ ‡ä½ç½®ç”± <code>parallaxX</code> çš„8å€å‡å»å½“å‰ <code>x</code> å€¼å†³å®šï¼Œç„¶åä¹˜ä»¥2å’Œ <code>deltaTime</code> æ¥è°ƒæ•´ã€‚è¿™è®©å…‰æºåœ¨æ°´å¹³æ–¹å‘ä¸Šä¹Ÿæ ¹æ®è§†å·®å€¼å¹³æ»‘åœ°ç§»åŠ¨ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">cameraGroup.<span class="property">position</span>.<span class="property">z</span> -= (parallaxY / <span class="number">3</span> + cameraGroup.<span class="property">position</span>.<span class="property">z</span>) * <span class="number">2</span> * deltaTime;</span><br><span class="line">cameraGroup.<span class="property">position</span>.<span class="property">x</span> += (parallaxX / <span class="number">3</span> - cameraGroup.<span class="property">position</span>.<span class="property">x</span>) * <span class="number">2</span> * deltaTime;</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œå¯¹ç›¸æœºç»„çš„ <code>z</code> å’Œ <code>x</code> è½´ä½ç½®è¿›è¡Œæ›´æ–°ï¼Œé€»è¾‘ç±»ä¼¼äºå…‰æºä½ç½®çš„æ›´æ–°ï¼Œ<strong>ä½†è§†å·®å€¼è¢«é™¤ä»¥3ï¼Œæ„å‘³ç€ç›¸å¯¹ç§»åŠ¨å¹…åº¦æ›´å°</strong>ï¼Œåˆ›å»ºäº†ä¸€ç§ä¸åŒçš„è§†å·®æ•ˆæœã€‚è¿™ç§æ•ˆæœé€šå¸¸ç”¨æ¥ç»™ç”¨æˆ·ä¸€ç§æ·±åº¦æ„Ÿï¼Œå³èƒŒæ™¯å…ƒç´ ç›¸å¯¹äºå‰æ™¯å…ƒç´ ç§»åŠ¨å¾—æ›´æ…¢ã€‚</li></ul><p>ï¼Ÿå¦‚ä½•æ°å½“çš„è®¾ç½®ï¼Œåœ¨é¼ æ ‡ç§»åŠ¨ä¸‹ï¼Œé¡µé¢å…ƒç´ çš„æµç•…åç§»æ•ˆæœ</p><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.lds-roller div &#123;</span><br><span class="line">  animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;</span><br><span class="line">  transform-origin: 40px 40px;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>è¿™æ®µ CSS ä»£ç å®šä¹‰äº†ä¸€ä¸ªåŠ¨ç”»æ•ˆæœï¼Œé€šå¸¸ç”¨äºåˆ›å»ºåŠ è½½æŒ‡ç¤ºå™¨ï¼ˆå¦‚æ—‹è½¬çš„åœ†ç¯æˆ–çƒï¼‰ã€‚è®©æˆ‘ä»¬é€æ­¥è§£æè¿™æ®µä»£ç çš„å«ä¹‰ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.lds-roller</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„é€‰æ‹©å™¨ <code>.lds-roller div</code> æŒ‡çš„æ˜¯æ‰€æœ‰ç±»åä¸º <code>lds-roller</code> çš„å…ƒç´ å†…éƒ¨çš„ <code>div</code> å…ƒç´ ã€‚å¯¹è¿™äº› <code>div</code> å…ƒç´ åº”ç”¨ä»¥ä¸‹æ ·å¼å’ŒåŠ¨ç”»ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">animation</span>: lds-roller <span class="number">1.2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>) infinite;</span><br></pre></td></tr></table></figure><ul><li>**åŠ¨ç”»åç§° (<code>lds-roller</code>)**ï¼šè¿™æ˜¯åŠ¨ç”»çš„å…³é”®å¸§åç§°ï¼Œå®ƒå¼•ç”¨äº†åœ¨æŸå¤„å®šä¹‰çš„ <code>@keyframes lds-roller</code>ï¼Œè¯¥å…³é”®å¸§å®šä¹‰äº†åŠ¨ç”»çš„å¼€å§‹ã€ç»“æŸçŠ¶æ€ä»¥åŠå¯èƒ½çš„ä¸­é—´çŠ¶æ€ã€‚</li><li>**æŒç»­æ—¶é—´ (<code>1.2s</code>)**ï¼šåŠ¨ç”»ä»å¼€å§‹åˆ°ç»“æŸçš„æ—¶é•¿ä¸º 1.2 ç§’ã€‚</li><li>**ç¼“åŠ¨å‡½æ•° (<code>cubic-bezier(0.5, 0, 0.5, 1)</code>)**ï¼šè¿™æ˜¯ä¸€ä¸ªè´å¡å°”æ›²çº¿ï¼Œå®šä¹‰äº†åŠ¨ç”»çš„åŠ é€Ÿåº¦æ›²çº¿ã€‚è¿™ä¸ªç‰¹å®šçš„æ›²çº¿æ„å‘³ç€åŠ¨ç”»å¼€å§‹æ—¶åŠ é€Ÿåº¦è¾ƒå¿«ï¼Œç»“æŸæ—¶å‡é€Ÿã€‚è¿™æ ·å¯ä»¥è®©åŠ¨ç”»çœ‹èµ·æ¥æ›´è‡ªç„¶ã€æµç•…ã€‚</li><li>**é‡å¤æ¬¡æ•° (<code>infinite</code>)**ï¼šåŠ¨ç”»ä¼šæ— é™æ¬¡é‡å¤ã€‚</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform-origin</span>: <span class="number">40px</span> <span class="number">40px</span>;</span><br></pre></td></tr></table></figure><ul><li>**å˜æ¢åŸç‚¹ (<code>transform-origin</code>)**ï¼šè¿™ä¸ªå±æ€§å®šä¹‰äº†å…ƒç´ å˜å½¢çš„åŸç‚¹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸç‚¹è¢«è®¾ç½®åœ¨äº†å…ƒç´ çš„ <code>40px 40px</code> çš„ä½ç½®ï¼Œé€šå¸¸æ„å‘³ç€å…ƒç´ çš„å˜æ¢ï¼ˆå¦‚æ—‹è½¬ï¼‰å°†å›´ç»•è¿™ä¸ªç‚¹è¿›è¡Œã€‚è¿™ä¸ªè®¾ç½®æœ‰åŠ©äºåˆ›å»ºç¯ç»•ä¸­å¿ƒç‚¹æ—‹è½¬çš„æ•ˆæœï¼Œç‰¹åˆ«æ˜¯å½“åŠ¨ç”»æ•ˆæœæ˜¯æ—‹è½¬æ—¶ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™æ®µ CSS ä¸º <code>.lds-roller</code> å†…éƒ¨çš„æ¯ä¸ª <code>div</code> åº”ç”¨äº†ä¸€ä¸ªæŒç»­ 1.2 ç§’ã€æ— é™é‡å¤çš„å¹³æ»‘åŠ¨ç”»ï¼Œè¯¥åŠ¨ç”»çš„å…·ä½“è¡Œä¸ºç”± <code>@keyframes lds-roller</code> å®šä¹‰ã€‚åŠ¨ç”»çš„å˜æ¢åŸç‚¹è®¾ç½®åœ¨æ¯ä¸ª <code>div</code> çš„ <code>40px 40px</code> å¤„ï¼Œä½¿å¾—æ—‹è½¬åŠ¨ç”»èƒ½å›´ç»•è¯¥ç‚¹è¿›è¡Œï¼Œåˆ›å»ºå‡ºä¸€ä¸ªåŠ è½½åŠ¨ç”»çš„è§†è§‰æ•ˆæœã€‚</p><p>ä¸ºäº†å®Œæ•´åœ°å®ç°è¿™ä¸ªåŠ¨ç”»æ•ˆæœï¼Œä½ è¿˜éœ€è¦å®šä¹‰ç›¸åº”çš„ <code>@keyframes lds-roller</code> å…³é”®å¸§åŠ¨ç”»ï¼ŒæŒ‡æ˜åŠ¨ç”»å¼€å§‹ã€ç»“æŸæ—¶ï¼Œä»¥åŠå¯èƒ½çš„ä¸­é—´æ­¥éª¤çš„å…·ä½“æ ·å¼å˜åŒ–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">loadingCover.style.setProperty(</span><br><span class="line">              &#x27;transform&#x27;,</span><br><span class="line">              `translate(0,$&#123;yPosition.y&#125;%)`</span><br><span class="line">            )</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>loadingCover.style.setProperty</code> æ–¹æ³•è¢«ç”¨äºåŠ¨æ€ä¿®æ”¹ <code>loadingCover</code> å…ƒç´ çš„ CSS <code>transform</code> å±æ€§ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ ç›´æ¥é€šè¿‡ JavaScript æ›´æ”¹å…ƒç´ çš„æ ·å¼ï¼Œå…¶ä¸­ <code>setProperty</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ä¿®æ”¹çš„ CSS å±æ€§åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯¥å±æ€§çš„æ–°å€¼ã€‚</p><ul><li><strong>ç¬¬ä¸€ä¸ªå‚æ•° (<code>transform</code>)</strong>: æŒ‡å®šäº†è¦ä¿®æ”¹çš„ CSS å±æ€§ï¼Œè¿™é‡Œæ˜¯ <code>transform</code>ã€‚<code>transform</code> å±æ€§å…è®¸ä½ å¯¹å…ƒç´ è¿›è¡Œå˜å½¢ï¼Œæ¯”å¦‚æ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨ï¼ˆå¹³ç§»ï¼‰æˆ–å€¾æ–œã€‚</li><li><strong>ç¬¬äºŒä¸ªå‚æ•° (<code>translate(0,$&#123;yPosition.y&#125;%)</code>)</strong>: æ˜¯ <code>transform</code> å±æ€§çš„æ–°å€¼ï¼Œè¿™é‡Œä½¿ç”¨äº† <code>translate</code> å‡½æ•°æ¥ç§»åŠ¨å…ƒç´ ã€‚<code>translate</code> å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«å¯¹åº” X è½´å’Œ Y è½´çš„ç§»åŠ¨è·ç¦»ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>translate(0,$&#123;yPosition.y&#125;%)</code> è¡¨ç¤ºåœ¨ X è½´æ–¹å‘ä¸Šä¸ç§»åŠ¨ï¼ˆ<code>0</code>ï¼‰ï¼Œåœ¨ Y è½´æ–¹å‘ä¸Šç§»åŠ¨ <code>$&#123;yPosition.y&#125;%</code> çš„è·ç¦»ï¼Œå…¶ä¸­ <code>$&#123;yPosition.y&#125;</code> æ˜¯ä¸€ä¸ªåŠ¨æ€è®¡ç®—çš„å€¼ï¼Œè¡¨ç¤ºç§»åŠ¨è·ç¦»çš„ç™¾åˆ†æ¯”ã€‚ä½¿ç”¨ç™¾åˆ†æ¯”å•ä½å¯ä»¥æ ¹æ®å…ƒç´ å¤§å°çš„ä¸åŒè€Œç›¸å¯¹åœ°ç§»åŠ¨ä¸åŒçš„è·ç¦»ã€‚</li></ul><p>è¿™æ®µä»£ç çš„ç›®çš„æ˜¯æ ¹æ® <code>yPosition.y</code> çš„å€¼ï¼ˆå¯èƒ½æ˜¯é€šè¿‡æŸäº›è®¡ç®—å¾—åˆ°çš„ï¼‰ï¼Œåœ¨ Y è½´æ–¹å‘ä¸ŠåŠ¨æ€ç§»åŠ¨ <code>loadingCover</code> å…ƒç´ ã€‚è¿™ç§æŠ€æœ¯å¸¸ç”¨äºåˆ›å»ºåŠ¨æ€çš„äº¤äº’æ•ˆæœï¼Œæ¯”å¦‚æ ¹æ®ç”¨æˆ·çš„æ»šåŠ¨æˆ–é¼ æ ‡ç§»åŠ¨æ¥ç§»åŠ¨é¡µé¢ä¸Šçš„å…ƒç´ ï¼Œä»è€Œå¢åŠ é¡µé¢çš„åŠ¨æ€æ€§å’Œäº’åŠ¨æ€§ã€‚</p><p>å‡è®¾ <code>yPosition.y</code> çš„å€¼ä¸º <code>50</code>ï¼Œåˆ™ <code>translate(0,$&#123;yPosition.y&#125;%)</code> å°†è§£æä¸º <code>translate(0,50%)</code>ï¼Œæ„å‘³ç€ <code>loadingCover</code> å…ƒç´ å°†æ²¿ Y è½´æ–¹å‘ä¸‹ç§»å…¶é«˜åº¦çš„ 50%ã€‚è¿™æ ·çš„ç§»åŠ¨æ•ˆæœå¯ä»¥ç”¨äºå„ç§åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœï¼Œä½¿å¾—é¡µé¢å…ƒç´ çš„ç§»åŠ¨çœ‹èµ·æ¥æ›´å¹³æ»‘å’Œè‡ªç„¶ã€‚</p><h2 id="innerHeight-clientHeight"><a href="#innerHeight-clientHeight" class="headerlink" title="innerHeight, clientHeight"></a>innerHeight, clientHeight</h2><p>å½“æƒ³è·å–ä¸€ä¸ªDOMå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨ <code>clientHeight</code>å’Œ <code>clientWidth</code>ã€‚è¿™ä¸¤ä¸ªå±æ€§æä¾›äº†å…ƒç´ çš„å†…éƒ¨é«˜åº¦å’Œå®½åº¦ï¼ˆåŒ…æ‹¬å¡«å……ï¼Œä½†ä¸åŒ…æ‹¬è¾¹æ¡†ã€æ»šåŠ¨æ¡æˆ–å¤–è¾¹è·ï¼‰ã€‚</p><p>å¯¹äºä½ çš„å…·ä½“ä¾‹å­ï¼Œå¦‚æœä½ éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½åè·å–è¿™ä¸ª <code>div</code>å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ï¼Œ</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> container = <span class="title function_">ref</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (container.<span class="property">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Width:&#x27;</span>, container.<span class="property">value</span>.<span class="property">clientWidth</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Height:&#x27;</span>, container.<span class="property">value</span>.<span class="property">clientHeight</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;container&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fullSize&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>clientHeight</strong>ï¼šå…ƒç´ çš„å†…éƒ¨é«˜åº¦ï¼ˆåŒ…æ‹¬paddingï¼Œä½†ä¸åŒ…æ‹¬æ°´å¹³æ»šåŠ¨æ¡ã€borderå’Œmarginï¼‰ã€‚</li><li><strong>clientWidth</strong>ï¼šå…ƒç´ çš„å†…éƒ¨å®½åº¦ï¼ˆåŒæ ·ï¼ŒåŒ…æ‹¬paddingä½†ä¸åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ã€borderå’Œmarginï¼‰ã€‚</li><li><strong>offsetHeight</strong>ï¼šå…ƒç´ çš„å¤–éƒ¨é«˜åº¦ï¼ˆåŒ…æ‹¬paddingã€borderå’Œæ°´å¹³æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginï¼‰ã€‚</li><li><strong>offsetWidth</strong>ï¼šå…ƒç´ çš„å¤–éƒ¨å®½åº¦ï¼ˆåŒ…æ‹¬paddingã€borderå’Œå‚ç›´æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginï¼‰ã€‚</li><li><strong>scrollHeight</strong>å’Œ<strong>scrollWidth</strong>ï¼šåŒ…æ‹¬äº†å› ä¸ºæ»šåŠ¨è€Œä¸å¯è§å†…å®¹çš„æ•´ä½“å°ºå¯¸ã€‚</li></ul><p>é€šå¸¸æ¥è¯´ï¼Œ<code>clientHeight</code>å’Œ <code>clientWidth</code>æ˜¯è·å–å…ƒç´ å¯è§éƒ¨åˆ†å°ºå¯¸çš„æœ€å¸¸ç”¨å±æ€§ã€‚å¦‚æœä½ çš„ <code>div</code>å…·æœ‰æ»šåŠ¨æ¡ï¼Œæˆ–è€…ä½ å…³å¿ƒå†…å®¹æº¢å‡ºçš„æƒ…å†µï¼Œ<code>scrollHeight</code>å’Œ <code>scrollWidth</code>ä¹Ÿå¯èƒ½æ˜¯æœ‰ç”¨çš„ã€‚å¦‚æœéœ€è¦è€ƒè™‘å…ƒç´ çš„è¾¹æ¡†ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šé€‰æ‹©ä½¿ç”¨ <code>offsetHeight</code>å’Œ <code>offsetWidth</code>ã€‚</p><p>åœ¨Webå¼€å‘ä¸­ï¼Œ<code>innerHeight</code> å¹¶ä¸æ˜¯ä¸€ä¸ªç”¨æ¥è·å–DOMå…ƒç´ å°ºå¯¸çš„å±æ€§ï¼›è€Œæ˜¯ä¸€ä¸ªå±äº <code>window</code>å¯¹è±¡çš„å±æ€§ï¼Œå®ƒè¡¨ç¤ºæµè§ˆå™¨çª—å£çš„è§†å›¾åŒºåŸŸï¼ˆè§†å£ï¼‰çš„é«˜åº¦ï¼ŒåŒ…æ‹¬æ°´å¹³æ»šåŠ¨æ¡ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ã€‚</p><p><code>window.innerHeight</code> é€šå¸¸ç”¨äºå¤„ç†ä¸è§†å£å¤§å°ç›¸å…³çš„é€»è¾‘ï¼Œå¦‚ä¸‹å‡ ç§å…¸å‹ç”¨é€”ï¼š</p><ol><li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šJavaScriptä¸­å¯ä»¥ä½¿ç”¨ <code>window.innerHeight</code>æ¥å¸®åŠ©ç¡®å®šæµè§ˆå™¨çª—å£çš„å½“å‰é«˜åº¦ï¼Œè¿›è€Œè°ƒæ•´ç½‘é¡µå¸ƒå±€æˆ–åŠŸèƒ½ä»¥é€‚åº”ä¸åŒçš„æ˜¾ç¤ºè®¾å¤‡ã€‚</li><li><strong>è§¦å‘ç‰¹å®šçš„è¡Œä¸º</strong>ï¼šå½“ç”¨æˆ·ç¼©æ”¾æµè§ˆå™¨çª—å£è‡³æŸä¸ªç‰¹å®šçš„å°ºå¯¸æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›æ ¹æ®çª—å£çš„å¤§å°æ”¹å˜æ¥è§¦å‘æŸäº›è¡Œä¸ºæˆ–åŠ¨ç”»ã€‚</li><li><strong>æ— é™æ»šåŠ¨</strong>ï¼šåœ¨å®ç°æ— é™æ»šåŠ¨çš„ç½‘é¡µä¸­ï¼Œ<code>window.innerHeight</code> å¯ä»¥ç”¨æ¥è®¡ç®—ç”¨æˆ·ä½•æ—¶æ¥è¿‘åº•éƒ¨ï¼Œä»è€Œåœ¨ç”¨æˆ·æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ä¹‹å‰åŠ è½½æ›´å¤šå†…å®¹ã€‚</li><li><strong>å…¨å±å…ƒç´ æ˜¾ç¤º</strong>ï¼šå¦‚æœä½ æƒ³è¦æŸä¸ªå…ƒç´ ï¼ˆå¦‚è§†é¢‘ã€å›¾ç‰‡å±•ç¤ºç­‰ï¼‰å…¨å±æ˜¾ç¤ºï¼Œ<code>window.innerHeight</code> å¯ä»¥å¸®åŠ©ä½ è®¾ç½®å…ƒç´ çš„é«˜åº¦ï¼Œä½¿ä¹‹å®Œå…¨å¡«å……ç”¨æˆ·çš„è§†å£ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>window.innerHeight</code>æ¥è°ƒæ•´ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦ä½¿å…¶æ€»æ˜¯å æ»¡æ•´ä¸ªè§†å£ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.full-height</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: lightblue; <span class="comment">/* æ˜“äºè§†è§‰è¯†åˆ«çš„é¢œè‰² */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;full-height&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fullHeightDiv&quot;</span>&gt;</span></span><br><span class="line">  è¿™ä¸ªdivé«˜åº¦å°†å¡«æ»¡è§†å£</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">adjustHeight</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;fullHeightDiv&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onload</span> = adjustHeight;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onresize</span> = adjustHeight; <span class="comment">// ç¡®ä¿åœ¨çª—å£å°ºå¯¸å˜åŒ–æ—¶æ›´æ–°é«˜åº¦</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tweençš„é”€æ¯"><a href="#tweençš„é”€æ¯" class="headerlink" title="tweençš„é”€æ¯"></a>tweençš„é”€æ¯</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new TWEEN.Tween(yPosition)</span><br><span class="line">          .to(&#123; y: 100 &#125;, 900)</span><br><span class="line">          .easing(TWEEN.Easing.Quadratic.InOut)</span><br><span class="line">          .start()</span><br><span class="line">          .onUpdate(() =&gt; &#123;</span><br><span class="line">            loadingCover.style.setProperty(</span><br><span class="line">              &#x27;transform&#x27;,</span><br><span class="line">              `translate(0,$&#123;yPosition.y&#125;%)`</span><br><span class="line">            )</span><br><span class="line">          &#125;)</span><br><span class="line">          .onComplete(() =&gt; &#123;</span><br><span class="line">            loadingCover.parentNode.removeChild(</span><br><span class="line">              document.getElementById(&#x27;loading-text-intro&#x27;)</span><br><span class="line">            ) // å†™loadingCoverä¼šæŠ¥ç©º</span><br><span class="line">            TWEEN.remove(this)</span><br><span class="line">          &#125;)</span><br></pre></td></tr></table></figure><h3 id="tween-getId-is-not-a-function-é”™è¯¯"><a href="#tween-getId-is-not-a-function-é”™è¯¯" class="headerlink" title="tween.getId is not a function é”™è¯¯"></a><code>tween.getId is not a function</code> é”™è¯¯</h3><p>è¿™ä¸ªé”™è¯¯æç¤ºè¡¨æ˜ï¼Œå°è¯•è°ƒç”¨çš„ <code>getId</code> æ–¹æ³•ä¸å­˜åœ¨äº <code>tween</code> å¯¹è±¡ä¸Šã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œé”™è¯¯æ¥æºäº <code>TWEEN.remove(this)</code> è¿™è¡Œä»£ç ã€‚è¿™é‡Œçš„é—®é¢˜æ˜¯ <code>this</code> åœ¨ <code>onComplete</code> å›è°ƒå‡½æ•°ä¸­ä¸æŒ‡å‘ä½ æœŸæœ›çš„ tween å¯¹è±¡ã€‚åœ¨ ES6 çš„ç®­å¤´å‡½æ•°ä¸­ï¼Œ<code>this</code> å…³é”®å­—å¹¶ä¸ä¼šç»‘å®šåˆ°å¤–å›´çš„ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ç»§æ‰¿è‡ªå®ƒæ‰€åœ¨çš„ä¸Šä¸€å±‚ä½œç”¨åŸŸã€‚è¿™æ„å‘³ç€è¿™é‡Œçš„ <code>this</code> ä¸æ˜¯æŒ‡å‘ Tween å®ä¾‹ï¼Œè€Œå¯èƒ½æ˜¯æŒ‡å‘äº†å…¨å±€å¯¹è±¡æˆ–è€… <code>undefined</code>ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ã€‚</p><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>ä¸ºäº†æ­£ç¡®åœ°ç§»é™¤ tweenï¼Œä½ å¯ä»¥ç›´æ¥å¼•ç”¨ tween å®ä¾‹æœ¬èº«è€Œä¸æ˜¯ä½¿ç”¨ <code>this</code>ã€‚ä¸è¿‡ï¼Œä»ä½ çš„ä»£ç æ¥çœ‹ï¼Œå¹¶æ²¡æœ‰ç›´æ¥çš„å¼•ç”¨ã€‚é€šå¸¸ï¼Œå¦‚æœä½ éœ€è¦åœ¨å›è°ƒä¸­å¼•ç”¨ tweenï¼Œå¯ä»¥äº‹å…ˆå°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ã€‚ä½† <code>TWEEN.js</code> åº“é€šå¸¸è‡ªæˆ‘ç®¡ç†æ‰€æœ‰ tween çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å®ƒä»¬çš„æ·»åŠ å’Œç§»é™¤ï¼Œæ‰€ä»¥æ‰‹åŠ¨è°ƒç”¨ <code>remove</code> æ–¹æ³•å¯èƒ½å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚å¦‚æœä½ ç¡®å®éœ€è¦ç§»é™¤ tweenï¼Œè€ƒè™‘è°ƒæ•´ä½ çš„ä»£ç é€»è¾‘ï¼Œé¿å…åœ¨è¿™ç§ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ <code>this</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const tween1 = new TWEEN.Tween(yPosition)</span><br><span class="line">          .to(&#123; y: 100 &#125;, 900)</span><br><span class="line">          .easing(TWEEN.Easing.Quadratic.InOut)</span><br><span class="line">          .start()</span><br><span class="line">          .onUpdate(() =&gt; &#123;</span><br><span class="line">            loadingCover.style.setProperty(</span><br><span class="line">              &#x27;transform&#x27;,</span><br><span class="line">              `translate(0,$&#123;yPosition.y&#125;%)`</span><br><span class="line">            )</span><br><span class="line">          &#125;)</span><br><span class="line">          .onComplete(() =&gt; &#123;</span><br><span class="line">            loadingCover.parentNode.removeChild(</span><br><span class="line">              document.getElementById(&#x27;loading-text-intro&#x27;)</span><br><span class="line">            ) // å†™loadingCoverä¼šæŠ¥ç©º</span><br><span class="line">            TWEEN.remove(tween1)</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        const tween2 = new TWEEN.Tween(camera1.position.set(0, 4, 2))</span><br><span class="line">          .to(&#123; x: 0, y: 2.4, z: 5.8 &#125;, 3500)</span><br><span class="line">          .easing(TWEEN.Easing.Quadratic.InOut)</span><br><span class="line">          .start()</span><br><span class="line">          .onComplete(() =&gt; &#123;</span><br><span class="line">            TWEEN.remove(tween2)</span><br><span class="line">            document.querySelector(&#x27;.header&#x27;).classList.add(&#x27;ended&#x27;)</span><br><span class="line">            document.querySelector(&#x27;.description&#x27;).classList.add(&#x27;ended&#x27;)</span><br><span class="line">          &#125;)</span><br></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢å…ƒç´ "><a href="#æŸ¥è¯¢å…ƒç´ " class="headerlink" title="æŸ¥è¯¢å…ƒç´ "></a>æŸ¥è¯¢å…ƒç´ </h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const loadingCover = document.getElementById(&#x27;loading-text-intro&#x27;)</span><br><span class="line"></span><br><span class="line">        const tween1 = new TWEEN.Tween(yPosition)</span><br><span class="line">          .to(&#123; y: 100 &#125;, 900)</span><br><span class="line">          .easing(TWEEN.Easing.Quadratic.InOut)</span><br><span class="line">          .start()</span><br><span class="line">          .onUpdate(() =&gt; &#123;</span><br><span class="line">            loadingCover.style.setProperty(</span><br><span class="line">              &#x27;transform&#x27;,</span><br><span class="line">              `translate(0,$&#123;yPosition.y&#125;%)`</span><br><span class="line">            )</span><br><span class="line">          &#125;)</span><br><span class="line">          .onComplete(() =&gt; &#123;</span><br><span class="line">            loadingCover.parentNode.removeChild(</span><br><span class="line">              document.getElementById(&#x27;loading-text-intro&#x27;)</span><br><span class="line">            ) // å†™loadingCoverä¼šæŠ¥ç©º</span><br><span class="line">            TWEEN.remove(tween1)</span><br><span class="line">          &#125;)</span><br></pre></td></tr></table></figure><p><code>Cannot read properties of null (reading &#39;removeChild&#39;)</code> é”™è¯¯</p><blockquote><p>è¿™ä¸ªé”™è¯¯è¡¨æ˜ä½ å°è¯•ä»ä¸€ä¸ª <code>null</code> å¯¹è±¡ä¸­è°ƒç”¨ <code>removeChild</code> æ–¹æ³•ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨å°è¯•è®¿é—®æˆ–ä¿®æ”¹å·²ç»è¢«ç§»é™¤æˆ–æœªè¢«æ­£ç¡®åˆå§‹åŒ–çš„ DOM å…ƒç´ æ—¶ã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å‡ºç°åœ¨å°è¯•ç§»é™¤ <code>loadingCover</code> å…ƒç´ çš„ä»£ç å—ä¸­ã€‚</p></blockquote><h4 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨å°è¯•ç§»é™¤ <code>loadingCover</code> ä¹‹å‰ï¼Œç¡®ä¿å®ƒå­˜åœ¨ã€‚è¿™ä¸ªé—®é¢˜å¯èƒ½å‡ºç°æ˜¯å› ä¸º <code>loadingCover</code> ä¸º <code>null</code>ï¼Œæ„å‘³ç€ <code>document.querySelector(&#39;#loading-text-intro&#39;)</code> æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å…ƒç´ ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºå…ƒç´ çš„ ID é”™è¯¯ï¼Œæˆ–è€…è¿™æ®µä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯¹åº”çš„ DOM å…ƒç´ è¿˜æ²¡æœ‰åŠ è½½åˆ°é¡µé¢ä¸Šã€‚</p><p>ä½ å¯ä»¥é€šè¿‡åœ¨å°è¯•è®¿é—®æˆ–ä¿®æ”¹å…ƒç´ ä¹‹å‰æ£€æŸ¥å®ƒæ˜¯å¦å­˜åœ¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (loadingCover &amp;&amp; loadingCover.parentNode) &#123;</span><br><span class="line">    loadingCover.parentNode.removeChild(loadingCover);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»¼åˆä»¥ä¸Šï¼Œä½ çš„é—®é¢˜å¯èƒ½æ˜¯ç”±äºå¯¹ <code>this</code> çš„è¯¯ç”¨å’Œå¯¹ DOM å…ƒç´ å­˜åœ¨æ€§çš„å‡è®¾æœªç»éªŒè¯é€ æˆçš„ã€‚æ­£ç¡®åœ°å¼•ç”¨å˜é‡å’Œç¡®ä¿ DOM å…ƒç´ å­˜åœ¨ï¼Œå¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p><p><code>document.querySelector</code> å’Œ <code>document.getElementById</code> éƒ½æ˜¯ç”¨æ¥ä» DOM ä¸­è·å–å…ƒç´ çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ï¼š</p><p><code>document.querySelector</code></p><ul><li><code>querySelector</code> æ–¹æ³•å¯ä»¥æ¥å—ä»»ä½• CSS é€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿™æ„å‘³ç€å®ƒéå¸¸çµæ´»ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è·å–ç±»ã€IDã€å±æ€§é€‰æ‹©å™¨ç­‰æŒ‡å®šçš„å…ƒç´ ã€‚</li><li>å¦‚æœæœ‰å¤šä¸ªå…ƒç´ åŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨ï¼Œ<code>querySelector</code> åªä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚</li><li>ç”±äºå®ƒæ¥å—ä»»ä½• CSS é€‰æ‹©å™¨ï¼Œæ‰€ä»¥ç›¸å¯¹æ¥è¯´ï¼Œæ‰§è¡Œé€Ÿåº¦ä¼šæ¯” <code>getElementById</code> æ…¢ä¸€äº›ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#a&#x27;</span>); <span class="comment">// ä½¿ç”¨ # æ¥æŒ‡å®šå®ƒæ˜¯ä¸€ä¸ª ID</span></span><br></pre></td></tr></table></figure><p><code>document.getElementById</code></p><ul><li><code>getElementById</code> æ–¹æ³•ä»…æ¥å—ä¸€ä¸ª ID ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›å…·æœ‰è¯¥ ID çš„å…ƒç´ ã€‚</li><li>å®ƒæ˜¯ç›´æ¥æ ¹æ® ID æ¥è·å–å…ƒç´ ï¼Œä¸éœ€è¦æŒ‡å®šä»»ä½•å‰ç¼€ï¼Œå› ä¸º ID åœ¨ HTML æ–‡æ¡£ä¸­åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚</li><li><code>getElementById</code> é€šå¸¸æ¯” <code>querySelector</code> æ›´å¿«ï¼Œå› ä¸ºå®ƒä¸“é—¨ç”¨äºé€šè¿‡ ID æŸ¥æ‰¾å…ƒç´ ï¼Œè€Œ ID åœ¨ DOM ä¸­æ˜¯å”¯ä¸€çš„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;a&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ éœ€è¦é€šè¿‡ ID è·å–å…ƒç´ ï¼Œå¹¶ä¸”å¯¹æ€§èƒ½æœ‰ä¸€å®šè¦æ±‚ï¼Œ<code>getElementById</code> æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœä½ éœ€è¦æ›´å¤šçš„é€‰æ‹©å™¨çµæ´»æ€§ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ç±»åã€å±æ€§ç­‰è·å–å…ƒç´ ï¼‰ï¼Œåˆ™åº”ä½¿ç”¨ <code>querySelector</code>ã€‚</p><ul><li><strong>æ€§èƒ½</strong>ï¼šå¯¹äºé€šè¿‡ ID è·å–å•ä¸ªå…ƒç´ çš„æƒ…å†µï¼Œ<code>getElementById</code> çš„æ€§èƒ½é€šå¸¸æ›´ä¼˜ã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼š<code>querySelector</code> æä¾›äº†æ›´é«˜çš„çµæ´»æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„ CSS é€‰æ‹©å™¨è¯­æ³•ã€‚</li></ul><p>åœ¨å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨ä¸­ï¼Œå¯¹äºç®€å•çš„ DOM æ“ä½œï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„æ€§èƒ½å·®å¼‚å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å’Œä¸ªäººåå¥½æ¥é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹æ³•ã€‚</p><h2 id="åŠ è½½å‹ç¼©è¿‡çš„glb"><a href="#åŠ è½½å‹ç¼©è¿‡çš„glb" class="headerlink" title="åŠ è½½å‹ç¼©è¿‡çš„glb"></a>åŠ è½½å‹ç¼©è¿‡çš„glb</h2><p>THREE .DRACOLoader: Unexpected geometrytype é”™è¯¯è§£å†³</p><blockquote><p><a href="https://blog.csdn.net/iefreer/article/details/131113390">https://blog.csdn.net/iefreer/article/details/131113390</a></p><p>npm i draco3d</p><p>npm i draco3dgltf</p><p><a href="https://segmentfault.com/q/1010000043706931">https://segmentfault.com/q/1010000043706931</a></p><p>åŸå› ï¼š<code>æ˜¯dracoç‰ˆæœ¬ä¸é¡¹ç›®å®‰è£…çš„threeç‰ˆæœ¬ä¸å¯¹</code><br>è§£å†³æ–¹æ³•ï¼šä»¥viteè„šæ‰‹æ¶ä¸ºä¾‹ <code>node_modules\three\examples\jsm\libs\</code> ä¸‹çš„darcoæ–‡ä»¶å¤¹æ‹·è´åˆ° <code>public\&lt;span&gt;Â &lt;/span&gt;</code>ä¸‹ï¼Œä¹‹åæŠ¥é”™å°±è§£å†³äº†ã€‚</p></blockquote><h3 id="DRACOéªŒè¯"><a href="#DRACOéªŒè¯" class="headerlink" title="DRACOéªŒè¯"></a>DRACOéªŒè¯</h3><p>æ£€æŸ¥ä¸€ä¸ªæ¨¡å‹æ˜¯å¦åŒ…å«äº† Draco å‹ç¼©çš„å‡ ä½•æ•°æ®ï¼Œ</p><ul><li><strong>ä½¿ç”¨ glTF Validator</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.khronos.org/glTF-Validator/">glTF Validator</a> æ¥æ£€æŸ¥ä½ çš„ <code>.glb</code> æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªç”± Khronos Group æä¾›çš„å·¥å…·ï¼Œä¸“é—¨ç”¨äºéªŒè¯ glTF æ–‡ä»¶çš„æ­£ç¡®æ€§ã€‚å¦‚æœä½ çš„æ–‡ä»¶ä½¿ç”¨äº† Draco å‹ç¼©ï¼ŒéªŒè¯ç»“æœä¼šæ˜¾ç¤ºç›¸å…³ä¿¡æ¯ã€‚</li><li><strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</strong>ï¼šé«˜çº§ç”¨æˆ·å¯ä»¥ç›´æ¥æŸ¥çœ‹ GLB æ–‡ä»¶çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨ï¼‰ï¼Œå¯»æ‰¾ Draco å‹ç¼©çš„æ ‡è®°æˆ–ç»“æ„ã€‚è¿™ç§æ–¹æ³•éœ€è¦å¯¹ GLB æ–‡ä»¶æ ¼å¼å’Œ Draco å‹ç¼©æœ‰è¾ƒæ·±çš„äº†è§£ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;uri&quot;: &quot;statue.glb&quot;,</span><br><span class="line">    &quot;mimeType&quot;: &quot;model/gltf-binary&quot;,</span><br><span class="line">    &quot;validatorVersion&quot;: &quot;2.0.0-dev.3.8&quot;,</span><br><span class="line">    &quot;validatedAt&quot;: &quot;2024-04-05T13:03:15.754Z&quot;,</span><br><span class="line">    &quot;issues&quot;: &#123;</span><br><span class="line">        &quot;numErrors&quot;: 0,</span><br><span class="line">        &quot;numWarnings&quot;: 0,</span><br><span class="line">        &quot;numInfos&quot;: 3,</span><br><span class="line">        &quot;numHints&quot;: 0,</span><br><span class="line">        &quot;messages&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;code&quot;: &quot;UNSUPPORTED_EXTENSION&quot;,</span><br><span class="line">                &quot;message&quot;: &quot;Cannot validate an extension as it is not supported by the validator: &#x27;KHR_draco_mesh_compression&#x27;.&quot;,</span><br><span class="line">                &quot;severity&quot;: 2,</span><br><span class="line">                &quot;pointer&quot;: &quot;/extensionsUsed/0&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;code&quot;: &quot;UNUSED_OBJECT&quot;,</span><br><span class="line">                &quot;message&quot;: &quot;This object may be unused.&quot;,</span><br><span class="line">                &quot;severity&quot;: 2,</span><br><span class="line">                &quot;pointer&quot;: &quot;/meshes/0/primitives/0/attributes/TEXCOORD_0&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;code&quot;: &quot;UNUSED_OBJECT&quot;,</span><br><span class="line">                &quot;message&quot;: &quot;This object may be unused.&quot;,</span><br><span class="line">                &quot;severity&quot;: 2,</span><br><span class="line">                &quot;pointer&quot;: &quot;/bufferViews/0&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;truncated&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;info&quot;: &#123;</span><br><span class="line">        &quot;version&quot;: &quot;2.0&quot;,</span><br><span class="line">        &quot;generator&quot;: &quot;Khronos glTF Blender I/O v1.8.19&quot;,</span><br><span class="line">        &quot;extensionsUsed&quot;: [</span><br><span class="line">            &quot;KHR_draco_mesh_compression&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;extensionsRequired&quot;: [</span><br><span class="line">            &quot;KHR_draco_mesh_compression&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;resources&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;pointer&quot;: &quot;/buffers/0&quot;,</span><br><span class="line">                &quot;mimeType&quot;: &quot;application/gltf-buffer&quot;,</span><br><span class="line">                &quot;storage&quot;: &quot;glb&quot;,</span><br><span class="line">                &quot;byteLength&quot;: 697820</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;animationCount&quot;: 0,</span><br><span class="line">        &quot;materialCount&quot;: 1,</span><br><span class="line">        &quot;hasMorphTargets&quot;: false,</span><br><span class="line">        &quot;hasSkins&quot;: false,</span><br><span class="line">        &quot;hasTextures&quot;: false,</span><br><span class="line">        &quot;hasDefaultScene&quot;: true,</span><br><span class="line">        &quot;drawCallCount&quot;: 1,</span><br><span class="line">        &quot;totalVertexCount&quot;: 141741,</span><br><span class="line">        &quot;totalTriangleCount&quot;: 264708,</span><br><span class="line">        &quot;maxUVs&quot;: 1,</span><br><span class="line">        &quot;maxInfluences&quot;: 0,</span><br><span class="line">        &quot;maxAttributes&quot;: 3</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä½ é€šè¿‡ glTF Validator è·å–çš„ä¿¡æ¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ä»¥ä¸‹å‡ ç‚¹å…³äºä½ çš„æ¨¡å‹ <code>statue.glb</code>ï¼š</p><ol><li>åŸºæœ¬ä¿¡æ¯</li></ol><ul><li><strong>æ–‡ä»¶ç±»å‹</strong>ï¼šæ¨¡å‹æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶çš„ glTF æ–‡ä»¶ï¼ˆGLBï¼‰ã€‚</li><li><strong>éªŒè¯å™¨ç‰ˆæœ¬</strong>ï¼šä½¿ç”¨çš„ glTF Validator ç‰ˆæœ¬ä¸º 2.0.0-dev.3.8ã€‚</li><li><strong>éªŒè¯æ—¶é—´</strong>ï¼šæ–‡ä»¶åœ¨ 2024-04-05T13:03:15.754Z è¢«éªŒè¯ã€‚</li></ul><ol start="2"><li>é—®é¢˜æŠ¥å‘Š</li></ol><ul><li><strong>é”™è¯¯æ•°é‡</strong>ï¼š0ï¼Œè¡¨ç¤ºæ–‡ä»¶æ²¡æœ‰è¿å glTF 2.0 è§„èŒƒçš„é”™è¯¯ã€‚</li><li><strong>è­¦å‘Šæ•°é‡</strong>ï¼š0ï¼Œæ²¡æœ‰å‘ç°å¯èƒ½å½±å“æ€§èƒ½æˆ–å…¼å®¹æ€§çš„é—®é¢˜ã€‚</li><li><strong>ä¿¡æ¯æ•°é‡</strong>ï¼š3ï¼Œæä¾›äº†ä¸€äº›å…³äºæ¨¡å‹çš„é¢å¤–ä¿¡æ¯ä½†ä¸å½±å“æ¨¡å‹çš„ä½¿ç”¨ã€‚</li><li><strong>æç¤ºæ•°é‡</strong>ï¼š0ï¼Œæ²¡æœ‰ç»™å‡ºä¼˜åŒ–å»ºè®®ã€‚</li></ul><ol start="3"><li>å…·ä½“æ¶ˆæ¯</li></ol><ul><li><strong>UNSUPPORTED_EXTENSION</strong>ï¼šæ¨¡å‹ä½¿ç”¨äº† <code>KHR_draco_mesh_compression</code> æ‰©å±•è¿›è¡Œ Draco å‹ç¼©ï¼Œä½† glTF Validator ä¸æ”¯æŒéªŒè¯è¿™ä¸ªæ‰©å±•çš„å…·ä½“å†…å®¹ã€‚è¿™è¯´æ˜ä½ çš„æ¨¡å‹ç¡®å®ä½¿ç”¨äº† Draco å‹ç¼©ã€‚</li><li><strong>UNUSED_OBJECT</strong>ï¼šæœ‰ä¸¤ä¸ªæœªä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯çº¹ç†åæ ‡ <code>TEXCOORD_0</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ <code>bufferViews[0]</code>ã€‚è¿™å¯èƒ½æ„å‘³ç€æ¨¡å‹ä¸­åŒ…å«äº†ä¸€äº›æœªè¢«å¼•ç”¨çš„æ•°æ®ï¼Œè¿™é€šå¸¸ä¸å½±å“æ¨¡å‹çš„ä½¿ç”¨ï¼Œä½†å¯èƒ½ç¨å¾®å¢åŠ äº†æ–‡ä»¶çš„å¤§å°ã€‚</li></ul><ol start="4"><li>æ¨¡å‹ä¿¡æ¯</li></ol><ul><li><strong>glTF ç‰ˆæœ¬</strong>ï¼š2.0ã€‚</li><li><strong>åˆ›å»ºå·¥å…·</strong>ï¼šä½¿ç”¨äº† Khronos glTF Blender I&#x2F;O v1.8.19 åˆ›å»ºã€‚</li><li><strong>æ‰©å±•ä½¿ç”¨å’Œè¦æ±‚</strong>ï¼šæ¨¡å‹ä½¿ç”¨å¹¶è¦æ±‚ <code>KHR_draco_mesh_compression</code> æ‰©å±•ï¼Œè¯å®äº†æ¨¡å‹ç»è¿‡äº† Draco å‹ç¼©ã€‚</li><li><strong>èµ„æºä¿¡æ¯</strong>ï¼šåŒ…å«ä¸€ä¸ª bufferï¼Œå¤§å°ä¸º 697820 å­—èŠ‚ã€‚</li><li><strong>åŠ¨ç”»ã€æè´¨ã€é¡¶ç‚¹å’Œä¸‰è§’å½¢æ•°é‡</strong>ï¼šæ¨¡å‹æ²¡æœ‰åŠ¨ç”»ï¼Œæœ‰ 1 ä¸ªæè´¨ï¼Œå…±æœ‰ 141741 ä¸ªé¡¶ç‚¹å’Œ 264708 ä¸ªä¸‰è§’å½¢ã€‚</li></ul><p>ä½ çš„æ¨¡å‹ <code>statue.glb</code> æˆåŠŸä½¿ç”¨äº† Draco å‹ç¼©ï¼ˆé€šè¿‡ <code>KHR_draco_mesh_compression</code> æ‰©å±•ï¼‰ï¼Œä¸”æ²¡æœ‰å‘ç°ä»»ä½•è¿å glTF è§„èŒƒçš„é”™è¯¯ã€‚æœªä½¿ç”¨çš„å¯¹è±¡ï¼ˆå¦‚æŸäº›çº¹ç†åæ ‡å’Œ bufferViewsï¼‰å¯èƒ½æ˜¯å¯¼å‡ºè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ï¼Œé€šå¸¸ä¸ä¼šå½±å“æ¨¡å‹çš„æ¸²æŸ“æˆ–ä½¿ç”¨ã€‚å¦‚æœä½ å…³å¿ƒæ–‡ä»¶å¤§å°ï¼Œå¯ä»¥è€ƒè™‘ä¼˜åŒ–è¿™äº›æœªä½¿ç”¨çš„æ•°æ®ã€‚</p><p>è¿™ä¸ªæŠ¥å‘Šä¹Ÿç¡®è®¤äº†ä½ é‡åˆ°çš„é—®é¢˜ä¸æ˜¯ç”±æ–‡ä»¶æŸåæˆ–ä¸ç¬¦åˆ glTF è§„èŒƒé€ æˆçš„ï¼Œå¯èƒ½éœ€è¦åœ¨åŠ è½½æˆ–æ¸²æŸ“è¿‡ç¨‹ä¸­è¿›ä¸€æ­¥è°ƒæŸ¥é—®é¢˜çš„åŸå› ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å…‰å½±äººç‰©&quot;&gt;&lt;a href=&quot;#å…‰å½±äººç‰©&quot; class=&quot;headerlink&quot; title=&quot;å…‰å½±äººç‰©&quot;&gt;&lt;/a&gt;å…‰å½±äººç‰©&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ•™ç¨‹ï¼š&lt;a href=&quot;https://juejin.cn/post/7145064095178293285&quot;&gt;http</summary>
      
    
    
    
    <category term="3d" scheme="https://youxt-njnu.github.io/categories/3d/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
    <category term="vue" scheme="https://youxt-njnu.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>demo| æ•°å­—åœ°çƒæ˜Ÿç©º</title>
    <link href="https://youxt-njnu.github.io/2024/03/23/three-demo-%E6%95%B0%E5%AD%97%E5%9C%B0%E7%90%83/"/>
    <id>https://youxt-njnu.github.io/2024/03/23/three-demo-%E6%95%B0%E5%AD%97%E5%9C%B0%E7%90%83/</id>
    <published>2024-03-23T04:02:05.000Z</published>
    <updated>2024-10-06T02:37:37.429Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•°å­—åœ°çƒæ˜Ÿç©º"><a href="#æ•°å­—åœ°çƒæ˜Ÿç©º" class="headerlink" title="æ•°å­—åœ°çƒæ˜Ÿç©º"></a>æ•°å­—åœ°çƒæ˜Ÿç©º</h1><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://juejin.cn/post/7145064095178293285">https://juejin.cn/post/7145064095178293285</a></p><ol><li>æ„å»ºï¼ˆçº¿æ¡†é£çš„åœ°çƒearthã€ï¼‰ç¯ringã€å«æ˜Ÿsatellite</li><li>æ„å»º500ä¸ªéšæœºåˆ†å¸ƒçš„æ˜Ÿæ˜Ÿstars</li><li>åˆå§‹åŒ–åœºæ™¯ï¼Œè®¾ç½®å…‰ç…§ï¼Œå…³è”dom</li><li>åŠ è½½åœ°çƒçš„æ¨¡å‹å’Œè´´å›¾</li><li>æ·»åŠ åŠ¨ç”»</li></ol><h2 id="é¡µé¢ä¸­ä¸æ˜¾ç¤ºcanvasçš„å†…å®¹"><a href="#é¡µé¢ä¸­ä¸æ˜¾ç¤ºcanvasçš„å†…å®¹" class="headerlink" title="é¡µé¢ä¸­ä¸æ˜¾ç¤ºcanvasçš„å†…å®¹"></a><strong>é¡µé¢ä¸­ä¸æ˜¾ç¤ºcanvasçš„å†…å®¹</strong></h2><ol><li>æ£€æŸ¥å¯¹åº”çš„templateé‡Œçš„divå…ƒç´ çš„å¤§å°ï¼Œå¦‚æœè®¾ç½®ä¸å½“ï¼Œå°±çœ‹ä¸åˆ°ç‰©ä½“ï¼›</li><li>å¦‚æœæ²¡æœ‰æŠŠä¸‹é¢çš„ä»£ç æ”¾åˆ°inité‡Œï¼Œè¿™ä¸ªæ—¶å€™containerçš„divè¿˜æ²¡æœ‰åˆ›å»ºï¼Œè·å–ä¸åˆ°å¯¹åº”çš„å®½é«˜</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;container&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sizes = &#123;</span><br><span class="line">  <span class="attr">width</span>: container.<span class="property">clientWidth</span>,</span><br><span class="line">  <span class="attr">height</span>: container.<span class="property">clientHeight</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¡µé¢ä¸­çœ‹ä¸åˆ°ç‰©ä½“"><a href="#é¡µé¢ä¸­çœ‹ä¸åˆ°ç‰©ä½“" class="headerlink" title="é¡µé¢ä¸­çœ‹ä¸åˆ°ç‰©ä½“"></a><strong>é¡µé¢ä¸­çœ‹ä¸åˆ°ç‰©ä½“</strong></h2><ol><li>ç¡®è®¤è®¾ç½®äº†divçš„å¤§å°: å¦‚æœ <code>container</code>çš„å¤§å°ä¸º0æˆ–éå¸¸å°ï¼Œé‚£ä¹ˆ <code>Three.js</code>æ¸²æŸ“çš„å†…å®¹å¯èƒ½å°±æ— æ³•è¢«çœ‹åˆ°ã€‚ç¡®ä¿ <code>.fullSize</code>æ ·å¼è¢«æ­£ç¡®åº”ç”¨ï¼Œå¹¶ä¸”å®¹å™¨å…ƒç´ ç¡®å®è¦†ç›–äº†å¯è§åŒºåŸŸ</li><li>ç¡®å®šåœºæ™¯çš„æè´¨é¢œè‰²ä¸å’ŒèƒŒæ™¯ä¸€æ ·</li><li>ç¡®è®¤æè´¨æ˜¯å¦éœ€è¦åŠ å…‰ç…§</li><li>è°ƒæ•´ç›¸æœº.lookAt() : å¦‚æœåœºæ™¯ä¸­æ²¡æœ‰æ·»åŠ ä»»ä½•å¯è§ç‰©ä½“æˆ–è€…ç‰©ä½“å’Œæ‘„åƒæœºçš„ä½ç½®è®¾ç½®ä¸å½“ï¼Œå¯èƒ½å¯¼è‡´çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ã€‚è¯•ç€æ·»åŠ ä¸€ä¸ªç®€å•çš„å‡ ä½•ä½“ï¼Œç¡®ä¿å®ƒåœ¨æ‘„åƒæœºè§†é‡å†…</li><li>è°ƒæ•´ç‰©ä½“.position.set()</li><li>è°ƒæ•´ç›¸æœºçš„ä½ç½®.position.set()</li><li>è°ƒæ•´ç‰©ä½“çš„å¤§å° size</li><li><strong>æ¸²æŸ“è°ƒç”¨æ—¶æœº</strong> ï¼šä½ åœ¨ <code>initThree</code>å‡½æ•°ä¸­åªè°ƒç”¨äº†ä¸€æ¬¡ <code>renderer.render(scene, camera)</code>ï¼Œè¿™æ„å‘³ç€åœºæ™¯åªæ¸²æŸ“äº†ä¸€æ¬¡ï¼Œä¸”åœ¨æ²¡æœ‰æ·»åŠ ç¯å¢ƒçº¹ç†ä¹‹å‰ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šåœ¨æ·»åŠ å®Œæ‰€æœ‰åˆæ¬¡æ‰€éœ€çš„åœºæ™¯å†…å®¹åå†è¿›è¡Œæ¸²æŸ“ï¼Œæˆ–è€…ä½¿ç”¨åŠ¨ç”»å¾ªç¯ï¼ˆå¦‚ <code>requestAnimationFrame</code>ï¼‰ä¸æ–­æ¸²æŸ“åœºæ™¯ã€‚</li></ol><p>æ­¤å¤–ï¼Œä»vueè¿ç§»åˆ°reacté‡Œçš„æ—¶å€™ï¼ŒåŸå…ˆæ˜¯é€šè¿‡ä¸‹é¢æ¥å®ç°çš„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">renderer = new Three.WebGLRenderer(&#123; alpha: true, antialias: true &#125;)</span><br><span class="line">renderer.setSize(sizes.width, sizes.height)</span><br><span class="line">container.current.appendChild(renderer.domElement);</span><br></pre></td></tr></table></figure><p>ä½†æ¬è¿‡æ¥å°±å®ç°ä¸äº†äº†ï¼Œéœ€è¦ä½¿ç”¨è¿™æ ·å­å®ç°ï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">renderer = new Three.WebGLRenderer(&#123; canvas: container.current, alpha: true, antialias: true &#125;)</span><br><span class="line">renderer.setSize(sizes.width, sizes.height)</span><br><span class="line">renderer.render(scene, camera);</span><br></pre></td></tr></table></figure><p>ä½†åˆä¼šæŠ¥è¿™ç§é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chunk-A6I3RWFE.js?v=776dc4a7:16638 Uncaught TypeError: Cannot read properties of null (reading &#x27;matrixWorldAutoUpdate&#x27;)</span><br><span class="line">    at WebGLRenderer.render (chunk-KKQC3OGW.js?v=776dc4a7:17854:17)</span><br><span class="line">    at initThree (EarthStar.jsx:47:14)</span><br><span class="line">    at EarthStar.jsx:120:5</span><br><span class="line">    at commitHookEffectListMount (chunk-A6I3RWFE.js?v=776dc4a7:16883:34)</span><br><span class="line">    at commitPassiveMountOnFiber (chunk-A6I3RWFE.js?v=776dc4a7:18124:19)</span><br><span class="line">    at commitPassiveMountEffects_complete (chunk-A6I3RWFE.js?v=776dc4a7:18097:17)</span><br><span class="line">    at commitPassiveMountEffects_begin (chunk-A6I3RWFE.js?v=776dc4a7:18087:15)</span><br><span class="line">    at commitPassiveMountEffects (chunk-A6I3RWFE.js?v=776dc4a7:18077:11)</span><br><span class="line">    at flushPassiveEffectsImpl (chunk-A6I3RWFE.js?v=776dc4a7:19458:11)</span><br><span class="line">    at flushPassiveEffects (chunk-A6I3RWFE.js?v=776dc4a7:19415:22)</span><br></pre></td></tr></table></figure><p>éœ€è¦æŠŠ<code>renderer.render(scene, camera);</code>æ”¾åˆ°sceneåˆå§‹åŒ–çš„åé¢ï¼›</p><p>æ­¤å¤–ï¼Œéœ€è¦æ”¾åœ¨sceneæ·»åŠ æ¨¡å‹ä¹‹åï¼Œè¿™æ ·å­æ¨¡å‹æ‰ä¼šè¢«æ¸²æŸ“åˆ°åœºæ™¯é‡Œï¼›</p><h2 id="Uncaught-TypeError-Cannot-read-properties-of-null-reading-â€˜widthâ€™"><a href="#Uncaught-TypeError-Cannot-read-properties-of-null-reading-â€˜widthâ€™" class="headerlink" title="Uncaught TypeError: Cannot read properties of null (reading â€˜widthâ€™)"></a><strong>Uncaught TypeError: Cannot read properties of null (reading â€˜widthâ€™)</strong></h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sizes = &#123;</span><br><span class="line">  <span class="attr">width</span>: container.<span class="property">width</span>,</span><br><span class="line">  <span class="attr">height</span>: container.<span class="property">height</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½ çœ‹åˆ°é”™è¯¯æ¶ˆæ¯ â€œUncaught TypeError: Cannot read properties of null (reading â€˜widthâ€™)â€ï¼Œè¿™è¡¨æ˜ä½ è¯•å›¾è®¿é—®çš„å¯¹è±¡ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <code>container</code>ï¼‰ä¸º <code>null</code>ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨å°è¯•è®¿é—®ä¸€ä¸ªDOMå…ƒç´ çš„å±æ€§ï¼Œä½†è¯¥å…ƒç´ åœ¨ä»£ç æ‰§è¡Œæ—¶è¿˜æœªè¢«æˆåŠŸé€‰ä¸­æˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨äºDOMä¸­ã€‚</p><p>æ”¹ç”¨ <code>.clientWidth</code>å’Œ <code>.clientHeight</code>æ˜¯æ­£ç¡®çš„ä¿®æ­£æ–¹å¼ï¼Œä½†å‰ææ˜¯ä½ é¦–å…ˆéœ€è¦ç¡®ä¿ <code>container</code>ä¸æ˜¯ <code>null</code>ã€‚è¿™ä¸¤ä¸ªå±æ€§æ˜¯DOMå…ƒç´ çš„æ ‡å‡†å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºå…ƒç´ çš„å†…éƒ¨å®½åº¦ï¼ˆä¸åŒ…æ‹¬è¾¹æ¡†ï¼‰å’Œé«˜åº¦ï¼Œé€‚ç”¨äºè·å–å…ƒç´ çš„å¯è§†å°ºå¯¸ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ç¡®ä¿ <code>container</code>å·²æ­£ç¡®é€‰ä¸­å¹¶é <code>null</code>ï¼š</p><ol><li>ç¡®ä¿ä½ çš„ä»£ç åœ¨DOMå…ƒç´ å®é™…è¢«åŠ è½½åˆ°é¡µé¢ä¸Šä¹‹åæ‰§è¡Œã€‚å¦‚æœä½ çš„ä»£ç åœ¨å…ƒç´ è¢«åŠ è½½ä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆå³ä½¿é€‰æ‹©å™¨æ­£ç¡®ï¼Œä¹Ÿä¼šè¿”å› <code>null</code>ã€‚é€šå¸¸ï¼Œå°†JavaScriptä»£ç æ”¾åœ¨æ–‡æ¡£çš„åº•éƒ¨ï¼Œæˆ–è€…ä½¿ç”¨ <code>document.addEventListener(&#39;DOMContentLoaded&#39;, function() &#123; /* ä»£ç  */ &#125;)</code>æ¥ç¡®ä¿åœ¨DOMå®Œå…¨åŠ è½½åå†è¿è¡Œä»£ç ã€‚</li><li>æ£€æŸ¥é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®ã€‚ç¡®ä¿ä½ ç”¨æ¥é€‰ä¸­ <code>container</code>çš„é€‰æ‹©å™¨ï¼ˆæ¯”å¦‚IDæˆ–ç±»åï¼‰æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”ä¸HTMLä¸­çš„å…ƒç´ åŒ¹é…ã€‚</li></ol><p>ä½¿ç”¨ <code>container.width</code> ä¸é€‚ç”¨äº <code>div</code> å…ƒç´ ï¼Œå› ä¸º <code>div</code> æ²¡æœ‰ <code>width</code> å±æ€§ã€‚<code>width</code> å±æ€§é€šå¸¸ç”¨äº <code>canvas</code>ã€<code>img</code> ç­‰å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å…·æœ‰ç›´æ¥å¯è¯»å†™çš„å®½åº¦å’Œé«˜åº¦å±æ€§ã€‚å¯¹äº <code>div</code> å’Œå…¶ä»–æ²¡æœ‰å®½é«˜å±æ€§çš„å—çº§å…ƒç´ ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>clientWidth</code> å’Œ <code>clientHeight</code> æ¥è·å–å®ƒä»¬çš„è§†è§‰å‘ˆç°å°ºå¯¸ï¼Œè¿™äº›å°ºå¯¸åŒ…æ‹¬äº†å…ƒç´ çš„å†…è¾¹è·ï¼ˆpaddingï¼‰ä½†ä¸åŒ…æ‹¬è¾¹æ¡†ï¼ˆborderï¼‰å’Œæ»šåŠ¨æ¡ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨Three.jsä¸­ï¼Œå½“ä½ è®¾ç½®ç›¸æœºå‚æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨ <code>container.clientWidth</code> å’Œ <code>container.clientHeight</code> è€Œä¸æ˜¯ <code>container.width</code> å’Œ <code>container.height</code>ï¼š</p><ul><li><code>clientWidth</code> å’Œ <code>clientHeight</code> ç»™ä½ æä¾›äº†å…ƒç´ çš„å®é™…å†…å®¹åŒºåŸŸçš„å°ºå¯¸ï¼Œè¿™å¯¹äºThree.jsä¸­ç¡®ä¿ç›¸æœºçš„é•¿å®½æ¯”ä¸æ¸²æŸ“å®¹å™¨åŒ¹é…æ˜¯éå¸¸é‡è¦çš„ã€‚</li><li>è¿™äº›å±æ€§åæ˜ äº† <code>&lt;div&gt;</code>å®¹å™¨å½“å‰çš„å¤§å°ï¼ŒåŒ…æ‹¬ä»»ä½•ç”±äºé¡µé¢å¸ƒå±€æˆ–æ ·å¼åŠ¨æ€å˜åŒ–å¯¼è‡´çš„å°ºå¯¸æ›´æ”¹ã€‚</li><li>å¦‚æœä½¿ç”¨ <code>width</code> å’Œ <code>height</code>ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ° <code>undefined</code>ï¼Œå› ä¸ºè¿™ä¸æ˜¯æ ‡å‡†çš„ <code>div</code> å±æ€§ï¼Œè¿™ä¼šå¯¼è‡´ä½ çš„ç›¸æœºè®¾ç½®ä¸æ­£ç¡®ã€‚</li></ul><h2 id="åŠ¨ç”»ä¸­ä½ç½®çš„è®¾ç½®"><a href="#åŠ¨ç”»ä¸­ä½ç½®çš„è®¾ç½®" class="headerlink" title="åŠ¨ç”»ä¸­ä½ç½®çš„è®¾ç½®"></a>åŠ¨ç”»ä¸­ä½ç½®çš„è®¾ç½®</h2><p>åœ¨threejsä¸­è®¾ç½®åŠ¨ç”»é‡Œé¢ï¼Œsatelliteæ¨¡å‹çš„ä½ç½®å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">satellite.<span class="property">position</span>.<span class="title function_">set</span>(</span><br><span class="line">        <span class="number">140</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(radian),</span><br><span class="line">        <span class="number">50</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(radian),</span><br><span class="line">        <span class="number">20</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(radian)</span><br><span class="line">      )</span><br></pre></td></tr></table></figure><p>å…¶ä¸­</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rot += <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.8</span></span><br><span class="line"><span class="keyword">let</span> radian = (<span class="title class_">Math</span>.<span class="property">PI</span> * rot) / <span class="number">180</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆsatelliteåŠ¨ç”»çš„ä½ç½®è¦è¿™ä¹ˆè®¾ç½®</p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>satellite.position.set(x, y, z)</code> æ­£åœ¨è®¾ç½®å«æ˜Ÿæ¨¡å‹åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„ä½ç½®ï¼Œå…¶ä¸­ <code>x</code>ï¼Œ<code>y</code>ï¼Œå’Œ <code>z</code> æ˜¯æ ¹æ®ä¸€å®šè§„åˆ™è®¡ç®—å‡ºæ¥çš„åæ ‡å€¼ã€‚è¿™äº›å€¼æ˜¯é€šè¿‡æ­£å¼¦ï¼ˆ<code>sin</code>ï¼‰å’Œä½™å¼¦ï¼ˆ<code>cos</code>ï¼‰å‡½æ•°çš„å˜åŒ–æ¥åŠ¨æ€è®¡ç®—çš„ï¼Œè¿™äº›å‡½æ•°æ˜¯ä»åœ†å’Œæ³¢çš„å‡ ä½•å…³ç³»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå› æ­¤å®ƒä»¬éå¸¸é€‚åˆç”¨äºåˆ›å»ºå¾ªç¯å’ŒæŒ¯è¡çš„åŠ¨ç”»æ•ˆæœï¼Œå¦‚å«æ˜Ÿç»•åœ°çƒè¿è¡Œçš„è½¨è¿¹ã€‚</p><ul><li><code>140 * Math.cos(radian)</code> æ˜¯åœ¨è®¡ç®—å«æ˜Ÿåœ¨xè½´ä¸Šçš„ä½ç½®ã€‚ä½¿ç”¨ä½™å¼¦å‡½æ•°æ„å‘³ç€å«æ˜Ÿåœ¨xè½´ä¸Šçš„è¿åŠ¨ä¼šå½¢æˆä¸€ä¸ªæ­£å¼¦æ³¢ï¼Œå…¶å€¼åœ¨-140åˆ°+140ä¹‹é—´å˜åŒ–ï¼Œåˆ›å»ºäº†æ°´å¹³æ–¹å‘ä¸Šçš„å¾ªç¯è¿åŠ¨ã€‚</li><li><code>50 * Math.sin(radian)</code> æ˜¯åœ¨è®¡ç®—å«æ˜Ÿåœ¨yè½´ä¸Šçš„ä½ç½®ã€‚æ­£å¼¦å‡½æ•°å†³å®šäº†å«æ˜Ÿåœ¨å‚ç›´æ–¹å‘ä¸Šçš„è¿åŠ¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ªèŒƒå›´åœ¨-50åˆ°+50ä¹‹é—´çš„æ³¢åŠ¨ã€‚</li><li><code>20 * Math.sin(radian)</code> æ˜¯åœ¨è®¡ç®—å«æ˜Ÿåœ¨zè½´ä¸Šçš„ä½ç½®ã€‚è¿™åŒæ ·ä½¿ç”¨äº†æ­£å¼¦å‡½æ•°ï¼Œä½†æ˜¯å½±å“å«æ˜Ÿåœ¨â€œæ·±åº¦â€æ–¹å‘ä¸Šçš„è¿åŠ¨ã€‚è¿™ä¸ªå€¼çš„å˜åŒ–èŒƒå›´åœ¨-20åˆ°+20ä¹‹é—´ï¼Œè¿™ä¸ªå˜åŒ–èŒƒå›´å°äºyè½´ï¼Œæ„å‘³ç€åœ¨è¿™ä¸ªæ–¹å‘ä¸Šçš„æŒ¯åŠ¨å¹…åº¦è¾ƒå°ã€‚</li><li><code>rot += Math.random() * 0.8</code> è¿™éƒ¨åˆ†ä»£ç æ˜¯ä¸ºäº†åœ¨æ¯æ¬¡åŠ¨ç”»å¾ªç¯æ—¶å¢åŠ  <code>rot</code>çš„å€¼ï¼Œè€Œä¸”æ¯æ¬¡å¢åŠ çš„å€¼æ˜¯éšæœºçš„ï¼Œæœ€å¤§ä¸è¶…è¿‡0.8åº¦ã€‚è¿™å°†ä¸ºå«æ˜Ÿè¿åŠ¨æ·»åŠ ä¸€ä¸ªéšæœºæ€§ï¼Œä½¿å…¶è½¨è¿¹æ›´åŠ è‡ªç„¶ï¼Œè€Œä¸æ˜¯å®Œç¾çš„åœ†å½¢æˆ–è€…è§„åˆ™å¾ªç¯ã€‚</li><li><code>let radian = (Math.PI * rot) / 180</code> è¿™è¡Œå°†è§’åº¦ <code>rot</code>è½¬æ¢ä¸ºå¼§åº¦ã€‚</li></ul><p>ä¸ºä»€ä¹ˆxè½´ä½¿ç”¨ <code>Math.cos</code> è€Œyè½´å’Œzè½´ä½¿ç”¨ <code>Math.sin</code> å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨2Då‚æ•°åŒ–æ›²çº¿ä¸­ï¼Œå¸¸å¸¸ä½¿ç”¨ <code>cos(t)</code> è¡¨ç¤ºxåæ ‡ï¼Œ<code>sin(t)</code> è¡¨ç¤ºyåæ ‡ï¼Œè¿™æ ·å¯ä»¥åˆ›å»ºä¸€ä¸ªåœ†ã€‚åœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ­£å¼¦å‡½æ•°æ¥æ§åˆ¶å¦å¤–ä¸¤ä¸ªç»´åº¦ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯yå’Œzï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å°†2Dåœ†å½¢è¿åŠ¨æ‰©å±•åˆ°3Dç©ºé—´ã€‚</p><p>é€šè¿‡è¿™æ ·è®¾ç½®ï¼Œä½ å¯ä»¥è®©å«æ˜Ÿåœ¨xå’Œyè½´ä¸Šåšåœ†å‘¨è¿åŠ¨ï¼Œè€Œzè½´çš„è¿åŠ¨åˆ™åˆ›å»ºäº†é«˜åº¦çš„å˜åŒ–ï¼Œè¿™å¯ä»¥æ¨¡æ‹Ÿä¾‹å¦‚å€¾æ–œçš„è½¨é“æˆ–è€…å…¶å®ƒä¸åŒäºæ ‡å‡†åœ†å½¢è½¨é“çš„è·¯å¾„ã€‚é€šè¿‡æ”¹å˜å„è½´ä¸Šæ­£å¼¦å’Œä½™å¼¦å‡½æ•°å‰çš„ç³»æ•°ï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸åŒçš„æ¤­åœ†è½¨é“ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä¸åŒè½´ä¸Šçš„è¿åŠ¨ä½¿ç”¨ä¸åŒçš„æ­£å¼¦ä½™å¼¦å€¼ï¼Œä»¥åŠå®ƒä»¬å‰é¢çš„ç³»æ•°ä¸åŒã€‚</p><p><img src="https://s2.loli.net/2024/03/25/Ioq7PRSjt3cJ8mG.png"></p><h2 id="ç›¸æœº"><a href="#ç›¸æœº" class="headerlink" title="ç›¸æœº"></a>ç›¸æœº</h2><p>é€šè¿‡è®¾ç½®ç›¸æœºï¼Œå¯ä»¥æ”¹å˜ç‰©ä½“å‘ˆç°çš„è§’åº¦ï¼Œä¹Ÿå°±æ˜¯åœ¨è°ƒæ•´ç‰©ä½“ä½ç½®çš„æ–¹æ¡ˆä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥è°ƒæ•´ç›¸æœºçš„ä½ç½®ã€‚</p><h2 id="å¤–éƒ¨èµ„æºåŠ è½½"><a href="#å¤–éƒ¨èµ„æºåŠ è½½" class="headerlink" title="å¤–éƒ¨èµ„æºåŠ è½½"></a>å¤–éƒ¨èµ„æºåŠ è½½</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EarthStar.jsx:69 THREE.OBJLoader: Unexpected line: &quot;&lt;!DOCTYPE html&gt;&quot;</span><br><span class="line">Promise.then</span><br><span class="line">(anonymous)@EarthStar.jsx:69</span><br><span class="line">Promise.then</span><br><span class="line">EarthStar@EarthStar.jsx:64</span><br><span class="line">Show 20 more frames</span><br></pre></td></tr></table></figure><p>éœ€è¦å°†æ¨¡å‹æ”¾åˆ°publicç›®å½•é‡Œé¢ï¼ŒåŒæ—¶vite.config.jsçš„é…ç½®é‡ŒåŠ å…¥ï¼š<code>assetsInclude: [&#39;**/*.glb&#39;, &#39;**/*.mtl&#39;, &#39;**/*.gltf&#39;],</code></p><hr><p>å¦‚æœä½ åœ¨ä½¿ç”¨ Vite å’Œ Vueï¼Œå¹¶ä¸”çœ‹åˆ°ç½‘ç»œè¯·æ±‚çš„çŠ¶æ€ç ä¸º <code>304 Not Modified</code>ï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨å·²ç»ç¼“å­˜äº† <code>earth.obj</code> æ–‡ä»¶ï¼Œå¹¶ä¸”æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨è‡ªä»ä¸Šæ¬¡è¯·æ±‚ä»¥æ¥æ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥æµè§ˆå™¨å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„ç‰ˆæœ¬ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ é‡åˆ° <code>THREE.OBJLoader: Unexpected line: &quot;&lt;!doctype html&gt;&quot;</code> çš„è­¦å‘Šï¼Œé‚£è¯´æ˜ OBJLoader å®é™…ä¸Šè§£æåˆ°çš„æ˜¯ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ OBJ æ–‡ä»¶ã€‚è¿™é€šå¸¸è¯´æ˜åœ¨è¯·æ±‚OBJæ–‡ä»¶æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼ŒæœåŠ¡å™¨è¿”å›äº†ä¸€ä¸ªHTMLé”™è¯¯é¡µé¢è€Œä¸æ˜¯æ–‡ä»¶å†…å®¹ã€‚</p><p>ç”±äºä½ çœ‹åˆ°çš„æ˜¯304çŠ¶æ€ç ï¼Œè€Œä¸æ˜¯200æˆ–404ï¼Œè¿™è¡¨æ˜å¯èƒ½å­˜åœ¨ä»¥ä¸‹æƒ…å†µï¼š</p><ol><li><strong>Viteçš„é™æ€æ–‡ä»¶å¤„ç†</strong> ï¼šViteåœ¨å¼€å‘æ¨¡å¼ä¸‹å¯èƒ½å¯¹é™æ€èµ„æºçš„å¤„ç†æœ‰æ‰€ä¸åŒï¼Œç¡®ä¿ <code>earth.obj</code>æ–‡ä»¶æ”¾åœ¨äº† <code>public</code>ç›®å½•ä¸‹ï¼Œè€Œä¸æ˜¯ <code>src</code>ç›®å½•ä¸‹ã€‚åœ¨Viteä¸­ï¼Œ<code>public</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«å¤„ç†ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ã€‚</li><li><strong>ç¼“å­˜é—®é¢˜</strong> ï¼šå¯èƒ½æµè§ˆå™¨ç¼“å­˜äº†é”™è¯¯çš„å†…å®¹ã€‚å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œæˆ–è€…åœ¨å¼€å‘è€…å·¥å…·ä¸­ç¦ç”¨ç¼“å­˜ï¼ˆåœ¨Networkæ ‡ç­¾é¡µï¼Œå‹¾é€‰Disable cacheï¼‰ï¼Œç„¶åå†æ¬¡åŠ è½½é¡µé¢ã€‚</li><li><strong>é”™è¯¯é¡µé¢</strong> ï¼šå°½ç®¡çŠ¶æ€ç ä¸º304ï¼Œä½†æ˜¯å¦‚æœæœåŠ¡å™¨åœ¨ä¹‹å‰çš„è¯·æ±‚ä¸­è¿”å›äº†é”™è¯¯ï¼Œæµè§ˆå™¨å¯èƒ½ç¼“å­˜äº†é”™è¯¯é¡µé¢ã€‚æ£€æŸ¥ViteæœåŠ¡å™¨çš„é…ç½®æˆ–æ§åˆ¶å°è¾“å‡ºä»¥ç¡®å®šæ˜¯å¦æœ‰é”™è¯¯ã€‚</li><li><strong>æ­£ç¡®çš„MIMEç±»å‹</strong> ï¼šViteåº”è¯¥è‡ªåŠ¨ä¸º <code>.obj</code>æ–‡ä»¶æä¾›æ­£ç¡®çš„MIMEç±»å‹ï¼Œä½†æ˜¯å¦‚æœæœ‰ä»€ä¹ˆé…ç½®ä¸å½“ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨æ£€æŸ¥ã€‚</li></ol><p>åœ¨ä½ çš„ Vite é¡¹ç›®ä¸­ï¼ŒassetsInclude çš„é…ç½®é¡¹ç”¨äºæŒ‡å®šå“ªäº›é¢å¤–çš„æ–‡ä»¶ç±»å‹åº”è¢«è§†ä¸ºé™æ€èµ„æºè¿›è¡Œå¤„ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVite å·²ç»å†…ç½®äº†å¯¹å¸¸è§çš„é™æ€èµ„æºæ–‡ä»¶ç±»å‹çš„å¤„ç†ï¼Œå¦‚å›¾ç‰‡å’Œåª’ä½“æ–‡ä»¶ã€‚å¯¹äº 3D æ¨¡å‹æ–‡ä»¶å¦‚ .glbã€.gltfã€.obj å’Œ .mtlï¼Œéœ€è¦ç‰¹åˆ«æŒ‡å®šï¼Œä»¥ä¾¿ Vite èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å®ƒä»¬ã€‚</p><p>ä½ æåˆ° .glb ç±»å‹çš„æ¨¡å‹å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œè€Œå…¶ä»–ç±»å‹çš„æ¨¡å‹éœ€è¦æ”¾åˆ° public ç›®å½•ä¸‹æ‰å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œè¿™å¯èƒ½ä¸å‡ ä¸ªå› ç´ æœ‰å…³ï¼š</p><ul><li><p>Vite é…ç½®ï¼šç¡®ä¿ assetsInclude çš„è·¯å¾„åŒ¹é…æ˜¯æ­£ç¡®çš„ã€‚ä½ çš„é…ç½®å·²ç»åŒ…æ‹¬äº†å¯¹è¿™äº›æ–‡ä»¶ç±»å‹çš„å…¨å±€åŒ¹é…ã€‚æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ‹¼å†™é”™è¯¯æˆ–è·¯å¾„é”™è¯¯ã€‚é€šé…ç¬¦ **&#x2F;* è¡¨ç¤ºåŒ¹é…ä»»æ„æ·±åº¦çš„æ–‡ä»¶å¤¹ä¸­çš„æŒ‡å®šæ–‡ä»¶ç±»å‹ã€‚</p></li><li><p>æ¨¡å—è§£æï¼šVite åœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨ JavaScript æ¨¡å—è§£ææ¥å¤„ç†èµ„æºã€‚å¦‚æœä½ çš„ .obj æˆ– .mtl æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®åœ°è¯†åˆ«ä¸ºæ¨¡å—ï¼Œå®ƒä»¬å¯èƒ½ä¸ä¼šé€šè¿‡ Vite çš„å¤„ç†æµç¨‹ã€‚ç¡®ä¿è¿™äº›æ–‡ä»¶åœ¨å¯¼å…¥æ—¶çš„è·¯å¾„æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”ç›¸å¯¹äºé¡¹ç›®çš„æ ¹ç›®å½•ã€‚</p></li><li><p>èµ„æºå¼•ç”¨ï¼šæ£€æŸ¥åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™äº›èµ„æºçš„æ–¹å¼ã€‚å¦‚æœä½ æ˜¯ä½¿ç”¨ ES æ¨¡å—è¯­æ³•ï¼ˆå¦‚ import model from â€˜.&#x2F;path&#x2F;to&#x2F;model.objâ€™ï¼‰ï¼ŒVite å°†å°è¯•å°†å…¶è§†ä¸ºæ¨¡å—æ¥å¤„ç†ã€‚å¦‚æœèµ„æºæ²¡æœ‰æŒ‰é¢„æœŸå¤„ç†ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´å¼•ç”¨æ–¹å¼æˆ–ç¡®è®¤æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚</p></li><li><p>ç¼“å­˜é—®é¢˜ï¼šæœ‰æ—¶å€™ï¼Œå¼€å‘æœåŠ¡å™¨çš„ç¼“å­˜å¯èƒ½å¯¼è‡´èµ„æºåŠ è½½è¡Œä¸ºä¸ä¸€è‡´ã€‚å°è¯•æ¸…é™¤ç¼“å­˜æˆ–é‡å¯ Vite æœåŠ¡å™¨çœ‹æ˜¯å¦æœ‰æ”¹è¿›ã€‚</p></li><li><p>Vite æ’ä»¶ï¼šå¯¹äºä¸€äº›ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ç‰¹å®šçš„ Vite æ’ä»¶æ¥æ”¯æŒã€‚ä¾‹å¦‚ï¼Œå¯¹äº 3D æ¨¡å‹æ–‡ä»¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨é€‚åˆå¤„ç†è¿™äº›æ–‡ä»¶çš„æ’ä»¶ã€‚</p></li></ul><p>æœ€åé€šè¿‡importæ–¹å¼å¼•å…¥ï¼Œå°±å¯ä»¥äº†ï¼Œä¸éœ€è¦æ”¾åˆ°publicç›®å½•é‡Œäº†ï¼›</p><p>ä½†æ‰“åŒ…çš„æ—¶å€™ï¼Œä¹Ÿå¯èƒ½ä¼šè¢«å¿½ç•¥ï¼ˆå‚è€ƒä½ ä¸å¾—ä»¥æ”¾è¿›å»çš„gltfModelsæ–‡ä»¶å¤¹???</p><h2 id="çƒä½“è´´å›¾æ²¡è´´ä¸Š"><a href="#çƒä½“è´´å›¾æ²¡è´´ä¸Š" class="headerlink" title="çƒä½“è´´å›¾æ²¡è´´ä¸Š"></a>çƒä½“è´´å›¾æ²¡è´´ä¸Š</h2><p>mtlæ–‡ä»¶é‡Œå…³è”äº†è´´å›¾ï¼Œæ‰€ä»¥è´´å›¾ä¹Ÿè¦ä¸€èµ·æ‹·è´è¿‡æ¥ï¼›</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ•°å­—åœ°çƒæ˜Ÿç©º&quot;&gt;&lt;a href=&quot;#æ•°å­—åœ°çƒæ˜Ÿç©º&quot; class=&quot;headerlink&quot; title=&quot;æ•°å­—åœ°çƒæ˜Ÿç©º&quot;&gt;&lt;/a&gt;æ•°å­—åœ°çƒæ˜Ÿç©º&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ•™ç¨‹ï¼š&lt;a href=&quot;https://juejin.cn/post/71450640951782932</summary>
      
    
    
    
    <category term="3d" scheme="https://youxt-njnu.github.io/categories/3d/"/>
    
    
    <category term="threejs" scheme="https://youxt-njnu.github.io/tags/threejs/"/>
    
    <category term="react" scheme="https://youxt-njnu.github.io/tags/react/"/>
    
    <category term="vue" scheme="https://youxt-njnu.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptåŸºç¡€çŸ¥è¯†â…¢</title>
    <link href="https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A2/"/>
    <id>https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A2/</id>
    <published>2024-03-17T01:33:26.000Z</published>
    <updated>2024-03-17T01:42:27.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h2 id="11-å¯¹è±¡"><a href="#11-å¯¹è±¡" class="headerlink" title="11. å¯¹è±¡"></a>11. å¯¹è±¡</h2><ul><li><p><strong>åˆ©ç”¨å­—é¢é‡åˆ›å»ºå¯¹è±¡</strong></p><h5 id="ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š"><a href="#ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š" class="headerlink" title="ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼š"></a><strong>ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡</strong>ï¼š</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°±æ˜¯èŠ±æ‹¬å· &#123; &#125; é‡Œé¢åŒ…å«äº†è¡¨è¾¾è¿™ä¸ªå…·ä½“äº‹ç‰©ï¼ˆå¯¹è±¡ï¼‰çš„å±æ€§å’Œæ–¹æ³•ï¼›&#123; &#125; é‡Œé¢é‡‡å–é”®å€¼å¯¹çš„å½¢å¼è¡¨ç¤º </span><br></pre></td></tr></table></figure><ul><li><p>é”®ï¼šç›¸å½“äºå±æ€§å</p></li><li><p>å€¼ï¼šç›¸å½“äºå±æ€§å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ï¼ˆæ•°å­—ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹ï¼Œå‡½æ•°ç±»å‹ç­‰ï¼‰<br>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var star = &#123;</span><br><span class="line"> Â  Â name : &#x27;pink&#x27;,</span><br><span class="line"> Â  Â age : 18,</span><br><span class="line"> Â  Â sex : &#x27;ç”·&#x27;,</span><br><span class="line"> Â  Â sayHi : function()&#123;</span><br><span class="line"> Â  Â  Â  Â alert(&#x27;å¤§å®¶å¥½å•Š~&#x27;);</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ starå³æ˜¯åˆ›å»ºçš„å¯¹è±¡ã€‚</p></li></ul></li><li><p>å¯¹è±¡çš„ä½¿ç”¨</p><ul><li><p>å¯¹è±¡çš„å±æ€§</p><ul><li>å¯¹è±¡ä¸­å­˜å‚¨å…·ä½“æ•°æ®çš„ â€œé”®å€¼å¯¹â€ä¸­çš„ â€œé”®â€ç§°ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œå³å¯¹è±¡ä¸­å­˜å‚¨å…·ä½“æ•°æ®çš„é¡¹</li></ul></li><li><p>å¯¹è±¡çš„æ–¹æ³•</p><ul><li>å¯¹è±¡ä¸­å­˜å‚¨å‡½æ•°çš„ â€œé”®å€¼å¯¹â€ä¸­çš„ â€œé”®â€ç§°ä¸ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå³å¯¹è±¡ä¸­å­˜å‚¨å‡½æ•°çš„é¡¹</li></ul></li><li><p>è®¿é—®å¯¹è±¡çš„å±æ€§</p><ul><li>å¯¹è±¡é‡Œé¢çš„å±æ€§è°ƒç”¨ : å¯¹è±¡.å±æ€§å ï¼Œè¿™ä¸ªå°ç‚¹ . å°±ç†è§£ä¸ºâ€œ çš„ â€</li><li>å¯¹è±¡é‡Œé¢å±æ€§çš„å¦ä¸€ç§è°ƒç”¨æ–¹å¼ : å¯¹è±¡[â€˜å±æ€§åâ€™]ï¼Œæ³¨æ„æ–¹æ‹¬å·é‡Œé¢çš„å±æ€§å¿…é¡»åŠ å¼•å·<br><strong>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(star.name) Â  Â  // è°ƒç”¨åå­—å±æ€§</span><br><span class="line">console.log(star[&#x27;name&#x27;]) Â // è°ƒç”¨åå­—å±æ€§</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</strong></p><ul><li>å¯¹è±¡é‡Œé¢çš„æ–¹æ³•è°ƒç”¨ï¼šå¯¹è±¡.æ–¹æ³•å() ï¼Œæ³¨æ„è¿™ä¸ªæ–¹æ³•åå­—åé¢ä¸€å®šåŠ æ‹¬å·<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">star.sayHi(); Â  Â  Â  Â  Â  Â  Â // è°ƒç”¨ sayHi æ–¹æ³•,æ³¨æ„ï¼Œä¸€å®šä¸è¦å¿˜è®°å¸¦åé¢çš„æ‹¬å·</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å˜é‡ã€å±æ€§ã€å‡½æ•°ã€æ–¹æ³•æ€»ç»“</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å±æ€§æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå˜é‡ä¸æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå˜é‡æ˜¯å•ç‹¬å­˜å‚¨æ•°æ®çš„å®¹å™¨</span><br></pre></td></tr></table></figure><ul><li>å˜é‡ï¼šå•ç‹¬å£°æ˜èµ‹å€¼ï¼Œå•ç‹¬å­˜åœ¨</li><li>å±æ€§ï¼šå¯¹è±¡é‡Œé¢çš„å˜é‡ç§°ä¸ºå±æ€§ï¼Œä¸éœ€è¦å£°æ˜ï¼Œç”¨æ¥æè¿°è¯¥å¯¹è±¡çš„ç‰¹å¾<br>æ–¹æ³•æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå‡½æ•°ä¸æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå‡½æ•°æ˜¯å•ç‹¬å°è£…æ“ä½œçš„å®¹å™¨</li><li>å‡½æ•°ï¼šå•ç‹¬å­˜åœ¨çš„ï¼Œé€šè¿‡â€œå‡½æ•°å()â€çš„æ–¹å¼å°±å¯ä»¥è°ƒç”¨</li><li>æ–¹æ³•ï¼šå¯¹è±¡é‡Œé¢çš„å‡½æ•°ç§°ä¸ºæ–¹æ³•ï¼Œæ–¹æ³•ä¸éœ€è¦å£°æ˜ï¼Œä½¿ç”¨â€œå¯¹è±¡.æ–¹æ³•å()â€çš„æ–¹å¼å°±å¯ä»¥è°ƒç”¨ï¼Œæ–¹æ³•ç”¨æ¥æè¿°è¯¥å¯¹è±¡çš„è¡Œä¸ºå’ŒåŠŸèƒ½</li></ul></li></ul></li><li><p><strong>åˆ©ç”¨ new Object åˆ›å»ºå¯¹è±¡</strong></p><ul><li><p>åˆ›å»ºç©ºå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var andy = new Obect();</span><br></pre></td></tr></table></figure><p>é€šè¿‡å†…ç½®æ„é€ å‡½æ•°Objectåˆ›å»ºå¯¹è±¡ï¼Œæ­¤æ—¶andyå˜é‡å·²ç»ä¿å­˜äº†åˆ›å»ºå‡ºæ¥çš„ç©ºå¯¹è±¡</p></li><li><p>ç»™ç©ºå¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</p><ul><li>é€šè¿‡å¯¹è±¡æ“ä½œå±æ€§å’Œæ–¹æ³•çš„æ–¹å¼ï¼Œæ¥ä¸ºå¯¹è±¡å¢åŠ å±æ€§å’Œæ–¹æ³•<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">andy.name = &#x27;pink&#x27;;</span><br><span class="line">andy.age = 18;</span><br><span class="line">andy.sex = &#x27;ç”·&#x27;;</span><br><span class="line">andy.sayHi = function()&#123;</span><br><span class="line"> Â  Â alert(&#x27;å¤§å®¶å¥½å•Š~&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>Object() ï¼šç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™</li><li>new Object() ï¼šéœ€è¦ new å…³é”®å­—</li><li>ä½¿ç”¨çš„æ ¼å¼ï¼šå¯¹è±¡.å±æ€§ &#x3D;  å€¼;</li></ul></li></ul></li><li><p><strong>åˆ©ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</strong></p><ul><li>æ„é€ å‡½æ•°<ul><li><p>æ„é€ å‡½æ•°ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œå³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œå®ƒæ€»ä¸ new è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå¯¹è±¡ä¸­ä¸€äº›å…¬å…±çš„å±æ€§å’Œæ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œç„¶åå°è£…åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚</p></li><li><p>æ„é€ å‡½æ•°çš„å°è£…æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function æ„é€ å‡½æ•°å(å½¢å‚1,å½¢å‚2,å½¢å‚3) &#123;</span><br><span class="line"> Â  Â  this.å±æ€§å1 = å‚æ•°1;</span><br><span class="line"> Â  Â  this.å±æ€§å2 = å‚æ•°2;</span><br><span class="line"> Â  Â  this.å±æ€§å3 = å‚æ•°3;</span><br><span class="line"> Â  Â  this.æ–¹æ³•å = å‡½æ•°ä½“;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ„é€ å‡½æ•°çš„è°ƒç”¨æ ¼å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var obj = new æ„é€ å‡½æ•°å(å®å‚1ï¼Œå®å‚2ï¼Œå®å‚3)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œobjå³æ¥æ”¶åˆ°æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ã€‚</p></li><li><p>æ³¨æ„äº‹é¡¹</p><ol><li>æ„é€ å‡½æ•°çº¦å®šé¦–å­—æ¯å¤§å†™ã€‚</li><li>å‡½æ•°å†…çš„å±æ€§å’Œæ–¹æ³•å‰é¢éœ€è¦æ·»åŠ <strong>this</strong> ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li><strong>æ„é€ å‡½æ•°ä¸­ä¸éœ€è¦ return è¿”å›ç»“æœ</strong>ã€‚</li><li>å½“æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»ç”¨ new æ¥è°ƒç”¨æ„é€ å‡½æ•°ã€‚</li></ol></li><li><p><strong>å…¶ä»–</strong><br>æ„é€ å‡½æ•°ï¼Œå¦‚ Stars()ï¼ŒæŠ½è±¡äº†å¯¹è±¡çš„å…¬å…±éƒ¨åˆ†ï¼Œå°è£…åˆ°äº†å‡½æ•°é‡Œé¢ï¼Œå®ƒæ³›æŒ‡æŸä¸€å¤§ç±»ï¼ˆclassï¼‰<br>åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ new Stars()ï¼Œç‰¹æŒ‡æŸä¸€ä¸ªï¼Œé€šè¿‡ new å…³é”®å­—åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æˆ‘ä»¬ä¹Ÿç§°ä¸ºå¯¹è±¡å®ä¾‹åŒ–</p></li></ul></li></ul></li><li><p><strong>newå…³é”®å­—çš„ä½œç”¨</strong></p><ol><li>åœ¨æ„é€ å‡½æ•°ä»£ç å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li><li>ä¿®æ”¹thisçš„æŒ‡å‘ï¼ŒæŠŠthisæŒ‡å‘åˆ›å»ºå‡ºæ¥çš„ç©ºå¯¹è±¡ï¼›</li><li>æ‰§è¡Œå‡½æ•°çš„ä»£ç </li><li>åœ¨å‡½æ•°å®Œæˆä¹‹åï¼Œè¿”å›thisâ€”å³åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</li></ol><h3 id="5-3-éå†å¯¹è±¡"><a href="#5-3-éå†å¯¹è±¡" class="headerlink" title="5.3 éå†å¯¹è±¡"></a>5.3 éå†å¯¹è±¡</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for...in è¯­å¥ç”¨äºå¯¹æ•°ç»„æˆ–è€…å¯¹è±¡çš„å±æ€§è¿›è¡Œå¾ªç¯æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">å…¶è¯­æ³•å¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (å˜é‡ in å¯¹è±¡åå­—) &#123;</span><br><span class="line"> Â  Â // åœ¨æ­¤æ‰§è¡Œä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ä¸­çš„å˜é‡æ˜¯è‡ªå®šä¹‰çš„ï¼Œå®ƒéœ€è¦ç¬¦åˆå‘½åè§„èŒƒï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°†è¿™ä¸ªå˜é‡å†™ä¸º k æˆ–è€… keyã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (var k in obj) &#123;</span><br><span class="line"> Â  Â console.log(k); Â  Â  Â // è¿™é‡Œçš„ k æ˜¯å±æ€§å</span><br><span class="line"> Â  Â console.log(obj[k]); // è¿™é‡Œçš„ obj[k] æ˜¯å±æ€§å€¼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-1-å†…ç½®å¯¹è±¡"><a href="#1-1-å†…ç½®å¯¹è±¡" class="headerlink" title="1.1 å†…ç½®å¯¹è±¡"></a>1.1 å†…ç½®å¯¹è±¡</h3><p>JavaScript ä¸­çš„å¯¹è±¡åˆ†ä¸º3ç§ï¼šè‡ªå®šä¹‰å¯¹è±¡ ã€å†…ç½®å¯¹è±¡ã€ æµè§ˆå™¨å¯¹è±¡<br><strong>å‰é¢ä¸¤ç§å¯¹è±¡æ˜¯JS åŸºç¡€å†…å®¹ï¼Œå±äº ECMAScriptï¼›  ç¬¬ä¸‰ä¸ªæµè§ˆå™¨å¯¹è±¡å±äº JS ç‹¬æœ‰çš„ï¼Œ JS API è®²è§£å†…ç½®å¯¹è±¡å°±æ˜¯æŒ‡ JS è¯­è¨€è‡ªå¸¦çš„ä¸€äº›å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå¹¶æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æˆ–æ˜¯</strong>æœ€åŸºæœ¬è€Œå¿…è¦çš„åŠŸèƒ½ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå†…ç½®å¯¹è±¡æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¼€å‘</p><p>**JavaScript æä¾›äº†å¤šä¸ªå†…ç½®å¯¹è±¡ï¼šMathã€ Date ã€Arrayã€Stringç­‰    **</p><h3 id="1-2-æŸ¥æ–‡æ¡£"><a href="#1-2-æŸ¥æ–‡æ¡£" class="headerlink" title="1.2 æŸ¥æ–‡æ¡£"></a>1.2 æŸ¥æ–‡æ¡£</h3><p>æŸ¥æ‰¾æ–‡æ¡£ï¼šå­¦ä¹ ä¸€ä¸ªå†…ç½®å¯¹è±¡çš„ä½¿ç”¨ï¼Œåªè¦å­¦ä¼šå…¶å¸¸ç”¨æˆå‘˜çš„ä½¿ç”¨å³å¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥æ–‡æ¡£å­¦ä¹ ï¼Œå¯ä»¥é€šè¿‡MDN&#x2F;W3Cæ¥æŸ¥è¯¢ã€‚<br>Mozilla å¼€å‘è€…ç½‘ç»œï¼ˆMDNï¼‰æä¾›äº†æœ‰å…³å¼€æ”¾ç½‘ç»œæŠ€æœ¯ï¼ˆOpen Webï¼‰çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ HTMLã€CSS å’Œä¸‡ç»´ç½‘åŠ HTML5 åº”ç”¨çš„ APIã€‚<br>MDN:<a href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p><h3 id="1-3-Mathå¯¹è±¡"><a href="#1-3-Mathå¯¹è±¡" class="headerlink" title="1.3 Mathå¯¹è±¡"></a>1.3 Mathå¯¹è±¡</h3><p>Math å¯¹è±¡ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œå®ƒå…·æœ‰æ•°å­¦å¸¸æ•°å’Œå‡½æ•°çš„å±æ€§å’Œæ–¹æ³•ã€‚è·Ÿæ•°å­¦ç›¸å…³çš„è¿ç®—ï¼ˆæ±‚ç»å¯¹å€¼ï¼Œå–æ•´ã€æœ€å¤§å€¼ç­‰ï¼‰å¯ä»¥ä½¿ç”¨ Math ä¸­çš„æˆå‘˜ã€‚</p><table><thead><tr><th>å±æ€§ã€æ–¹æ³•å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Math.PI</td><td>åœ†å‘¨ç‡</td></tr><tr><td>Math.floor()</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>Math.ceil()</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>Math.round()</td><td>å››èˆäº”å…¥ç‰ˆ å°±è¿‘å–æ•´   æ³¨æ„ -3.5   ç»“æœæ˜¯  -3</td></tr><tr><td>Math.abs()</td><td>ç»å¯¹å€¼</td></tr><tr><td>Math.max()&#x2F;Math.min()</td><td>æ±‚æœ€å¤§å’Œæœ€å°å€¼</td></tr><tr><td>Math.random()</td><td>è·å–èŒƒå›´åœ¨[0,1)å†…çš„éšæœºå€¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼šä¸Šé¢çš„æ–¹æ³•ä½¿ç”¨æ—¶å¿…é¡»å¸¦æ‹¬å·</strong></p><p>è·å–æŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•´æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function getRandom(min, max) &#123;</span><br><span class="line"> Â return Math.floor(Math.random() * (max - min + 1)) + min; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åˆ©ç”¨å¯¹è±¡å°è£…è‡ªå·±çš„æ•°å­¦å¯¹è±¡  é‡Œé¢æœ‰ PI æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br><span class="line"> Â  Â  Â  Â var myMath = &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â PI: 3.141592653,</span><br><span class="line"> Â  Â  Â  Â  Â  Â max: function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â var max = arguments[0];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â for (var i = 1; i &lt; arguments.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (arguments[i] &gt; max) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â max = arguments[i];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â return max;</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;,</span><br><span class="line"> Â  Â  Â  Â  Â  Â min: function() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â var min = arguments[0];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â for (var i = 1; i &lt; arguments.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (arguments[i] &lt; min) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â min = arguments[i];</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â return min;</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.PI);</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.max(1, 5, 9));</span><br><span class="line"> Â  Â  Â  Â console.log(myMath.min(1, 5, 9));</span><br></pre></td></tr></table></figure><h3 id="1-4-æ—¥æœŸå¯¹è±¡"><a href="#1-4-æ—¥æœŸå¯¹è±¡" class="headerlink" title="1.4 æ—¥æœŸå¯¹è±¡"></a>1.4 æ—¥æœŸå¯¹è±¡</h3><p>Date å¯¹è±¡å’Œ Math å¯¹è±¡ä¸ä¸€æ ·ï¼ŒDateæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨å…¶ä¸­å…·ä½“æ–¹æ³•å’Œå±æ€§ã€‚Date å®ä¾‹ç”¨æ¥å¤„ç†æ—¥æœŸå’Œæ—¶é—´</p><ul><li><p>ä½¿ç”¨Dateå®ä¾‹åŒ–æ—¥æœŸå¯¹è±¡</p><ul><li>è·å–å½“å‰æ—¶é—´å¿…é¡»å®ä¾‹åŒ–ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var now = new Date();</span><br></pre></td></tr></table></figure><ul><li>è·å–æŒ‡å®šæ—¶é—´çš„æ—¥æœŸå¯¹è±¡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var future = new Date(&#x27;2019/5/1&#x27;);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœåˆ›å»ºå®ä¾‹æ—¶å¹¶æœªä¼ å…¥å‚æ•°ï¼Œåˆ™å¾—åˆ°çš„æ—¥æœŸå¯¹è±¡æ˜¯å½“å‰æ—¶é—´å¯¹åº”çš„æ—¥æœŸå¯¹è±¡</p></li><li><p><strong>ä½¿ç”¨Dateå®ä¾‹çš„æ–¹æ³•å’Œå±æ€§</strong><br><img src="https://s2.loli.net/2024/03/17/Bt7q6c4fYMbLpgr.png" alt="å›¾ç‰‡1"></p></li><li><p>é€šè¿‡Dateå®ä¾‹è·å–æ€»æ¯«ç±³æ•°</p><ul><li>æ€»æ¯«ç§’æ•°çš„å«ä¹‰<br>åŸºäº1970å¹´1æœˆ1æ—¥ï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰èµ·çš„æ¯«ç§’æ•°</li><li>è·å–æ€»æ¯«ç§’æ•°<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å®ä¾‹åŒ–Dateå¯¹è±¡</span><br><span class="line">var now = new Date();</span><br><span class="line">// 1. ç”¨äºè·å–å¯¹è±¡çš„åŸå§‹å€¼</span><br><span class="line">console.log(date.valueOf()) Â  Â </span><br><span class="line">console.log(date.getTime()) Â  Â </span><br><span class="line">// 2. ç®€å•å†™å¯ä»¥è¿™ä¹ˆåš</span><br><span class="line">var now = + new Date(); Â  Â  Â  Â  Â  Â </span><br><span class="line">// 3. HTML5ä¸­æä¾›çš„æ–¹æ³•ï¼Œæœ‰å…¼å®¹æ€§é—®é¢˜</span><br><span class="line">var now = Date.now();</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="1-5-æ•°ç»„å¯¹è±¡"><a href="#1-5-æ•°ç»„å¯¹è±¡" class="headerlink" title="1.5 æ•°ç»„å¯¹è±¡"></a>1.5 æ•°ç»„å¯¹è±¡</h3><h4 id="åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼"><a href="#åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼"></a>åˆ›å»ºæ•°ç»„çš„ä¸¤ç§æ–¹å¼</h4><ul><li>å­—é¢é‡æ–¹å¼<ul><li>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1,&quot;test&quot;,true];</span><br></pre></td></tr></table></figure></li></ul></li><li>new Array()<ul><li><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = new Array();</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸Šé¢ä»£ç ä¸­arråˆ›å»ºå‡ºçš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ„é€ å‡½æ•°Arrayåˆ›å»ºéç©ºæ•°ç»„ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ•°ç»„æ—¶ä¼ å…¥å‚æ•°</p><p>å‚æ•°ä¼ é€’è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœåªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å‚æ•°è§„å®šäº†æ•°ç»„çš„é•¿åº¦</li><li>å¦‚æœä¼ å…¥äº†å¤šä¸ªå‚æ•°ï¼Œåˆ™å‚æ•°ç§°ä¸ºæ•°ç»„çš„å…ƒç´ </li></ul></li></ul></li></ul><h4 id="æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„"><a href="#æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„" class="headerlink" title="æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„"></a>æ£€æµ‹æ˜¯å¦ä¸ºæ•°ç»„</h4><ul><li>instanceof è¿ç®—ç¬¦<ul><li>instanceof å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 23];</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">console.log(arr instanceof Array); // true</span><br><span class="line">console.log(obj instanceof Array); // false</span><br></pre></td></tr></table></figure></li></ul></li><li>Array.isArray()<ul><li>Array.isArray()ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ï¼ŒisArray() æ˜¯ HTML5 ä¸­æä¾›çš„æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 23];</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">console.log(Array.isArray(arr)); Â  // true</span><br><span class="line">console.log(Array.isArray(obj)); Â  // false</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•"><a href="#æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•" class="headerlink" title="æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•"></a>æ·»åŠ åˆ é™¤æ•°ç»„å…ƒç´ çš„æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­æœ‰è¿›è¡Œå¢åŠ ã€åˆ é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨<br><img src="https://s2.loli.net/2024/03/17/uebmUwin5S3j91r.png" alt="pushpop"><br>æ³¨æ„ï¼špushã€unshiftä¸ºå¢åŠ å…ƒç´ æ–¹æ³•ï¼›popã€shiftä¸ºåˆ é™¤å…ƒç´ çš„æ–¹æ³•</li></ul><h4 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h4><ul><li><strong>æ•°ç»„ä¸­æœ‰å¯¹æ•°ç»„æœ¬èº«æ’åºçš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨</strong><br><img src="https://s2.loli.net/2024/03/17/DOPv2ZCqMBnpmsN.png"><br>æ³¨æ„ï¼šsortæ–¹æ³•éœ€è¦ä¼ å…¥å‚æ•°æ¥è®¾ç½®å‡åºã€é™åºæ’åº<ul><li>å¦‚æœä¼ å…¥â€œfunction(a,b){ return a-b;}â€ï¼Œåˆ™ä¸ºå‡åº</li><li>å¦‚æœä¼ å…¥â€œfunction(a,b){ return b-a;}â€ï¼Œåˆ™ä¸ºé™åº</li></ul></li></ul><h4 id="æ•°ç»„ç´¢å¼•æ–¹æ³•"><a href="#æ•°ç»„ç´¢å¼•æ–¹æ³•" class="headerlink" title="æ•°ç»„ç´¢å¼•æ–¹æ³•"></a>æ•°ç»„ç´¢å¼•æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­æœ‰è·å–æ•°ç»„æŒ‡å®šå…ƒç´ ç´¢å¼•å€¼çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨<br><img src="https://s2.loli.net/2024/03/17/IFPG26TQdrbw1NK.png"></li></ul><h4 id="æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"><a href="#æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"></a>æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h4><ul><li><strong>æ•°ç»„ä¸­æœ‰æŠŠæ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œéƒ¨åˆ†æ–¹æ³•å¦‚ä¸‹è¡¨</strong><br><img src="https://s2.loli.net/2024/03/17/fGBnsd1I65ZK7tz.png"><br><strong>æ³¨æ„ï¼šjoinæ–¹æ³•å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œåˆ™æŒ‰ç…§ â€œ , â€æ‹¼æ¥å…ƒç´ </strong></li></ul><h4 id="å…¶ä»–æ–¹æ³•"><a href="#å…¶ä»–æ–¹æ³•" class="headerlink" title="å…¶ä»–æ–¹æ³•"></a>å…¶ä»–æ–¹æ³•</h4><ul><li>æ•°ç»„ä¸­è¿˜æœ‰å…¶ä»–æ“ä½œæ–¹æ³•ï¼ŒåŒå­¦ä»¬å¯ä»¥åœ¨è¯¾ä¸‹è‡ªè¡ŒæŸ¥é˜…å­¦ä¹ <br><img src="https://s2.loli.net/2024/03/17/3iDC7uAtBHdKRGr.png"></li></ul><h3 id="1-6-å­—ç¬¦ä¸²å¯¹è±¡"><a href="#1-6-å­—ç¬¦ä¸²å¯¹è±¡" class="headerlink" title="1.6 å­—ç¬¦ä¸²å¯¹è±¡"></a>1.6 å­—ç¬¦ä¸²å¯¹è±¡</h3><h4 id="åŸºæœ¬åŒ…è£…ç±»å‹"><a href="#åŸºæœ¬åŒ…è£…ç±»å‹" class="headerlink" title="åŸºæœ¬åŒ…è£…ç±»å‹"></a>åŸºæœ¬åŒ…è£…ç±»å‹</h4><p>ä¸ºäº†æ–¹ä¾¿æ“ä½œåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒJavaScript è¿˜æä¾›äº†ä¸‰ä¸ªç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼šStringã€Numberå’Œ Booleanã€‚</p><p>åŸºæœ¬åŒ…è£…ç±»å‹å°±æ˜¯æŠŠç®€å•æ•°æ®ç±»å‹åŒ…è£…æˆä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œè¿™æ ·åŸºæœ¬æ•°æ®ç±»å‹å°±æœ‰äº†å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ä¸‹é¢ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span><br><span class="line">var str = &#x27;andy&#x27;;</span><br><span class="line">console.log(str.length);</span><br></pre></td></tr></table></figure><p>æŒ‰é“ç†åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ²¡æœ‰å±æ€§å’Œæ–¹æ³•çš„ï¼Œè€Œå¯¹è±¡æ‰æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†ä¸Šé¢ä»£ç å´å¯ä»¥æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºjsä¼šæŠŠåŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. ç”Ÿæˆä¸´æ—¶å˜é‡ï¼ŒæŠŠç®€å•ç±»å‹åŒ…è£…ä¸ºå¤æ‚æ•°æ®ç±»å‹</span><br><span class="line">var temp = new String(&#x27;andy&#x27;);</span><br><span class="line">// 2. èµ‹å€¼ç»™æˆ‘ä»¬å£°æ˜çš„å­—ç¬¦å˜é‡</span><br><span class="line">str = temp;</span><br><span class="line">// 3. é”€æ¯ä¸´æ—¶å˜é‡</span><br><span class="line">temp = null;</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²çš„ä¸å¯å˜"><a href="#å­—ç¬¦ä¸²çš„ä¸å¯å˜" class="headerlink" title="å­—ç¬¦ä¸²çš„ä¸å¯å˜"></a>å­—ç¬¦ä¸²çš„ä¸å¯å˜</h4><p>æŒ‡çš„æ˜¯é‡Œé¢çš„å€¼ä¸å¯å˜ï¼Œè™½ç„¶çœ‹ä¸Šå»å¯ä»¥æ”¹å˜å†…å®¹ï¼Œä½†å…¶å®æ˜¯åœ°å€å˜äº†ï¼Œå†…å­˜ä¸­æ–°å¼€è¾Ÿäº†ä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚</p><p>å½“é‡æ–°ç»™å­—ç¬¦ä¸²å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå˜é‡ä¹‹å‰ä¿å­˜çš„å­—ç¬¦ä¸²ä¸ä¼šè¢«ä¿®æ”¹ï¼Œä¾ç„¶åœ¨å†…å­˜ä¸­é‡æ–°ç»™å­—ç¬¦ä¸²èµ‹å€¼ï¼Œä¼šé‡æ–°åœ¨å†…å­˜ä¸­å¼€è¾Ÿç©ºé—´ï¼Œè¿™ä¸ªç‰¹ç‚¹å°±æ˜¯å­—ç¬¦ä¸²çš„ä¸å¯å˜ã€‚<br>ç”±äºå­—ç¬¦ä¸²çš„ä¸å¯å˜ï¼Œåœ¨****å¤§é‡æ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ä¼šæœ‰æ•ˆç‡é—®é¢˜</p><h4 id="æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®"><a href="#æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®" class="headerlink" title="æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®"></a>æ ¹æ®å­—ç¬¦è¿”å›ä½ç½®</h4><p>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯è¿”å›æŒ‡å®šå­—ç¬¦çš„ä½ç½®çš„æ–¹æ³•ï¼š</p><p><img src="https://s2.loli.net/2024/03/17/7QdYZoglVsuOrxw.png"></p><p><strong>æ¡ˆä¾‹ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²â€abcoefoxyozzoppâ€ä¸­æ‰€æœ‰oå‡ºç°çš„ä½ç½®ä»¥åŠæ¬¡æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var str = &quot;oabcoefoxyozzopp&quot;;</span><br><span class="line">var index = str.indexOf(&#x27;o&#x27;);</span><br><span class="line">var num = 0;</span><br><span class="line">// console.log(index);</span><br><span class="line">while (index !== -1) &#123;</span><br><span class="line"> Â  Â  Â console.log(index);</span><br><span class="line"> Â  Â  Â num++;</span><br><span class="line"> Â  Â  Â index = str.indexOf(&#x27;o&#x27;, index + 1);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;oå‡ºç°çš„æ¬¡æ•°æ˜¯: &#x27; + num);</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦"><a href="#æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦" class="headerlink" title="æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦"></a>æ ¹æ®ä½ç½®è¿”å›å­—ç¬¦</h4><p>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯æ ¹æ®ä½ç½®è¿”å›æŒ‡å®šä½ç½®ä¸Šçš„å­—ç¬¦ï¼š</p><p><img src="https://s2.loli.net/2024/03/17/6S5Z3Ezf4BYJH9T.png"></p><p>æ¡ˆä¾‹ï¼šåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸² â€˜abcoefoxyozzoppâ€™ ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œå¹¶ç»Ÿè®¡å…¶æ¬¡æ•°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> Â  Â  Â var o = &#123;&#125;;</span><br><span class="line"> Â  Â  Â var str = &quot;abcoefoxyozzopp&quot;;</span><br><span class="line"> Â  Â  Â // Â  for (var k in str) &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  if (o[str[k]]) &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  Â  o[str[k]]++;</span><br><span class="line"> Â  Â  Â // Â  Â  &#125; else &#123;</span><br><span class="line"> Â  Â  Â // Â  Â  Â  o[str[k]] = 1;</span><br><span class="line"> Â  Â  Â // Â  Â  &#125;</span><br><span class="line"> Â  Â  Â // Â  &#125;</span><br><span class="line"> Â  Â  Â for (var i = 0; i &lt; str.length; i++) &#123;</span><br><span class="line"> Â  Â  Â  Â var chars = str.charAt(i);</span><br><span class="line"> Â  Â  Â  Â if (o[chars]) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â o[chars]++;</span><br><span class="line"> Â  Â  Â   &#125; else &#123;</span><br><span class="line"> Â  Â  Â  Â  Â o[chars] = 1;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;</span><br><span class="line"> Â  Â  Â console.log(o);</span><br><span class="line"> Â  Â  Â var max = 0;</span><br><span class="line"> Â  Â  Â var ch = &quot;&quot;;</span><br><span class="line"> Â  Â  Â for (var k in o) &#123;</span><br><span class="line"> Â  Â  Â  Â if (o[k] &gt; max) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â max = o[k];</span><br><span class="line"> Â  Â  Â  Â  Â ch = k;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â   &#125;</span><br><span class="line"> Â  Â  Â console.log(max);</span><br><span class="line"> Â  Â  Â console.log(ch);</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"></a>å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•</h4><p><strong>å­—ç¬¦ä¸²é€šè¿‡åŸºæœ¬åŒ…è£…ç±»å‹å¯ä»¥è°ƒç”¨éƒ¨åˆ†æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ“ä½œæ–¹æ³•ï¼š</strong></p><p><img src="https://s2.loli.net/2024/03/17/zO5PavVILoNGh9l.png"></p><h4 id="replace-æ–¹æ³•"><a href="#replace-æ–¹æ³•" class="headerlink" title="replace()æ–¹æ³•"></a>replace()æ–¹æ³•</h4><p><strong>replace() æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œå…¶ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­—ç¬¦ä¸².replace(è¢«æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼Œ è¦æ›¿æ¢ä¸ºçš„å­—ç¬¦ä¸²)ï¼›</span><br></pre></td></tr></table></figure><h4 id="split-æ–¹æ³•"><a href="#split-æ–¹æ³•" class="headerlink" title="split()æ–¹æ³•"></a>split()æ–¹æ³•</h4><p><strong>split()æ–¹æ³•ç”¨äºåˆ‡åˆ†å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥å°†å­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºæ•°ç»„ã€‚åœ¨åˆ‡åˆ†å®Œæ¯•ä¹‹åï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­—ç¬¦ä¸².split(&quot;åˆ†å‰²å­—ç¬¦&quot;)</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚æ•°æ®ç±»å‹ä¼ å‚"><a href="#å¤æ‚æ•°æ®ç±»å‹ä¼ å‚" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹ä¼ å‚"></a>å¤æ‚æ•°æ®ç±»å‹ä¼ å‚</h3><p><strong>å‡½æ•°çš„å½¢å‚ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå½“æˆ‘ä»¬æŠŠå¼•ç”¨ç±»å‹å˜é‡ä¼ ç»™å½¢å‚æ—¶ï¼Œå…¶å®æ˜¯æŠŠå˜é‡åœ¨æ ˆç©ºé—´é‡Œä¿å­˜çš„å †åœ°å€å¤åˆ¶ç»™äº†å½¢å‚ï¼Œå½¢å‚å’Œå®å‚å…¶å®ä¿å­˜çš„æ˜¯åŒä¸€ä¸ªå †åœ°å€ï¼Œæ‰€ä»¥æ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function Person(name) &#123;//æ„é€ å‡½æ•°</span><br><span class="line"> Â  Â this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">function f1(x) &#123; // x = p</span><br><span class="line"> Â  Â console.log(x.name); // 2.åˆ˜å¾·å Â  </span><br><span class="line"> Â  Â x.name = &quot;å¼ å­¦å‹&quot;;</span><br><span class="line"> Â  Â console.log(x.name); // 3. å¼ å­¦å‹ Â </span><br><span class="line">&#125;</span><br><span class="line">var p = new Person(&quot;åˆ˜å¾·å&quot;); //å®ä¾‹</span><br><span class="line">console.log(p.name); Â  Â // 1.åˆ˜å¾·å</span><br><span class="line">f1(p);</span><br><span class="line">console.log(p.name); Â  Â // 4. å¼ å­¦å‹</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptåŸºç¡€çŸ¥è¯†â…¡</title>
    <link href="https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A1/"/>
    <id>https://youxt-njnu.github.io/2024/03/17/JS%E5%9F%BA%E7%A1%80%E2%85%A1/</id>
    <published>2024-03-17T01:27:26.000Z</published>
    <updated>2024-03-17T01:32:58.272Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote><p>æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›<br>ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›<br>åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£äº†è§£</p></blockquote><h2 id="7-è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰"><a href="#7-è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰" class="headerlink" title="7. è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰"></a>7. è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰</h2><p><strong>æµ®ç‚¹æ•°çš„ç²¾åº¦é—®é¢˜</strong></p><p><strong>æµ®ç‚¹æ•°å€¼çš„æœ€é«˜ç²¾åº¦æ˜¯ 17 ä½å°æ•°ï¼Œä½†åœ¨è¿›è¡Œç®—æœ¯è®¡ç®—æ—¶å…¶ç²¾ç¡®åº¦è¿œè¿œä¸å¦‚æ•´æ•°ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="number">0.1</span> + <span class="number">0.2</span>; Â  Â <span class="comment">// ç»“æœä¸æ˜¯ 0.3ï¼Œè€Œæ˜¯ï¼š0.30000000000000004</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0.07</span> * <span class="number">100</span>); Â  <span class="comment">// ç»“æœä¸æ˜¯ 7ï¼Œ  è€Œæ˜¯ï¼š7.000000000000001</span></span><br></pre></td></tr></table></figure><p><strong>æ‰€ä»¥ï¼šä¸è¦ç›´æ¥åˆ¤æ–­ä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ !</strong></p><h2 id="8-æ–­ç‚¹è°ƒè¯•"><a href="#8-æ–­ç‚¹è°ƒè¯•" class="headerlink" title="8. æ–­ç‚¹è°ƒè¯•"></a>8. æ–­ç‚¹è°ƒè¯•</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–­ç‚¹è°ƒè¯•æ˜¯æŒ‡è‡ªå·±åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œè°ƒè¯•æ—¶ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œå°±ä¼šåœä½ï¼Œç„¶åä½ å¯ä»¥ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è°ƒè¯•ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥çœ‹å„ä¸ªå˜é‡å½“å‰çš„å€¼ï¼Œå‡ºé”™çš„è¯ï¼Œè°ƒè¯•åˆ°å‡ºé”™çš„ä»£ç è¡Œå³æ˜¾ç¤ºé”™è¯¯ï¼Œåœä¸‹ã€‚æ–­ç‚¹è°ƒè¯•å¯ä»¥å¸®åŠ©è§‚å¯Ÿç¨‹åºçš„è¿è¡Œè¿‡ç¨‹</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–­ç‚¹è°ƒè¯•çš„æµç¨‹ï¼š</span><br><span class="line">1ã€æµè§ˆå™¨ä¸­æŒ‰ F12--&gt; sources --&gt;æ‰¾åˆ°éœ€è¦è°ƒè¯•çš„æ–‡ä»¶--&gt;åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®æ–­ç‚¹</span><br><span class="line">2ã€Watch: ç›‘è§†ï¼Œé€šè¿‡watchå¯ä»¥ç›‘è§†å˜é‡çš„å€¼çš„å˜åŒ–ï¼Œéå¸¸çš„å¸¸ç”¨ã€‚</span><br><span class="line">3ã€æ‘ä¸‹F11ï¼Œç¨‹åºå•æ­¥æ‰§è¡Œï¼Œè®©ç¨‹åºä¸€è¡Œä¸€è¡Œçš„æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè§‚å¯Ÿwatchä¸­å˜é‡çš„å€¼çš„å˜åŒ–ã€‚</span><br></pre></td></tr></table></figure><p><strong>æ ‡è¯†ç¬¦å‘½åè§„èŒƒ</strong></p><ul><li><strong>å˜é‡ã€å‡½æ•°çš„å‘½åå¿…é¡»è¦æœ‰æ„ä¹‰</strong></li><li><strong>å˜é‡çš„åç§°ä¸€èˆ¬ç”¨åè¯</strong></li><li><strong>å‡½æ•°çš„åç§°ä¸€èˆ¬ç”¨åŠ¨è¯</strong></li></ul><h2 id="9-æ•°ç»„"><a href="#9-æ•°ç»„" class="headerlink" title="9. æ•°ç»„"></a>9. æ•°ç»„</h2><p><strong>JS ä¸­åˆ›å»ºæ•°ç»„æœ‰ä¸¤ç§æ–¹å¼ï¼š</strong></p><ul><li><p><strong>åˆ©ç”¨  new åˆ›å»ºæ•°ç»„</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> æ•°ç»„å = <span class="keyword">new</span> <span class="title class_">Array</span>() ï¼›</span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(); Â  <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ Array () ï¼ŒA è¦å¤§å†™</strong></p></li><li><p><strong>åˆ©ç”¨æ•°ç»„å­—é¢é‡åˆ›å»ºæ•°ç»„</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. ä½¿ç”¨æ•°ç»„å­—é¢é‡æ–¹å¼åˆ›å»ºç©ºçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> Â æ•°ç»„å = []ï¼›</span><br><span class="line"><span class="comment">//2. ä½¿ç”¨æ•°ç»„å­—é¢é‡æ–¹å¼åˆ›å»ºå¸¦åˆå§‹å€¼çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> Â æ•°ç»„å = [<span class="string">&#x27;å°ç™½&#x27;</span>,<span class="string">&#x27;å°é»‘&#x27;</span>,<span class="string">&#x27;å¤§é»„&#x27;</span>,<span class="string">&#x27;ç‘å¥‡&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>**æ•°ç»„çš„å­—é¢é‡æ˜¯æ–¹æ‹¬å· [ ] **</li><li><strong>å£°æ˜æ•°ç»„å¹¶èµ‹å€¼ç§°ä¸ºæ•°ç»„çš„åˆå§‹åŒ–</strong></li><li><strong>è¿™ç§å­—é¢é‡æ–¹å¼ä¹Ÿæ˜¯æˆ‘ä»¬ä»¥åæœ€å¤šä½¿ç”¨çš„æ–¹å¼</strong></li></ul></li><li><p><strong>æ•°ç»„å…ƒç´ çš„ç±»å‹</strong><br><strong>æ•°ç»„ä¸­å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ç­‰ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arrStus = [<span class="string">&#x27;å°ç™½&#x27;</span>,<span class="number">12</span>,<span class="literal">true</span>,<span class="number">28.9</span>];</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> arrStus = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="comment">// è·å–æ•°ç»„ä¸­çš„ç¬¬2ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="title function_">alert</span>(arrStus[<span class="number">1</span>]); Â  Â </span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå¦‚æœè®¿é—®æ—¶æ•°ç»„æ²¡æœ‰å’Œç´¢å¼•å€¼å¯¹åº”çš„å…ƒç´ ï¼Œåˆ™å¾—åˆ°çš„å€¼æ˜¯undefined</strong></p><ul><li><p><strong>æ•°ç»„çš„é•¿åº¦</strong><br><strong>æ•°ç»„çš„é•¿åº¦ï¼šé»˜è®¤æƒ…å†µä¸‹è¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°</strong><br><strong>ä½¿ç”¨â€œæ•°ç»„å.lengthâ€å¯ä»¥è®¿é—®æ•°ç»„å…ƒç´ çš„æ•°é‡ï¼ˆæ•°ç»„é•¿åº¦ï¼‰ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arrStus = [1,2,3];</span><br><span class="line">alert(arrStus.length); Â // 3</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p></li><li><p><strong>æ­¤å¤„æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„å…ƒç´ çš„ä¸ªæ•° ï¼Œä¸è¦å’Œæ•°ç»„çš„ç´¢å¼•å·æ··æ·†ã€‚</strong></p></li><li><p><strong>å½“æˆ‘ä»¬æ•°ç»„é‡Œé¢çš„å…ƒç´ ä¸ªæ•°å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ª length å±æ€§è·Ÿç€ä¸€èµ·å˜åŒ–</strong></p></li><li><p><strong>æ•°ç»„çš„lengthå±æ€§å¯ä»¥è¢«ä¿®æ”¹ï¼š</strong></p></li><li><p><strong>å¦‚æœè®¾ç½®çš„lengthå±æ€§å€¼å¤§äºæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆ™ä¼šåœ¨æ•°ç»„æœ«å°¾å‡ºç°ç©ºç™½å…ƒç´ ï¼›</strong></p></li><li><p><strong>å¦‚æœè®¾ç½®çš„lengthå±æ€§å€¼å°äºæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œåˆ™ä¼šæŠŠè¶…è¿‡è¯¥å€¼çš„æ•°ç»„å…ƒç´ åˆ é™¤</strong></p></li></ul><h2 id="10-å‡½æ•°"><a href="#10-å‡½æ•°" class="headerlink" title="10. å‡½æ•°"></a>10. å‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å£°æ˜å‡½æ•°</span><br><span class="line">function å‡½æ•°å() &#123;</span><br><span class="line"> Â  Â //å‡½æ•°ä½“ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>function æ˜¯å£°æ˜å‡½æ•°çš„å…³é”®å­—,å¿…é¡»å°å†™</strong></p></li><li><p><strong>ç”±äºå‡½æ•°ä¸€èˆ¬æ˜¯ä¸ºäº†å®ç°æŸä¸ªåŠŸèƒ½æ‰å®šä¹‰çš„ï¼Œ æ‰€ä»¥é€šå¸¸æˆ‘ä»¬å°†å‡½æ•°åå‘½åä¸ºåŠ¨è¯ï¼Œæ¯”å¦‚ getSum</strong></p><h3 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è°ƒç”¨å‡½æ•°</span><br><span class="line">å‡½æ•°å(); Â // é€šè¿‡è°ƒç”¨å‡½æ•°åæ¥æ‰§è¡Œå‡½æ•°ä½“ä»£ç </span><br></pre></td></tr></table></figure><h3 id="argumentsçš„ä½¿ç”¨"><a href="#argumentsçš„ä½¿ç”¨" class="headerlink" title="argumentsçš„ä½¿ç”¨"></a>argumentsçš„ä½¿ç”¨</h3><p><strong>å½“ä¸ç¡®å®šæœ‰å¤šå°‘ä¸ªå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ arguments æ¥è·å–ã€‚JavaScript ä¸­ï¼Œargumentså®é™…ä¸Šå®ƒæ˜¯å½“å‰å‡½æ•°çš„ä¸€ä¸ªå†…ç½®å¯¹è±¡ã€‚æ‰€æœ‰å‡½æ•°éƒ½å†…ç½®äº†ä¸€ä¸ª arguments å¯¹è±¡ï¼Œarguments å¯¹è±¡ä¸­å­˜å‚¨äº†ä¼ é€’çš„æ‰€æœ‰å®å‚ã€‚argumentså±•ç¤ºå½¢å¼æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œéå†ã€‚ä¼ªæ•°ç»„å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</strong></p></li><li><p><strong>å…·æœ‰ length å±æ€§</strong></p></li><li><p><strong>æŒ‰ç´¢å¼•æ–¹å¼å‚¨å­˜æ•°æ®</strong></p></li><li><p><strong>ä¸å…·æœ‰æ•°ç»„çš„ push , pop ç­‰æ–¹æ³•</strong><br><strong>æ³¨æ„ï¼šåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œç”¨æ­¤å¯¹è±¡è·å–å‡½æ•°è°ƒç”¨æ—¶ä¼ çš„å®å‚ã€‚</strong></p></li></ul><h3 id="å‡½æ•°æ¡ˆä¾‹"><a href="#å‡½æ•°æ¡ˆä¾‹" class="headerlink" title="å‡½æ•°æ¡ˆä¾‹"></a>å‡½æ•°æ¡ˆä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨åŒä¸€ä½œç”¨åŸŸä»£ç ä¸­ï¼Œå‡½æ•°åå³ä»£è¡¨å°è£…çš„æ“ä½œï¼Œä½¿ç”¨å‡½æ•°ååŠ æ‹¬å·å³å¯ä»¥å°†å°è£…çš„æ“ä½œæ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼"><a href="#å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼" class="headerlink" title="å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼"></a>å‡½æ•°çš„ä¸¤ç§å£°æ˜æ–¹å¼</h3><ul><li><p><strong>è‡ªå®šä¹‰å‡½æ•°æ–¹å¼(å‘½åå‡½æ•°)</strong><br><strong>åˆ©ç”¨å‡½æ•°å…³é”®å­— function è‡ªå®šä¹‰å‡½æ•°æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å£°æ˜å®šä¹‰æ–¹å¼</span><br><span class="line">function fn() &#123;...&#125;</span><br><span class="line">// è°ƒç”¨ Â </span><br><span class="line">fn(); Â </span><br></pre></td></tr></table></figure><ul><li><strong>å› ä¸ºæœ‰åå­—ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºå‘½åå‡½æ•°</strong></li><li><strong>è°ƒç”¨å‡½æ•°çš„ä»£ç æ—¢å¯ä»¥æ”¾åˆ°å£°æ˜å‡½æ•°çš„å‰é¢ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å£°æ˜å‡½æ•°çš„åé¢</strong></li></ul></li><li><p><strong>å‡½æ•°è¡¨è¾¾å¼æ–¹å¼(åŒ¿åå‡½æ•°ï¼‰</strong><br>**åˆ©ç”¨å‡½æ•°è¡¨è¾¾å¼æ–¹å¼çš„å†™æ³•å¦‚ä¸‹ï¼š **</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è¿™æ˜¯å‡½æ•°è¡¨è¾¾å¼å†™æ³•ï¼ŒåŒ¿åå‡½æ•°åé¢è·Ÿåˆ†å·ç»“æŸ</span><br><span class="line">var fn = function()&#123;...&#125;ï¼›</span><br><span class="line">// è°ƒç”¨çš„æ–¹å¼ï¼Œå‡½æ•°è°ƒç”¨å¿…é¡»å†™åˆ°å‡½æ•°ä½“ä¸‹é¢</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure><ul><li><strong>å› ä¸ºå‡½æ•°æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºåŒ¿åå‡½æ•°</strong></li><li>**è¿™ä¸ªfn é‡Œé¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå‡½æ•°  **</li><li><strong>å‡½æ•°è¡¨è¾¾å¼æ–¹å¼åŸç†è·Ÿå£°æ˜å˜é‡æ–¹å¼æ˜¯ä¸€è‡´çš„</strong></li><li><strong>å‡½æ•°è°ƒç”¨çš„ä»£ç å¿…é¡»å†™åˆ°å‡½æ•°ä½“åé¢</strong></li></ul></li></ul><h2 id="10-ä½œç”¨åŸŸ"><a href="#10-ä½œç”¨åŸŸ" class="headerlink" title="10 - ä½œç”¨åŸŸ"></a>10 - ä½œç”¨åŸŸ</h2><h3 id="1-1-ä½œç”¨åŸŸæ¦‚è¿°"><a href="#1-1-ä½œç”¨åŸŸæ¦‚è¿°" class="headerlink" title="1.1 ä½œç”¨åŸŸæ¦‚è¿°"></a>1.1 ä½œç”¨åŸŸæ¦‚è¿°</h3><p><strong>é€šå¸¸æ¥è¯´ï¼Œä¸€æ®µç¨‹åºä»£ç ä¸­æ‰€ç”¨åˆ°çš„åå­—å¹¶ä¸æ€»æ˜¯æœ‰æ•ˆå’Œå¯ç”¨çš„ï¼Œè€Œé™å®šè¿™ä¸ªåå­—çš„å¯ç”¨æ€§çš„ä»£ç èŒƒå›´å°±æ˜¯è¿™ä¸ªåå­—çš„ä½œç”¨åŸŸã€‚ä½œç”¨åŸŸçš„ä½¿ç”¨æé«˜äº†ç¨‹åºé€»è¾‘çš„å±€éƒ¨æ€§ï¼Œå¢å¼ºäº†ç¨‹åºçš„å¯é æ€§ï¼Œå‡å°‘äº†åå­—å†²çªã€‚</strong></p><p><strong>JavaScriptï¼ˆes6å‰ï¼‰ä¸­çš„ä½œç”¨åŸŸæœ‰ä¸¤ç§ï¼š</strong></p><ul><li><strong>å…¨å±€ä½œç”¨åŸŸ</strong></li><li><strong>å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</strong></li></ul><h3 id="1-2-å…¨å±€ä½œç”¨åŸŸ"><a href="#1-2-å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="1.2 å…¨å±€ä½œç”¨åŸŸ"></a>1.2 å…¨å±€ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨äºæ‰€æœ‰ä»£ç æ‰§è¡Œçš„ç¯å¢ƒ(æ•´ä¸ªscriptæ ‡ç­¾å†…éƒ¨)æˆ–ç‹¬ç«‹çš„jsæ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><h3 id="1-3-å±€éƒ¨ä½œç”¨åŸŸ"><a href="#1-3-å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="1.3 å±€éƒ¨ä½œç”¨åŸŸ"></a>1.3 å±€éƒ¨ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨äºå‡½æ•°å†…çš„ä»£ç ç¯å¢ƒï¼Œå°±æ˜¯å±€éƒ¨ä½œç”¨åŸŸã€‚ </span><br><span class="line">å› ä¸ºè·Ÿå‡½æ•°æœ‰å…³ç³»ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸã€‚</span><br></pre></td></tr></table></figure><h3 id="1-4-jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ"><a href="#1-4-jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ" class="headerlink" title="1.4 jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ"></a>1.4 jSæ²¡æœ‰å—çº§ä½œç”¨åŸŸ</h3><ul><li><strong>å—ä½œç”¨åŸŸç”± { } åŒ…æ‹¬ã€‚</strong></li><li><strong>åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼ˆå¦‚ javaã€c#ç­‰ï¼‰ï¼Œåœ¨ if è¯­å¥ã€å¾ªç¯è¯­å¥ä¸­åˆ›å»ºçš„å˜é‡ï¼Œä»…ä»…åªèƒ½åœ¨æœ¬ if è¯­å¥ã€æœ¬å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ï¼›</strong><br><strong>jsä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼ˆåœ¨ES6ä¹‹å‰ï¼‰</strong><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if(true)&#123;</span><br><span class="line"> Â var num = 123;</span><br><span class="line"> Â //console.log(num); //123</span><br><span class="line">&#125;</span><br><span class="line">console.log(num); Â  //123</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5-å˜é‡çš„ä½œç”¨åŸŸ"><a href="#1-5-å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="1.5 å˜é‡çš„ä½œç”¨åŸŸ"></a>1.5 å˜é‡çš„ä½œç”¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨JavaScriptä¸­ï¼Œæ ¹æ®ä½œç”¨åŸŸçš„ä¸åŒï¼Œå˜é‡å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</span><br></pre></td></tr></table></figure><ul><li><strong>å…¨å±€å˜é‡</strong></li><li><strong>å±€éƒ¨å˜é‡</strong></li></ul><p><strong>2.1 å…¨å±€å˜é‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å«åšå…¨å±€å˜é‡ï¼ˆåœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼‰ã€‚</span><br></pre></td></tr></table></figure><ul><li><strong>å…¨å±€å˜é‡åœ¨ä»£ç çš„ä»»ä½•ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨</strong></li><li><strong>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ var å£°æ˜çš„å˜é‡ æ˜¯å…¨å±€å˜é‡</strong></li><li><strong>ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°å†…ä¸ä½¿ç”¨ var å£°æ˜çš„å˜é‡ä¹Ÿæ˜¯å…¨å±€å˜é‡ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</strong></li></ul><p><strong>2.2 å±€éƒ¨å˜é‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å«åšå±€éƒ¨å˜é‡ï¼ˆåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼‰</span><br></pre></td></tr></table></figure><ul><li><strong>å±€éƒ¨å˜é‡åªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨ä½¿ç”¨</strong></li><li><strong>åœ¨å‡½æ•°å†…éƒ¨ var å£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡</strong></li><li><strong>å‡½æ•°çš„å½¢å‚å®é™…ä¸Šå°±æ˜¯å±€éƒ¨å˜é‡</strong></li></ul><p><strong>2.3 å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</strong></p><ul><li><strong>å…¨å±€å˜é‡ï¼šåœ¨ä»»ä½•ä¸€ä¸ªåœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œåªæœ‰åœ¨æµè§ˆå™¨å…³é—­æ—¶æ‰ä¼šè¢«é”€æ¯ï¼Œå› æ­¤æ¯”è¾ƒå å†…å­˜</strong></li><li><strong>å±€éƒ¨å˜é‡ï¼šåªåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå½“å…¶æ‰€åœ¨çš„ä»£ç å—è¢«æ‰§è¡Œæ—¶ï¼Œä¼šè¢«åˆå§‹åŒ–ï¼›å½“ä»£ç å—è¿è¡Œç»“æŸåï¼Œå°±ä¼šè¢«é”€æ¯ï¼Œå› æ­¤æ›´èŠ‚çœå†…å­˜ç©ºé—´</strong></li></ul><h3 id="1-6-ä½œç”¨åŸŸé“¾"><a href="#1-6-ä½œç”¨åŸŸé“¾" class="headerlink" title="1.6 - ä½œç”¨åŸŸé“¾"></a>1.6 - ä½œç”¨åŸŸé“¾</h3><p><strong>åªè¦æ˜¯ä»£ç éƒ½ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œå†™åœ¨å‡½æ•°å†…éƒ¨çš„å±€éƒ¨ä½œç”¨åŸŸï¼Œæœªå†™åœ¨ä»»ä½•å‡½æ•°å†…éƒ¨å³åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼›å¦‚æœå‡½æ•°ä¸­è¿˜æœ‰å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­å°±åˆå¯ä»¥è¯ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼›æ ¹æ®åœ¨</strong>**[å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°å˜é‡]**çš„è¿™ç§æœºåˆ¶ï¼Œç”¨é“¾å¼æŸ¥æ‰¾å†³å®šå“ªäº›æ•°æ®èƒ½è¢«å†…éƒ¨å‡½æ•°è®¿é—®ï¼Œå°±ç§°ä½œä½œç”¨åŸŸé“¾ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ¡ˆä¾‹åˆ†æ1ï¼š</span><br><span class="line">function f1() &#123;</span><br><span class="line"> Â  Â var num = 123;</span><br><span class="line"> Â  Â function f2() &#123;</span><br><span class="line"> Â  Â  Â  Â console.log( num );//123</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â f2();</span><br><span class="line">&#125;</span><br><span class="line">var num = 456;</span><br><span class="line">f1();</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨åŸŸé“¾ï¼šé‡‡å–å°±è¿‘åŸåˆ™çš„æ–¹å¼æ¥æŸ¥æ‰¾å˜é‡æœ€ç»ˆçš„å€¼</span><br><span class="line">var a = 1;</span><br><span class="line">function fn1() &#123;</span><br><span class="line"> Â  Â var a = 2;</span><br><span class="line"> Â  Â var b = &#x27;22&#x27;;</span><br><span class="line"> Â  Â fn2();</span><br><span class="line"> Â  Â function fn2() &#123;</span><br><span class="line"> Â  Â  Â  Â var a = 3;</span><br><span class="line"> Â  Â  Â  Â fn3();</span><br><span class="line"> Â  Â  Â  Â function fn3() &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â var a = 4;</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(a); //açš„å€¼ 4</span><br><span class="line"> Â  Â  Â  Â  Â  Â console.log(b); //bçš„å€¼ 22</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br></pre></td></tr></table></figure><p><img src="file://F:/20-%E6%B1%82%E8%81%8C/02-%E5%89%8D%E7%AB%AF/images/js/%E5%9B%BE%E7%89%872-16779152458061.png?lastModify=1710638944"></p><h3 id="1-7-é¢„è§£æ"><a href="#1-7-é¢„è§£æ" class="headerlink" title="1.7 - é¢„è§£æ"></a>1.7 - é¢„è§£æ</h3><p><strong>JavaScript ä»£ç æ˜¯ç”±æµè§ˆå™¨ä¸­çš„ JavaScript è§£æå™¨æ¥æ‰§è¡Œçš„ã€‚</strong></p><p><strong>JavaScript è§£æå™¨åœ¨è¿è¡Œ JavaScript ä»£ç çš„æ—¶å€™åˆ†ä¸ºä¸¤æ­¥ï¼š</strong></p><p><strong>é¢„è§£æå’Œä»£ç æ‰§è¡Œã€‚</strong></p><ul><li><strong>é¢„è§£æï¼šåœ¨å½“å‰ä½œç”¨åŸŸä¸‹, JS ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤æŠŠå¸¦æœ‰ var å’Œ function å£°æ˜çš„å˜é‡åœ¨å†…å­˜ä¸­è¿›è¡Œæå‰å£°æ˜æˆ–è€…å®šä¹‰</strong>ï¼Œé¢„è§£æä¹Ÿå«åšå˜é‡ã€å‡½æ•°æå‡ã€‚</li><li><strong>ä»£ç æ‰§è¡Œï¼š ä»ä¸Šåˆ°ä¸‹æ‰§è¡ŒJSè¯­å¥ã€‚</strong><br><strong>æ³¨æ„ï¼š****é¢„è§£æä¼šæŠŠå˜é‡å’Œå‡½æ•°çš„å£°æ˜åœ¨ä»£ç æ‰§è¡Œä¹‹å‰æ‰§è¡Œå®Œæˆã€‚</strong></li></ul><p><strong>å˜é‡é¢„è§£æï¼š</strong></p><p><strong>å˜é‡çš„å£°æ˜ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€ä¸Šé¢ï¼Œå˜é‡çš„èµ‹å€¼ä¸ä¼šæå‡ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(num); Â // undefined</span><br><span class="line">var num = 10;</span><br><span class="line">//æ³¨æ„ï¼šå˜é‡æå‡åªæå‡å£°æ˜ï¼Œä¸æå‡èµ‹å€¼</span><br></pre></td></tr></table></figure><p><strong>å‡½æ•°é¢„è§£æï¼š</strong></p><p><strong>å‡½æ•°çš„å£°æ˜ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€ä¸Šé¢ï¼Œä½†æ˜¯ä¸ä¼šè°ƒç”¨å‡½æ•°ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn();</span><br><span class="line">function fn() &#123;</span><br><span class="line"> Â  Â console.log(&#x27;æ‰“å°&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼šæ§åˆ¶å°æ‰“å°å­—ç¬¦ä¸² â€” â€æ‰“å°â€œ</strong></p><p><strong>æ³¨æ„ï¼šå‡½æ•°å£°æ˜ä»£è¡¨å‡½æ•°æ•´ä½“ï¼Œæ‰€ä»¥å‡½æ•°æå‡åï¼Œå‡½æ•°åä»£è¡¨æ•´ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å‡½æ•°å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼</strong></p><p><strong>å‡½æ•°è¡¨è¾¾å¼å£°æ˜å‡½æ•°é—®é¢˜ï¼š</strong></p><p><strong>å‡½æ•°è¡¨è¾¾å¼åˆ›å»ºå‡½æ•°ï¼Œä¼šæ‰§è¡Œå˜é‡æå‡</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn();</span><br><span class="line">var Â fn = function() &#123;</span><br><span class="line"> Â  Â console.log(&#x27;æƒ³ä¸åˆ°å§&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼šæŠ¥é”™æç¤º â€fn is not a functionâ€</strong></p><blockquote><p><strong>è§£é‡Šï¼šè¯¥æ®µä»£ç æ‰§è¡Œä¹‹å‰ï¼Œä¼šåšå˜é‡å£°æ˜æå‡ï¼Œfnåœ¨æå‡ä¹‹åçš„å€¼æ˜¯undefinedï¼›è€Œfnè°ƒç”¨æ˜¯åœ¨fnè¢«èµ‹å€¼ä¸ºå‡½æ•°ä½“ä¹‹å‰ï¼Œæ­¤æ—¶fnçš„å€¼æ˜¯undefinedï¼Œæ‰€ä»¥æ— æ³•æ­£ç¡®è°ƒç”¨</strong></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JSåŸºç¡€&quot;&gt;&lt;a href=&quot;#JSåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;JSåŸºç¡€&quot;&gt;&lt;/a&gt;JSåŸºç¡€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ•´ç†è‡ªé»‘é©¬Pinkå‰ç«¯çš„è¯¾ç¨‹èµ„æ–™ï¼›&lt;br&gt;ç®—æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ï¼›&lt;br&gt;åç»­æœ‰æ—¶é—´çš„è¯ï¼Œå†çœ‹çœ‹ä¹¦ï¼Œå¤šäº†è§£</summary>
      
    
    
    
    <category term="å¤§å‰ç«¯" scheme="https://youxt-njnu.github.io/categories/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JS" scheme="https://youxt-njnu.github.io/tags/JS/"/>
    
    <category term="åŸºç¡€çŸ¥è¯†" scheme="https://youxt-njnu.github.io/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
</feed>
