<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mapbox SDK for Unity | 官方案例Ⅰ | Pale Bule Dot</title><meta name="author" content="Shealin You"><meta name="copyright" content="Shealin You"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="City simulator主要是对基础场景的搭建，也包括了基础数据的一些图层的设置； 在瓦片地图之上，也可以进一步加载建筑数据、POI数据、路网数据、实时交通数据； location-based game里面涉及到了Player；Data explorer的demo是对其的补充和优化；Zoomable map的demo实现了基于底图的地点的搜索和缩放； city simulator&#x2F;l">
<meta property="og:type" content="article">
<meta property="og:title" content="Mapbox SDK for Unity | 官方案例Ⅰ">
<meta property="og:url" content="https://youxt-njnu.github.io/2024/02/12/MapboxSDKforUnity/index.html">
<meta property="og:site_name" content="Pale Bule Dot">
<meta property="og:description" content="City simulator主要是对基础场景的搭建，也包括了基础数据的一些图层的设置； 在瓦片地图之上，也可以进一步加载建筑数据、POI数据、路网数据、实时交通数据； location-based game里面涉及到了Player；Data explorer的demo是对其的补充和优化；Zoomable map的demo实现了基于底图的地点的搜索和缩放； city simulator&#x2F;l">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wallroom.io/img/2880x1800/bg-983381f.jpg">
<meta property="article:published_time" content="2024-02-12T12:39:16.000Z">
<meta property="article:modified_time" content="2024-02-12T12:47:36.596Z">
<meta property="article:author" content="Shealin You">
<meta property="article:tag" content="Unity">
<meta property="article:tag" content="mapbox">
<meta property="article:tag" content="开源">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wallroom.io/img/2880x1800/bg-983381f.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://youxt-njnu.github.io/2024/02/12/MapboxSDKforUnity/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mapbox SDK for Unity | 官方案例Ⅰ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-12 20:47:36'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Pale Bule Dot" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/tit.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="https://youxt-njnu.github.io/about_portfolio"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://wallroom.io/img/2880x1800/bg-983381f.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Pale Bule Dot"><img class="site-icon" src="https://cdn.jsdelivr.net/gh/youxt-njnu/blog-img/favicon.png"/><span class="site-name">Pale Bule Dot</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="https://youxt-njnu.github.io/about_portfolio"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Mapbox SDK for Unity | 官方案例Ⅰ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-12T12:39:16.000Z" title="发表于 2024-02-12 20:39:16">2024-02-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-12T12:47:36.596Z" title="更新于 2024-02-12 20:47:36">2024-02-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AR%E5%BC%80%E5%8F%91/">AR开发</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Mapbox SDK for Unity | 官方案例Ⅰ"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="City-simulator"><a href="#City-simulator" class="headerlink" title="City simulator"></a>City simulator</h1><p>主要是对基础场景的搭建，也包括了基础数据的一些图层的设置；</p>
<p>在瓦片地图之上，也可以进一步加载建筑数据、POI数据、路网数据、实时交通数据；</p>
<p><em>location-based game</em>里面涉及到了Player；<br><em>Data explorer</em>的demo是对其的补充和优化；<br><em>Zoomable map</em>的demo实现了基于底图的地点的搜索和缩放；</p>
<h2 id="city-simulator-x2F-location-based-game"><a href="#city-simulator-x2F-location-based-game" class="headerlink" title="city simulator&#x2F;location-based game"></a>city simulator&#x2F;location-based game</h2><p>界面</p>
<ul>
<li>Camera：Position，侧俯视地面</li>
<li>Light：Position，这两个部分都需要好好学习一下</li>
<li>叠加的数据源来自于MAP LAYERS里的Data Source，可以自定义</li>
</ul>
<p>脚本</p>
<ul>
<li>InitializeMapWithLocationProvider</li>
<li>ImmediatePositionWithLocationProvider<br>初始化mapbox的底图、player的位置、</li>
</ul>
<blockquote>
<p>在EditorLocationArrayProvider中定义物体的初始位置，也就是第一个点；<br>但无法实现绕着路走</p>
</blockquote>
<h2 id="Data-explorer"><a href="#Data-explorer" class="headerlink" title="Data explorer"></a>Data explorer</h2><p><strong>界面</strong></p>
<ul>
<li>为什么要叠加两个摄像机，以及Camera的设置</li>
<li>光照的location改变没啥影响？？？？</li>
</ul>
<p><strong>modifier</strong></p>
<p>modifier都继承自ScriptableObjects</p>
<p>GameObject Modifiers：</p>
<blockquote>
<p>Game object modifiers ran after the mesh modifiers and game object creation.Their main purpose is to work on game object and decorate&#x2F;improve them in their own ways.They ran for each game object individually.<br>It’s possible to do lots of different things with GameObject Modifiers.A simple example would be <strong>MaterialModifier, which simply sets random materials to gameobject and submeshes</strong>.A more complicated example would be <strong>SpawnInside Modifier which instantiates prefabs in a polygon, like trees in a park</strong>.<br>Any operation, you want to perform on generated entity, that would <strong>require a game object is a good candidate for game object modifiers</strong>. For example, things like adding a collider or animation would require a gameobject hence cannot be done in mesh modifier .<br>Game object modifiers is the suggested way of <strong>customizing generated game object</strong> and we expect developers to fully utilize this by creating their own custom game object modifiers.</p>
</blockquote>
<blockquote>
<p>Behavior modifiers are <a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/class-ScriptableObject.html"><code>ScriptableObjects</code></a> that work with meshes and game objects to further allow you to decorate, enhance, or make modifications to your game objects.</p>
</blockquote>
<p>一个相关的问题：<a target="_blank" rel="noopener" href="https://www.appsloveworld.com/gamedev/100/how-to-find-intersections-using-mapbox-unity-sdk?expand_article=1">https://www.appsloveworld.com/gamedev/100/how-to-find-intersections-using-mapbox-unity-sdk?expand_article=1</a><br>一个视频教程：<a target="_blank" rel="noopener" href="https://youtu.be/cy49zMBZvhg?si=IDRboEIbW-wRPmjY">https://youtu.be/cy49zMBZvhg?si=IDRboEIbW-wRPmjY</a><br>一个挺好的文字版教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_46044366/article/details/124310241">Unity进阶：ScriptableObject使用指南-CSDN博客</a></p>
<p><strong>CreateAssetMenu</strong></p>
<blockquote>
<p>类上面添加一行<br>[CreateAssetMenu(fileName &#x3D; “Bullet”, menuName &#x3D; “New Bullet”, order &#x3D; 1)]<br>作用在 Assets 文件夹下，鼠标右键，菜单栏中添加一个按钮项，菜单名为 menuName，并执行生成名为 fileName 的脚本，order 为按钮显示顺序<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/lizhenxiqnmlgb/article/details/95603822">https://blog.csdn.net/lizhenxiqnmlgb/article/details/95603822</a></p>
</blockquote>
<p><strong>map layers</strong></p>
<p>mapbox.3d-buildings,mapbox.mapbox-streets-v7,mapbox.mapbox-traffic-v1,mapbox.mapbox-terrain-v2<br>地址：<a target="_blank" rel="noopener" href="https://studio.mapbox.com/tilesets/">https://studio.mapbox.com/tilesets/</a><br>涉及图层：</p>
<blockquote>
<p>v7的已经找不着了，现在是v8的；<br>其他的也有更新，然后可以在mabox studio的tileset里，或者是mapbox预设的style里找到；但第一个3d_buildings感觉是mapbox官方账号自己定义的一个Tileset<br>下面的是以POI Label为例，v8里面的filterrank为1的显示为紫色的label<br><img src="https://s2.loli.net/2023/10/09/mNjZlvcTKGfg5Ww.png"><br>POI Label里还有一个prefab modifier，是scriptableobject的自定义子类，实现对label的批量设置；通过编写PrefabModifier，然后里面有三个变量。构建这个的实例是通过右键菜单里找自己定义的路径来实现的<br><img src="https://s2.loli.net/2023/10/09/1ITDPpornREuX35.png" alt="202310091154803.png"><br>PrefabModifier实现了对Prefab的初始化到清除的生命流程；<br>LabelPrefab里面<br><img src="https://s2.loli.net/2023/10/11/ByH5LGlu1TkzeFd.png"></p>
</blockquote>
<p><strong>Pois</strong><br><img src="https://s2.loli.net/2023/10/11/npbivGUcyPQXJqo.png" alt="img"><br>PoiDemo3dPoiModifier(Prefab Modifier): 还是继承自Prefab Modifier，里面的Prefab是下面这样的：<br><img src="https://s2.loli.net/2023/10/11/pm4WBKrvJ2RMoLu.png"><br>FeatureBehaviourModifier(Feature Behaviour Modifier): 继承自Feature Behaviour Modifier<br><img src="https://s2.loli.net/2023/10/11/6depCAaUzYlI3Qo.png"></p>
<p><strong>主要功能体现</strong></p>
<p><img src="https://s2.loli.net/2023/10/13/XtVmPIbZWaQh8rS.png"></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/102057291">UGUI（三）- Graphic Raycaster - 知乎 (zhihu.com)</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/xinzhilinger/article/details/111186083">Unity 几种排版方式：Layout Group_unity layout group-CSDN博客</a><br><img src="https://s2.loli.net/2023/10/15/PlW6df23cHAbBhv.png"></p>
<h3 id="实现脚本"><a href="#实现脚本" class="headerlink" title="实现脚本"></a>实现脚本</h3><p><strong>ReloadMap.cs</strong></p>
<ol>
<li>Awake的时候，暂存相机起始位置，将当前地图更新到给定的缩放值，如果slider值发生了变化则reload地图</li>
<li>如果查询了地址，则进入函数，函数能让地图在缩放比例下，并以查询到的经纬度为地图的中心</li>
<li></li>
</ol>
<p>❗不知道HeroBuildingSelectionUserInput这个写在里面的作用<br>这个后面有案例涉及到的时候再看，还有一个就是点击出现对应名称的实现没看到❗</p>
<p><strong>ForwardGeocodeUserInput.cs</strong></p>
<ol>
<li>保证输入框有Input Field的属性</li>
<li>Awake的时候获取到输入框，并对输入框的更改完成状态添加监听器</li>
<li>初始化用于查询的“源”</li>
<li>mapbox的Geocoder api，根据输入框的内容进行地理编码</li>
<li>如果没查到，输入框的内容就是”没有编码响应“</li>
<li>如果查到了，则获取到坐标、响应、OnGeocoderResponse</li>
</ol>
<p>涉及到的知识点：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/huoyixian/article/details/90386326">【Unity小知识】RequireComponent-CSDN博客</a></p>
<h3 id="POI的逻辑"><a href="#POI的逻辑" class="headerlink" title="POI的逻辑"></a>POI的逻辑</h3><p>在POI结构里的两个脚本</p>
<ul>
<li><p>PoiMarkerHelper.cs</p>
<blockquote>
<p>实现对poi信息点击后，打印出来</p>
</blockquote>
</li>
<li><p>FeatureBehaviour.cs</p>
</li>
</ul>
<blockquote>
<p>初始化参数；<br>创建primitive下的物体，设置名称、位置、父物体、位置<br>展现DebugData信息</p>
</blockquote>
<p>在POI数据里的两个modifier</p>
<ul>
<li>PrefabModifier.cs</li>
</ul>
<blockquote>
<p>创建右键菜单<br>构建POI的组织结构<br>设置位置<br>设置清除的方式</p>
</blockquote>
<ul>
<li>FeatureBehaviourModifier.cs</li>
</ul>
<blockquote>
<p>给poi挂载FeatureBehaviour的component</p>
</blockquote>
<h2 id="InteractiveStyledVectorMap"><a href="#InteractiveStyledVectorMap" class="headerlink" title="InteractiveStyledVectorMap"></a>InteractiveStyledVectorMap</h2><p><code>&lt;b&gt;</code>Styling Based on Vector Tile Data <code>&lt;/b&gt;</code><br>可以和特定的建筑物进行交互，展示他们对应的属性信息；<br>差异化对建筑物进行渲染贴图；<br>This is a vector tile map where you can interact with individual buildings to show their associated information (contained in the vector tile).<br>This example also shows how to procedurally decorate land use and how to render building types differently based on their classification.</p>
<h3 id="LoadingScreenCanvas"><a href="#LoadingScreenCanvas" class="headerlink" title="LoadingScreenCanvas"></a>LoadingScreenCanvas</h3><p>实现加载界面字颜色的变换</p>
<h3 id="Map设计❗"><a href="#Map设计❗" class="headerlink" title="Map设计❗"></a>Map设计❗</h3><p>（表示代码和细节还没看，现在看的只是逻辑和实现；<br>后面所有的案例就都是这样的）<br><img src="https://s2.loli.net/2024/02/12/7X85hElzSJi1ks6.png"></p>
<p>modifiers:</p>
<ul>
<li>ObjectInspector(Object Inspector Modifier)</li>
<li>HighLightModifier(Add Behaviours Modifier)</li>
<li>AddToTreeCollectionModifier(Add To Collection Modifier)</li>
<li>ParkLayerModifier(Layer Modifier)</li>
<li>SpawnInParkModifier(Spawn Inside Modifier)</li>
<li>DisableMeshRendererModifier(Disable Mesh Renderer Modifier)</li>
</ul>
<p>gameobject上的结构：</p>
<ul>
<li>RangeTileProvider.cs</li>
<li>HighlightFeature.cs</li>
<li>FeatureSelectionDetector.cs</li>
<li>FeatureUiMarkder.cs</li>
</ul>
<h3 id="InteractiveSelectionCanvas❗"><a href="#InteractiveSelectionCanvas❗" class="headerlink" title="InteractiveSelectionCanvas❗"></a>InteractiveSelectionCanvas❗</h3><p>实现点击对应物体，呈现出对应的信息<br>这个主要是在Map里的InteractiveSelectionCanvas里实现的</p>
<h2 id="TrafficAndDirections"><a href="#TrafficAndDirections" class="headerlink" title="TrafficAndDirections"></a>TrafficAndDirections</h2><p><code>&lt;b&gt;</code>Traffic and Directions <code>&lt;/b&gt;</code><br>通过交通矢量数据图层，提供交通信息。<br>通过简单的三维几何对交通进行了可视化；<br>给出了两个点，可以任意移动两个点，采用Direction API会返回两点之间的最短距离。<br>Mapbox provides traffic information through the traffic vector layer. In this example you can see an additional traffic map id added to Abstract Map under Map Layers segment. It’s then visualized by a simple 3D geometry. The Directions API returns the shortest route between two points. You can drag &amp; drop the two markers to update the route in this example. The Directions API call can also be used for walking directions.</p>
<h3 id="Map设计-地图"><a href="#Map设计-地图" class="headerlink" title="Map设计(地图)"></a>Map设计(地图)</h3><p>Modifiers:</p>
<ul>
<li>TrafficLoft(Loft Modifier)</li>
<li>LowTrafficMaterial(Material Modifier)</li>
<li>ModerateTrafficMateral(Material Modifier)</li>
<li>HeavyTrafficMaterial(Material Modifier)</li>
<li>Severe Traffic Material(Material Modifier)</li>
</ul>
<h3 id="TrafficUvAnimator-速度"><a href="#TrafficUvAnimator-速度" class="headerlink" title="TrafficUvAnimator(速度)"></a>TrafficUvAnimator(速度)</h3><p>控制交通流的速度</p>
<h3 id="Directions-点"><a href="#Directions-点" class="headerlink" title="Directions(点)"></a>Directions(点)</h3><p>有两个点<br>DirectionsFactory.cs<br>DragableDirectionWaypoint.cs</p>
<p>direction waypoint entity(最短路线)</p>
<p>在运行时动态生成，</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://youxt-njnu.github.io">Shealin You</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://youxt-njnu.github.io/2024/02/12/MapboxSDKforUnity/">https://youxt-njnu.github.io/2024/02/12/MapboxSDKforUnity/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://youxt-njnu.github.io" target="_blank">Pale Bule Dot</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Unity/">Unity</a><a class="post-meta__tags" href="/tags/mapbox/">mapbox</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E6%BA%90/">开源</a></div><div class="post_share"><div class="social-share" data-image="https://wallroom.io/img/2880x1800/bg-983381f.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s2.loli.net/2023/08/28/71kgQ3BTsGVqFwW.jpg" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2023/08/28/71kgQ3BTsGVqFwW.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2023/08/28/3EHiwCLGzZtmN7T.jpg" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2023/08/28/3EHiwCLGzZtmN7T.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/12/MSU2/" title="Mapbox SDK for Unity | 官方案例Ⅱ"><img class="cover" src="https://wallroom.io/img/2880x1800/bg-983381f.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mapbox SDK for Unity | 官方案例Ⅱ</div></div></a></div><div class="next-post pull-right"><a href="/2024/02/08/%E4%BA%86%E8%A7%A3%E5%9B%BE%E5%BD%A2%E5%AD%A63/" title="初探即退之图形学Ⅲ|Games101"><img class="cover" src="https://wallroom.io/img/2880x1620/bg-ccf1116.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">初探即退之图形学Ⅲ|Games101</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/02/12/MSU2/" title="Mapbox SDK for Unity | 官方案例Ⅱ"><img class="cover" src="https://wallroom.io/img/2880x1800/bg-983381f.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-12</div><div class="title">Mapbox SDK for Unity | 官方案例Ⅱ</div></div></a></div><div><a href="/2023/05/03/mapbox%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B/" title="mapbox的二三事"><img class="cover" src="https://wallroom.io/img/2880x1800/bg-983381f.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-03</div><div class="title">mapbox的二三事</div></div></a></div><div><a href="/2024/02/17/DOTween%E5%85%A5%E9%97%A8/" title="DOTween学习"><img class="cover" src="https://wallroom.io/img/1920x1080/bg-f1b246b.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-17</div><div class="title">DOTween学习</div></div></a></div><div><a href="/2023/09/11/%E5%9F%BA%E4%BA%8E%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%9C%BA%E6%99%AF%E5%88%87%E6%8D%A2-mapbox-unity/" title="基于位置的场景切换:mapbox+unity"><img class="cover" src="https://wallroom.io/img/3840x2160/bg-4101f05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-11</div><div class="title">基于位置的场景切换:mapbox+unity</div></div></a></div><div><a href="/2023/05/03/OSM%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B/" title="OSM的二三事"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-03</div><div class="title">OSM的二三事</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/tit.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Shealin You</div><div class="author-info__description">Be brave, and know yourself</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/youxt-njnu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:10190208@njnu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.zhihu.com/people/paleYYY" target="_blank" title="zhihu"><i class="fa-brands fa-zhihu" style="color: #24292e;"></i></a><a class="social-icon" href="https://dclef.icu/atom.xml" target="_blank" title=""><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">人生苦旅，踽踽独行之</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#City-simulator"><span class="toc-number">1.</span> <span class="toc-text">City simulator</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#city-simulator-x2F-location-based-game"><span class="toc-number">1.1.</span> <span class="toc-text">city simulator&#x2F;location-based game</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-explorer"><span class="toc-number">1.2.</span> <span class="toc-text">Data explorer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.1.</span> <span class="toc-text">实现脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POI%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-number">1.2.2.</span> <span class="toc-text">POI的逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#InteractiveStyledVectorMap"><span class="toc-number">1.3.</span> <span class="toc-text">InteractiveStyledVectorMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LoadingScreenCanvas"><span class="toc-number">1.3.1.</span> <span class="toc-text">LoadingScreenCanvas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map%E8%AE%BE%E8%AE%A1%E2%9D%97"><span class="toc-number">1.3.2.</span> <span class="toc-text">Map设计❗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InteractiveSelectionCanvas%E2%9D%97"><span class="toc-number">1.3.3.</span> <span class="toc-text">InteractiveSelectionCanvas❗</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TrafficAndDirections"><span class="toc-number">1.4.</span> <span class="toc-text">TrafficAndDirections</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map%E8%AE%BE%E8%AE%A1-%E5%9C%B0%E5%9B%BE"><span class="toc-number">1.4.1.</span> <span class="toc-text">Map设计(地图)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TrafficUvAnimator-%E9%80%9F%E5%BA%A6"><span class="toc-number">1.4.2.</span> <span class="toc-text">TrafficUvAnimator(速度)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Directions-%E7%82%B9"><span class="toc-number">1.4.3.</span> <span class="toc-text">Directions(点)</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/" title="three+react|加自己模型"><img src="https://wallroom.io/img/3840x2160/bg-81f2d39.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="three+react|加自己模型"/></a><div class="content"><a class="title" href="/2024/09/02/three-%E5%8A%A0%E8%87%AA%E5%B7%B1%E6%A8%A1%E5%9E%8B/" title="three+react|加自己模型">three+react|加自己模型</a><time datetime="2024-09-02T12:37:05.000Z" title="发表于 2024-09-02 20:37:05">2024-09-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/" title="shader-学习记录Ⅳ"><img src="https://wallroom.io/img/5120x2880/bg-d896c9d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shader-学习记录Ⅳ"/></a><div class="content"><a class="title" href="/2024/08/28/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%954/" title="shader-学习记录Ⅳ">shader-学习记录Ⅳ</a><time datetime="2024-08-28T07:55:26.000Z" title="发表于 2024-08-28 15:55:26">2024-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/" title="three案例实操|赛博风大屏Ⅰ"><img src="https://wallroom.io/img/3840x2160/bg-81f2d39.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="three案例实操|赛博风大屏Ⅰ"/></a><div class="content"><a class="title" href="/2024/08/28/three-%E8%B5%9B%E5%8D%9A%E9%A3%8E%E5%A4%A7%E5%B1%8F%E8%AE%B0%E5%BD%951/" title="three案例实操|赛博风大屏Ⅰ">three案例实操|赛博风大屏Ⅰ</a><time datetime="2024-08-28T03:12:05.000Z" title="发表于 2024-08-28 11:12:05">2024-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/" title="shader-学习记录Ⅲ"><img src="https://wallroom.io/img/5120x2880/bg-d896c9d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shader-学习记录Ⅲ"/></a><div class="content"><a class="title" href="/2024/08/23/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%953/" title="shader-学习记录Ⅲ">shader-学习记录Ⅲ</a><time datetime="2024-08-23T06:33:26.000Z" title="发表于 2024-08-23 14:33:26">2024-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/" title="shader-学习记录Ⅱ"><img src="https://wallroom.io/img/5120x2880/bg-d896c9d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shader-学习记录Ⅱ"/></a><div class="content"><a class="title" href="/2024/08/19/shader-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%952/" title="shader-学习记录Ⅱ">shader-学习记录Ⅱ</a><time datetime="2024-08-19T03:55:26.000Z" title="发表于 2024-08-19 11:55:26">2024-08-19</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/index_img.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By Shealin You</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Training the faculty of mindfulness is like breathing oxygen continuously to remain alive.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'StmwBdb4aXO6LMYWRxjVnufr-gzGzoHsz',
      appKey: 'V7WavrdJsNE6xxx5YGiygidl',
      avatar: 'monsterid',
      serverURLs: 'https://stmwbdb4.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><div class="aplayer no-destroy" data-id="000EDNt20L3sUT" data-server="tencent" data-type="song" data-fixed="true" data-autoplay="true" data-lrcType="-1"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>